(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){e.exports={feeMagicBtn:"styles_feeMagicBtn__3R6H-",utxoTxid:"styles_utxoTxid__1oJ63",outputsFormInput:"styles_outputsFormInput__2eCJm",unconfirmed:"styles_unconfirmed__1u5jD",spent:"styles_spent__1ho2q"}},248:function(e,t,a){},377:function(e){e.exports={a:"0.1.5"}},392:function(e,t,a){e.exports=a(761)},581:function(e,t){},584:function(e,t){},604:function(e,t){},606:function(e,t){},759:function(e,t,a){e.exports=a.p+"static/media/logo.66481e66.png"},761:function(e,t,a){"use strict";a.r(t);a(393);var n=a(0),r=a.n(n),o=a(29),l=a.n(o),i=a(88),c=a(16),s=a(363),u=a.n(s),d=a(364),p=a.n(d),m=a(365),h=a(860),E=a(869),b=a(870),f=a(8),v=a(19),g=a.n(v);function P(e,t){return r.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)}function y(e,t){var a=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,t);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function I(e,t){for(var a=[],n=new g.a(0),r=function(r){var o=e[r];if(o.utxos.forEach(function(e){a.push(Object(f.a)({},e,{multisig:o.multisig,bip32Path:o.bip32Path}))}),(n=n.plus(o.balanceSats)).isGreaterThanOrEqualTo(t))return"break"},o=0;o<e.length;o++){if("break"===r(o))break}return a}var S=a(859),O=a(89),T=a(814),w=a(808),j=a(812),C=a(813),x=a(815),k=a(763),K=a(816),N=a(818),R=a(821),B=a(822),_=a(817),A=a(819),M=a(820),D=a(823),U=function(){return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Disclaimer"}),r.a.createElement(C.a,null,r.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},z=function(){return r.a.createElement("div",null,r.a.createElement(S.a,{mt:4,mb:2},r.a.createElement(O.a,{variant:"h2"},"Welcome to Caravan!")),r.a.createElement(T.a,{container:!0,spacing:3},r.a.createElement(T.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},r.a.createElement(T.a,{item:!0},r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Stateless Multisig Coordinator"}),r.a.createElement(C.a,null,r.a.createElement("p",null,"Caravan is making bitcoin ",r.a.createElement("strong",null,"multisig")," custody easier and safer through transparency and standards."),r.a.createElement("p",null,"Caravan is a ",r.a.createElement("strong",null,"coordination")," software.  It connects to a source of consensus and your keys to build and interact with multisig bitcoin addresses."),r.a.createElement("p",null,"Caravan is also ",r.a.createElement("strong",null,"stateless"),".  It does not itself store any data.  You must safekeep the addresses (and redeem scripts & BIP32 paths) you create.")))),r.a.createElement(T.a,{item:!0},r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Keys"}),r.a.createElement(C.a,null,r.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),r.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind.  Caravan, being stateless, cannot store your private key but it can talk to hardware devices or software applications which do."),r.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),r.a.createElement(T.a,{item:!0},r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Consensus"}),r.a.createElement(C.a,null,r.a.createElement("p",null,"In order to look up address balances and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),r.a.createElement("p",null,"Running a full bitcoin node is the best way to determine the current state of the bitcoin network.  Caravan can be easily configured to use your own bitcoin node for consensus information and broadcasting transactions."),r.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at ",r.a.createElement("code",null,"blockstream.info"),"."))))),r.a.createElement(T.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},r.a.createElement(T.a,{item:!0},r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Learn More"}),r.a.createElement(C.a,null,r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(K.a,null,r.a.createElement(_.a,null)),r.a.createElement(N.a,null,P("https://www.unchained-capital.com/blog/the-caravan-arrives/","Blog Post"))),r.a.createElement(k.a,null,r.a.createElement(K.a,null,r.a.createElement(A.a,null)),r.a.createElement(N.a,null,P("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),r.a.createElement(k.a,null,r.a.createElement(K.a,null,r.a.createElement(M.a,null)),r.a.createElement(N.a,null,P("https://github.com/unchained-capital/caravan","Source Code"))))))),r.a.createElement(T.a,{item:!0},r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Supported Devices"}),r.a.createElement(C.a,null,"Caravan has been tested with the following hardware wallets:",r.a.createElement("ul",null,r.a.createElement("li",null,P("https://shop.trezor.io/product/trezor-one-white","Trezor One")),r.a.createElement("li",null,P("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S"))),"And web browsers:",r.a.createElement("ul",null,r.a.createElement("li",null,P("https://www.google.com/chrome/","Chrome")),r.a.createElement("li",null,P("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),r.a.createElement(R.a,null,r.a.createElement(B.a,{href:"https://github.com/unchained-capital/caravan/issues"},r.a.createElement(D.a,null)," \xa0 Report Issue")))))),r.a.createElement(S.a,{mt:2},r.a.createElement(U,null)))},L=a(10),F=a(12),H=a(11),W=a(13),q=a(381),G=a(864),X=a(853),Y=a(20),V=a(3),Z=a(764),J=a(824),Q=a(825),$=a(862),ee=a(766),te="SET_NETWORK",ae="SET_TOTAL_SIGNERS",ne="SET_REQUIRED_SIGNERS",re="SET_ADDRESS_TYPE",oe="SET_FROZEN";function le(e){return{type:oe,value:e}}var ie=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleNetworkChange=function(e){(0,a.props.setNetwork)(e.target.value)},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.frozen;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Network"}),r.a.createElement(C.a,null,r.a.createElement(Z.a,{component:"fieldset"},r.a.createElement(J.a,null,r.a.createElement(Q.a,{id:"mainnet",control:r.a.createElement($.a,{color:"primary"}),name:"network",value:"mainnet",label:r.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===V.MAINNET,disabled:a}),r.a.createElement(Q.a,{id:"testnet",control:r.a.createElement($.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===V.TESTNET,disabled:a})),r.a.createElement(ee.a,null,r.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),t}(r.a.Component);var ce={setNetwork:function(e){return{type:te,value:e}}},se=Object(c.b)(function(e){return{network:e.settings.network,frozen:e.settings.frozen}},ce)(ie),ue=a(826),de=a(827),pe=(a(248),7),me=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).renderIncrementRequiredSigners=function(){var e=a.props,t=e.requiredSigners,n=e.totalSigners,o=e.frozen,l=t===n||o;return r.a.createElement(q.a,{color:"primary",onClick:a.handleIncrementRequiredSigners,disabled:l},r.a.createElement(ue.a,null))},a.renderDecrementRequiredSigners=function(){var e=a.props,t=e.requiredSigners,n=e.frozen,o=1===t||n;return r.a.createElement(q.a,{color:"secondary",onClick:a.handleDecrementRequiredSigners,disabled:o},r.a.createElement(de.a,null))},a.renderIncrementTotalSigners=function(){var e=a.props,t=e.totalSigners,n=e.frozen,o=t===pe||n;return r.a.createElement(q.a,{color:"primary",onClick:a.handleIncrementTotalSigners,disabled:o},r.a.createElement(ue.a,null))},a.renderDecrementTotalSigners=function(){var e=a.props,t=e.requiredSigners,n=e.totalSigners,o=e.frozen,l=n===t||2===n||o;return r.a.createElement(q.a,{color:"secondary",onClick:a.handleDecrementTotalSigners,disabled:l},r.a.createElement(de.a,null))},a.handleIncrementRequiredSigners=function(e){var t=a.props,n=t.requiredSigners;(0,t.setRequiredSigners)(n+1),e.preventDefault()},a.handleDecrementRequiredSigners=function(e){var t=a.props,n=t.requiredSigners;(0,t.setRequiredSigners)(n-1),e.preventDefault()},a.handleIncrementTotalSigners=function(e){var t=a.props,n=t.totalSigners;(0,t.setTotalSigners)(n+1),e.preventDefault()},a.handleDecrementTotalSigners=function(e){var t=a.props,n=t.totalSigners;(0,t.setTotalSigners)(n-1),e.preventDefault()},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,a=e.totalSigners;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Quorum"}),r.a.createElement(C.a,null,r.a.createElement(S.a,null,r.a.createElement(T.a,{container:!0,justify:"center"},r.a.createElement(T.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),r.a.createElement(T.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},r.a.createElement(T.a,{item:!0},this.renderIncrementRequiredSigners()),r.a.createElement(T.a,{item:!0},r.a.createElement(O.a,{variant:"h2"},t)),r.a.createElement(T.a,{item:!0},r.a.createElement("small",null,r.a.createElement("p",null,"Required"))),r.a.createElement(T.a,{item:!0},this.renderDecrementRequiredSigners())),r.a.createElement(T.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},r.a.createElement(T.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"of"))),r.a.createElement(T.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},r.a.createElement(T.a,{item:!0},this.renderIncrementTotalSigners()),r.a.createElement(T.a,{item:!0},r.a.createElement(O.a,{variant:"h2"},a)),r.a.createElement(T.a,{item:!0},r.a.createElement("small",null,r.a.createElement("p",null,"Total"))),r.a.createElement(T.a,{item:!0},this.renderDecrementTotalSigners())),r.a.createElement(T.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),t}(r.a.Component);var he={setTotalSigners:function(e){return{type:ae,value:e}},setRequiredSigners:function(e){return{type:ne,value:e}}},Ee=Object(c.b)(function(e){return e.settings},he)(me),be=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleTypeChange=function(e){(0,a.props.setType)(e.target.value)},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addressType,a=e.frozen;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Address Type"}),r.a.createElement(C.a,null,r.a.createElement(Z.a,{component:"fieldset"},r.a.createElement(J.a,null,r.a.createElement(Q.a,{id:V.P2SH,control:r.a.createElement($.a,{color:"primary"}),name:"type",value:V.P2SH,label:V.P2SH,onChange:this.handleTypeChange,checked:t===V.P2SH,disabled:a}),r.a.createElement(Q.a,{id:V.P2SH_P2WSH,control:r.a.createElement($.a,{color:"primary"}),name:"type",value:V.P2SH_P2WSH,label:V.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===V.P2SH_P2WSH,disabled:a}),r.a.createElement(Q.a,{id:V.P2WSH,control:r.a.createElement($.a,{color:"primary"}),name:"type",value:V.P2WSH,label:V.P2WSH,onChange:this.handleTypeChange,checked:t===V.P2WSH,disabled:a})),r.a.createElement(ee.a,null,r.a.createElement("small",null,"Choose '",V.P2WSH,"' for best practices, '",V.P2SH,"' for greatest compatibility.")))))}}]),t}(r.a.Component);var fe={setType:function(e){return{type:re,value:e}}},ve=Object(c.b)(function(e){return e.settings},fe)(be),ge=a(828),Pe=a(829);function ye(e){return function(t){return{type:e,value:t}}}function Ie(e){return function(t,a){return{type:e,number:t,value:a}}}function Se(e){var t,a={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var r=n[t],o=e[r];a[r]=Ie(o)}return a}var Oe=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={url_edited:!1},a.handleTypeChange=function(e){var t=a.props,n=t.setType,r=t.network,o=t.setUrl,l=e.target.checked?"private":"public";"private"!==l||a.state.url_edited||o("http://localhost:".concat("mainnet"===r?8332:18332)),n(l)},a.handleUrlChange=function(e){var t=a.props,n=t.setUrl,r=t.setUrlError,o=e.target.value,l=a.validateUrl(o);a.state.url_edited||l||a.setState({url_edited:!0}),n(o),r(l)},a.handleUsernameChange=function(e){var t=a.props,n=t.setUsername,r=t.setUsernameError,o=e.target.value,l=a.validateUsername(o);n(o),r(l)},a.handlePasswordChange=function(e){var t=a.props,n=t.setPassword,r=t.setPasswordError,o=e.target.value,l=a.validatePassword(o);n(o),r(l)},a.toggle=function(){var e=a.props.client,t=e.type.charAt(0).toUpperCase()+e.type.slice(1);return r.a.createElement(Q.a,{control:r.a.createElement(ge.a,{color:"primary",checked:"private"===e.type,onChange:a.handleTypeChange,value:"private"}),label:t})},a.title=function(){return r.a.createElement(T.a,{container:!0,justify:"space-between"},r.a.createElement(T.a,{item:!0},"Consensus"),r.a.createElement(T.a,{item:!0},a.toggle()))},a.disabled=function(){return!1},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}},{key:"validatePassword",value:function(e){return""}},{key:"validateUsername",value:function(e){return""}},{key:"render",value:function(){var e=this.props,t=e.client,a=e.url_error,n=e.username_error,o=e.password_error;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:this.title()}),r.a.createElement(C.a,null,"public"===t.type?r.a.createElement("div",null,r.a.createElement("p",null,"'Public' uses the ",r.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",r.a.createElement("code",null,"bitcoind")," node."),"undefined"!==typeof this.props.publicNotes&&this.props.publicNotes):r.a.createElement("div",null,r.a.createElement("p",null,"A ",r.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),r.a.createElement("p",null,r.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",P("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),r.a.createElement("form",null,r.a.createElement(T.a,{container:!0,direction:"column"},r.a.createElement(T.a,{item:!0},r.a.createElement(Pe.a,{fullWidth:!0,label:"URL",value:t.url,onChange:this.handleUrlChange,disabled:this.disabled(),error:""!==a,helperText:a})),r.a.createElement(T.a,{item:!0}),r.a.createElement(T.a,{item:!0},r.a.createElement(Pe.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:t.username,onChange:this.handleUsernameChange,disabled:this.disabled(),error:n,helperText:n})),r.a.createElement(T.a,{item:!0},r.a.createElement(Pe.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:t.password,onChange:this.handlePasswordChange,disabled:this.disabled(),error:o,helperText:o})))),"undefined"!==typeof this.props.privateNotes&&this.props.privateNotes)))}}]),t}(r.a.Component);var Te=Object(c.b)(function(e){return{network:e.settings.network,client:e.client,url_error:e.client.url_error,url:e.client.url}},function(e){var t,a={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var r=n[t],o=e[r];a[r]=ye(o)}return a}({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR",setStatus:"SET_CLIENT_STATUS"}))(Oe),we=a(14),je=a.n(we),Ce=a(22),xe=a(104),ke=a.n(xe);function Ke(){return(Ke=Object(Ce.a)(je.a.mark(function e(t,a){var n,r;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.a.get(Object(V.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),a));case 3:return n=e.sent,r=n.data,e.next=7,Promise.all(r.map(function(){var e=Object(Ce.a)(je.a.mark(function e(t){var n,r,o;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.a.get(Object(V.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),a));case 2:return n=e.sent,r=n.data,o=new g.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(V.satoshisToBitcoins)(o).toFixed(8),amountSats:o,transactionHex:r});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Ne(){return(Ne=Object(Ce.a)(je.a.mark(function e(t,a){var n,r;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.a.get(Object(V.blockExplorerAPIURL)("/address/".concat(t),a));case 3:return n=e.sent,r=n.data,e.abrupt("return",{used:r.chain_stats.funded_txo_count>0||r.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Re(){return(Re=Object(Ce.a)(je.a.mark(function e(t){var a,n;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.a.get(Object(V.blockExplorerAPIURL)("/fee-estimates",t));case 3:return a=e.sent,n=a.data,e.abrupt("return",Math.ceil(n[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Be(){return(Be=Object(Ce.a)(je.a.mark(function e(t,a){var n;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.a.post(Object(V.blockExplorerAPIURL)("/tx",a),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function _e(e,t,a){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(Ce.a)(je.a.mark(function e(t,a,n){var r,o=arguments;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>3&&void 0!==o[3]?o[3]:[],e.abrupt("return",new Promise(function(){var e=Object(Ce.a)(je.a.mark(function e(o,l){return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ke()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:a,data:{jsonrpc:"2.0",id:0,method:"".concat(n),params:r}}).then(function(e){return o(e.data)}).catch(l);case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Me(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function De(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function Ue(){return(Ue=Object(Ce.a)(je.a.mark(function e(t){var a,n,r,o;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.address,o=t.addresses,e.abrupt("return",new Promise(function(){var e=Object(Ce.a)(je.a.mark(function e(t){var l,i,c,s;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=o||[r],e.next=4,_e(a,n,"listunspent",[0,9999999,l]);case 4:return i=e.sent,c=[],i.result.forEach(function(e){c.push(_e(a,n,"getrawtransaction",[e.txid]))}),e.next=9,Promise.all(c);case 9:s=e.sent,t(i.result.map(function(e,t){var a=new g.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:a.toFixed(8),amountSats:Object(V.bitcoinsToSatoshis)(a),transactionHex:s[t].result}})),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ze(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(Ce.a)(je.a.mark(function e(t){var a,n,r,o;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.address,e.prev=1,e.next=4,_e(a,n,"getreceivedbyaddress",[r]);case 4:if("undefined"!==typeof(o=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from "+a);case 7:return e.abrupt("return",{used:o.result>0});case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Fe(){return(Fe=Object(Ce.a)(je.a.mark(function e(t){var a,n,r,o,l,i;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.numBlocks,o=void 0===r?2:r,e.next=3,_e(a,n,"estimatesmartfee",[o]);case 3:return l=e.sent,i=l.result.feerate,e.abrupt("return",Math.ceil(1e5*i));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function He(){return(He=Object(Ce.a)(je.a.mark(function e(t){var a,n,r,o;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.hex,e.prev=1,e.next=4,_e(a,n,"sendrawtransaction",[r]);case 4:return o=e.sent,e.abrupt("return",o.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var We="public";function qe(e,t,a){return a.type===We?function(e,t){return Ke.apply(this,arguments)}(e,t):function(e){return Ue.apply(this,arguments)}(Object(f.a)({},De(a),{address:e}))}function Ge(e,t,a){return a.type===We?function(e,t){return Ne.apply(this,arguments)}(e,t):ze(Object(f.a)({},De(a),{address:e}))}function Xe(e,t){return t.type===We?function(e){return Re.apply(this,arguments)}(e):function(e){return Fe.apply(this,arguments)}(Object(f.a)({},De(t),{numBlocks:1}))}function Ye(e,t,a){return a.type===We?function(e,t){return Be.apply(this,arguments)}(e,t):function(e){return He.apply(this,arguments)}(Object(f.a)({},De(a),{hex:e}))}var Ve=a(832),Ze=a(833),Je=a(834),Qe=a(835),$e=a(836),et=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement(S.a,null,r.a.createElement(Ve.a,null,r.a.createElement(Ze.a,null,r.a.createElement(Je.a,null,r.a.createElement(Qe.a,null,"Name"),r.a.createElement(Qe.a,null,"BIP32 Path"),r.a.createElement(Qe.a,null,"Extended Public Key"))),r.a.createElement($e.a,null,a.renderConfirmationInfo())))},a.renderConfirmationInfo=function(){var e=a.props.extendedPublicKeyImporters;return Object.values(e).map(function(e,t){return r.a.createElement(Je.a,{key:t},r.a.createElement(Qe.a,null,e.name),r.a.createElement(Qe.a,null,"text"===e.method?"N/A":e.bip32Path),r.a.createElement(Qe.a,null,e.extendedPublicKey))})},a}return Object(W.a)(t,e),t}(r.a.Component);var tt=Object(c.b)(function(e){return{extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}},{})(et),at="UPDATE_DEPOSIT_NODE",nt="UPDATE_CHANGE_NODE",rt="RESET_NODES_SPEND",ot="UPDATE_AUTO_SPEND",lt="UPDATE_VIEW_ADDRESSES",it="UPDATE_DEPOSITING",ct="UPDATE_SPENDING",st="UPDATE_WALLET_NAME",ut="RESET_WALLET_VIEW",dt="SPEND_NODES";function pt(e){return{type:at,value:Object(f.a)({},e,{change:!1})}}function mt(e){return{type:nt,value:Object(f.a)({},e,{change:!0})}}function ht(e){return{type:ot,value:e}}function Et(){return{type:it}}function bt(){return{type:ct}}function ft(){return{type:ut}}var vt="CHOOSE_PERFORM_SPEND",gt="SET_REQUIRED_SIGNERS",Pt="SET_TOTAL_SIGNERS",yt="SET_INPUTS",It="ADD_OUTPUT",St="SET_OUTPUT_ADDRESS",Ot="SET_OUTPUT_AMOUNT",Tt="DELETE_OUTPUT",wt="SET_FEE_RATE",jt="SET_FEE",Ct="FINALIZE_OUTPUTS",xt="RESET_OUTPUTS",kt="SET_TXID",Kt="RESET_TRANSACTION",Nt="SET_IS_WALLET",Rt="SET_CHANGE_OUTPUT_INDEX";function Bt(e){return{type:gt,value:e}}function _t(e){return{type:yt,value:e}}function At(){return{type:It}}function Mt(e,t){return{type:St,number:e,value:t}}function Dt(e,t){return{type:Ot,number:e,value:t}}function Ut(e){return{type:wt,value:e}}function zt(e){return{type:Ct,value:e}}var Lt=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).scrollRef=r.a.createRef(),a.componentDidMount=function(){a.scrollRef.current.scrollIntoView({behavior:"smooth"})},a.render=function(){return r.a.createElement(T.a,{container:!0,justify:"center",ref:a.scrollRef},r.a.createElement(T.a,{item:!0,md:8},r.a.createElement("h3",null,"Balance: ",a.totalBalance())),r.a.createElement(T.a,{item:!0,md:4},r.a.createElement(S.a,{component:"span"},r.a.createElement(B.a,{variant:"contained",color:"secondary",onClick:a.setDeposit},"Deposit")),r.a.createElement(S.a,{component:"span",ml:2},r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:a.setSpend},"Spend")),r.a.createElement(S.a,{component:"span",ml:2},r.a.createElement(B.a,{variant:"contained",onClick:a.setView},"View Addresses"))))},a.setDeposit=function(){(0,a.props.setDepositing)()},a.setSpend=function(){var e=a.props,t=e.setSpending,n=e.requiredSigners;(0,e.setRequiredSigners)(n),t()},a.setView=function(){a.props.setViewing()},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"totalBalance",value:function(){var e=this.props,t=e.deposits,a=e.change;return Object(V.satoshisToBitcoins)(t.balanceSats.plus(a.balanceSats)).toFixed()}}]),t}(r.a.Component);var Ft={setDepositing:Et,setSpending:bt,setViewing:function(){return{type:lt}},setRequiredSigners:Bt},Ht=Object(c.b)(function(e){return Object(f.a)({},e.wallet,{requiredSigners:e.spend.transaction.requiredSigners})},Ft)(Lt),Wt=a(197),qt=a.n(Wt),Gt=a(367),Xt=a.n(Gt),Yt=a(837),Vt=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={copied:!1,timer:null},a.componentWillUnmount=function(){var e=a.state.timer;e&&clearTimeout(e)},a.render=function(){var e=a.props,t=e.newline,n=e.text,o=e.children;return r.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},r.a.createElement(Xt.a,{text:n,onCopy:a.onCopy,options:{format:"text/plain"}},r.a.createElement("span",{className:"copyable"},o||n,t&&r.a.createElement("br",null),a.badge())))},a.badge=function(){return a.state.copied?r.a.createElement(Yt.a,{fontSize:"small"}):null},a.onCopy=function(){var e=setTimeout(function(){a.setState({copied:!1,timer:null})},1e3);a.setState({copied:!0,timer:e})},a}return Object(W.a)(t,e),t}(r.a.Component);Vt.defaultProps={newline:!1,icon:!0};var Zt,Jt=Vt,Qt=a(866),$t=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={address:"",bip32Path:"",amount:0,amountError:"",showReceived:!1},a.getDepositAddress=function(){var e=a.props,t=e.deposits,n=e.network,r=e.client,o=e.updateDepositNode,l=Object.values(t.nodes);a.setState({showReceived:!1});for(var i=0;i<l.length;i++){var c=l[i];if(c.balanceSats.isEqualTo(0)&&!c.addressUsed){a.setState({address:c.multisig.address,bip32Path:c.bip32Path});break}}a.state.address,Zt=setInterval(Object(Ce.a)(je.a.mark(function e(){var t,l;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe(a.state.address,n,r);case 3:(t=e.sent).length&&(clearInterval(Zt),l=t.reduce(function(e,t){return e.plus(t.amountSats)},new g.a(0)),o({change:!1,bip32Path:a.state.bip32Path,utxos:t,balanceSats:l,fetchedUTXOs:!0,fetchUTXOsError:""}),a.setState({showReceived:!0})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),2e3)},a.renderReceived=function(){var e=a.state.showReceived,t=a.props.resetWalletView;if(e)return r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:a.getDepositAddress},"Make another deposit"),r.a.createElement(S.a,{ml:2,component:"span"},r.a.createElement(B.a,{variant:"contained",onClick:t},"Return")))},a.handleAmountChange=function(e){var t=e.target.value,n="";t.length&&!t.match(/^[0-9.]+$/)&&(n="Amount must be numeric");var r=t.split(".");r.length>2?n="Amount must be numeric":2===r.length&&r[1].length>8&&(n="Amount must have maximum precision of 8 decimal places"),a.setState({amount:e.target.value,amountError:n})},a.qrString=function(){var e=a.state,t=e.address,n=e.amount;return"bitcoin:".concat(t).concat(n?"?amount="+n:"")},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){this.getDepositAddress()}},{key:"componentWillUnmount",value:function(){clearInterval(Zt)}},{key:"render",value:function(){var e=this.state,t=e.amount,a=e.amountError,n=e.address,o=e.showReceived;return r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Deposit"}),r.a.createElement(C.a,null,r.a.createElement(Jt,{text:this.qrString(),newline:!0},r.a.createElement("p",null,r.a.createElement("code",null,n)),r.a.createElement(qt.a,{size:300,value:this.qrString(),level:"L"}),r.a.createElement("p",null,"Scan QR code or click to copy address to clipboard.")),r.a.createElement(Pe.a,{fullWidth:!0,label:"Amount BTC",name:"depositAmount",onChange:this.handleAmountChange,value:t,error:""!==a,helperText:a}),this.renderReceived())),r.a.createElement(Qt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:3e3,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Deposit received")}))}}]),t}(r.a.Component);var ea={updateDepositNode:pt,resetWalletView:ft},ta=Object(c.b)(function(e){return Object(f.a)({},e.wallet,e.settings,{client:e.client})},ea)($t),aa=a(863),na=a(865),ra=a(867),oa=a(840),la=a(841),ia=a(839),ca=a(838),sa=(a(249),a(103)),ua=a.n(sa),da=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).renderInputs=function(){var e=a.props,t=e.inputs,n=e.network;return t.map(function(e,t){var a="".concat(ua.a.utxoTxid).concat(e.confirmed?"":" "+ua.a.unconfirmed),o=e.confirmed?"confirmed":"unconfirmed";return r.a.createElement(Je.a,{hover:!0,key:e.txid},r.a.createElement(Qe.a,null,t+1),r.a.createElement(Qe.a,{className:a},r.a.createElement(Jt,{text:e.txid},r.a.createElement("code",{title:o},e.txid))),r.a.createElement(Qe.a,null,r.a.createElement(Jt,{text:e.index.toString()})),r.a.createElement(Qe.a,null,r.a.createElement(Jt,{text:Object(V.satoshisToBitcoins)(e.amountSats).toString()})),r.a.createElement(Qe.a,null,P(Object(V.blockExplorerTransactionURL)(e.txid,n),r.a.createElement(ca.a,null))))})},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inputs,a=e.inputsTotalSats;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Available Inputs (".concat(t.length,")")}),r.a.createElement(C.a,null,r.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),r.a.createElement(Ve.a,null,r.a.createElement(Ze.a,null,r.a.createElement(Je.a,{hover:!0},r.a.createElement(Qe.a,null,"Number"),r.a.createElement(Qe.a,null,"TXID"),r.a.createElement(Qe.a,null,"Index"),r.a.createElement(Qe.a,null,"Amount (BTC)"),r.a.createElement(Qe.a,null,"View"))),r.a.createElement($e.a,null,this.renderInputs()),r.a.createElement(ia.a,null,r.a.createElement(Je.a,{hover:!0},r.a.createElement(Qe.a,{colSpan:3},"TOTAL:"),r.a.createElement(Qe.a,{colSpan:2},Object(V.satoshisToBitcoins)(a).toString()))))))}}]),t}(r.a.Component);var pa=Object(c.b)(function(e){return Object(f.a)({},e.settings)})(da),ma=a(368),ha=a.n(ma),Ea=a(369),ba=a.n(Ea),fa=a(868),va=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).renderScript=function(e,t){var a=Object(V.scriptToHex)(t),n=Object(V.scriptToOps)(t);return r.a.createElement(S.a,{mt:2},r.a.createElement(O.a,{variant:"h6"},e),r.a.createElement(T.a,{container:!0,spacing:2},r.a.createElement(T.a,{item:!0,sm:6},r.a.createElement(Jt,{text:a},r.a.createElement("code",null,a))),r.a.createElement(T.a,{item:!0,sm:6},r.a.createElement(Jt,{text:n},r.a.createElement("code",null,n)))))},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.multisig,n=a.address,o=Object(V.multisigRedeemScript)(a),l=Object(V.multisigWitnessScript)(a);return r.a.createElement(S.a,{mt:2},r.a.createElement(O.a,{variant:"h6"},"Address"),r.a.createElement(O.a,{align:"center",variant:"h5"},r.a.createElement(T.a,{container:!0,direction:"column",spacing:2},r.a.createElement(T.a,{item:!0},r.a.createElement(Jt,{text:n},r.a.createElement("code",null,n)),"\xa0",P(Object(V.blockExplorerAddressURL)(n,t),r.a.createElement(ca.a,null))),r.a.createElement(T.a,{item:!0,justify:"center",container:!0,spacing:3},r.a.createElement(T.a,{item:!0},r.a.createElement(fa.a,{label:"BTC"})),r.a.createElement(T.a,{item:!0},r.a.createElement(fa.a,{label:Object(V.networkLabel)(t)})),r.a.createElement(T.a,{item:!0},r.a.createElement(fa.a,{label:"".concat(Object(V.multisigRequiredSigners)(a),"-of-").concat(Object(V.multisigTotalSigners)(a))})),r.a.createElement(T.a,{item:!0},r.a.createElement(fa.a,{label:Object(V.multisigAddressType)(a)}))))),this.renderScript("Script",a),o&&this.renderScript("Redeem Script",o),l&&this.renderScript("Witness Script",l))}}]),t}(r.a.Component);var ga=Object(c.b)(function(e){return e.settings},{})(va),Pa=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.generate()},a.render=function(){var e=a.props,t=e.bip32Path,n=e.spend,o=e.fetchedUTXOs,l=e.balanceSats,i=e.fetchUTXOsError,c=e.multisig,s=e.utxos,u=e.spending,d=e.addressKnown;return r.a.createElement(Je.a,{key:t},u&&r.a.createElement(Qe.a,null,r.a.createElement(na.a,{id:t,name:"spend",onChange:a.handleSpend,checked:n,disabled:!o||l.isEqualTo(0)})),r.a.createElement(Qe.a,null,r.a.createElement("code",null,t)),r.a.createElement(Qe.a,null,s.length),r.a.createElement(Qe.a,null,o&&d?Object(V.satoshisToBitcoins)(l).toFixed():"",""!==i&&r.a.createElement(ee.a,{className:"danger"},i)),r.a.createElement(Qe.a,null,c?a.renderAddress():"..."))},a.addressContent=function(){var e=a.props,t=e.multisig,n=e.network,o=e.addressUsed,l=e.balanceSats;return r.a.createElement("div",null,r.a.createElement(Jt,{text:t.address},r.a.createElement("code",{className:o&&l.isEqualTo(0)?ua.a.spent:""},t.address)),"\xa0",P(Object(V.blockExplorerAddressURL)(t.address,n),r.a.createElement(ha.a,{onClick:function(e){return e.stopPropagation()}})))},a.renderAddress=function(){var e=a.props,t=e.bip32Path,n=e.utxos,o=e.balanceSats,l=e.multisig;return r.a.createElement(ra.a,null,r.a.createElement(oa.a,{expandIcon:r.a.createElement(ba.a,null),"aria-controls":"panel1a-content",id:"address-header"+t},a.addressContent()),r.a.createElement(la.a,null,r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:12},r.a.createElement(ga,{multisig:l})),o.isGreaterThan(0)&&r.a.createElement(T.a,{item:!0,md:12},r.a.createElement(pa,{inputs:n,inputsTotalSats:o})))))},a.generate=function(){var e=a.props,t=e.present,n=e.change,r=e.bip32Path,o=e.addNode;t||o(n,r)},a.handleSpend=function(e){var t=a.props,n=t.change,r=t.bip32Path,o=t.updateNode,l=t.inputs,i=t.utxos,c=t.multisig,s=t.setInputs,u=t.updateAutoSpend,d=t.setFeeRate,p=t.feeRate;s(e.target.checked?l.concat(i.map(function(e){return Object(f.a)({},e,{multisig:c,bip32Path:r})})):l.filter(function(e){return 0===i.filter(function(t){return t.txid===e.txid&&t.index===e.index}).length})),o(n,{spend:e.target.checked,bip32Path:r}),u(!1),d(p)},a}return Object(W.a)(t,e),t}(r.a.Component);var ya,Ia={setInputs:_t,setFeeRate:Ut,updateAutoSpend:ht},Sa=Object(c.b)(function(e,t){var a="1"===(t.bip32Path||"").split("/")[1],n=e.wallet[a?"change":"deposits"];return Object(f.a)({},e.settings,{change:a},n.nodes[t.bip32Path],e.spend.transaction,{spending:e.wallet.info.spending})},Ia)(Pa),Oa=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={imported:!1,importError:"",rescan:!1,addressesError:"",addressPresent:!1},a.componentDidMount=function(){a.props.autoImport&&(ya=setInterval(a.checkAddress,5e3))},a.componentWillUnmount=function(){clearInterval(ya)},a.handleRescan=function(e){a.setState({rescan:e.target.checked})},a.checkAddress=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o,l,i;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.client,r=t.addresses,o=t.autoImport,l=r[0],e.prev=2,e.next=5,ze(Object(f.a)({},De(n),{address:l}));case 5:"undefined"!==typeof e.sent.used&&(a.setState({addressPresent:!0,addressesError:""}),clearInterval(ya)),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),i=e.t0.response&&e.t0.response.status||"unknown",o&&Me(e.t0)&&!a.state.rescan&&a.import(),a.setState({addressesError:401===i?e.t0.response.statusText:500===i?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured"}),console.log(i,e.t0.response);case 15:case"end":return e.stop()}},e,null,[[2,9]])})),a.import=function(){var e=a.props,t=e.addresses,n=e.client,r=e.importCallback,o=a.state.rescan;(function(e){var t=e.url,a=e.auth,n=e.addresses,r=e.label,o=e.rescan,l=n.map(function(e){return{scriptPubKey:{address:e},label:r,timestamp:0}});return o?(_e(t,a,"importmulti",[l,{rescan:o}]),new Promise(function(e){return e({result:[]})})):_e(t,a,"importmulti",[l,{rescan:o}])})(Object(f.a)({},De(n),{addresses:t,label:"",rescan:o})).then(function(e){var t=e.result.reduce(function(e,t){return t.error&&t.error.message||e},"");a.setState({importError:t,imported:""===t}),"undefined"!==typeof r&&r(e.result)}).catch(function(e){a.setState({importError:"Unable to import, check your settings and try again",imported:!1})})},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.autoImport&&e.addresses.length&&e.addresses[0]!==this.props.addresses[0]&&(clearInterval(ya),ya=setInterval(this.checkAddress,5e3))}},{key:"render",value:function(){var e=this.state,t=e.imported,a=e.importError,n=e.rescan,o=e.addressPresent,l=e.addressesError,i=this.props,c=i.autoImport,s=i.addresses;return r.a.createElement(S.a,null,t&&n&&r.a.createElement(ee.a,null,this.pluralOrSingularAddress()," imported, rescan of your node may take some time."),t&&!n&&r.a.createElement(ee.a,null,this.pluralOrSingularAddress()," imported."),o&&r.a.createElement("div",null,r.a.createElement(ee.a,null,"Address ",t?"imported to":"found in"," your wallet!"),r.a.createElement(ee.a,null,"You can properly determine your addresses current balance."),r.a.createElement(ee.a,null,'Your node may need to do a rescan to determine if an address has been previously used. If you are sure you have done so, or you are sure of the address\'s history, you may proceed.  If you are unsure, you may select "rescan" and import.')),!o&&c&&r.a.createElement(ee.a,null,"Checking node for presence of ",this.pluralOrSingularAddress()),!o&&!c&&r.a.createElement(ee.a,null,"To get accurate information from your node your ",this.pluralOrSingularAddress(),"will need to be imported to your node.  Importing will give you accurate balance information however to know if an address hase been used previously, a rescan needs to take place."),r.a.createElement(ee.a,{error:!0},l),r.a.createElement("p",null,r.a.createElement(S.a,{component:"span",ml:2},r.a.createElement(B.a,{variant:"contained",disabled:!n&&(o||0===s.length),onClick:this.import},"Import")),r.a.createElement(S.a,{component:"span",ml:2},r.a.createElement(Q.a,{control:r.a.createElement(ge.a,{checked:n,onChange:this.handleRescan,color:"secondary"}),label:"Rescan"}))),r.a.createElement(ee.a,{error:!0},a))}},{key:"pluralOrSingularAddress",value:function(){var e=this.props.addresses;return"address".concat(e.length>1?"es":"")}}]),t}(r.a.Component);var Ta=Object(c.b)(function(e){return{client:e.client}},{})(Oa),wa=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={page:0,nodesPerPage:10,change:!1,spend:!1},a.addresses=[],a.getUnknownAddressNodes=function(){var e=a.props,t=e.changeNodes,n=e.depositNodes;return Object.values(n).concat(Object.values(t)).filter(function(e){return!e.addressKnown})},a.addressesImported=function(){var e=Object(Ce.a)(je.a.mark(function e(t){var n,r,o,l,i,c;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,r=n.updateNode,o=n.client,l=n.network,i=[],c=a.getUnknownAddressNodes(),t.forEach(function(e,t){e.success&&i.push(c[t])}),i.forEach(function(){var e=Object(Ce.a)(je.a.mark(function e(t){var a,n,i,c;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(t.multisig.address,l,o);case 2:return a=e.sent,e.next=5,Ge(t.multisig.address,l,o);case 5:n=e.sent,a&&(c=a.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new g.a(0)),i={balanceSats:c,utxos:a,fetchedUTXOs:!0,fetchUTXOsError:""}),r(t.change,Object(f.a)({bip32Path:t.bip32Path,addressKnown:!0},i,{addressStatus:n}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getNodeSet=function(){var e=a.props,t=e.spending,n=e.changeNodes,r=e.depositNodes,o=a.state.change?n:r;return t?Object.values(o).filter(function(e){return e.balanceSats.isGreaterThan(0)}).reduce(function(e,t){return e[t.bip32Path]=t,e},{}):o},a.renderNodes=function(){for(var e=a.state,t=e.page,n=e.nodesPerPage,o=e.change,l=e.spend,i=a.props,c=i.addNode,s=i.updateNode,u=t*n,d=[],p=a.getNodeSet(),m=0;m<n;m++){var h=u+m;if(h>Object.keys(p).length-1)break;var E=Object.values(p)[h].bip32Path,b=r.a.createElement(Sa,{key:E,bip32Path:E,addNode:c,updateNode:s,change:o,spend:l});d.push(b)}return d},a.handlePageChange=function(e,t){var n=t;a.setState({page:n})},a.handleChangeRowsPerPage=function(e){a.setState({nodesPerPage:e.target.value,page:0})},a.bip32Path=function(e){var t=a.state.change;return"m/".concat(t?"1":"0","/").concat(e)},a.pageCount=function(){var e=a.state.nodesPerPage;return Math.ceil(a.rowCount()/e)},a.rowCount=function(){var e=a.getNodeSet();return Object.keys(e).length},a.generateAnotherPage=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o,l,i,c,s,u,d,p;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.addNode,r=t.depositNodes,o=t.changeNodes,l=a.state,i=l.change,c=l.nodesPerPage,s=l.page,u=Object.keys(i?o:r).length,d=0;case 4:if(!(d<c+(c-u%c))){e.next=11;break}return p=a.bip32Path(u+d),e.next=8,n(i,p);case 8:d++,e.next=4;break;case 11:u%c===0&&a.setState({page:s+1});case 12:case"end":return e.stop()}},e)})),a.toggleChange=function(){var e=a.state.change;a.setState({change:!e,page:0})},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.state,t=e.page,a=e.nodesPerPage,n=e.change,o=this.props,l=o.spending,i=o.canLoad,c=o.client,s=!l&&"private"===c.type;return s&&(this.addresses=this.getUnknownAddressNodes().map(function(e){return e.multisig.address})),r.a.createElement(T.a,{item:!0,md:12},s&&r.a.createElement(Ta,{addresses:this.addresses,importCallback:this.addressesImported}),r.a.createElement(Ve.a,{style:{tableLayout:"fixed"}},r.a.createElement(Ze.a,null,r.a.createElement(Je.a,null,l&&r.a.createElement(Qe.a,{width:62},"Spend?"),r.a.createElement(Qe.a,{width:106},"BIP32 Path"),r.a.createElement(Qe.a,{width:68},"UTXOs"),r.a.createElement(Qe.a,{width:82},"Balance"),r.a.createElement(Qe.a,null,"Address"))),r.a.createElement($e.a,null,this.renderNodes())),r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:6},r.a.createElement(aa.a,{component:"div",count:this.rowCount(),rowsPerPage:a,page:t,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage})),r.a.createElement(T.a,{item:!0,md:2},i&&t===this.pageCount()-1&&r.a.createElement(B.a,{type:"button",variant:"contained",color:"secondary",onClick:this.generateAnotherPage},"More")),r.a.createElement(T.a,{item:!0,md:4},r.a.createElement(B.a,{type:"button",variant:"contained",color:"primary",onClick:this.toggleChange},n?"View Deposits":"View Change"))))}}]),t}(r.a.Component);var ja=Object(c.b)(function(e){return Object(f.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,spending:e.wallet.info.spending,client:e.client},e.settings)},{})(wa),Ca=a(257),xa=a(844),ka=a(871),Ka=a(846),Na=a(371),Ra=a.n(Na),Ba=a(845),_a=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).addChangeAddress=function(){var e=a.props,t=e.changeNode,n=e.number,r=e.setAddress,o=e.setChangeOutput;r(n,t.multisig.address),o(n),a.handleBalance()},a.renderChangeAdornment=function(){var e=a.props,t=e.changeNode,n=e.number,o=e.changeOutputIndex,l=e.address;if(null!==t){var i,c=!1;if(0===o&&""===l)i="Set to wallet change address";else{if(n!==o)return{};i="Your change will go here.",c=!0}return{endAdornment:r.a.createElement(xa.a,{position:"end"},r.a.createElement(ka.a,{placement:"top",title:i},r.a.createElement("small",null,r.a.createElement(q.a,{onClick:a.addChangeAddress,disabled:c},r.a.createElement(Ra.a,null)))))}}return{}},a.handleAddressChange=function(e){var t=a.props,n=t.number;(0,t.setAddress)(n,e.target.value)},a.hasAddressError=function(){return""!==a.props.addressError},a.handleAmountChange=function(e){var t=a.props,n=t.number;(0,t.setAmount)(n,e.target.value)},a.hasAmountError=function(){return""!==a.props.amountError},a.isNotBalanceable=function(){var e=a.props,t=e.number,n=e.outputs,r=e.feeError,o=e.amountError,l=e.amount,i=e.inputsTotalSats;if(""!==r)return!0;for(var c=0;c<n.length;c++)if(c!==t-1&&(""!==n[c].amountError||""===n[c].amount))return!0;var s=a.autoBalancedAmount();return""!==Object(V.validateOutputAmountBTC)(s,i)||""===o&&s===new g.a(l)},a.isBalanceable=function(){return!a.isNotBalanceable()},a.hasBalanceError=function(){return""!==a.props.balanceError},a.autoBalancedAmount=function(){var e=a.props,t=e.number,n=e.fee,r=e.inputsTotalSats,o=e.outputs.filter(function(e,a){return a!==t-1}).map(function(e){return Object(V.bitcoinsToSatoshis)(new g.a(e.amount))}).reduce(function(e,t){return e.plus(t)},new g.a(0)),l=Object(V.bitcoinsToSatoshis)(new g.a(n));return Object(V.satoshisToBitcoins)(r.minus(o.plus(l)))},a.balanceAction=function(){var e=a.props,t=e.balanceError,n=e.changeOutputIndex,r=e.number;return!a.hasBalanceError()||a.isNotBalanceable()?null:(n===r&&a.handleBalance(),t.split(" ")[0])},a.handleBalance=function(){var e=a.props,t=e.number;(0,e.setAmount)(t,a.autoBalancedAmount().toString())},a.hasError=function(){return a.hasAddressError()||a.hasAmountError()},a.handleDelete=function(){var e=a.props,t=e.number;(0,e.remove)(t)},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.outputs,a=e.finalizedOutputs,n=e.address,o=e.amount,l=e.addressError,i=e.amountError,c=e.changeOutputIndex,s=e.number;return r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,xs:7},r.a.createElement(Pe.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:ua.a.outputsFormInput,disabled:a||c===s,onChange:this.handleAddressChange,value:n,error:this.hasAddressError(),helperText:l,InputProps:this.renderChangeAdornment()})),r.a.createElement(T.a,{item:!0,xs:3},r.a.createElement(Pe.a,{fullWidth:!0,placeholder:"Amount (BTC)",className:ua.a.outputsFormInput,name:"amount",disabled:a||c===s,onChange:this.handleAmountChange,value:o,error:this.hasAmountError(),helperText:i})),!a&&this.hasBalanceError()&&this.isBalanceable()&&r.a.createElement(T.a,{item:!0,xs:1},r.a.createElement(ka.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},r.a.createElement("small",null,r.a.createElement(q.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?r.a.createElement(ue.a,null):r.a.createElement(de.a,null))))),!a&&t.length>1&&r.a.createElement(T.a,{item:!0,xs:1},r.a.createElement(ka.a,{title:"Remove Output",placement:"top"},r.a.createElement(q.a,{onClick:this.handleDelete},r.a.createElement(Ba.a,null)))))}}]),t}(r.a.Component);var Aa={setAddress:Mt,setAmount:Dt,remove:function(e){return{type:Tt,number:e}},setChangeOutput:function(e){return{type:Rt,value:e}}},Ma=Object(c.b)(function(e,t){return Object(f.a)({},e.spend.transaction,e.spend.transaction.outputs[t.number-1],{changeNode:e.wallet.change.nextNode})},Aa)(_a),Da=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).titleRef=r.a.createRef(),a.state={feeRateFetchError:""},a.componentDidMount=function(){a.initialOutputState(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){var e=a.props.signatureImporters;0===Object.keys(e).reduce(function(t,a){return t+e[a].finalized},0)&&a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderOutputs=function(){var e=a.props.outputs;return Object(Ca.map)(e).map(function(e,t){return r.a.createElement(T.a,{container:!0,key:t},r.a.createElement(Ma,{number:t+1}))})},a.inputsTotal=function(){var e=a.props.inputsTotalSats;return Object(V.satoshisToBitcoins)(e)},a.outputsAndFeeTotal=function(){var e=a.props,t=e.outputs,n=e.fee;return e.inputs.length?t.map(function(e){return new g.a(e.amount||0)}).reduce(function(e,t){return e.plus(t)},new g.a(0)).plus(new g.a(n)):""},a.hasFeeRateFetchError=function(){return""!==a.state.feeRateFetchError},a.hasFeeRateError=function(){return""!==a.props.feeRateError},a.hasFeeError=function(){return""!==a.props.feeError},a.hasBalanceError=function(){return""!==a.props.balanceError},a.hasError=function(){return a.hasFeeRateFetchError()||a.hasFeeRateError()||a.hasFeeError()||a.hasBalanceError()},a.handleAddOutput=function(){(0,a.props.addOutput)()},a.handleFeeRateChange=function(e){var t=a.props,n=t.setFeeRate;t.inputs.length&&n(e.target.value)},a.handleFeeChange=function(e){(0,a.props.setFee)(e.target.value)},a.handleFinalize=function(){(0,a.props.finalizeOutputs)(!0)},a.handleReset=function(){(0,a.props.resetOutputs)(),a.initialOutputState()},a.getFeeEstimate=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o,l,i;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.client,r=t.network,o=t.setFeeRate,l=1,i="",e.prev=3,e.next=6,Xe(r,n);case 6:l=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),i="There was an error fetching the fee rate.";case 13:return e.prev=13,o(l.toString()),a.setState({feeRateFetchError:i}),e.finish(13);case 17:case"end":return e.stop()}},e,null,[[3,9,13,17]])})),a.gatherSignaturesDisabled=function(){var e=a.props,t=e.finalizedOutputs,n=e.outputs;if(0===e.inputs.length)return!0;if(t||a.hasError())return!0;for(var r=0;r<n.length;r++){var o=n[r];if(""===o.address||""===o.amount||""!==o.addressError||""!==o.amountError)return!0}return!1},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"initialOutputState",value:function(){var e=Object(Ce.a)(je.a.mark(function e(){var t,a,n,r,o,l,i,c,s;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.inputs,n=t.outputs,e.next=3,this.getFeeEstimate();case 3:r=this.props,o=r.inputsTotalSats,l=r.fee,i=r.setOutputAmount,c=Object(V.bitcoinsToSatoshis)(new g.a(l)),s=Object(V.satoshisToBitcoins)(o.minus(c)),a.length&&""===n[0].amount&&i(1,s.toFixed(8));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,a=e.fee,n=e.finalizedOutputs,o=e.feeRateError,l=e.feeError,i=e.balanceError,c=this.state.feeRateFetchError;return r.a.createElement(w.a,null,r.a.createElement(j.a,{ref:this.titleRef,title:"Define Outputs"}),r.a.createElement(C.a,null,r.a.createElement(S.a,null,r.a.createElement(T.a,null,this.renderOutputs()),r.a.createElement(T.a,{item:!0,container:!0,spacing:1},r.a.createElement(T.a,{item:!0,xs:4},r.a.createElement(B.a,{variant:"contained",disabled:n,onClick:this.handleAddOutput},"Add output")),r.a.createElement(T.a,{item:!0,xs:3},r.a.createElement(Pe.a,{fullWidth:!0,label:"Fee Rate (Sats/byte)",value:t,placeholder:"Sats/byte",name:"fee_rate",disabled:n,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:c||o,InputProps:{endAdornment:r.a.createElement(xa.a,{position:"end"},r.a.createElement(ka.a,{placement:"top",title:"Estimate best rate"},r.a.createElement("small",null,r.a.createElement(q.a,{onClick:this.getFeeEstimate,disabled:n},r.a.createElement(Ka.a,null)))))}})),r.a.createElement(T.a,{item:!0,xs:3},r.a.createElement(Pe.a,{fullWidth:!0,label:"Estimated Fees (BTC)",placeholder:"BTC",name:"fee_total",disabled:n,value:a,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:l})),r.a.createElement(T.a,{item:!0,xs:2})),r.a.createElement(T.a,{item:!0,container:!0,spacing:1},r.a.createElement(T.a,{item:!0,xs:4}),r.a.createElement(T.a,{item:!0,xs:3},r.a.createElement(Pe.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toString(),disabled:n,InputProps:{readOnly:!0}})),r.a.createElement(T.a,{item:!0,xs:3},r.a.createElement(Pe.a,{fullWidth:!0,label:"Outputs & Fee Total",value:this.outputsAndFeeTotal().toString(),error:this.hasBalanceError(),disabled:n,helperText:i,InputProps:{readOnly:!0}})),r.a.createElement(T.a,{item:!0,xs:2})),r.a.createElement(T.a,{item:!0},r.a.createElement(T.a,{container:!0,spacing:3},r.a.createElement(T.a,{item:!0},r.a.createElement(B.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),r.a.createElement(T.a,{item:!0},r.a.createElement(B.a,{variant:"contained",color:"secondary",disabled:n,onClick:this.handleReset},"Reset Outputs")))))))}}]),t}(r.a.Component);var Ua={addOutput:At,setOutputAmount:Dt,setFeeRate:Ut,setFee:function(e){return{type:jt,value:e}},finalizeOutputs:zt,resetOutputs:function(){return{type:xt}}},za=Object(c.b)(function(e){return Object(f.a)({},{network:e.settings.network,client:e.client},e.spend.transaction,e.client,{signatureImporters:e.spend.signatureImporters})},Ua)(Da),La=a(9),Fa=a(771),Ha=a(770),Wa=a(842),qa=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={signatureJSON:"",error:""},a.render=function(){var e=a.state,t=e.signatureJSON,n=e.error;return r.a.createElement(S.a,{mt:2},r.a.createElement(Pe.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:a.handleChange,error:a.hasError(),helperText:n}),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{variant:"contained",color:"primary",size:"large",onClick:a.finalize,disabled:""===t},"Add Signature")))},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,n="";try{JSON.parse(t)}catch(r){n="Invalid JSON."}a.setState({signatureJSON:t,error:n})},a.finalize=function(){var e=a.props.validateAndSetSignature,t=a.state.signatureJSON;e(JSON.parse(t),a.setError)},a}return Object(W.a)(t,e),t}(r.a.Component),Ga=a(372),Xa=a.n(Ga),Ya=300,Va=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={walletState:La.PENDING,error:""},a.render=function(){var e=a.state,t=e.walletState,n=e.error,o=a.props,l=o.interaction,i=o.width,c=o.startText;if(t===La.PENDING){var s=l.messageFor({walletState:t,code:"hermit.command"});return r.a.createElement("div",null,r.a.createElement("p",null,s.instructions),r.a.createElement(T.a,{container:!0,justify:"center",className:"mb-2"},r.a.createElement(Jt,{text:s.command},r.a.createElement("code",null,r.a.createElement("strong",null,s.mode,">")," ",s.command))),r.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:a.handleStart},c)))}return t===La.ACTIVE?r.a.createElement(T.a,{container:!0,direction:"column"},r.a.createElement(T.a,{item:!0},r.a.createElement(Xa.a,{delay:Ya,onError:a.handleError,onScan:a.handleScan,style:{width:i},facingMode:"user"})),r.a.createElement(T.a,{item:!0},r.a.createElement(B.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Cancel"))):"error"===t||"success"===t?r.a.createElement("div",null,r.a.createElement(ee.a,{error:!0},n),r.a.createElement(B.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Reset")):null},a.handleStart=function(){var e=a.props.onStart;a.setState({walletState:La.ACTIVE,error:""}),e&&e()},a.handleError=function(e){var t=a.props.onClear;a.setState({walletState:"error",error:e.message}),t&&t()},a.handleScan=function(e){var t=a.props,n=t.onSuccess,r=t.interaction;if(e)try{n(r.parse(e)),a.setState({walletState:"success"})}catch(o){a.handleError(o)}},a.handleStop=function(){var e=a.props.onClear;a.setState({walletState:La.PENDING,error:""}),e&&e()},a}return Object(W.a)(t,e),t}(n.Component);Va.defaultProps={width:"256px",startText:"Scan"};var Za=Va,Ja=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={errorMessage:""},a.render=function(){var e=a.props,t=e.width,n=e.string;return r.a.createElement(Jt,{text:n,newline:!0},r.a.createElement(qt.a,{size:t,value:n,level:"L"}))},a}return Object(W.a)(t,e),t}(r.a.Component);Ja.defaultProps={string:"",width:120};var Qa=Ja,$a=a(847),en=a(848),tn=a(849),an=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement("small",null,r.a.createElement(x.a,null,a.filteredMessages().map(function(e,t){return a.renderMessage(e,t)})))},a.renderMessage=function(e,t){return r.a.createElement(k.a,{key:t},r.a.createElement(K.a,null,a.messageIcon(e)),r.a.createElement(N.a,null,e.text))},a.filteredMessages=function(){var e=a.props,t=e.messages,n=e.excludeCodes;return t.filter(function(e){for(var t=0;t<n.length;t++){var a=n[t];if((e.code||"").includes(a))return!1}return!0})},a.messageIcon=function(e){switch(e.level){case La.INFO:return r.a.createElement($a.a,null);case La.WARNING:return r.a.createElement(en.a,null);case La.ERROR:return r.a.createElement(tn.a,null);default:return null}},a.messageColrName=function(e){switch(e.level){case La.INFO:return"primary.main";case La.WARNING:return"text.secondary";case La.ERROR:return"error.main";default:return""}},a}return Object(W.a)(t,e),t}(r.a.Component);an.defaultProps={messages:[],excludeCodes:[]};var nn=an,rn=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(F.a)(this,Object(H.a)(t).call(this,e))).interaction=function(){var e=a.props,t=e.signatureImporter,n=e.network,r=e.inputs,o=e.outputs,l=r.map(function(e){return t.bip32Path});return new La.HermitSignTransaction({network:n,inputs:r,outputs:o,bip32Paths:l})},a.render=function(){var e=a.props,t=e.signatureImporter,n=e.disableChangeMethod,o=e.resetBIP32Path,l=a.state,i=l.bip32PathError,c=l.signatureError,s=l.walletState,u=a.interaction();return s===La.UNSUPPORTED?r.a.createElement(nn,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}):r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:10},r.a.createElement(Pe.a,{name:"bip32Path",value:t.bip32Path,onChange:a.handleBIP32PathChange,disabled:s!==La.PENDING,error:a.hasBIP32PathError(),helperText:i})),r.a.createElement(T.a,{item:!0,md:2},!a.bip32PathIsDefault()&&r.a.createElement(B.a,{type:"button",variant:"contained",size:"small",onClick:o,disabled:s!==La.PENDING},"Default"))),r.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0,justify:"center"},r.a.createElement(T.a,{item:!0},r.a.createElement(Qa,{width:400,string:u.messageFor({code:"hermit.signature_request"}).encodedData}))),r.a.createElement(Za,{startText:"Scan Signature QR Code",interaction:u,onStart:n,onSuccess:a.import,onClear:a.clear}),r.a.createElement(nn,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}),r.a.createElement(ee.a,{error:!0},c)))},a.import=function(e){console.log("IMPORTED SIGNATURE:",e);var t=a.props,n=t.validateAndSetSignature,r=t.enableChangeMethod;a.setState({signatureError:""}),r(),n(e,function(e){a.setState({signatureError:e})})},a.clear=function(){var e=a.props,t=e.resetBIP32Path,n=e.enableChangeMethod;t(),a.setState({signatureError:""}),n()},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},function(e){a.setState({bip32PathError:e})})},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.state={bip32PathError:"",bip32PathFinalized:!1,signatureError:"",walletState:a.interaction(!0).isSupported()?La.PENDING:La.UNSUPPORTED},a}return Object(W.a)(t,e),t}(r.a.Component),on=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(F.a)(this,Object(H.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(e){var t,n,r=!e&&a.state.verified,o=a.props,l=o.signatureImporter,i=o.network,c=o.inputs,s=o.outputs,u=l.method;if(r){var d=c.map(function(e){return"undefined"===typeof e.bip32Path?l.bip32Path:"".concat(l.bip32Path).concat(e.bip32Path.slice(1))});return Object(La.HardwareWalletSignMultisigTransaction)({network:i,walletType:u,inputs:c,outputs:s,bip32Paths:d})}return t=l.bip32Path,"undefined"!==typeof c[0].bip32Path&&(n=c.map(function(e){return"".concat(l.bip32Path).concat(e.bip32Path.slice(1))})),Object(La.HardwareWalletExportPublicKey)({network:i,walletType:u,bip32Path:t,bip32Paths:n})},a.render=function(){var e=a.props.signatureImporter,t=a.state,n=t.verified,o=t.walletState,l=a.interaction();return o===La.UNSUPPORTED?r.a.createElement(ee.a,{error:!0},l.messageTextFor({walletState:o})):r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:10},r.a.createElement(Pe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:o!==La.PENDING||n,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),r.a.createElement(T.a,{item:!0,md:2},!a.bip32PathIsDefault()&&r.a.createElement(B.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:n||o!==La.PENDING},"Default"))),r.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),r.a.createElement(S.a,{mt:2},a.renderAction()),a.renderDeviceConfirmInfo(),r.a.createElement(nn,{messages:l.messagesFor({walletState:o}),excludeCodes:["bip32"]}))},a.renderDeviceConfirmInfo=function(){var e=a.props,t=e.fee,n=e.inputsTotalSats,o=a.state,l=o.verified,i=o.walletState;return l&&i===La.ACTIVE?r.a.createElement(S.a,null,r.a.createElement("p",null,"Your device will ask you to verify the following information:"),r.a.createElement(Ve.a,null,r.a.createElement(Ze.a,null,r.a.createElement(Je.a,{hover:!0},r.a.createElement(Qe.a,null),r.a.createElement(Qe.a,null,"Amount (BTC)"))),r.a.createElement($e.a,null,a.renderTargets(),r.a.createElement(Je.a,{hover:!0},r.a.createElement(Qe.a,null,"Fee"),r.a.createElement(Qe.a,null,t)),r.a.createElement(Je.a,{hover:!0},r.a.createElement(Qe.a,null,"Total"),r.a.createElement(Qe.a,null,Object(V.satoshisToBitcoins)(n).toString()))))):""},a.renderTargets=function(){return a.props.outputs.map(function(e,t){return r.a.createElement(Je.a,{hover:!0,key:t},r.a.createElement(Qe.a,null,"Address ",r.a.createElement("code",null,e.address)),r.a.createElement(Qe.a,null,e.amount))})},a.renderAction=function(){var e=a.state,t=e.verified,n=e.verifyError,o=e.signatureError,l=e.walletState;return t?r.a.createElement(T.a,{container:!0,alignItems:"center"},r.a.createElement(T.a,{item:!0,md:3},r.a.createElement(B.a,{variant:"contained",size:"large",color:"primary",onClick:a.sign,disabled:l!==La.PENDING},"Sign")),r.a.createElement(T.a,{item:!0,md:9},r.a.createElement(ee.a,{error:!0},o))):r.a.createElement(T.a,{container:!0,alignItems:"center"},r.a.createElement(T.a,{item:!0,md:3},r.a.createElement(B.a,{variant:"contained",size:"large",onClick:a.verify,color:"primary",disabled:l!==La.PENDING||a.hasBIP32PathError()},"Verify")),r.a.createElement(T.a,{item:!0,md:9},r.a.createElement(ee.a,{error:!0},n)))},a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:n,level:La.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:n,level:La.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.verify=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.disableChangeMethod,r=t.enableChangeMethod,n(),a.setState({verifyError:"",walletState:La.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:o=e.sent,a.verifyPublicKey(o),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({verifyError:e.t0.message,walletState:La.PENDING}),r();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.verifyPublicKey=function(e){for(var t=a.props,n=t.inputs,o=t.signatureImporters,l=t.enableChangeMethod,i="",c="string"===typeof e?[e]:e,s=0;s<n.length;s++){for(var u=n[s],d=void 0,p=0;p<c.length&&!((d=Object(V.multisigPublicKeys)(u.multisig).indexOf(c[p]))>-1);p++);if(d<0){i=r.a.createElement("span",null,r.a.createElement(tn.a,null),"\xa0 This device does not contain the correct key.  Are you sure the BIP32 path is correct?");break}for(var m=1;m<Object(V.multisigRequiredSigners)(u.multisig);m++){for(var h=o[m],E=0;E<h.publicKeys.length;E++){if(h.publicKeys[E]===e){i=r.a.createElement("span",null,r.a.createElement(tn.a,null),"A signature from this key was already imported.");break}}if(""!==i)break}if(""!==i)break}a.setState({verified:""===i,verifyError:i,walletState:La.PENDING}),l()},a.sign=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o,l;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.disableChangeMethod,r=t.validateAndSetSignature,o=t.enableChangeMethod,n(),a.setState({signatureError:"",walletState:La.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:l=e.sent,r(l,function(e){var t={signatureError:e};""!==e&&(t.walletState=La.PENDING),a.setState(t)}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({signatureError:e.t0.message,walletState:La.PENDING});case 14:o();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.state={verified:!1,verifyError:"",signatureError:"",bip32PathError:"",walletState:a.interaction(!0).isSupported()?La.PENDING:La.UNSUPPORTED},a}return Object(W.a)(t,e),t}(r.a.Component),ln=a(850),cn=a(851),sn=a(852),un=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={editing:!1,newName:"",error:""},a.componentDidMount=function(){var e=a.props.name;a.setState({newName:e})},a.render=function(){var e=a.props.name,t=a.state,n=t.editing,o=t.newName,l=t.error;return n?r.a.createElement(T.a,{container:!0,alignItems:"center"},r.a.createElement(T.a,{item:!0},r.a.createElement(Pe.a,{label:"Name",value:o,onChange:a.handleChange,error:a.hasError(),helperText:l})),r.a.createElement(T.a,{item:!0},r.a.createElement(q.a,{size:"small",onClick:a.submit,disabled:a.hasError()},r.a.createElement(ln.a,null))),r.a.createElement(T.a,{item:!0},r.a.createElement(q.a,{color:"secondary",size:"small",onClick:a.cancel},r.a.createElement(cn.a,null)))):r.a.createElement("span",null,r.a.createElement(q.a,{size:"small",onClick:a.startEditing},r.a.createElement(sn.a,null)),"\xa0",e)},a.hasError=function(){return""!==a.state.error},a.startEditing=function(e){var t=a.props.name;e.preventDefault(),a.setState({editing:!0,newName:t})},a.handleChange=function(e){var t=e.target.value,n="";null!==t&&void 0!==t&&""!==t||(n="Name cannot be blank."),a.setState({newName:t,error:n})},a.submit=function(){var e=a.props;(0,e.setName)(e.number,a.state.newName),a.setState({editing:!1})},a.cancel=function(){var e=a.props.name;a.setState({error:"",newName:e,editing:!1})},a}return Object(W.a)(t,e),t}(r.a.Component),dn=Se({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),pn=dn.setSignatureImporterName,mn=dn.setSignatureImporterMethod,hn=dn.setSignatureImporterBIP32Path,En=dn.setSignatureImporterPublicKeys,bn=dn.setSignatureImporterSignature,fn=dn.setSignatureImporterFinalized,vn=dn.setSignatureImporterComplete,gn="text",Pn=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).titleRef=r.a.createRef(),a.state={disableChangeMethod:!1,showUnsignedTransaction:!1},a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.props.number===a.getCurrent()&&a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.title=function(){var e=a.props,t=e.number,n=e.signatureImporter,o=e.setName;return r.a.createElement(un,{number:t,name:n.name,setName:o})},a.renderImport=function(){var e=a.props,t=e.signatureImporter,n=e.number,o=n>a.getCurrent(),l=a.state.disableChangeMethod,i="signature-".concat(n,"-importer-select-label");return o?r.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):r.a.createElement("form",null,r.a.createElement(Z.a,{fullWidth:!0},r.a.createElement(Fa.a,{id:i},"Select Method"),r.a.createElement(Ha.a,{labelId:i,id:"signature-".concat(n,"-importer-select"),disabled:l,value:t.method,onChange:a.handleMethodChange},r.a.createElement(Wa.a,{value:""},"< Select method >"),r.a.createElement(Wa.a,{value:La.TREZOR},"Trezor"),r.a.createElement(Wa.a,{value:La.LEDGER},"Ledger"),r.a.createElement(Wa.a,{value:La.HERMIT},"Hermit"),r.a.createElement(Wa.a,{value:gn},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.network,n=e.signatureImporter,o=e.signatureImporters,l=e.inputs,i=e.inputsTotalSats,c=e.outputs,s=e.fee;return n.method===gn?r.a.createElement(qa,{signatureImporter:n,validateAndSetSignature:a.validateAndSetSignature}):n.method===La.HERMIT?r.a.createElement(rn,{network:t,signatureImporter:n,inputs:l,outputs:c,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):n.method===La.TREZOR||n.method===La.LEDGER?r.a.createElement(on,{network:t,signatureImporter:n,signatureImporters:o,inputs:l,outputs:c,inputsTotalSats:i,fee:s,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number;(0,t.setMethod)(n,e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.renderUnsignedTransaction=function(){var e=a.state.showUnsignedTransaction,t=a.props.unsignedTransaction;if(e){var n=t.toHex();return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(Jt,{text:n},r.a.createElement("code",null,n))),r.a.createElement("small",null,r.a.createElement(B.a,{size:"small",onClick:a.handleHideUnsignedTransaction},"Hide Unsigned Transaction")))}return r.a.createElement("small",null,r.a.createElement(B.a,{size:"small",onClick:a.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},a.handleShowUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!0})},a.handleHideUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!1})},a.reset=function(){var e=a.props,t=e.number,n=e.setSignature,r=e.setPublicKeys,o=e.setFinalized;n(t,""),r(t,[]),o(t,!1)},a.defaultBIP32Path=function(){var e=a.props,t=e.addressType,n=e.network;return e.isWallet?Object(V.multisigBIP32Root)(t,n):Object(V.multisigBIP32Path)(t,n)},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.setBIP32Path)(t,a.defaultBIP32Path())},a.validateAndSetBIP32Path=function(e,t,n,r){var o=a.props,l=o.number,i=o.setBIP32Path,c=Object(V.validateBIP32Path)(e,r);i(l,e),c?n(c):(n(""),t())},a.renderSignature=function(){var e=a.props,t=e.signatureImporter,n=e.txid,o=JSON.stringify(t.signature);return r.a.createElement("div",null,r.a.createElement("p",null,"The following signature was imported:"),r.a.createElement(S.a,null,r.a.createElement(Jt,{text:o},r.a.createElement("small",null,r.a.createElement("code",null,o)))),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{variant:"contained",color:"secondary",disabled:""!==n,size:"small",onClick:a.reset},"Remove Signature")))},a.validateAndSetSignature=function(e,t){var n=a.props,r=n.number,o=n.inputs,l=n.signatureImporters,i=n.unsignedTransaction,c=n.setComplete;if(Array.isArray(e))if(e.length<o.length)t("Not enough signatures (must be exactly one for each input).");else if(e.length>o.length)t("Too many signatures (must be exactly one for each input).");else{for(var s=[],u=Object.values(l).filter(function(e){return e.finalized}),d=0;d<e.length;d+=1){var p=o[d],m=d+1,h=e[d];if(""!==Object(V.validateHex)(h))return void t("Signature for input ".concat(m," is not valid hex."));var E=void 0;try{E=Object(V.validateMultisigSignature)(i,d,p,h)}catch(v){return void t("Signature for input ".concat(m," is invalid."))}if(!E)return void t("Signature for input ".concat(m," is invalid."));for(var b=0;b<u.length;b++){var f=u[b];if(f.signature[d]===h||f.publicKeys[d]===E)return void t("Signature for input ".concat(m," is a duplicate of a previously provided signature."))}s.push(E)}c(r,{signature:e,publicKeys:s,finalized:!0})}else t("Signature is not an array of strings.")},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.signatureImporter;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:this.title(),ref:this.titleRef}),r.a.createElement(C.a,null,e.finalized?this.renderSignature():this.renderImport(),r.a.createElement(S.a,{mt:2},this.renderUnsignedTransaction())))}},{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce(function(t,a){return t+(e[a].finalized?1:0)},1)}}]),t}(r.a.Component);var yn={setName:pn,setMethod:mn,setBIP32Path:hn,setPublicKeys:En,setSignature:bn,setFinalized:fn,setComplete:vn},In=Object(c.b)(function(e,t){return Object(f.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid},e.spend.transaction)},yn)(Pn),Sn=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={error:"",broadcasting:!1,txid:""},a.buildSignedTransaction=function(){var e=a.props,t=e.unsignedTransaction,n=e.inputs,r=e.signatureImporters,o=[];return n.forEach(function(e,t){var a={};Object.values(r).forEach(function(e){var n=e.publicKeys[t],r=e.signature[t];a[n]=r}),o.push(a)}),Object(V.signedMultisigTransaction)(t,n,o)},a.handleBroadcast=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o,l,i,c;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.client,r=t.network,o=t.setTxid,l=a.buildSignedTransaction(),i="",c="",a.setState({broadcasting:!0}),e.prev=5,e.next=8,Ye(l.toHex(),r,n);case 8:c=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),i="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,a.setState({txid:c,error:i,broadcasting:!1}),o(c),e.finish(15);case 19:case"end":return e.stop()}},e,null,[[5,11,15,19]])})),a.transactionURL=function(){var e=a.props.network,t=a.state.txid;return Object(V.blockExplorerTransactionURL)(t,e)},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.broadcasting,n=e.txid,o=this.buildSignedTransaction(),l=o.toHex();return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Broadcast"}),r.a.createElement(C.a,null,r.a.createElement("form",null,o&&r.a.createElement(S.a,{mt:4},r.a.createElement(O.a,{variant:"h6"},"Signed Transaction"),r.a.createElement(Jt,{text:l},r.a.createElement("small",null,r.a.createElement("code",null,l)))),""===n?r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{variant:"contained",color:"primary",disabled:!o||a,onClick:this.handleBroadcast},"Broadcast Transaction"),r.a.createElement(ee.a,{error:!0},t),r.a.createElement("small",null,r.a.createElement(ee.a,null,"Warning: Broadcasting this transaction cannot be undone."))):r.a.createElement(S.a,{mt:2},r.a.createElement(O.a,{variant:"h5"},r.a.createElement(Jt,{text:n},r.a.createElement("code",null,n)),"\xa0",P(this.transactionURL(),r.a.createElement(ca.a,null))),r.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),t}(r.a.Component);var On={setTxid:function(e){return{type:kt,value:e}}},Tn=Object(c.b)(function(e){return Object(f.a)({network:e.settings.network,client:e.client},e.client,{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,unsignedTransaction:e.spend.transaction.unsignedTransaction})},On)(Sn),wn=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={selection:0},a.render=function(){var e=a.state.selection;return r.a.createElement("div",null,a.renderKeySelectorMenu(),e>0&&a.renderSignatureImporter())},a.renderSignatureImporter=function(){var e=a.props.number;return r.a.createElement(S.a,{mt:2},r.a.createElement(In,{number:e}))},a.renderKeySelectorMenu=function(){var e=a.props.number,t=a.state.selection,n="keySelector".concat(e);return r.a.createElement("form",null,r.a.createElement(Z.a,{fullWidth:!0},r.a.createElement(Fa.a,{id:n},"Select Key"),r.a.createElement(Ha.a,{labelId:n,id:"signature-".concat(e,"-key-select"),value:t,onChange:a.handleKeyChange},r.a.createElement(Wa.a,{value:""},"< Select Extended Public Key >"),a.renderKeySelectorMenuItems())))},a.renderKeySelectorMenuItems=function(){for(var e=a.props,t=e.extendedPublicKeyImporters,n=e.totalSigners,o=[],l=1;l<=n;l++){var i=t[l];o.push(r.a.createElement(Wa.a,{value:l,key:l},i.name))}return o},a.handleKeyChange=function(e){var t=a.props,n=t.extendedPublicKeyImporters,r=t.setBIP32Path,o=t.setMethod,l=t.number,i=n[e.target.value],c=i.method;a.setState({selection:e.target.value}),"trezor"!==c&&"ledger"!==c||(o(l,c),setTimeout(function(){r(l,i.bip32Path)},0))},a}return Object(W.a)(t,e),t}(r.a.Component);var jn={setBIP32Path:hn,setMethod:mn},Cn=Object(c.b)(function(e){return Object(f.a)({},e.quorum,{totalSigners:e.spend.transaction.totalSigners})},jn)(wn),xn=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={spent:!1},a.render=function(){return r.a.createElement(S.a,null,r.a.createElement(B.a,{variant:"contained",color:"secondary",onClick:a.handleCancel},"Cancel"),a.renderKeySelectors(),a.signaturesFinalized()&&r.a.createElement(S.a,{mt:2},r.a.createElement(Tn,null)),(a.transactionFinalized()||a.state.spent)&&r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:a.handleReturn},"Return"))},a.renderKeySelectors=function(){for(var e=a.props.requiredSigners,t=[],n=1;n<=e;n++)t.push(r.a.createElement(S.a,{key:n,mt:2},r.a.createElement(Cn,{number:n})));return t},a.renderSignatureImporters=function(){for(var e=a.props.transaction,t=[],n=1;n<=e.requiredSigners;n++)t.push(r.a.createElement(S.a,{key:n,mt:2},r.a.createElement(In,{number:n})));return t},a.signaturesFinalized=function(){var e=a.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},a.transactionFinalized=function(){var e=a.props,t=e.transaction,n=e.spendNodes,r=e.getChangeNode,o=e.updateChangeNode;if(""!==t.txid&&!a.state.spent){a.setState({spent:!0});for(var l=r(),i=l.multisig.address,c=0;c<t.outputs.length;c++)if(i===t.outputs[c].address){o({bip32Path:l.bip32Path,balanceSats:t.outputs[c].amountSats});break}return n(),!0}return!1},a.handleReturn=function(){var e=a.props,t=e.resetTransaction,n=e.resetWalletView;t(),n()},a.handleCancel=function(){var e=a.props,t=e.finalizeOutputs,n=e.requiredSigners;(0,e.setRequiredSigners)(n),t(!1)},a}return Object(W.a)(t,e),t}(r.a.Component);var kn,Kn={finalizeOutputs:zt,setRequiredSigners:Bt,spendNodes:function(){return{type:dt}},resetTransaction:function(){return{type:Kt}},resetWalletView:ft,updateChangeNode:mt},Nn=Object(c.b)(function(e){return Object(f.a)({},e.wallet,e.spend,e.quorum,{requiredSigners:e.spend.transaction.requiredSigners,totalSigners:e.spend.transaction.totalSigners})},Kn)(xn),Rn=a(121),Bn=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={outputsAmount:new g.a(0),feeAmount:new g.a(0)},a.renderSpend=function(){var e=a.props,t=e.addNode,n=e.updateNode,o=e.autoSpend;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Spend"}),r.a.createElement(C.a,null,r.a.createElement(T.a,{item:!0,md:12},r.a.createElement(T.a,{component:"label",container:!0,alignItems:"center",spacing:1},r.a.createElement(T.a,{item:!0},"Manual"),r.a.createElement(T.a,{item:!0},r.a.createElement(ge.a,{checked:o,onChange:a.handleSpendMode})),r.a.createElement(T.a,{item:!0},"Auto"))),r.a.createElement(ja,{addNode:t,updateNode:n})))},a.handleSpendMode=function(e){var t=a.props.updateAutoSpend;e.target.checked,t(e.target.checked)},a.selectCoins=function(){var e=a.props,t=e.outputs,n=e.setInputs,r=e.fee,o=e.depositNodes,l=e.changeNodes,i=e.feeRate,c=e.updateChangeNode,s=e.updateDepositNode,u=e.resetNodesSpend,d=e.setFeeRate,p=e.coinSelection,m=t.reduce(function(e,t){return e.plus(t.amountSats)},new g.a(0));if(!m.isNaN()){var h=Object(Rn.bitcoinsToSatoshis)(new g.a(r));if(!m.isEqualTo(a.state.outputsAmount)||!h.isEqualTo(a.state.feeAmount)){var E=m.plus(h),b=Object.values(o).concat(Object.values(l)).filter(function(e){return e.balanceSats.isGreaterThan(0)});u();var f=p(b,E);f.forEach(function(e){(e.change?c:s)({bip32Path:e.bip32Path,spend:!0})}),a.setState({outputsAmount:m,feeAmount:h}),n(f),d(i)}}},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.autoSpend&&(kn&&clearTimeout(kn),kn=setTimeout(this.selectCoins,1e3))}},{key:"componentWillUnmount",value:function(){kn&&clearTimeout(kn)}},{key:"render",value:function(){var e=this.props.finalizedOutputs;return r.a.createElement(S.a,null,r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:12},r.a.createElement(za,null)),r.a.createElement(T.a,{item:!0,md:12},r.a.createElement(S.a,{mt:2},e?r.a.createElement(Nn,null):this.renderSpend()))))}}]),t}(r.a.Component);var _n={updateAutoSpend:ht,setInputs:_t,updateChangeNode:mt,updateDepositNode:pt,setAddress:Mt,resetNodesSpend:function(){return{type:rt}},setFeeRate:Ut,addOutput:At},An=Object(c.b)(function(e){return Object(f.a)({},e.spend.transaction,{changeNodes:e.wallet.change.nodes,changeNode:e.wallet.change.nextNode,depositNodes:e.wallet.deposits.nodes,autoSpend:e.wallet.info.autoSpend})},_n)(Bn),Mn=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props,t=e.addNode,n=e.updateNode;return r.a.createElement(ja,{addNode:t,updateNode:n,canLoad:!0})},a}return Object(W.a)(t,e),t}(r.a.Component);var Dn={setDepositing:Et,setSpending:bt},Un=Object(c.b)(function(e){return Object(f.a)({},e.wallet)},Dn)(Mn),zn="SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",Ln=Se({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"}),Fn=Ln.setExtendedPublicKeyImporterName,Hn=Ln.setExtendedPublicKeyImporterBIP32Path,Wn=Ln.resetExtendedPublicKeyImporterBIP32Path,qn=Ln.setExtendedPublicKeyImporterMethod,Gn=Ln.setExtendedPublicKeyImporterExtendedPublicKey,Xn=Ln.setExtendedPublicKeyImporterFinalized;var Yn=20,Vn=5,Zn=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={generating:!1},a.title=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,o=e.addressType;return r.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",n,"-of-",t," ",o," Multisig Wallet",r.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(a.extendedPublicKeyCount(),"/").concat(t)))},a.extendedPublicKeyCount=function(){var e=a.props.extendedPublicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},a.renderModeComponent=function(){var e=a.props,t=e.depositing,n=e.spending,o=e.viewAddresses;return t?r.a.createElement(ta,null):n?r.a.createElement(An,{addNode:a.addNode,updateNode:a.updateNode,coinSelection:I}):o?r.a.createElement(Un,{addNode:a.addNode,updateNode:a.updateNode}):""},a.downloadWalletDetails=function(e){e.preventDefault(),y(a.walletDetailsText(),a.walletDetailsFilename())},a.walletDetailsText=function(){var e=a.props,t=e.addressType,n=e.network,r=e.totalSigners,o=e.requiredSigners,l=e.walletName;return"Wallet: ".concat(l,"\n\nType: ").concat(t,"\n\nNetwork: ").concat(n,"\n\nQuorum: ").concat(o,"-of-").concat(r,"\n\nBIP32 Paths:\n").concat(a.extendedPublicKeyImporterBIP32Paths(),"\n")},a.extendedPublicKeyImporterBIP32Paths=function(){for(var e=a.props.totalSigners,t=[],n=1;n<=e;n++)t.push(a.extendedPublicKeyImporterBIP32Path(n));return t.join("\n")},a.extendedPublicKeyImporterBIP32Path=function(e){var t=a.props.extendedPublicKeyImporters[e],n="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(n)},a.walletDetailsFilename=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,r=e.addressType,o=e.walletName;return"bitcoin-".concat(n,"-of-").concat(t,"-").concat(r,"-").concat(o,".txt")},a.toggleImporters=function(){var e=a.props;(0,e.setImportersVisible)(!e.configuring)},a.generate=function(){(0,a.props.freeze)(!0),a.setState({generating:!0}),a.addNode(!1,"m/0/0",!0),a.addNode(!0,"m/1/0",!0)},a.updateNode=function(e,t){var n=a.props,r=n.updateChangeNode,o=n.updateDepositNode;(e?r:o)(t)},a.addNode=function(){var e=Object(Ce.a)(je.a.mark(function e(t,n,r){var o;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.generateMultisig(t,n,r);case 2:o=e.sent,a.updateNode(t,Object(f.a)({bip32Path:n},o));case 4:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.generateMultisig=function(){var e=Object(Ce.a)(je.a.mark(function e(t,n,r){var o,l,i,c,s,u,d,p,m,h,E,b;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=a.props,l=o.extendedPublicKeyImporters,i=o.totalSigners,c=o.network,s=o.addressType,u=o.requiredSigners,d=[],p=1;p<=i;p++)m=l[p],h=Object(V.deriveChildPublicKey)(m.extendedPublicKey,n,c),d.push(h);return d.sort(),E=V.generateMultisigFromPublicKeys.apply(void 0,[c,s,u].concat(d)),e.next=7,a.fetchUTXOs(t,E,r);case 7:return b=e.sent,e.abrupt("return",Object(f.a)({multisig:E},b));case 9:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.fetchUTXOs=function(){var e=Object(Ce.a)(je.a.mark(function e(t,n,r){var o,l,i,c,s,u,d;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.props,l=o.network,i=o.client,u={},e.prev=2,e.next=5,qe(n.address,l,i);case 5:return c=e.sent,e.next=8,Ge(n.address,l,i);case 8:s=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0,e.t0.response),"private"===i.type&&Me(e.t0)?(s={used:!1},u={utxos:[],balanceSats:g()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}):u={fetchUTXOsError:e.t0.toString()};case 15:return c&&(d=c.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new g.a(0)),u=Object(f.a)({},u,{balanceSats:d,utxos:c,fetchedUTXOs:!0,fetchUTXOsError:""})),s&&(u=Object(f.a)({},u,{addressUsed:s.used})),r&&setTimeout(function(){return a.generateNextNodeIfNecessary(t)}),e.abrupt("return",u);case 19:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,a,n){return e.apply(this,arguments)}}(),a.generateNextNodeIfNecessary=function(e){var t=a.props,n=t.change,r=t.deposits,o=(e?n:r).trailingEmptyNodes,l=(e?n:r).fetchUTXOsErrors,i=Object.keys((e?n:r).nodes);if(!(o>=Yn||l>=Vn)){i.sort(function(e,t){var a=(e||"").split("/"),n=(t||"").split("/");return parseInt(a[2])-parseInt(n[2])});var c=(i[i.length-1]||"").split("/"),s=parseInt(c[2]),u="m/".concat(c[1],"/").concat(s+1);setTimeout(function(){return a.addNode(e,u,!0)})}},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(j.a,{title:this.title()}),r.a.createElement(C.a,null,this.body())),r.a.createElement(S.a,{mt:2},this.renderModeComponent()))}},{key:"componentDidMount",value:function(){(0,this.props.setIsWallet)()}},{key:"body",value:function(){var e=this.props,t=e.totalSigners,a=e.configuring,n=this.state.generating;return this.extendedPublicKeyCount()===t?n?r.a.createElement("div",null,r.a.createElement(Ht,null)):r.a.createElement("div",null,r.a.createElement(B.a,{type:"button",variant:"contained",color:"secondary",onClick:this.toggleImporters},a?"Hide Key Selection":"Edit Details"),r.a.createElement(tt,null),r.a.createElement("p",null,"You have imported all ",t," extended public keys.  You will need to save this information."),r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:this.downloadWalletDetails},"Download Wallet Details"),r.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),r.a.createElement(B.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate},"Confirm")):r.a.createElement("p",null,"Once you have imported all ".concat(t," extended public keys, "),"your wallet will be generated here.")}}]),t}(r.a.Component);var Jn={freeze:le,updateDepositNode:pt,updateChangeNode:mt,updateAutoSpned:ht,setImportersVisible:function(e){return{type:zn,value:e}},setIsWallet:function(){return{type:Nt}}},Qn=Object(c.b)(function(e){return Object(f.a)({},e.settings,{client:e.client},e.quorum,e.wallet,e.wallet.info)},Jn)(Zn),$n="m/0",er=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.setBIP32PathToDefault()},a.state={error:"",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},a.render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state,n=t.error,o=t.extendedPublicKey,l=t.extendedPublicKeyError,i=t.bip32PathError;return r.a.createElement("div",null,r.a.createElement(S.a,{mt:2},r.a.createElement(Pe.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:o,onChange:a.handleExtendedPublicKeyChange,error:a.hasExtendedPublicKeyError(),helperText:l})),r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:10},r.a.createElement(Pe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,error:a.hasBIP32PathError(),helperText:i}),r.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),r.a.createElement(T.a,{item:!0,md:2},!a.bip32PathIsDefault()&&r.a.createElement(B.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path},"Default"))),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===o||a.hasError()},"Import Extended Public Key"))),r.a.createElement(ee.a,{className:"text-danger"},n))},a.import=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter,r=e.validateAndSetExtendedPublicKey,o=a.state.extendedPublicKey;r(Object(V.deriveChildExtendedPublicKey)(o,n.bip32Path,t),function(e){a.setState({error:e})})},a.setBIP32PathToDefault=function(){(0,a.props.validateAndSetBIP32Path)($n,function(){},function(){})},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.hasExtendedPublicKeyError=function(){return""!==a.state.extendedPublicKeyError},a.hasError=function(){return a.hasBIP32PathError()||a.hasExtendedPublicKeyError()},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError,{mode:"unhardened"})},a.bip32PathIsDefault=function(){return a.props.extendedPublicKeyImporter.bip32Path===$n},a.resetBIP32Path=function(){a.setBIP32PathToDefault(),a.setBIP32PathError("")},a.handleExtendedPublicKeyChange=function(e){var t=a.props,n=t.network,r=t.extendedPublicKeyImporters,o=e.target.value,l=Object(V.validateExtendedPublicKey)(o,n);""===l&&Object.values(r).find(function(e){return e.extendedPublicKey===o})&&(l="This extended public key has already been imported."),a.setState({extendedPublicKey:o,extendedPublicKeyError:l})},a}return Object(W.a)(t,e),t}(r.a.Component),tr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={error:""},a.render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state.error;return r.a.createElement(S.a,{mt:2},r.a.createElement(Pe.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:a.handleChange,error:a.hasError(),helperText:t}))},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){(0,a.props.validateAndSetExtendedPublicKey)(e.target.value,a.setError)},a}return Object(W.a)(t,e),t}(r.a.Component),ar=a(765),nr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={extendedPublicKeyError:"",walletState:La.PENDING},a.componentDidMount=function(){(0,a.props.resetBIP32Path)()},a.interaction=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter;return new La.HermitExportExtendedPublicKey({network:t,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.disableChangeMethod,t=a.state.extendedPublicKeyError;return r.a.createElement(ar.a,null,r.a.createElement(Za,{startText:"Import Extended Public Key",interaction:a.interaction(),onStart:e,onSuccess:a.import,onClear:a.onClear}),r.a.createElement(ee.a,{className:"text-danger"},t))},a.setError=function(e){a.setState({error:e})},a.import=function(e){var t=a.props,n=t.validateAndSetBIP32Path,r=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var o=e.xpub;n(e.bip32_path,function(){r(o,a.setError)},a.setError)},a.onClear=function(){var e=a.props,t=e.reset,n=e.enableChangeMethod;t(!0),a.setError(""),n()},a}return Object(W.a)(t,e),t}(r.a.Component),rr=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(F.a)(this,Object(H.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter;return Object(La.HardwareWalletExportExtendedPublicKey)({network:t,walletType:n.method,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state,n=t.walletState,o=t.extendedPublicKeyError,l=a.interaction();return n===La.UNSUPPORTED?r.a.createElement(ee.a,{className:"text-danger"},l.messageTextFor({walletState:n})):r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:6},r.a.createElement(Pe.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:n!==La.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),r.a.createElement(T.a,{item:!0,md:6},!a.bip32PathIsDefault()&&r.a.createElement(B.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:n!==La.PENDING},"Default"))),r.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:a.hasBIP32PathError()||n===La.ACTIVE},"Import Extended Public Key")),r.a.createElement(nn,{messages:l.messagesFor({walletState:n}),excludeCodes:["bip32"]}),r.a.createElement(ee.a,{className:"text-danger"},o))},a.import=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.validateAndSetExtendedPublicKey,r=t.enableChangeMethod,(0,t.disableChangeMethod)(),a.setState({extendedPublicKeyError:"",walletState:La.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:o=e.sent,n(o,function(e){a.setState({extendedPublicKeyError:e,walletState:La.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({extendedPublicKeyError:e.t0.message,walletState:La.PENDING});case 14:r();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:n,level:La.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:n,level:La.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.extendedPublicKeyImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.state={extendedPublicKeyError:"",bip32PathError:"",walletState:a.interaction().isSupported()?La.PENDING:La.UNSUPPORTED},a}return Object(W.a)(t,e),t}(r.a.Component),or=function(e){return r.a.createElement("small",null,r.a.createElement(x.a,null,r.a.createElement(k.a,{color:"error.main"},r.a.createElement(K.a,null,r.a.createElement(O.a,{color:"error"},r.a.createElement(en.a,null))),r.a.createElement(N.a,null,r.a.createElement(O.a,{color:"error"},e.message)))))},lr="xpub",ir="text",cr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={disableChangeMethod:!1},a.title=function(){var e=a.props,t=e.number,n=e.extendedPublicKeyImporter,o=e.setName;return r.a.createElement(un,{number:t,name:n.name,setName:o})},a.renderImport=function(){var e=a.props,t=e.extendedPublicKeyImporter,n=e.number,o=a.state.disableChangeMethod,l="xpub-".concat(n,"-importer-select-label");return r.a.createElement("div",null,r.a.createElement(Z.a,{fullWidth:!0},r.a.createElement(Fa.a,{id:l},"Select Method"),r.a.createElement(Ha.a,{labelId:l,id:"public-key-".concat(n,"-importer-select"),disabled:o,value:t.method,onChange:a.handleMethodChange},r.a.createElement(Wa.a,{value:""},"< Select method >"),r.a.createElement(Wa.a,{value:La.TREZOR},"Trezor"),r.a.createElement(Wa.a,{value:La.LEDGER},"Ledger"),r.a.createElement(Wa.a,{value:La.HERMIT},"Hermit"),r.a.createElement(Wa.a,{value:lr},"Derive from extended public key"),r.a.createElement(Wa.a,{value:ir},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.extendedPublicKeyImporters,n=e.extendedPublicKeyImporter,o=e.network,l=e.addressType,i=e.defaultBIP32Path;return n.method===La.TREZOR||n.method===La.LEDGER?r.a.createElement(rr,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,addressType:l,defaultBIP32Path:i,network:o}):n.method===La.HERMIT?r.a.createElement(nr,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,resetBIP32Path:a.resetBIP32Path,reset:a.reset}):n.method===lr?r.a.createElement(er,{extendedPublicKeyImporter:n,extendedPublicKeyImporters:t,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,network:o,validateAndSetBIP32Path:a.validateAndSetBIP32Path}):n.method===ir?r.a.createElement(tr,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number,r=t.setMethod,o=t.setExtendedPublicKey;r(n,e.target.value),o(n,"")},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.finalize=function(){var e=a.props,t=e.number;(0,e.setFinalized)(t,!0)},a.reset=function(e){var t=a.props,n=t.number,r=t.setExtendedPublicKey,o=t.setFinalized;r(n,""),o(n,!1),e&&a.resetBIP32Path()},a.moveUp=function(e){var t=a.props,n=t.moveUp,r=t.number;e.preventDefault(),n(r)},a.moveDown=function(e){var t=a.props,n=t.moveDown,r=t.number;e.preventDefault(),n(r)},a.renderBIP32Path=function(){var e=a.props.extendedPublicKeyImporter;return e.method===ir?r.a.createElement("div",{className:"mt-4"},r.a.createElement("p",null,"Make sure you ",r.a.createElement("strong",null,"record the corresponding BIP32 path."))):r.a.createElement("div",{className:"mt-4"},r.a.createElement("p",null,"The BIP32 path for this extended public key is:"),r.a.createElement("div",{className:"text-center"},r.a.createElement(Jt,{text:e.bip32Path},r.a.createElement("code",null,e.bip32Path))),r.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later.  ",r.a.createElement("strong",null,"Write down this BIP32 path!")))},a.validateAndSetBIP32Path=function(e,t,n,r){var o=a.props,l=o.number,i=o.setBIP32Path,c=Object(V.validateBIP32Path)(e,r);i(l,e),c?n(c):(n(""),t())},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.resetBIP32Path)(t)},a.renderExtendedPublicKey=function(){var e=a.props.extendedPublicKeyImporter;return r.a.createElement("div",null,r.a.createElement("p",null,"The following extended public key was imported:"),r.a.createElement("div",{className:"text-center"},r.a.createElement(Jt,{text:e.extendedPublicKey},r.a.createElement("small",null,r.a.createElement("code",null,e.extendedPublicKey)))),a.renderBIP32Path(),r.a.createElement(B.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){a.reset(e.method===La.HERMIT)}},"Remove Extended Public Key"))},a.validateAndSetExtendedPublicKey=function(e,t,n){var r=a.props,o=r.number,l=r.network,i=r.extendedPublicKeyImporters,c=r.setExtendedPublicKey,s=Object(V.validateExtendedPublicKey)(e,l);c(o,e),s?t(s):e&&Object.values(i).find(function(t,a){return a!==o-1&&t.extendedPublicKey===e})?t("This extended public key has already been imported."):(t(""),a.finalize(),n&&n())},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,a=e.finalizedNetwork,n=e.network,o=t.method&&t.method!==ir&&t.conflict,l="";return o&&(l=a!==n?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),r.a.createElement(w.a,null,r.a.createElement(j.a,{title:this.title()}),r.a.createElement(C.a,null,o&&r.a.createElement(or,{message:l}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),t}(r.a.Component);var sr={setName:Fn,resetBIP32Path:Wn,setBIP32Path:Hn,setMethod:qn,setExtendedPublicKey:Gn,setFinalized:Xn},ur=Object(c.b)(function(e,t){return Object(f.a)({},e.settings,e.quorum,{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})},sr)(cr),dr=a(247),pr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={showSettings:!1},a.render=function(){var e=a.props,t=e.configuring,n=e.walletName,o=e.setName,l=e.deposits;return r.a.createElement("div",null,r.a.createElement("h1",null,!Object.values(l.nodes).length&&r.a.createElement(un,{number:0,name:n,setName:o}),Object.values(l.nodes).length>0&&r.a.createElement("span",null,n)),r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0,spacing:3},r.a.createElement(T.a,{item:!0,md:t?8:12},a.renderExtendedPublicKeyImporters(),r.a.createElement(S.a,{mt:2},r.a.createElement(Qn,null))),a.renderSettings())))},a.renderSettings=function(){return a.props.configuring?r.a.createElement(T.a,{item:!0,md:4},r.a.createElement(S.a,null,r.a.createElement(Ee,null)),r.a.createElement(S.a,{mt:2},r.a.createElement(ve,null)),r.a.createElement(S.a,{mt:2},r.a.createElement(se,null)),r.a.createElement(S.a,{mt:2},r.a.createElement(Te,null))):r.a.createElement("div",null,r.a.createElement(S.a,{position:"fixed",right:10},r.a.createElement(q.a,{onClick:a.toggleDrawer},r.a.createElement(X.a,null))),r.a.createElement(G.a,{md:4,anchor:"right",open:a.state.showSettings,onClose:a.toggleDrawer},r.a.createElement(S.a,{width:400},r.a.createElement(S.a,{mt:2},r.a.createElement(Te,null)))))},a.toggleDrawer=function(){a.setState({showSettings:!a.state.showSettings})},a.renderExtendedPublicKeyImporters=function(){for(var e=a.props,t=e.totalSigners,n=e.configuring,o=[],l=1;l<=t;l++)o.push(r.a.createElement(S.a,{key:l,mt:1===l?0:2,display:n?"block":"none"},r.a.createElement(ur,{key:l,number:l})));return o},a}return Object(W.a)(t,e),t}(r.a.Component);pr.defaultProps={bip32:dr};var mr={setName:function(e,t){return{type:st,value:t}}},hr=Object(c.b)(function(e){return Object(f.a)({},{totalSigners:e.settings.totalSigners},e.quorum,{walletName:e.wallet.info.walletName},e.wallet)},mr)(pr),Er="SORT_PUBLIC_KEY_IMPORTERS",br="UPDATE_MULTISIG_ADDRESS";var fr=Se({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),vr=fr.setPublicKeyImporterName,gr=fr.setPublicKeyImporterBIP32Path,Pr=fr.resetPublicKeyImporterBIP32Path,yr=fr.setPublicKeyImporterMethod,Ir=fr.setPublicKeyImporterPublicKey,Sr=fr.setPublicKeyImporterFinalized,Or=fr.movePublicKeyImporterUp,Tr=fr.movePublicKeyImporterDown,wr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).title=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,o=e.addressType;return r.a.createElement(T.a,{container:!0,justify:"space-between"},r.a.createElement(T.a,{item:!0},n,"-of-",t," Multisig ",o," Address"),r.a.createElement(T.a,{item:!0},r.a.createElement("small",null,"Public Keys: ".concat(a.publicKeyCount(),"/").concat(t))))},a.isInConflict=function(){var e=a.props.publicKeyImporters;return Object.values(e).some(function(e){return e.conflict})},a.publicKeyCount=function(){var e=a.props.publicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},a.publicKeysAreCanonicallySorted=function(){var e=a.props.publicKeyImporters,t=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}),n=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}).sort();return t.filter(function(e,t){return e===n[t]}).length===t.length},a.canonicallySortPublicKeys=function(){(0,a.props.sortPublicKeyImporters)()},a.generateMultisig=function(){for(var e=a.props,t=e.network,n=e.publicKeyImporters,r=e.totalSigners,o=e.requiredSigners,l=e.addressType,i=e.setMultisigAddress,c=[],s=1;s<=r;s++)c.push(n[s].publicKey);var u=V.generateMultisigFromPublicKeys.apply(void 0,[t,l,o].concat(c));return i(u.address),u},a.downloadAddressDetails=function(e){e.preventDefault();var t=a.generateMultisig();y(a.addressDetailsText(t),a.addressDetailsFilename(t))},a.addressDetailsFilename=function(e){var t=a.props,n=t.totalSigners,r=t.requiredSigners,o=t.addressType;return"bitcoin-".concat(r,"-of-").concat(n,"-").concat(o,"-").concat(e.address,".txt")},a.addressDetailsText=function(e){var t=a.props,n=t.addressType,r=t.network,o=t.totalSigners,l=t.requiredSigners,i=Object(V.multisigRedeemScript)(e),c=Object(V.multisigWitnessScript)(e),s=i?"Redeem Script: ".concat(Object(V.scriptToHex)(i)):"",u=c?"Witness Script: ".concat(Object(V.scriptToHex)(c)):"",d=i&&c?"\n\n":"";return"Address: ".concat(e.address,"\n\nType: ").concat(n,"\n\nNetwork: ").concat(r,"\n\nQuorum: ").concat(l,"-of-").concat(o,"\n\nBIP32 Paths:\n").concat(a.publicKeyImporterBIP32Paths(),"\n\n").concat(s).concat(d).concat(u,"\n")},a.publicKeyImporterBIP32Paths=function(){for(var e=a.props.totalSigners,t=[],n=1;n<=e;n++)t.push(a.publicKeyImporterBIP32Path(n));return t.join("\n")},a.publicKeyImporterBIP32Path=function(e){var t=a.props.publicKeyImporters[e],n="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(n)},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:this.title()}),r.a.createElement(C.a,null,this.body()))}},{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),a=this.publicKeysAreCanonicallySorted();return r.a.createElement("div",null,this.isInConflict()&&r.a.createElement(or,null),!a&&r.a.createElement(T.a,{container:!0,justify:"space-between"},r.a.createElement(T.a,{item:!0,md:8},r.a.createElement(ee.a,{error:!0},"WARNING: These public keys are not in the standard ",P("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),r.a.createElement(T.a,{item:!0,md:4},r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),r.a.createElement(S.a,{mt:2},r.a.createElement(ga,{multisig:t})),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return r.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}}]),t}(r.a.Component);var jr={sortPublicKeyImporters:function(){return{type:Er}},setMultisigAddress:function(e){return{type:br,value:e}}},Cr=Object(c.b)(function(e){return Object(f.a)({},e.settings,e.address)},jr)(wr),xr=a(854),kr=a(855),Kr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={error:"",publicKey:""},a.render=function(){var e=a.state,t=e.error,n=e.publicKey;return r.a.createElement(S.a,{mt:2},r.a.createElement(Pe.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:n,onChange:a.handleChange,error:a.hasError(),helperText:t}),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===n||a.hasError()},"Add Public Key")))},a.import=function(){(0,a.props.validateAndSetPublicKey)(a.state.publicKey,a.setError)},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,n=Object(V.validatePublicKey)(t);a.setState({publicKey:t,error:n})},a}return Object(W.a)(t,e),t}(r.a.Component),Nr="m/0",Rr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.setBIP32PathToDefault()},a.state={extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,n=t.extendedPublicKey,o=t.extendedPublicKeyError,l=t.bip32PathError;return r.a.createElement("div",null,r.a.createElement(S.a,{mt:2},r.a.createElement(Pe.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:n,onChange:a.handleExtendedPublicKeyChange,error:a.hasExtendedPublicKeyError(),helperText:o})),r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:10},r.a.createElement(Pe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,error:a.hasBIP32PathError(),helperText:l}),r.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),r.a.createElement(T.a,{item:!0,md:2},!a.bip32PathIsDefault()&&r.a.createElement(B.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path},"Default"))),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===n||a.hasError()},"Import Public Key"))))},a.import=function(){var e=a.props,t=e.network,n=e.publicKeyImporter,r=e.validateAndSetPublicKey,o=a.state.extendedPublicKey;r(Object(V.deriveChildPublicKey)(o,n.bip32Path,t),function(e){return a.setState({bip32PathError:e})})},a.setBIP32PathToDefault=function(){(0,a.props.validateAndSetBIP32Path)(Nr,function(){},function(){})},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.hasExtendedPublicKeyError=function(){return""!==a.state.extendedPublicKeyError},a.hasError=function(){return a.hasBIP32PathError()||a.hasExtendedPublicKeyError()},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError,{mode:"unhardened"})},a.bip32PathIsDefault=function(){return a.props.publicKeyImporter.bip32Path===Nr},a.resetBIP32Path=function(){a.setBIP32PathToDefault(),a.setBIP32PathError("")},a.handleExtendedPublicKeyChange=function(e){var t=a.props.network,n=e.target.value,r=Object(V.validateExtendedPublicKey)(n,t);a.setState({extendedPublicKey:n,extendedPublicKeyError:r})},a}return Object(W.a)(t,e),t}(r.a.Component),Br=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={publicKeyError:"",walletState:La.PENDING},a.componentDidMount=function(){(0,a.props.resetBIP32Path)()},a.interaction=function(){var e=a.props,t=e.network,n=e.publicKeyImporter;return new La.HermitExportPublicKey({network:t,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.disableChangeMethod,t=a.state.publicKeyError;return r.a.createElement(ar.a,null,r.a.createElement(Za,{startText:"Import Public Key",interaction:a.interaction(),onStart:e,onSuccess:a.import,onClear:a.onClear}),r.a.createElement(ee.a,{error:!0},t))},a.setError=function(e){a.setState({publicKeyError:e})},a.import=function(e){var t=a.props,n=t.validateAndSetBIP32Path,r=t.validateAndSetPublicKey;(0,t.enableChangeMethod)();var o=e.pubkey;n(e.bip32_path,function(){r(o,a.setError)},a.setError)},a.onClear=function(){var e=a.props,t=e.reset,n=e.enableChangeMethod;t(!0),a.setError(""),n()},a}return Object(W.a)(t,e),t}(r.a.Component),_r=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(F.a)(this,Object(H.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.network,n=e.publicKeyImporter;return Object(La.HardwareWalletExportPublicKey)({network:t,walletType:n.method,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,n=t.walletState,o=t.publicKeyError,l=a.interaction();return n===La.UNSUPPORTED?r.a.createElement(ee.a,{error:!0},l.messageTextFor({walletState:n})):r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,md:6},r.a.createElement(Pe.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:n!==La.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),r.a.createElement(T.a,{item:!0,md:6},!a.bip32PathIsDefault()&&r.a.createElement(B.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:n!==La.PENDING},"Default"))),r.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:a.hasBIP32PathError()||n===La.ACTIVE},"Import Public Key")),r.a.createElement(nn,{messages:l.messagesFor({walletState:n}),excludeCodes:["bip32"]}),r.a.createElement(ee.a,{error:!0},o))},a.import=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.validateAndSetPublicKey,r=t.enableChangeMethod,(0,t.disableChangeMethod)(),a.setState({publicKeyError:"",walletState:La.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:o=e.sent,n(o,function(e){a.setState({publicKeyError:e,walletState:La.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({publicKeyError:e.t0.message,walletState:La.PENDING});case 14:r();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:n,level:La.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:n,level:La.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.publicKeyImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.state={publicKeyError:"",bip32PathError:"",walletState:a.interaction().isSupported()?La.PENDING:La.UNSUPPORTED},a}return Object(W.a)(t,e),t}(r.a.Component),Ar="xpub",Mr="text",Dr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={disableChangeMethod:!1},a.title=function(){var e=a.props,t=e.number,n=e.totalSigners,o=e.publicKeyImporter,l=e.setName;return r.a.createElement(T.a,{container:!0,justify:"space-between"},r.a.createElement(T.a,{item:!0},r.a.createElement(un,{number:t,name:o.name,setName:l})),r.a.createElement(T.a,{item:!0},r.a.createElement(T.a,{container:!0,justify:"flex-end"},r.a.createElement(B.a,{type:"button",variant:"contained",onClick:a.moveUp,disabled:1===t},r.a.createElement(xr.a,null)),r.a.createElement("span",null,"\xa0"),r.a.createElement(B.a,{type:"button",variant:"contained",onClick:a.moveDown,disabled:t===n},r.a.createElement(kr.a,null)))))},a.renderImport=function(){var e=a.props,t=e.publicKeyImporter,n=e.number,o=a.state.disableChangeMethod,l="public-key-".concat(n,"-importer-select-label");return r.a.createElement("div",null,r.a.createElement(Z.a,{fullWidth:!0},r.a.createElement(Fa.a,{id:l},"Select Method"),r.a.createElement(Ha.a,{labelId:l,id:"public-key-".concat(n,"-importer-select"),disabled:o,value:t.method,onChange:a.handleMethodChange},r.a.createElement(Wa.a,{value:""},"< Select method >"),r.a.createElement(Wa.a,{value:La.TREZOR},"Trezor"),r.a.createElement(Wa.a,{value:La.LEDGER},"Ledger"),r.a.createElement(Wa.a,{value:La.HERMIT},"Hermit"),r.a.createElement(Wa.a,{value:Ar},"Derive from extended public key"),r.a.createElement(Wa.a,{value:Mr},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.publicKeyImporter,n=e.network,o=e.addressType,l=e.defaultBIP32Path;return t.method===La.TREZOR||t.method===La.LEDGER?r.a.createElement(_r,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,addressType:o,defaultBIP32Path:l,network:n}):t.method===La.HERMIT?r.a.createElement(Br,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):t.method===Ar?r.a.createElement(Rr,{network:n,publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path}):t.method===Mr?r.a.createElement(Kr,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number,r=t.setMethod,o=t.setPublicKey;r(n,e.target.value),o(n,"")},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.finalize=function(){var e=a.props,t=e.number;(0,e.setFinalized)(t,!0)},a.reset=function(e){var t=a.props,n=t.number,r=t.setPublicKey,o=t.setFinalized;r(n,""),o(n,!1),e&&a.resetBIP32Path()},a.moveUp=function(e){var t=a.props,n=t.moveUp,r=t.number;e.preventDefault(),n(r)},a.moveDown=function(e){var t=a.props,n=t.moveDown,r=t.number;e.preventDefault(),n(r)},a.renderBIP32Path=function(){var e=a.props.publicKeyImporter;return e.method!==Mr?r.a.createElement(S.a,{mt:4},r.a.createElement("p",null,"The BIP32 path for this public key is:"),r.a.createElement(T.a,{container:!0,justify:"center"},r.a.createElement(Jt,{text:e.bip32Path},r.a.createElement("code",null,e.bip32Path))),r.a.createElement(S.a,{mt:4},r.a.createElement("p",null,"You will need this BIP32 path to sign for this key later.  ",r.a.createElement("strong",null,"Write down this BIP32 path!")))):null},a.validateAndSetBIP32Path=function(e,t,n,r){var o=a.props,l=o.number,i=o.setBIP32Path,c=Object(V.validateBIP32Path)(e,r);i(l,e),c?n(c):(n(""),t())},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.resetBIP32Path)(t)},a.renderPublicKey=function(){var e=a.props.publicKeyImporter;return r.a.createElement("div",null,r.a.createElement("p",null,"The following public key was imported:"),r.a.createElement(T.a,{container:!0,justify:"center"},r.a.createElement(Jt,{text:e.publicKey},r.a.createElement("code",null,e.publicKey))),a.renderBIP32Path(),r.a.createElement(S.a,{mt:2},r.a.createElement(B.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){a.reset(e.method===La.HERMIT)}},"Remove Public Key")))},a.validateAndSetPublicKey=function(e,t,n){var r=a.props,o=r.number,l=r.publicKeyImporters,i=r.setPublicKey,c=Object(V.validatePublicKey)(e);i(o,e),c?t&&t(c):e&&Object.values(l).find(function(t,a){return a!==o-1&&t.publicKey===e})?t&&t("This public key has already been imported."):(t&&t(""),a.finalize(),n&&n())},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:this.title()}),r.a.createElement(C.a,null,e.method&&e.method!==Mr&&e.conflict&&r.a.createElement(or,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),t}(r.a.Component);var Ur={setName:vr,setBIP32Path:gr,resetBIP32Path:Pr,setMethod:yr,setPublicKey:Ir,setFinalized:Sr,moveUp:Or,moveDown:Tr},zr=Object(c.b)(function(e,t){return Object(f.a)({},e.settings,e.address,{publicKeyImporter:e.address.publicKeyImporters[t.number]})},Ur)(Dr),Lr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props.address;return r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0,spacing:3},r.a.createElement(T.a,{item:!0,md:8},a.renderPublicKeyImporters(),r.a.createElement(S.a,{mt:2},r.a.createElement(Cr,null))),r.a.createElement(T.a,{item:!0,md:4},r.a.createElement(S.a,null,r.a.createElement(Ee,null)),r.a.createElement(S.a,{mt:2},r.a.createElement(ve,null)),r.a.createElement(S.a,{mt:2},r.a.createElement(se,null)),""!==e&&a.renderClientPicker())))},a.renderClientPicker=function(){var e=a.props.address;return r.a.createElement(S.a,{mt:2},r.a.createElement(Te,{publicNotes:r.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:r.a.createElement("div",null,r.a.createElement(Ta,{addresses:[e]}))}))},a.renderPublicKeyImporters=function(){for(var e=a.props.totalSigners,t=[],n=1;n<=e;n++)t.push(r.a.createElement(S.a,{key:n,mt:1===n?0:2},r.a.createElement(zr,{number:n})));return t},a}return Object(W.a)(t,e),t}(r.a.Component);var Fr=Object(c.b)(function(e){return Object(f.a)({},{totalSigners:e.settings.totalSigners},e.address)})(Lr),Hr="CHOOSE_CONFIRM_OWNERSHIP",Wr="SET_OWNERSHIP_MULTISIG",qr="RESET_PUBLIC_KEY_IMPORTER",Gr="RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",Xr="SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",Yr="SET_PUBLIC_KEY_IMPORTER_METHOD",Vr="SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY";var Zr=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},a.disabled=function(){},a.hasScriptError=function(){return""!==a.state.scriptError},a.hasFetchUTXOsError=function(){return""!==a.state.fetchUTXOsError},a.hasError=function(){return a.hasScriptError()||a.hasFetchUTXOsError()},a.scriptName=function(){switch(a.props.addressType){case V.P2SH:return"redeem";case V.P2SH_P2WSH:case V.P2WSH:return"witness";default:return null}},a.scriptTitle=function(){var e=a.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},a.handleScriptChange=function(e){var t=e.target.value,n="";(""===t&&(n="".concat(a.scriptTitle()," script cannot be blank.")),""===n&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(n="".concat(a.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===n)&&(""!==Object(V.validateHex)(t)&&(n="".concat(a.scriptTitle()," script is not valid hex.")));if(""!==t&&""===n)try{a.generateMultisig(t)}catch(r){console.error(r),n="Failed to parse ".concat(a.scriptName()," script.")}a.setState({scriptHex:t,scriptError:n,fetchUTXOsError:"",fetchedUTXOs:!1})},a.generateMultisig=function(e){var t=a.props,n=t.network,r=t.addressType;return e||(e=a.state.scriptHex),Object(V.generateMultisigFromHex)(n,r,e)},a.renderDetails=function(){var e=a.state.fetchUTXOsError,t=a.props,n=t.chosePerformSpend,o=t.choseConfirmOwnership,l=t.client,i=a.generateMultisig(),c=n||o;return r.a.createElement("div",null,r.a.createElement(ga,{multisig:i}),r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0,spacing:3},r.a.createElement(T.a,{item:!0},r.a.createElement(B.a,{variant:"contained",color:"primary",size:"large",onClick:a.performSpend,disabled:c},"Spend from this address")),r.a.createElement(T.a,{item:!0},r.a.createElement(B.a,{variant:"contained",size:"large",onClick:a.confirmOwnership,disabled:c},"Confirm ownership"))),r.a.createElement(ee.a,{error:!0},e)),"private"===l.type&&r.a.createElement(S.a,{mt:2},r.a.createElement(Ta,{addresses:[i.address],autoImport:!0})))},a.performSpend=Object(Ce.a)(je.a.mark(function e(){var t,n,r,o,l,i,c,s,u,d,p;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.setRequiredSigners,r=t.setTotalSigners,o=t.setInputs,l=t.setFrozen,i=t.choosePerformSpend,c=a.generateMultisig(),e.next=4,a.fetchUTXOs(c);case 4:(s=e.sent)?(u=s.utxos,d=s.inputsTotalSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),a.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(o(u),n(Object(V.multisigRequiredSigners)(c)),r(Object(V.multisigTotalSigners)(c)),l(!0),i())):a.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}},e)})),a.fetchUTXOs=function(){var e=Object(Ce.a)(je.a.mark(function e(t){var n,r,o,l;return je.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.network,o=n.client,l=null,e.prev=2,e.next=5,qe(t.address,r,o);case 5:l=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 12:if(null===l){e.next=14;break}return e.abrupt("return",{utxos:l.map(function(e){return Object(f.a)({},e,{multisig:t})}),inputsTotalSats:l.map(function(e){return e.amount}).reduce(function(e,t){return e.plus(t)},new g.a(0))});case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a.confirmOwnership=function(){var e=a.props,t=e.chooseConfirmOwnership,n=e.setOwnershipMultisig,r=e.setFrozen;n(a.generateMultisig()),t(),r(!0)},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,a=e.scriptError,n=e.fetchedUTXOs;return r.a.createElement(w.a,null,r.a.createElement(j.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),r.a.createElement(C.a,null,r.a.createElement("form",null,r.a.createElement(Pe.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:n&&!this.hasFetchUTXOsError(),helperText:a,error:""!==a})),""===t||this.hasScriptError()?r.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),t}(r.a.Component);var Jr={choosePerformSpend:function(){return{type:vt}},setFrozen:le,setInputs:_t,setTotalSigners:function(e){return{type:Pt,value:e}},setRequiredSigners:Bt,chooseConfirmOwnership:function(){return{type:Hr}},setOwnershipMultisig:function(e){return{type:Wr,value:e}}},Qr=Object(c.b)(function(e){return Object(f.a)({},e.settings,{client:e.client},{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})},Jr)(Zr),$r=a(374),eo=a.n($r),to=a(375),ao=a.n(to),no=a(379),ro=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).titleRef=r.a.createRef(),a.state={disableChangeMethod:!1},a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderImportByMethod=function(){var e=a.props,t=e.network,n=e.publicKeyImporter,o=e.defaultBIP32Path;return n.method===La.HERMIT?r.a.createElement(Br,{publicKeyImporter:n,validateAndSetBIP32Path:a.validateAndSetBIP32Path,validateAndSetPublicKey:a.validateAndSetPublicKey,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):n.method===La.TREZOR||n.method===La.LEDGER?r.a.createElement(_r,{network:t,publicKeyImporter:n,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:o,validateAndSetPublicKey:a.validateAndSetPublicKey,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){(0,a.props.setMethod)(e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.reset=function(){(0,a.props.reset)()},a.resetBIP32Path=function(){(0,a.props.resetBIP32Path)()},a.validateAndSetBIP32Path=function(e,t,n,r){var o=a.props.setBIP32Path,l=Object(V.validateBIP32Path)(e,r);o(e),l?n(l):(n(""),t())},a.validateAndSetPublicKey=function(e,t,n){var r=a.props.setPublicKey,o=Object(V.validatePublicKey)(e);r(e),o?t&&t(o):(t&&t(""),n&&n())},a.renderConfirmation=function(){var e=a.props,t=e.publicKeys,n=e.publicKeyImporter;if(""===n.publicKey)return null;if(t.includes(n.publicKey)){var o=Object(no.a)(K.a)({color:"green"});return r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(o,null,r.a.createElement(eo.a,null)),r.a.createElement(N.a,null,"The public key exported at BIP32 path ",r.a.createElement("code",null,n.bip32Path)," is present in the provided redeem script.")))}return r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(K.a,null,r.a.createElement(O.a,{color:"error"},r.a.createElement(ao.a,null))),r.a.createElement(N.a,null,"The public key exported at BIP32 path ",r.a.createElement("code",null,n.bip32Path)," is not present in the provided redeem script.")))},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod;return r.a.createElement(w.a,null,r.a.createElement(j.a,{ref:this.titleRef,title:"Confirm Ownership"}),r.a.createElement(C.a,null,r.a.createElement("form",null,r.a.createElement("p",null,"How will you confirm your ownership of this address?"),r.a.createElement(Z.a,{fullWidth:!0},r.a.createElement(Fa.a,{id:"public-key-importer-select-label"},"Select Method"),r.a.createElement(Ha.a,{labelId:!0,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},r.a.createElement(Wa.a,{value:""},"< Select method >"),r.a.createElement(Wa.a,{value:La.TREZOR},"Trezor"),r.a.createElement(Wa.a,{value:La.LEDGER},"Ledger"),r.a.createElement(Wa.a,{value:La.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&r.a.createElement(B.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),t}(r.a.Component);var oo={setMethod:function(e){return{type:Yr,value:e}},setBIP32Path:function(e){return{type:Xr,value:e}},setPublicKey:function(e){return{type:Vr,value:e}},resetBIP32Path:function(){return{type:Gr}},reset:function(){return{type:qr}}},lo=Object(c.b)(function(e,t){return e.spend.ownership},oo)(ro),io=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement(S.a,{mt:2},r.a.createElement(T.a,{container:!0,spacing:3},r.a.createElement(T.a,{item:!0,md:8},r.a.createElement(S.a,null,r.a.createElement(Qr,null)),a.renderBody()),r.a.createElement(T.a,{item:!0,md:4},r.a.createElement(S.a,null,r.a.createElement(ve,null)),r.a.createElement(S.a,{mt:2},r.a.createElement(se,null)),r.a.createElement(S.a,{mt:2},r.a.createElement(Te,null)))))},a.renderBody=function(){var e=a.props,t=e.transaction;return e.ownership.chosen?r.a.createElement(S.a,{mt:2},r.a.createElement(lo,null)):r.a.createElement(S.a,null,a.spendable()&&r.a.createElement(S.a,null,r.a.createElement(S.a,{mt:2},r.a.createElement(pa,{inputs:t.inputs,inputsTotalSats:t.inputsTotalSats})),r.a.createElement(S.a,{mt:2},r.a.createElement(za,null))),t.finalizedOutputs&&r.a.createElement(S.a,null,a.renderSignatureImporters()),a.signaturesFinalized()&&r.a.createElement(S.a,{mt:2},r.a.createElement(Tn,null)))},a.renderSignatureImporters=function(){for(var e=a.props.transaction,t=[],n=1;n<=e.requiredSigners;n++)t.push(r.a.createElement(S.a,{key:n,mt:2},r.a.createElement(In,{number:n})));return t},a.spendable=function(){return a.props.transaction.inputs.length>0},a.signaturesFinalized=function(){var e=a.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},a.confirmOwnership=function(e){a.setState({addressFinalized:!0,confirmOwnership:e})},a}return Object(W.a)(t,e),t}(r.a.Component);var co=Object(c.b)(function(e){return e.spend})(io),so=a(376),uo=a(856),po=a(843),mo=Object(so.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),ho=function(){var e=mo();return r.a.createElement("div",{className:e.root},r.a.createElement(uo.a,{position:"static"},r.a.createElement(po.a,null,r.a.createElement(O.a,{variant:"h6",className:e.title},"Caravan"),r.a.createElement(B.a,{color:"inherit",href:"#/wallet",target:"_blank"},"Wallet"),r.a.createElement(B.a,{color:"inherit",href:"#/address",target:"_blank"},"Create"),r.a.createElement(B.a,{color:"inherit",href:"#/spend",target:"_blank"},"Interact"),r.a.createElement(B.a,{color:"inherit",href:"#/",target:"_blank"},"Help"))))},Eo=a(377),bo=a(759),fo=function(){return r.a.createElement(S.a,{mt:2},r.a.createElement("hr",null),r.a.createElement(T.a,{container:!0,alignItems:"center"},r.a.createElement(T.a,{item:!0,sm:2},P("https://www.unchained-capital.com",r.a.createElement("img",{src:bo,className:"logo",alt:"Unchained Capital logo",height:"32"}))),r.a.createElement(T.a,{item:!0,sm:6},r.a.createElement("p",null,"Copyright 2019 by Unchained Capital and released under an MIT license.")),r.a.createElement(T.a,{item:!0,sm:1},r.a.createElement("p",null," v",Eo.a," "))))},vo=a(857),go=a(858),Po=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(F.a)(this,Object(H.a)(t).call(this,e))).state={error:null,errorInfo:null},a}return Object(W.a)(t,e),Object(Y.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.errorInfo;return a?r.a.createElement(S.a,{m:4},r.a.createElement(S.a,{m:2},r.a.createElement(O.a,{variant:"h3",component:"h1"},"Something went wrong.")),r.a.createElement(S.a,{m:2},r.a.createElement(O.a,{variant:"body1"},"Let us know what happened on ",r.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank"},"github"),".")),r.a.createElement(S.a,{mx:2,my:3},r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},t&&t.toString(),r.a.createElement("br",null),a.componentStack))):this.props.children}}]),t}(r.a.Component),yo=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(vo.a,null),r.a.createElement(go.a,{maxWidth:"lg"},r.a.createElement(ho,null),r.a.createElement(Po,null,r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(b.a,{path:"/wallet",component:hr}),r.a.createElement(b.a,{path:"/address",component:Fr}),r.a.createElement(b.a,{path:"/spend",component:co}),r.a.createElement(b.a,{path:"/",component:z})))),r.a.createElement(fo,null)))},Io=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function So(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function Oo(e,t){return Object(f.a)({},e,t)}var To={network:V.MAINNET,totalSigners:3,requiredSigners:2,addressType:V.P2SH,frozen:!1},wo={type:"public",url:"",username:"",password:"",url_error:"",username_error:"",password_error:"",status:"unknown"},jo={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new g.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},Co={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new g.a(0),spendingSats:new g.a(0),autoSpend:!1,nextNode:null};function xo(e,t){var a=Object(f.a)({},jo,e.nodes[t.value.bip32Path]||{},t.value),n={};n[a.bip32Path]=a;var r=Object(f.a)({},e,{nodes:Object(f.a)({},e.nodes,n)});"undefined"!==typeof t.value.spend&&(r.spendingSats=t.value.spend?e.spendingSats.plus(a.balanceSats):e.spendingSats.minus(a.balanceSats)),t.value.balanceSats&&(r.balanceSats=e.balanceSats.plus(a.balanceSats));var o=0,l=0,i=Object.keys(r.nodes);i.sort(function(e,t){var a=(e||"").split("/"),n=(t||"").split("/");return parseInt(a[2])-parseInt(n[2])});for(var c=!1,s=0;s<i.length;s++){var u=i[i.length-(s+1)],d=r.nodes[u];d.fetchedUTXOs&&(!d.balanceSats.isEqualTo(0)||d.addressUsed||c?c=!0:o++),""!==d.fetchUTXOsError&&l++}return r.trailingEmptyNodes=o,r.fetchUTXOsErrors=l,r.nextNode=function(e){for(var t=Object.values(e.nodes),a=0;a<t.length;a++){var n=t[a];if(n.balanceSats.isEqualTo(0)&&!n.addressUsed)return n}return null}(r),r}var ko=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Co,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case rt:return function(e){var t=Object(f.a)({},e);return Object.values(t.nodes).forEach(function(e){e.spend=!1}),t}(t);case dt:return function(e){var t=Object(f.a)({},e);return Object.values(t.nodes).forEach(function(e){e.spend&&(t.balanceSats=t.balanceSats.minus(e.balanceSats),e.balanceSats=new g.a(0),e.spend=!1,e.utxos=[])}),t}(t);case e:return xo(t,a);default:return t}}},Ko="text";function No(e){var t=(new Date).getTime().toString(),a=Object.values(e.extendedPublicKeyImporters).map(function(e){return e.extendedPublicKey}).join("");return"".concat(t,"-").concat(a)}var Ro={name:"",bip32Path:Object(V.multisigBIP32Root)(V.P2SH,V.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",finalized:!1,confliect:!1},Bo={extendedPublicKeyImporters:{1:Object(f.a)({},Ro,{name:"Extended Public Key 1"}),2:Object(f.a)({},Ro,{name:"Extended Public Key 2"}),3:Object(f.a)({},Ro,{name:"Extended Public Key 3"})},defaultBIP32Path:Object(V.multisigBIP32Root)(V.P2SH,V.MAINNET),network:V.MAINNET,addressType:V.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0};function _o(e,t,a){var n={};n[a]=t.value;var r=Object(f.a)({},e,{nodes:{}});return r.extendedPublicKeyImporters[t.number]=Oo(e.extendedPublicKeyImporters[t.number],n),Object.values(r.extendedPublicKeyImporters).reduce(function(e,t){return e+t.finalized},0)===Object.keys(r.extendedPublicKeyImporters).length&&(r.configuring=!1),Ao(r.extendedPublicKeyImporters[t.number],e),Oo(r,{fingerprint:No(r)})}function Ao(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Mo(e,t,a){for(var n=1;n<=Object.values(e.extendedPublicKeyImporters).length;n++){var r=t.extendedPublicKeyImporters[n];r.bip32PathModified||r.finalized||(r.bip32Path=a),Ao(r,t)}}var Do="text";function Uo(e){var t=(new Date).getTime().toString(),a=Object.values(e.publicKeyImporters).map(function(e){return e.publicKey}).join("");return"".concat(t,"-").concat(a)}var zo={name:"",bip32Path:Object(V.multisigBIP32Path)(V.P2SH,V.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1},Lo={publicKeyImporters:{1:Object(f.a)({},zo,{name:"Public Key 1"}),2:Object(f.a)({},zo,{name:"Public Key 2"}),3:Object(f.a)({},zo,{name:"Public Key 3"})},defaultBIP32Path:Object(V.multisigBIP32Path)(V.P2SH,V.MAINNET),network:V.MAINNET,addressType:V.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""};function Fo(e,t,a){var n={};n[a]=t.value;var r=Object(f.a)({},e);return r.publicKeyImporters[t.number]=Oo(e.publicKeyImporters[t.number],n),Ho(r.publicKeyImporters[t.number],e),Oo(r,{fingerprint:Uo(r)})}function Ho(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Wo(e,t,a){for(var n=1;n<=Object.values(e.publicKeyImporters).length;n++){var r=t.publicKeyImporters[n];r.bip32PathModified||r.finalized||(r.bip32Path=a),Ho(r,t)}}var qo={autoSpend:!0,viewAddresses:!1,depositing:!1,spending:!1,walletName:"My Multisig Wallet"};function Go(e){return Oo(e,{spending:!1,depositing:!1,viewAddresses:!1})}function Xo(e,t){var a=Go(e);return a[t]=!0,a}var Yo={chosen:!1,publicKeyImporter:Object(f.a)({},{bip32Path:"",method:"",publicKey:""}),network:V.MAINNET,addressType:V.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(V.multisigBIP32Path)(V.P2SH,V.MAINNET)};function Vo(e,t,a){var n={};return n[a]=t.value,Object(f.a)({},e,{publicKeyImporter:Object(f.a)({},e.publicKeyImporter,n)})}var Zo={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},Jo={};function Qo(e,t,a){var n={};n[a]=t.value;var r=Object(f.a)({},e);return r[t.number]=Oo(e[t.number],n),r}var $o=a(259);function el(e,t){var a=e.txid.toLowerCase(),n=t.txid.toLowerCase();return a<n?-1:a>n?1:e.n<t.n?-1:e.n>t.n?1:0}var tl={address:"",amount:"",amountSats:"",addressError:"",amountError:""},al=[Object(f.a)({},tl)],nl={chosen:!1,network:V.MAINNET,inputs:[],inputsTotalSats:new g.a(0),outputs:[].concat(al),changeOutputIndex:0,feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:V.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1};function rl(e){if(e.outputs.find(function(e){return""!==e.addressError||""!==e.amountError})||""!==e.feeError||""!==e.feeRateError||0===e.inputs.length)return Object(f.a)({},e,{balanceError:""});var t=Object(V.bitcoinsToSatoshis)(new g.a(e.fee)),a=e.outputs.map(function(e){return Object(V.bitcoinsToSatoshis)(new g.a(e.amount||0))}).reduce(function(e,t){return e.plus(t)},new g.a(0));if(e.inputsTotalSats.isEqualTo(a.plus(t)))return Object(f.a)({},e,{balanceError:""});var n,r=a.plus(t).minus(e.inputsTotalSats);if(r.isNaN())n="Cannot calculate total.";else{var o=r.isLessThan(0)?"Increase":"Decrease";n="".concat(o," by ").concat(Object(V.satoshisToBitcoins)(r.absoluteValue()).toFixed(8),".")}return Object(f.a)({},e,{balanceError:n})}function ol(e,t,a){return Object(V.satoshisToBitcoins)(Object(V.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:a,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toString()}var ll=Object(i.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Hr:return Oo(e,{chosen:!0});case te:return Oo(e,{network:t.value});case Wr:return function(e,t){var a=t.value,n=Object(V.multisigAddressType)(a),r=Object(V.multisigBIP32Path)(n,e.network);return Object(f.a)({},e,{network:e.network,addressType:n,publicKeys:Object(V.multisigPublicKeys)(a),address:a.address,defaultBIP32Path:r})}(e,t);case Xr:var a=Vo(e,{value:""},"publicKey");return Vo(a,t,"bip32Path");case Yr:return Vo(e,t,"method");case Vr:return Vo(e,t,"publicKey");case Gr:return Vo(e,{value:e.defaultBIP32Path},"bip32Path");case qr:return Object(f.a)({},e,{publicKeyImporter:Object(f.a)({},e.publicKeyImporter,{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return Oo(e,{chosen:!0});case te:return Oo(e,{network:t.value});case re:return Oo(e,{addressType:t.value});case gt:return Oo(e,{requiredSigners:t.value});case Pt:return Oo(e,{totalSigners:t.value});case yt:return rl(function(e,t){var a=t.value.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new g.a(0));return Oo(e,{inputs:t.value.sort(el),inputsTotalSats:a})}(e,t));case It:return rl(function(e,t){var a=e.outputs.concat(Object(f.a)({},tl));return Object(f.a)({},e,{outputs:a,fee:ol(e,e.feeRate,a.length)})}(e));case Rt:return Oo(e,{changeOutputIndex:t.value});case St:return rl(function(e,t){var a=Object($o.a)(e.outputs),n=t.value,r=Object(V.validateAddress)(n,e.network);if(""===r)for(var o=0;o<e.inputs.length;o++)if(n===e.inputs[o].address){r="Output address cannot equal input address.";break}if(""===r)for(var l=0;l<e.outputs.length;l++)if(l!==t.number-1&&e.outputs[l].address===n){r="Duplicate output address.";break}return a[t.number-1].address=n,a[t.number-1].addressError=r,Object(f.a)({},e,{outputs:a})}(e,t));case Ot:return rl(function(e,t){var a=Object($o.a)(e.outputs),n=t.value,r=e.inputs.length?Object(V.validateOutputAmountBTC)(n,e.inputsTotalSats):"";return e.isWallet&&"Output amount is too large."===r&&(r=""),a[t.number-1].amount=n,a[t.number-1].amountError=r,a[t.number-1].amountSats=r?"":Object(V.bitcoinsToSatoshis)(new g.a(t.value)),Object(f.a)({},e,{outputs:a})}(e,t));case Tt:return rl(function(e,t){for(var a=[],n=0;n<e.outputs.length;n++)n!==t.number-1?a.push(e.outputs[n]):t.number===e.changeOutputIndex&&(e.changeOutputIndex=0);return Object(f.a)({},e,{outputs:a,fee:ol(e,e.feeRate,a.length)})}(e,t));case wt:return rl(function(e,t){var a=t.value,n=Object(V.validateFeeRate)(a);return Oo(e,{feeRate:a,feeRateError:n,fee:""===n?ol(e,a,e.outputs.length):"",feeError:""})}(e,t));case jt:return rl(function(e,t){var a=t.value,n=Object(V.validateFeeBTC)(a,e.inputsTotalSats);return Oo(e,{fee:a,feeError:n,feeRate:""===n?Object(V.estimateMultisigTransactionFeeRate)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:e.outputs.length,m:e.requiredSigners,n:e.totalSigners,feesInSatoshis:Object(V.bitcoinsToSatoshis)(new g.a(a))}).toString():"",feeRateError:""})}(e,t));case Ct:return function(e,t){var a=Object(V.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs);return Object(f.a)({},e,{finalizedOutputs:t.value,unsignedTransaction:a})}(e,t);case xt:return Oo(e,{outputs:al,fee:"",balanceError:"",changeOutputIndex:0});case kt:return Oo(e,{txid:t.value});case Nt:return Oo(e,{isWallet:!0});case Kt:return Oo(e,nl);default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_SIGNATURES":return Object(f.a)({},Jo);case gt:return function(e,t){for(var a={},n=1;n<=t.value;n++)a[n]=Object(f.a)({},Zo,{name:"Signature ".concat(n)});return Object(f.a)({},e,a)}(e,t);case"SET_SIGNATURE_IMPORTER_NAME":return Qo(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return Qo(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return Qo(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return Qo(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return Qo(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return Qo(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return function(e,t){var a=Object(f.a)({},e);return a[t.number]=Oo(e[t.number],t.value),a}(e,t);default:return e}}}),il=Object(i.c)({deposits:ko(at),change:ko(nt),info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:return Oo(e,{autoSpend:t.value});case it:return Xo(e,"depositing");case ct:return Xo(e,"spending");case lt:return Xo(e,"viewAddresses");case st:return Oo(e,{walletName:t.value});case ut:return Go(e);default:return e}}}),cl=Object(i.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Oo(e,{network:t.value});case ae:return Oo(e,{totalSigners:t.value});case ne:return Oo(e,{requiredSigners:t.value});case re:return Oo(e,{addressType:t.value});case oe:return Oo(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return Oo(e,{type:t.value});case"SET_CLIENT_URL":return Oo(e,{url:t.value});case"SET_CLIENT_USERNAME":return Oo(e,{username:t.value});case"SET_CLIENT_PASSWORD":return Oo(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return Oo(e,{url_error:t.value});case"SET_CLIENT_USERNAME_ERROR":return Oo(e,{username_error:t.value});case"SET_CLIENT_PASSWORD_ERROR":return Oo(e,{password_error:t.value});case"SET_CLIENT_STATUS":return Oo(e,{status:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return function(e,t){var a=t.value,n=e.addressType,r=Object(V.multisigBIP32Path)(n,a),o=Object(f.a)({},e,{network:a,defaultBIP32Path:r});return Wo(e,o,r),o}(e,t);case re:return function(e,t){var a=e.network,n=t.value,r=Object(V.multisigBIP32Path)(n,a),o=Object(f.a)({},e,{addressType:n,defaultBIP32Path:r});return Wo(e,o,r),o}(e,t);case ae:return function(e,t){for(var a=t.value,n={},r=1;r<=a;r++)n[r]=e.publicKeyImporters[r]||Object(f.a)({},zo,{name:"Public Key ".concat(r)});var o=Object(f.a)({},e,{publicKeyImporters:n,stub:t.type});return Oo(o,{fingerprint:Uo(o)})}(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return Fo(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Fo(Fo(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Fo(Fo(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return Fo(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return Fo(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return Fo(function(e,t){var a=Object(f.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&a.publicKeyImporters[t.number].method!==Do?(a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.publicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==Do?e+1:e},0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.publicKeyImporters).forEach(function(e){return e.conflict=!1})),a}(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return function(e,t){if(1===t.number)return e;var a=Object(f.a)({},e),n=e.publicKeyImporters[t.number-1],r=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number-1]=r,a.publicKeyImporters[t.number]=n,Oo(a,{fingerprint:Uo(a)})}(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return function(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var a=Object(f.a)({},e),n=e.publicKeyImporters[t.number+1],r=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number+1]=r,a.publicKeyImporters[t.number]=n,Oo(a,{fingerprint:Uo(a)})}(e,t);case Er:return function(e,t){for(var a=Object.values(e.publicKeyImporters),n=a.map(function(e){return e.publicKey}).sort().map(function(e){return a.find(function(t){return t.publicKey===e})}),r={},o=1;o<=n.length;o++)r[o]=n[o-1];var l=Object(f.a)({},e,{publicKeyImporters:r});return Oo(l,{fingerprint:Uo(l)})}(e);case br:return Oo(e,{address:t.value});default:return e}},spend:ll,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return function(e,t){var a=e.addressType,n=t.value,r=Object(V.multisigBIP32Root)(a,n),o=Object(f.a)({},e,{network:n,defaultBIP32Path:r});return Mo(e,o,r),o}(e,t);case re:return function(e,t){var a=t.value,n=e.network,r=Object(V.multisigBIP32Root)(a,n),o=Object(f.a)({},e,{addressType:a,defaultBIP32Path:r});return Mo(e,o,r),o}(e,t);case ae:return function(e,t){for(var a=t.value,n={},r=1;r<=a;r++)n[r]=e.extendedPublicKeyImporters[r]||Object(f.a)({},Ro,{name:"Extended Public key ".concat(r)});return Object(f.a)({},e,{extendedPublicKeyImporters:n})}(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return _o(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return _o(_o(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return _o(_o(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return _o(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return _o(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return _o(function(e,t){var a=Object(f.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&a.extendedPublicKeyImporters[t.number].method!==Ko?(a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.extendedPublicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==Ko?e+1:e},0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.extendedPublicKeyImporters).forEach(function(e){return e.conflict=!1})),a}(e,t),t,"finalized");case zn:return Object(f.a)({},e,{configuring:t.value});default:return e}},wallet:il}),sl=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,ul=Object(i.e)(cl,sl(Object(i.a)(u.a,p.a,m.a)));l.a.render(r.a.createElement(c.a,{store:ul},r.a.createElement(yo,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/caravan","/service-worker.js");Io?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):So(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):So(e)})}}()}},[[392,1,2]]]);
//# sourceMappingURL=main.6a33f8a9.chunk.js.map