{"version":3,"sources":["../../unchained-wallets/lib/trezor.js","../../unchained-wallets/lib/ledger.js","../../unchained-wallets/lib/hermit.js","images/logo.png","utils/index.js","components/Disclaimer.jsx","components/Help.jsx","actions/settingsActions.js","components/NetworkPicker.jsx","components/QuorumPicker.jsx","components/AddressTypePicker.jsx","actions/utils.js","actions/clientActions.jsx","components/ClientPicker.jsx","block_explorer.js","bitcoind.js","blockchain.js","components/Wallet/ConfirmWallet.jsx","actions/walletActions.jsx","actions/transactionActions.jsx","components/Wallet/WalletControl.jsx","components/Copyable.jsx","components/Wallet/WalletDeposit.jsx","components/Spend/UTXOSet.jsx","components/Wallet/Node.jsx","components/BitcoindAddressImporter.jsx","components/Wallet/NodeSet.jsx","components/Spend/OutputEntry.jsx","components/Spend/OutputsForm.jsx","components/Spend/TextSignatureImporter.jsx","components/Hermit/HermitReader.jsx","components/Hermit/HermitDisplayer.jsx","components/WalletFeedback.jsx","components/Spend/HermitSignatureImporter.jsx","components/Spend/HardwareWalletSignatureImporter.jsx","components/EditableName.jsx","actions/signatureImporterActions.jsx","components/Spend/SignatureImporter.jsx","components/Spend/Transaction.jsx","components/Wallet/WalletSign.jsx","components/Wallet/WalletSpend.jsx","components/Wallet/WalletView.jsx","actions/extendedPublicKeyImporterActions.js","components/Wallet/WalletGenerator.jsx","components/Wallet/ExtendedPublicKeyExtendedPublicKeyImporter.jsx","components/Wallet/TextExtendedPublicKeyImporter.jsx","components/Wallet/HermitExtendedPublicKeyImporter.jsx","components/Wallet/HardwareWalletExtendedPublicKeyImporter.jsx","components/CreateAddress/Conflict.jsx","components/Wallet/ExtendedPublicKeyImporter.jsx","components/Wallet/index.jsx","actions/publicKeyImporterActions.js","components/MultisigDetails.jsx","components/CreateAddress/AddressGenerator.jsx","components/CreateAddress/TextPublicKeyImporter.jsx","components/CreateAddress/ExtendedPublicKeyPublicKeyImporter.jsx","components/CreateAddress/HermitPublicKeyImporter.jsx","components/CreateAddress/HardwareWalletPublicKeyImporter.jsx","components/CreateAddress/PublicKeyImporter.jsx","components/CreateAddress/index.jsx","actions/ownershipActions.jsx","components/Spend/ScriptEntry.jsx","components/Spend/ConfirmOwnership.jsx","components/Spend/index.jsx","components/Navbar.jsx","components/Footer.jsx","components/ErrorBoundry.js","components/App.jsx","registerServiceWorker.js","reducers/utils.js","reducers/settingsReducer.jsx","reducers/clientReducer.jsx","reducers/braidReducer.jsx","reducers/quorumReducer.jsx","reducers/addressReducer.jsx","reducers/walletReducer.jsx","reducers/ownershipReducer.jsx","reducers/signatureImportersReducer.js","reducers/transactionReducer.js","reducers/index.js","index.jsx","components/Spend/styles.module.scss","../../unchained-bitcoin/lib/utils.js","../../unchained-bitcoin/lib/networks.js","../../unchained-wallets/lib/interaction.js","../../unchained-bitcoin/lib/index.js","../../unchained-bitcoin/lib/script.js","../../unchained-bitcoin/lib/bip32.js","../../unchained-wallets/lib/index.js","../../unchained-bitcoin/lib/keys.js","../../unchained-bitcoin/lib/addresses.js","../../unchained-bitcoin/lib/transactions.js","../../unchained-bitcoin/lib/multisig.js","../../unchained-bitcoin/lib/p2sh.js","../../unchained-bitcoin/lib/p2sh_p2wsh.js","../../unchained-bitcoin/lib/p2wsh.js","../../unchained-bitcoin/lib/block_explorer.js"],"names":["_regeneratorRuntime","__webpack_require__","Object","defineProperty","exports","value","TrezorSignMultisigTransaction","TrezorExportExtendedPublicKey","TrezorExportPublicKey","TrezorExportHDNode","TrezorInteraction","_addressScriptTypes","_unchainedBitcoin","_interaction","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","enumerable","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","call","ReferenceError","_assertThisInitialized","_get","property","receiver","Reflect","get","base","object","hasOwnProperty","_getPrototypeOf","_superPropBase","desc","getOwnPropertyDescriptor","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","TrezorConnect","manifest","email","appUrl","_WalletInteraction","_ref","_this","network","this","trezorCoin","coin","WalletInteraction","messages","PENDING","push","level","INFO","text","code","ACTIVE","_TrezorInteraction","_ref2","_this2","bip32Path","bip32Paths","bip32PathSegments","split","ERROR","coinPath","NETWORKS","MAINNET","match","TESTNET","result","async","_context","prev","next","awrap","getPublicKey","bundle","map","bip32path","path","sent","Error","success","payload","error","abrupt","stop","_TrezorExportHDNode","apply","arguments","_context2","Array","isArray","publicKey","_TrezorExportHDNode2","_context3","xpub","_TrezorInteraction2","_ref3","_this3","inputs","outputs","concat","trezorInputs","trezorOutputs","transaction","_this4","_context4","input","inputIndex","trezorInput","output","trezorOutput","signTransaction","signatures","addressScriptTypes","MULTISIG_ADDRESS_TYPES","P2WSH","P2SH","P2SH_P2WSH","requiredSigners","multisigRequiredSigners","multisig","addressType","multisigAddressType","script_type","m","pubkeys","multisigPublicKeys","address_n","node","depth","child_num","fingerprint","chain_code","repeat","public_key","trezorPublicKey","fill","prev_hash","txid","prev_index","index","bip32PathToSequence","amount","amountSats","toString","toFixed","address","exportLedgerPubKey","ledgerbtc","compressedPublicKey","_context5","getWalletPublicKey","verify","compressPublicKey","t0","message","signMultisigSpendLedger","LedgerSignMultisigTransaction","LedgerExportExtendedPublicKey","LedgerExportPublicKey","LedgerExportHDNode","LedgerInteraction","bitcoin","TransportU2F","LedgerBtc","_LedgerInteraction","WARNING","transport","publicKeys","_result","_LedgerExportHDNode","publicKeyObject","_LedgerExportHDNode2","_LedgerInteraction2","setExchangeTimeout","testnet","txTmp","j","txToSign","txHex","segwit","splitTx","outputScriptHex","ledgerIns","ledgerKeySets","_context6","TransactionBuilder","setVersion","networks","addOutput","toNumber","addInput","buildIncomplete","toHex","splitTransaction","serializeTransactionOutputs","ledgerInput","slice","join","signP2SHTransaction","tx","transactionHex","scriptToHex","multisigRedeemScript","multisigWitnessScript","HermitSignTransaction","HermitExportExtendedPublicKey","HermitExportPublicKey","HermitExport","HermitInteraction","_hiBase","_interopRequireDefault","_pako","__esModule","default","encodedString","compressedBytes","decode","asBytes","_decompressAndParseJSON","base32DecodingError","decompressedJSON","inflate","to","_parseJSON","decompressError","json","JSON","parse","parseJSONError","data","jsonString","stringify","_compressAndBase32Encode","encodeJSONError","console","deflate","gzip","_base32Encode","compressionError","encode","base32EncodingError","_HermitInteraction","_HermitExport","instructions","command","mode","_parseQRCodeData","pubkey","_HermitExport2","_HermitExport3","supported","inputAddressType","inputsAreSupported","outputsAreSupported","UNSUPPORTED","signatureRequestData","encodedData","_encodeQRCodeData","hermitInputsByRedeemScript","redeemScriptHex","values","module","externalLink","url","react_default","a","createElement","href","rel","downloadFile","body","filename","blob","Blob","type","window","navigator","msSaveOrOpenBlob","msSaveBlob","elem","document","URL","createObjectURL","download","appendChild","click","removeChild","Disclaimer","Card","CardHeader","title","CardContent","Help","Box","mt","mb","Typography","variant","Grid","container","spacing","item","md","direction","List","ListItem","ListItemIcon","Description","ListItemText","YouTube","GitHub","CardActions","Button","BugReport","components_Disclaimer","SET_NETWORK","SET_TOTAL_SIGNERS","SET_REQUIRED_SIGNERS","SET_ADDRESS_TYPE","SET_FROZEN","setFrozen","NetworkPicker","handleNetworkChange","event","setNetwork","_this$props","frozen","FormControl","component","RadioGroup","FormControlLabel","id","control","Radio","color","name","label","onChange","checked","disabled","FormHelperText","React","Component","mapDispatchToProps","connect","state","settings","MAX_TOTAL_SIGNERS","QuorumPicker","renderIncrementRequiredSigners","totalSigners","IconButton","onClick","handleIncrementRequiredSigners","AddCircle","renderDecrementRequiredSigners","_this$props2","handleDecrementRequiredSigners","RemoveCircle","renderIncrementTotalSigners","_this$props3","handleIncrementTotalSigners","renderDecrementTotalSigners","_this$props4","handleDecrementTotalSigners","_this$props5","setRequiredSigners","preventDefault","_this$props6","_this$props7","setTotalSigners","_this$props8","_this$props9","justify","xs","alignItems","number","AddressTypePicker","handleTypeChange","setType","actionWrapper","numberedActionWrapper","wrappedNumberedActions","mapping","actionIndex","wrappedMapping","actionFunctionNames","keys","actionFunctionName","actionType","ClientPicker","url_edited","setUrl","handleUrlChange","setUrlError","validateUrl","setState","handleUsernameChange","setUsername","setUsernameError","username","validateUsername","handlePasswordChange","setPassword","setPasswordError","password","validatePassword","toggle","client","charAt","toUpperCase","Switch_Switch","host","exec","pass","url_error","username_error","password_error","publicNotes","TextField","fullWidth","helperText","privateNotes","wrappedActions","setStatus","_callee2","utxosResult","utxos","regenerator_default","wrap","axios","blockExplorerAPIURL","Promise","all","asyncToGenerator","mark","_callee","utxo","transactionResult","BigNumber","confirmed","status","vout","satoshisToBitcoins","_x8","response","_callee3","addressesult","addressData","used","chain_stats","funded_txo_count","mempool_stats","_callee4","feeEstimatesResult","feeEstimates","Math","ceil","_callee5","broadcastResult","post","callBitcoind","auth","method","params","_args2","undefined","_ref6","resolve","reject","headers","Accept","Content-Type","jsonrpc","then","resp","catch","_x9","isWalletAddressNotFoundError","e","bitcoindParams","addresses","_ref7","addressParam","promises","previousTransactions","forEach","mapindex","confirmations","bitcoinsToSatoshis","_x10","bitcoindGetAddressStatus","_x5","_bitcoindGetAddressStatus","_callee6","_ref3$numBlocks","numBlocks","feeRate","feerate","_callee7","_ref4","hex","_context7","log","BLOCK_EXPLORER","fetchAddressUTXOs","_x","_x2","_blockExplorerGetAddresesUTXOs","blockExplorerGetAddresesUTXOs","_x4","_bitcoindListUnspent","bitcoindListUnspent","objectSpread","getAddressStatus","_x3","_blockExplorerGetAddressStatus","blockExplorerGetAddressStatus","fetchFeeEstimate","_blockExplorerGetFeeEstimate","blockExplorerGetFeeEstimate","_x6","_bitcoindEstimateSmartFee","bitcoindEstimateSmartFee","broadcastTransaction","_x7","_blockExplorerBroadcastTransaction","blockExplorerBroadcastTransaction","_bitcoindSendRawTransaction","bitcoindSendRawTransaction","WalletConfirmation","render","Table","TableHead","TableRow","TableCell","TableBody","renderConfirmationInfo","extendedPublicKeyImporters","importer","extendedPublicKey","quorum","UPDATE_DEPOSIT_NODE","UPDATE_CHANGE_NODE","RESET_NODES_SPEND","UPDATE_AUTO_SPEND","UPDATE_VIEW_ADDRESSES","UPDATE_DEPOSITING","UPDATE_SPENDING","UPDATE_WALLET_NAME","RESET_WALLET_VIEW","SPEND_NODES","updateDepositNodeAction","change","updateChangeNodeAction","updateAutoSpendAction","updateDepositingAction","updateSpendingAction","resetWalletView","CHOOSE_PERFORM_SPEND","SET_INPUTS","ADD_OUTPUT","SET_OUTPUT_ADDRESS","SET_OUTPUT_AMOUNT","DELETE_OUTPUT","SET_FEE_RATE","SET_FEE","FINALIZE_OUTPUTS","RESET_OUTPUTS","SET_TXID","RESET_TRANSACTION","SET_IS_WALLET","setInputs","setOutputAddress","setOutputAmount","amountString","setFeeRate","valueString","finalizeOutputs","finalized","WalletControl","scrollRef","createRef","componentDidMount","current","scrollIntoView","behavior","ref","totalBalance","setDeposit","ml","setSpend","setView","setDepositing","setSpending","setViewing","deposits","balanceSats","plus","wallet","spend","Copyable","copied","timer","componentWillUnmount","clearTimeout","newline","children","stopPropagation","react_copy_to_clipboard_lib_default","onCopy","options","format","className","badge","FileCopy","fontSize","setTimeout","defaultProps","icon","depositTimer","WalletDeposit","amountError","showReceived","handleAmountChange","decimal","qrString","_this$state","updateDepositNode","nodes","isEqualTo","addressUsed","setInterval","clearInterval","reduce","accumulator","currentValue","fetchedUTXOs","fetchUTXOsError","_this$state2","components_Copyable","qrcode_react_lib_default","size","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","ContentProps","aria-describedby","UTXOSet","renderInputs","confirmedStyle","styles","utxoTxid","unconfirmed","confirmedTitle","hover","blockExplorerTransactionURL","OpenInNew","inputsTotalSats","TableFooter","colSpan","Node","generate","spending","addressKnown","Checkbox","handleSpend","renderAddress","addressContent","spent","blockExplorerAddressURL","Launch_default","ExpansionPanel","ExpansionPanelSummary","expandIcon","isGreaterThan","ExpandMore_default","aria-controls","ExpansionPanelDetails","Spend_UTXOSet","present","addNode","updateNode","updateAutoSpend","filter","interval","ownProps","braid","info","BitcoindAddressImporter","imported","importError","rescan","addressesError","addressPresent","autoImport","checkAddress","handleRescan","_status","import","statusText","importCallback","_ref5","imports","scriptPubKey","timestamp","bitcoindImportMulti","responseError","c","pluralOrSingularAddress","NodeSet","page","nodesPerPage","getUnknownAddressNodes","changeNodes","depositNodes","addressesImported","unknown","addr","addressStatus","updates","getNodeSet","nodesObject","currentNode","renderNodes","startingIndex","nodesRows","nodeSet","whichOne","nodeRow","Wallet_Node","handlePageChange","selected","handleChangeRowsPerPage","pageCount","rowCount","generateAnotherPage","toggleChange","_this$state3","canLoad","useAddressImporter","components_BitcoindAddressImporter","TablePagination","count","rowsPerPage","backIconButtonProps","aria-label","nextIconButtonProps","onChangePage","onChangeRowsPerPage","OutputEntry","handleAddressChange","setAddress","hasAddressError","addressError","setAmount","hasAmountError","isNotBalanceable","feeError","newAmount","autoBalancedAmount","validateOutputAmountBTC","isBalanceable","hasBalanceError","balanceError","fee","outputTotalSats","feeSats","minus","balanceAction","handleBalance","hasError","handleDelete","remove","finalizedOutputs","placeholder","outputsFormInput","Tooltip","placement","Delete","OutputsForm","titleRef","feeRateFetchError","initialOutputState","scrollToTitle","componentDidUpdate","signatureImporters","k","renderOutputs","Spend_OutputEntry","inputsTotal","outputsAndFeeTotal","hasFeeRateFetchError","hasFeeRateError","feeRateError","hasFeeError","handleAddOutput","handleFeeRateChange","handleFeeChange","setFee","handleFinalize","handleReset","resetOutputs","getFeeEstimate","newFeeRate","finish","gatherSignaturesDisabled","outputAmount","addChange","InputProps","endAdornment","InputAdornment","position","Speed","readOnly","TextSignatureImporter","signatureJSON","multiline","rows","handleChange","finalize","setError","parseError","validateAndSetSignature","QR_CODE_READER_DELAY","HermitReader","walletState","interaction","width","startText","commandMessage","messageFor","handleStart","react_qr_reader_lib_default","delay","onError","handleError","onScan","handleScan","style","facingMode","handleStop","onStart","onClear","onSuccess","HermitDisplayer","errorMessage","string","WalletFeedback","filteredMessages","renderMessage","messageIcon","excludeCodes","excludeCode","includes","Info","Warning","esm_Error","messageColrName","HermitSignatureImporter","classCallCheck","possibleConstructorReturn","signatureImporter","disableChangeMethod","resetBIP32Path","bip32PathError","signatureError","components_WalletFeedback","messagesFor","handleBIP32PathChange","hasBIP32PathError","bip32PathIsDefault","Hermit_HermitDisplayer","Hermit_HermitReader","clear","signature","enableChangeMethod","validateAndSetBIP32Path","defaultBIP32Path","bip32PathFinalized","isSupported","HardwareWalletSignatureImporter","inConstructor","verified","walletType","HardwareWalletSignMultisigTransaction","HardwareWalletExportPublicKey","messageTextFor","renderAction","renderDeviceConfirmInfo","renderTargets","verifyError","sign","_this$state4","hasMessagesFor","_this$state5","setBIP32PathError","run","verifyPublicKey","publicKeyIndex","indexOf","signatureImporterNum","otherSignatureImporter","otherPublicKeyIndex","stateUpdate","EditableName","editing","newName","submit","Check","cancel","Clear","startEditing","Edit","setName","setSignatureImporterName","setSignatureImporterMethod","setSignatureImporterBIP32Path","setSignatureImporterPublicKeys","setSignatureImporterSignature","setSignatureImporterFinalized","setSignatureImporterComplete","TEXT","SignatureImporter","showUnsignedTransaction","getCurrent","components_EditableName","renderImport","notMyTurn","labelId","InputLabel","Select","handleMethodChange","MenuItem","TREZOR","LEDGER","HERMIT","renderImportByMethod","Spend_TextSignatureImporter","Spend_HermitSignatureImporter","Spend_HardwareWalletSignatureImporter","setMethod","reset","renderUnsignedTransaction","unsignedTransaction","handleHideUnsignedTransaction","handleShowUnsignedTransaction","setSignature","setPublicKeys","setFinalized","isWallet","multisigBIP32Root","multisigBIP32Path","setBIP32Path","callback","errback","validateBIP32Path","renderSignature","inputsSignatures","_this$props10","setComplete","finalizedSignatureImporters","inputNumber","inputSignature","validateHex","validateMultisigSignature","finalizedSignatureImporterNum","finalizedSignatureImporter","Transaction","broadcasting","buildSignedTransaction","inputsSignaturesByPublicKey","inputSignaturesByPublicKey","signerInputPublicKey","signerInputSignature","signedMultisigTransaction","handleBroadcast","setTxid","signedTransaction","transactionURL","signedTransactionHex","WalletSign","handleCancel","renderSignatureImporters","signaturesFinalized","Spend_Transaction","transactionFinalized","handleReturn","Spend_SignatureImporter","every","spendNodes","getChangeNode","updateChangeNode","changeNode","changeAddress","resetTransaction","coinSelectTimer","WalletSpend","outputsAmount","feeAmount","handleAddChange","outputIndex","renderSpend","autoSpend","handleSpendMode","Wallet_NodeSet","selectCoins","resetNodesSpend","sum","isNaN","outputTotal","spendableInputs","selectedUtxos","inputTotal","_loop","spendableInput","isGreaterThanOrEqualTo","nextProps","Spend_OutputsForm","Wallet_WalletSign","WalletView","SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE","setExtendedPublicKeyImporterName","resetExtendedPublicKeyImporterBIP32Path","setExtendedPublicKeyImporterBIP32Path","setExtendedPublicKeyImporterMethod","setExtendedPublicKeyImporterExtendedPublicKey","setExtendedPublicKeyImporterFinalized","MAX_TRAILING_EMPTY_NODES","MAX_FETCH_UTXOS_ERRORS","WalletGenerator","generating","extendedPublicKeyCount","extendedPublicKeyImporter","renderModeComponent","depositing","viewAddresses","Wallet_WalletDeposit","Wallet_WalletSpend","Wallet_WalletView","downloadWalletDetails","walletDetailsText","walletDetailsFilename","walletName","extendedPublicKeyImporterBIP32Paths","extendedPublicKeyImporterNum","extendedPublicKeyImporterBIP32Path","toggleImporters","setImportersVisible","configuring","freeze","isChange","update","attemptToKeepGenerating","multisigUpdates","generateMultisig","extendedPublicKeyImporterNumber","utxoUpdates","deriveChildPublicKey","sort","generateMultisigFromPublicKeys","fetchUTXOs","generateNextNodeIfNecessary","trailingEmptyNodes","fetchUTXOsErrors","allBIP32Paths","p1","p2","p1Segments","p2Segments","parseInt","pathSegments","maxIndex","nextBIP32Path","setIsWallet","Wallet_WalletControl","ConfirmWallet","updateAutoSpned","DEFAULT_BIP32_PATH","ExtendedPublicKeyExtendedPublicKeyImporter","setBIP32PathToDefault","extendedPublicKeyError","handleExtendedPublicKeyChange","hasExtendedPublicKeyError","validateAndSetExtendedPublicKey","deriveChildExtendedPublicKey","validateExtendedPublicKey","find","TextExtendedPublicKeyImporter","HermitExtendedPublicKeyImporter","FormGroup","bip32_path","HardwareWalletExtendedPublicKeyImporter","HardwareWalletExportExtendedPublicKey","Conflict","XPUB","ExtendedPublicKeyImporter","Wallet_HardwareWalletExtendedPublicKeyImporter","Wallet_HermitExtendedPublicKeyImporter","Wallet_ExtendedPublicKeyExtendedPublicKeyImporter","Wallet_TextExtendedPublicKeyImporter","setExtendedPublicKey","moveUp","moveDown","renderBIP32Path","renderExtendedPublicKey","_this$props11","extendedPublicKeyImporterIndex","_this$props12","finalizedNetwork","hasConflict","conflict","conflictMessage","CreateAddress_Conflict","bip32","require","CreateWallet","showSettings","renderExtendedPublicKeyImporters","Wallet_WalletGenerator","renderSettings","components_QuorumPicker","components_AddressTypePicker","components_NetworkPicker","components_ClientPicker","right","toggleDrawer","Settings","Drawer","anchor","display","Wallet_ExtendedPublicKeyImporter","SORT_PUBLIC_KEY_IMPORTERS","UPDATE_MULTISIG_ADDRESS","setPublicKeyImporterName","resetPublicKeyImporterBIP32Path","setPublicKeyImporterBIP32Path","setPublicKeyImporterMethod","setPublicKeyImporterPublicKey","setPublicKeyImporterFinalized","movePublicKeyImporterUp","movePublicKeyImporterDown","MultisigDetails","renderScript","script","ops","scriptToOps","sm","redeemScript","witnessScript","align","Chip","networkLabel","multisigTotalSigners","AddressGenerator","publicKeyCount","isInConflict","publicKeyImporters","some","publicKeyImporter","publicKeysAreCanonicallySorted","sortedPublicKeys","canonicallySortPublicKeys","sortPublicKeyImporters","setMultisigAddress","publicKeyImporterNum","downloadAddressDetails","addressDetailsText","addressDetailsFilename","redeemScriptLine","witnessScriptLine","scriptsSpacer","publicKeyImporterBIP32Paths","publicKeyImporterBIP32Path","canonicallySorted","components_MultisigDetails","TextPublicKeyImporter","validateAndSetPublicKey","validatePublicKey","ExtendedPublicKeyPublicKeyImporter","HermitPublicKeyImporter","publicKeyError","HardwareWalletPublicKeyImporter","PublicKeyImporter","ArrowUpward","ArrowDownward","CreateAddress_HardwareWalletPublicKeyImporter","CreateAddress_HermitPublicKeyImporter","CreateAddress_ExtendedPublicKeyPublicKeyImporter","CreateAddress_TextPublicKeyImporter","setPublicKey","renderPublicKey","publicKeyImporterIndex","CreateAddress","renderPublicKeyImporters","CreateAddress_AddressGenerator","renderClientPicker","CreateAddress_PublicKeyImporter","CHOOSE_CONFIRM_OWNERSHIP","SET_OWNERSHIP_MULTISIG","RESET_PUBLIC_KEY_IMPORTER","RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH","SET_PUBLIC_KEY_IMPORTER_BIP32_PATH","SET_PUBLIC_KEY_IMPORTER_METHOD","SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY","ScriptEntry","scriptHex","scriptError","hasScriptError","hasFetchUTXOsError","scriptName","scriptTitle","substring","handleScriptChange","generateMultisigFromHex","renderDetails","chosePerformSpend","choseConfirmOwnership","buttonsDisabled","performSpend","confirmOwnership","choosePerformSpend","fetchUTXOsResult","isLessThanOrEqualTo","chooseConfirmOwnership","setOwnershipMultisig","autoFocus","ownership","chosen","ConfirmOwnership","renderConfirmation","GreenListItemIcon","styled","Check_default","Clear_default","role","Spend","Spend_ScriptEntry","renderBody","Spend_ConfirmOwnership","spendable","addressFinalized","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","Navbar","classes","AppBar","Toolbar","logo","Footer","src","alt","height","version","ErrorBoundary","errorInfo","mx","my","whiteSpace","componentStack","App","CssBaseline","Container","maxWidth","components_Navbar","ErrorBoundry_ErrorBoundary","HashRouter","Switch","Route","Wallet","components_Footer","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","updateState","initialState","initialNodeState","spendingSats","braidReducer","action","updatedState","resetSpend","newNodes","nodeFoundWithValue","otherNode","Date","getTime","extendedPublicKeys","initialExtendedPublicKeyImporterState","bip32PathModified","confliect","1","2","3","finalizedAddressType","updateExtendedPublicKeyImporterState","field","extendedPublicKeyImporterChange","newState","setConflict","updateImporterPaths","initialPublicKeyImporterState","updatePublicKeyImporterState","publicKeyImporterChange","resetWalletViews","setUnique","initialSignatureImporterState","updateSignatureImporterState","signatureImporterChange","sortInputs","b","x","toLowerCase","y","n","initialOutputsState","validateTransaction","diff","isLessThan","absoluteValue","setFeeForRate","feeRateString","nout","estimateMultisigTransactionFee","numInputs","numOutputs","feesPerByteInSatoshis","spendReducers","combineReducers","updateMultisig","keyResetState","updateInputs","newOutputs","toConsumableArray","validateAddress","updateOutputAddress","updateOutputAmount","deleteOutput","validateFeeRate","updateFeeRate","feeString","validateFeeBTC","estimateMultisigTransactionFeeRate","feesInSatoshis","updateFee","unsignedMultisigTransaction","finalizeSignatureImporterState","walletReducers","rootReducers","updateNetwork","updateAddressType","stub","updateTotalSigners","updateFinalizedSettings","abovePublicKeyImporter","belowPublicKeyImporter","sortedPublicKeyImporters","publicKeyImportersChange","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","logger","ReduxPromise","thunk","ReactDOM","es","components_App","getElementById","process","origin","addEventListener","fetch","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","feeMagicBtn","toHexString","byteArray","_byte","inputString","test","num","_bignumber","shiftedBy","networkData","UnsupportedInteraction","_bowser","environment","getParser","userAgent","failureText","failureCode","pending","active","unsupported","allMessages","matchingMessages","_utils","_bip","_keys","_networks","_script","_addresses","_transactions","_multisig","_block_explorer","toASM","pathString","splice","pathSegment","substr","HARDENING_OFFSET","bip32SequenceToPath","sequence","BIP32_PATH_REGEX","BIP32_HARDENED_PATH_REGEX","BIP32_UNHARDENED_PATH_REGEX","segmentStrings","segmentString","validateBIP32PathSegment","validateBIP32PathSegments","fromBase58","child","derivePath","toBase58","pow","MAX_BIP32_HARDENED_NODE_INDEX","MAX_BIP32_NODE_INDEX","numberString","hardened","numberError","Number","_exportNames","_trezor","_ledger","_hermit","Buffer","requiredPrefix","notXpubError","prefix","_bitcoinjsLib","ECPair","fromPublicKey","from","pubkeyBuffer","prefixBuffer","alloc","trim","magic_byte_regex","TESTNET_ADDRESS_MAGIC_BYTE_PATTERN","MAINNET_ADDRESS_MAGIC_BYTE_PATTERN","isBech32","BECH32_ADDRESS_MAGIC_BYTE_REGEX","address_regex","BECH32_ADDRESS_BODY_PATTERN","ADDRESS_BODY_PATTERN","_bitcoinAddressValidation","ZERO","MAX_FEE_RATE","feeBTCString","MAX_FEE_BTC","DUST_LIMIT_SATS","dp","redeem","multisigAddress","_len","_key","payments","p2ms","generateMultisigFromRedeemScript","config","dividedBy","estimateMultisigTransactionLength","multipliedBy","transactionBuilder","hash","hashForWitnessV0","SIGHASH_ALL","hashForSignature","multisigSignatureHash","signatureBuffer","encodedSignerInputSignatureBuffer","decodedSignerInputSignatureBuffer","r","s","rToUse","byteLength","set","multisigSignatureBuffer","signatureNoSighashType","publicKeyBuffer","keyPair","fromHex","arr","inputPublicKeys","sortedSignatures","witness","multisigWitnessField","setWitness","_witness","scriptSig","ins","arr2","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","_scriptSig","signersInputSignatures","signatureOps","inputScript","inputScriptBuffer","fromASM","multisigScriptSig","_p2sh","_p2sh_p2wsh","_p2wsh","p2sh","p2wsh","estimateMultisigP2SHTransactionLength","estimateMultisigP2SHP2WSHTransactionLength","estimateMultisigP2WSHTransactionLength","wit","baseSize","sigSize","witnessSize","blockExplorerURL","blockExplorerBaseURL","BASE_URL_MAINNET","BASE_URL_TESTNET"],"mappings":"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","file":"static/js/main.fcff50ae.chunk.js","sourcesContent":["\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/bondibit/projects/unchained/caravan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.fill\");\n\nrequire(\"core-js/modules/es.array.is-array\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.number.to-fixed\");\n\nrequire(\"core-js/modules/es.object.create\");\n\nrequire(\"core-js/modules/es.object.define-property\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of\");\n\nrequire(\"core-js/modules/es.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.promise\");\n\nrequire(\"core-js/modules/es.reflect.get\");\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/es.string.match\");\n\nrequire(\"core-js/modules/es.string.repeat\");\n\nrequire(\"core-js/modules/es.string.split\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TrezorSignMultisigTransaction = exports.TrezorExportExtendedPublicKey = exports.TrezorExportPublicKey = exports.TrezorExportHDNode = exports.TrezorInteraction = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _unchainedBitcoin = require(\"unchained-bitcoin\");\n\nvar _interaction = require(\"./interaction\");\n\nvar _addressScriptTypes;\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar TrezorConnect = require(\"trezor-connect\")[\"default\"];\n\nTrezorConnect.manifest({\n  email: \"foo@bar.com\",\n  appUrl: \"https://localhost:3000\"\n});\n/**\n * Interaction with Trezor hardware wallets\n * @extends {module:interaction.WalletInteraction}\n */\n\nvar TrezorInteraction =\n/*#__PURE__*/\nfunction (_WalletInteraction) {\n  _inherits(TrezorInteraction, _WalletInteraction);\n  /**\n   * @param {object} options\n   * @param {string} options.network - bitcoin network\n   */\n\n\n  function TrezorInteraction(_ref) {\n    var _this;\n\n    var network = _ref.network;\n\n    _classCallCheck(this, TrezorInteraction);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TrezorInteraction).call(this, {\n      network: network\n    }));\n    _this.trezorCoin = coin(network);\n    return _this;\n  } // installInstructions() {\n  //   return [\"Make sure you have installed the Trezor bridge software.  Test your installation at https://trezor.io/start\"];\n  // }\n\n\n  _createClass(TrezorInteraction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(TrezorInteraction.prototype), \"messages\", this).call(this);\n\n      messages[_interaction.PENDING].push({\n        level: _interaction.INFO,\n        text: \"Make sure your Trezor hardware wallet is plugged in.\",\n        code: \"trezor.device.connect\"\n      });\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.INFO,\n        text: \"Your browser should open a new Trezor Connect window.  If you do not see this window, ensure you have enabled popups for this site.\",\n        code: \"trezor.popup.generic\"\n      });\n\n      return messages;\n    }\n  }]);\n\n  return TrezorInteraction;\n}(_interaction.WalletInteraction);\n/**\n * Class for wallet interaction at a given BIP32 path.\n * @extends {module:trezor.TrezorInteraction}\n */\n\n\nexports.TrezorInteraction = TrezorInteraction;\n\nvar TrezorExportHDNode =\n/*#__PURE__*/\nfunction (_TrezorInteraction) {\n  _inherits(TrezorExportHDNode, _TrezorInteraction);\n  /**\n   *\n   * @param {object} options\n   * @param {string} options.network - bitcoin network\n   * @param {string} [bip32Path] - the BIP32 path from which to retrieve a single public key.  Note, you must provide either the bip32Path or the bip32Paths argument.\n   * @param {Array<string>} [bip32Paths] - the BIP32 path from which to retrieve a multiple public keys\n   * @example\n   * const trezorNode = new TrezorExportHDNode({network: \"mainnet\", bip32Path: \"m/48'/0'/0'/2'/0\"})\n   */\n\n\n  function TrezorExportHDNode(_ref2) {\n    var _this2;\n\n    var network = _ref2.network,\n        bip32Path = _ref2.bip32Path,\n        bip32Paths = _ref2.bip32Paths;\n\n    _classCallCheck(this, TrezorExportHDNode);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(TrezorExportHDNode).call(this, {\n      network: network\n    }));\n    _this2.bip32Paths = bip32Paths || [bip32Path];\n    return _this2;\n  }\n\n  _createClass(TrezorExportHDNode, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(TrezorExportHDNode.prototype), \"messages\", this).call(this);\n\n      for (var i = 0; i < this.bip32Paths.length; i++) {\n        var bip32Path = this.bip32Paths[i];\n        var bip32PathSegments = (bip32Path || '').split('/');\n\n        if (bip32PathSegments.length < 4) {\n          // m, 45', 0', 0', ...\n          messages[_interaction.PENDING].push({\n            level: _interaction.ERROR,\n            text: \"BIP32 path must be at least depth 3.\",\n            code: \"trezor.bip32_path.minimum\"\n          });\n\n          break;\n        } else {\n          var coinPath = bip32PathSegments[2];\n\n          if (this.network === _unchainedBitcoin.NETWORKS.MAINNET) {\n            if (!coinPath.match(/^0'/)) {\n              messages[_interaction.PENDING].push({\n                level: _interaction.ERROR,\n                text: \"Mainnet BIP32 path must have a second component of 0'\",\n                code: \"trezor.bip32_path.mismatch\"\n              });\n\n              break;\n            }\n          }\n\n          if (this.network === _unchainedBitcoin.NETWORKS.TESTNET) {\n            if (!coinPath.match(/^1'/)) {\n              messages[_interaction.PENDING].push({\n                level: _interaction.ERROR,\n                text: \"Testnet BIP32 path must have a second component of 1'\",\n                code: \"trezor.bip32_path.mismatch\"\n              });\n\n              break;\n            }\n          }\n        }\n      }\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.INFO,\n        text: \"Confirm in the Trezor Connect window that you want to 'Export public key'.  You may be prompted to enter your PIN.\",\n        code: \"trezor.popup.export_hdnode\"\n      });\n\n      return messages;\n    }\n    /**\n     * Retrieve key from Trezor device for a given instance\n     * @override\n     * @example\n     * const trezorNode = new TrezorExportHDNode({network: \"mainnet\", bip32Path: \"m/48'/0'/0'/2'/0\"});\n     * const result = await trezorNode.run();\n     * console.log(result.publicKey);\n     * @returns {Object|Array<object>} object or array of objects containing public key and extended public key for the BIP32 path of a given instance\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var result;\n      return _regeneratorRuntime.async(function run$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(this.bip32Paths.length > 1)) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(TrezorConnect.getPublicKey({\n                bundle: this.bip32Paths.map(function (bip32path) {\n                  return {\n                    path: bip32path\n                  };\n                }),\n                coin: this.trezorCoin\n              }));\n\n            case 3:\n              result = _context.sent;\n              _context.next = 13;\n              break;\n\n            case 6:\n              if (!(this.bip32Paths.length === 1)) {\n                _context.next = 12;\n                break;\n              }\n\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(TrezorConnect.getPublicKey({\n                path: this.bip32Paths[0],\n                coin: this.trezorCoin\n              }));\n\n            case 9:\n              result = _context.sent;\n              _context.next = 13;\n              break;\n\n            case 12:\n              throw new Error(\"You must provide a bip32 path string or an array of bip32 paths\");\n\n            case 13:\n              if (result.success) {\n                _context.next = 15;\n                break;\n              }\n\n              throw new Error(result.payload.error);\n\n            case 15:\n              return _context.abrupt(\"return\", result.payload);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return TrezorExportHDNode;\n}(TrezorInteraction);\n/**\n * Class for wallet public key interaction at a given BIP32 path.\n * @extends {module:trezor.TrezorExportHDNode}\n */\n\n\nexports.TrezorExportHDNode = TrezorExportHDNode;\n\nvar TrezorExportPublicKey =\n/*#__PURE__*/\nfunction (_TrezorExportHDNode) {\n  _inherits(TrezorExportPublicKey, _TrezorExportHDNode);\n\n  function TrezorExportPublicKey() {\n    _classCallCheck(this, TrezorExportPublicKey);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TrezorExportPublicKey).apply(this, arguments));\n  }\n\n  _createClass(TrezorExportPublicKey, [{\n    key: \"run\",\n\n    /**\n     * Retrieve public key from Trezor device for a given instance\n     * @example\n     * const trezorNode = new TrezorExportPublicKey({network: \"mainnet\", bip32Path: \"m/48'/0'/0'/2'/0\"});\n     * const publicKey = await trezorNode.run();\n     * console.log(publicKey);\n     * @returns {string|Array<string>} public key or keys for the BIP32 paths of a given instance\n     */\n    value: function run() {\n      var payload;\n      return _regeneratorRuntime.async(function run$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(_get(_getPrototypeOf(TrezorExportPublicKey.prototype), \"run\", this).call(this));\n\n            case 2:\n              payload = _context2.sent;\n\n              if (!Array.isArray(payload)) {\n                _context2.next = 5;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", payload.map(function (key) {\n                return key.publicKey;\n              }));\n\n            case 5:\n              return _context2.abrupt(\"return\", payload.publicKey);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return TrezorExportPublicKey;\n}(TrezorExportHDNode);\n/**\n * Class for wallet extended public key interaction at a given BIP32 path.\n * @extends {module:trezor.TrezorExportHDNode}\n */\n\n\nexports.TrezorExportPublicKey = TrezorExportPublicKey;\n\nvar TrezorExportExtendedPublicKey =\n/*#__PURE__*/\nfunction (_TrezorExportHDNode2) {\n  _inherits(TrezorExportExtendedPublicKey, _TrezorExportHDNode2);\n\n  function TrezorExportExtendedPublicKey() {\n    _classCallCheck(this, TrezorExportExtendedPublicKey);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TrezorExportExtendedPublicKey).apply(this, arguments));\n  }\n\n  _createClass(TrezorExportExtendedPublicKey, [{\n    key: \"run\",\n\n    /**\n     * Retrieve extended public key from Trezor device for a given instance\n     * @example\n     * const trezorNode = new TrezorExportExtendedPublicKey({network: \"mainnet\", bip32Path: \"m/48'/0'/0'/2'/0\"});\n     * const xpub = await trezorNode.run();\n     * console.log(xpub);\n     * @returns {string} extended public key for the BIP32 path of a given instance\n     */\n    value: function run() {\n      var payload;\n      return _regeneratorRuntime.async(function run$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(_get(_getPrototypeOf(TrezorExportExtendedPublicKey.prototype), \"run\", this).call(this));\n\n            case 2:\n              payload = _context3.sent;\n              return _context3.abrupt(\"return\", payload.xpub);\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return TrezorExportExtendedPublicKey;\n}(TrezorExportHDNode);\n/**\n * Class for wallet signing interaction.\n * @extends {module:trezor.TrezorInteraction}\n */\n\n\nexports.TrezorExportExtendedPublicKey = TrezorExportExtendedPublicKey;\n\nvar TrezorSignMultisigTransaction =\n/*#__PURE__*/\nfunction (_TrezorInteraction2) {\n  _inherits(TrezorSignMultisigTransaction, _TrezorInteraction2);\n  /**\n   * @param {object} options\n   * @param {string} options.network - bitcoin network\n   * @param {array<object>} options.inputs - inputs for the transaction\n   * @param {array<object>} options.outputs - outputs for the transaction\n   * @param {array<string>} options.bip32Paths - BIP32 paths\n   */\n\n\n  function TrezorSignMultisigTransaction(_ref3) {\n    var _this3;\n\n    var network = _ref3.network,\n        inputs = _ref3.inputs,\n        outputs = _ref3.outputs,\n        bip32Paths = _ref3.bip32Paths;\n\n    _classCallCheck(this, TrezorSignMultisigTransaction);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(TrezorSignMultisigTransaction).call(this, {\n      network: network\n    }));\n    _this3.inputs = inputs;\n    _this3.outputs = outputs;\n    _this3.bip32Paths = bip32Paths;\n    return _this3;\n  }\n\n  _createClass(TrezorSignMultisigTransaction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(TrezorSignMultisigTransaction.prototype), \"messages\", this).call(this);\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.INFO,\n        text: \"Confirm in the Trezor Connect window that you want to 'Sign \".concat(this.network, \" transaction'.  You may be prompted to enter your PIN.\"),\n        code: \"trezor.popup.sign\"\n      });\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.INFO,\n        text: \"You Trezor device will ask you to confirm each output address above with its corresponding output amount.  Check each address and amount carefully against both the values displayed in this application and your own expectations.\",\n        code: \"trezor.signing.outputs\"\n      });\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.INFO,\n        text: \"Finally, your Trezor device will ask you to confirm the overall transaction output amount and fee.  Check both carefully against both the values displayed in this application and your own expectations.\",\n        code: \"trezor.signing.final\"\n      });\n\n      return messages;\n    }\n    /**\n     * Retrieve extended public key from Trezor device for a given instance\n     * @example\n     * import {generateMultisigFromHex, NETWORKS, MULTISIG_ADDRESS_TYPES} from \"unchained-bitcoin\";\n     * ...\n     * const input = {\n     *     txid: \"8d276c76b3550b145e44d35c5833bae175e0351b4a5c57dc1740387e78f57b11\",\n     *     index: 1,\n     *     multisig: generateMultisigFromHex(NETWORKS.TESTNET, MULTISIG_ADDRESS_TYPES.P2SH, redeemScript),\n     *     amountSats: BigNumber(1234000)\n     * }\n     * const output = {\n     *     amountSats: BigNumber(1299659),\n     *     address: \"2NGHod7V2TAAXC1iUdNmc6R8UUd4TVTuBmp\"\n     * }\n     * const trezorSigner = new TrezorSignMultisigTransaction({\n     *   network: \"testnet\",\n     *   inputs: [input],\n     *   outputs: [output],\n     *   bip32Paths: [\"m/45'/0'/0'/0\"]\n     * });\n     * const signatures = await trezorSigner.run();\n     * console.log(signatures);\n     * @returns {string} string representation of an array of signatures\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this4 = this;\n\n      var trezorInputs, trezorOutputs, transaction, result;\n      return _regeneratorRuntime.async(function run$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              trezorInputs = this.inputs.map(function (input, inputIndex) {\n                return trezorInput(input, _this4.bip32Paths[inputIndex]);\n              });\n              trezorOutputs = this.outputs.map(function (output) {\n                return trezorOutput(output);\n              });\n              transaction = {\n                inputs: trezorInputs,\n                outputs: trezorOutputs,\n                coin: coin(this.network)\n              };\n              _context4.next = 5;\n              return _regeneratorRuntime.awrap(TrezorConnect.signTransaction(transaction));\n\n            case 5:\n              result = _context4.sent;\n\n              if (result.success) {\n                _context4.next = 8;\n                break;\n              }\n\n              throw new Error(result.payload.error);\n\n            case 8:\n              return _context4.abrupt(\"return\", result.payload.signatures);\n\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return TrezorSignMultisigTransaction;\n}(TrezorInteraction);\n/**\n * Retrieve Trezor format for network constant\n * @param {string} network - bitcoin network\n * @private\n * @returns {string} Trezor format of bitcoin network\n */\n\n\nexports.TrezorSignMultisigTransaction = TrezorSignMultisigTransaction;\n\nfunction coin(network) {\n  return network === _unchainedBitcoin.NETWORKS.MAINNET ? \"Bitcoin\" : \"Testnet\";\n}\n\nvar addressScriptTypes = (_addressScriptTypes = {}, _defineProperty(_addressScriptTypes, _unchainedBitcoin.MULTISIG_ADDRESS_TYPES.P2WSH, 'SPENDWITNESS'), _defineProperty(_addressScriptTypes, _unchainedBitcoin.MULTISIG_ADDRESS_TYPES.P2SH, 'SPENDMULTISIG'), _defineProperty(_addressScriptTypes, _unchainedBitcoin.MULTISIG_ADDRESS_TYPES.P2SH_P2WSH, 'SPENDP2SHWITNESS'), _addressScriptTypes);\n\nfunction trezorInput(input, bip32Path) {\n  var requiredSigners = (0, _unchainedBitcoin.multisigRequiredSigners)(input.multisig);\n  var addressType = (0, _unchainedBitcoin.multisigAddressType)(input.multisig);\n  var spendType = addressScriptTypes[addressType];\n  return {\n    script_type: spendType,\n    multisig: {\n      m: requiredSigners,\n      pubkeys: (0, _unchainedBitcoin.multisigPublicKeys)(input.multisig).map(function (publicKey) {\n        return trezorPublicKey(publicKey);\n      }),\n      signatures: Array(requiredSigners).fill('')\n    },\n    prev_hash: input.txid,\n    prev_index: input.index,\n    address_n: (0, _unchainedBitcoin.bip32PathToSequence)(bip32Path),\n    amount: input.amountSats.toString()\n  };\n}\n/**\n * Retrieve Trezor formatted input object\n * @param {string} publicKey\n * @private\n * @returns {object} Trezor formatted input\n */\n\n\nfunction trezorPublicKey(publicKey) {\n  return {\n    address_n: [],\n    node: {\n      // FIXME are all these 0's OK?\n      depth: 0,\n      child_num: 0,\n      fingerprint: 0,\n      chain_code: '0'.repeat(64),\n      public_key: publicKey\n    }\n  };\n}\n/**\n * Retrieve Trezor formatted output object\n * @param {object} output\n * @private\n * @returns {object} Trezor formatted output\n */\n\n\nfunction trezorOutput(output) {\n  return {\n    amount: output.amountSats.toFixed(0),\n    address: output.address,\n    script_type: 'PAYTOADDRESS'\n  };\n}","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/bondibit/projects/unchained/caravan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.is-array\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.join\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.array.slice\");\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.object.create\");\n\nrequire(\"core-js/modules/es.object.define-property\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of\");\n\nrequire(\"core-js/modules/es.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.promise\");\n\nrequire(\"core-js/modules/es.reflect.get\");\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/es.string.split\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.exportLedgerPubKey = exportLedgerPubKey;\nexports.signMultisigSpendLedger = signMultisigSpendLedger;\nexports.LedgerSignMultisigTransaction = exports.LedgerExportExtendedPublicKey = exports.LedgerExportPublicKey = exports.LedgerExportHDNode = exports.LedgerInteraction = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _unchainedBitcoin = require(\"unchained-bitcoin\");\n\nvar _interaction = require(\"./interaction\");\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar bitcoin = require('bitcoinjs-lib');\n\nvar TransportU2F = require(\"@ledgerhq/hw-transport-u2f\")[\"default\"];\n\nvar LedgerBtc = require(\"@ledgerhq/hw-app-btc\")[\"default\"];\n/**\n * Interaction with Ledger hardware wallets\n * @extends {module:interaction.WalletInteraction}\n */\n\n\nvar LedgerInteraction =\n/*#__PURE__*/\nfunction (_WalletInteraction) {\n  _inherits(LedgerInteraction, _WalletInteraction);\n\n  function LedgerInteraction() {\n    _classCallCheck(this, LedgerInteraction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LedgerInteraction).apply(this, arguments));\n  }\n\n  _createClass(LedgerInteraction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(LedgerInteraction.prototype), \"messages\", this).call(this);\n\n      messages[_interaction.PENDING].push({\n        level: _interaction.INFO,\n        text: \"Make sure your Ledger hardware wallet is plugged in.\",\n        code: \"ledger.device.connect\"\n      });\n\n      messages[_interaction.PENDING].push({\n        level: _interaction.INFO,\n        text: \"Make sure you have unlocked your Ledger hardware wallet.\",\n        code: \"ledger.device.unlocked\"\n      });\n\n      messages[_interaction.PENDING].push({\n        level: _interaction.INFO,\n        text: \"Make sure you have opened your Ledger hardware wallet to the Bitcoin app.\",\n        code: \"ledger.app.bitcoin\"\n      });\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.INFO,\n        text: \"Communicating with Ledger hardware wallet...\",\n        code: \"ledger.active\"\n      });\n\n      return messages;\n    }\n  }]);\n\n  return LedgerInteraction;\n}(_interaction.WalletInteraction);\n/**\n * Class for wallet interaction at a given BIP32 path.\n * @extends {module:ledger.LedgerInteraction}\n */\n\n\nexports.LedgerInteraction = LedgerInteraction;\n\nvar LedgerExportHDNode =\n/*#__PURE__*/\nfunction (_LedgerInteraction) {\n  _inherits(LedgerExportHDNode, _LedgerInteraction);\n  /**\n   * @param {object} options\n   * @param {string} options.network - bitcoin network\n   * @param {string} [bip32Path] - the BIP32 path from which to retrieve a single public key.  Note, you must provide either the bip32Path or the bip32Paths argument.\n   * @param {Array<string>} [bip32Paths] - the BIP32 path from which to retrieve a multiple public keys\n   * @example\n   * const ledgerNode = new LedgerExportHDNode({network: \"mainnet\", bip32Path: \"m/48'/0'/0'/2'/0\"})\n   */\n\n\n  function LedgerExportHDNode(_ref) {\n    var _this;\n\n    var network = _ref.network,\n        bip32Path = _ref.bip32Path,\n        bip32Paths = _ref.bip32Paths;\n\n    _classCallCheck(this, LedgerExportHDNode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LedgerExportHDNode).call(this, {\n      network: network\n    }));\n    _this.bip32Paths = bip32Paths || [bip32Path];\n    return _this;\n  }\n\n  _createClass(LedgerExportHDNode, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(LedgerExportHDNode.prototype), \"messages\", this).call(this);\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.WARNING,\n        text: \"Your Ledger's screen  may display a 'WARNING!' message.  Click both buttons on your Ledger to proceed to confirming the BIP32 path.\",\n        code: \"ledger.bip32.warning\"\n      });\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.WARNING,\n        text: \"Your Ledger will display part of the BIP32 path \".concat(this.bip32Path, \" and claim it is 'unusual'.  Click both buttons on your Ledger to proceed.  You may need to do this multiple times.\"),\n        code: \"ledger.bip32.instructions\"\n      });\n\n      return messages;\n    }\n    /**\n     * Retrieve key from Ledger device for a given instance\n     * @override\n     * @example\n     * const ledgerNode = new LedgerExportHDNode({network: \"mainnet\", bip32Path: \"m/48'/0'/0'/2'/0\"});\n     * const result = await ledgerNode.run();\n     * console.log(result.publicKey);\n     * @returns {object|Array<object>} object or array containing public key and extended public key for the BIP32 path of a given instance\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var transport, ledgerbtc, result, publicKeys, i, _result;\n\n      return _regeneratorRuntime.async(function run$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(TransportU2F.create());\n\n            case 2:\n              transport = _context.sent;\n              ledgerbtc = new LedgerBtc(transport);\n\n              if (!(this.bip32Paths.length === 1)) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(ledgerbtc.getWalletPublicKey(this.bip32Paths[0], {\n                verify: true\n              }));\n\n            case 7:\n              result = _context.sent;\n              return _context.abrupt(\"return\", result);\n\n            case 11:\n              if (!(this.bip32Paths.length > 1)) {\n                _context.next = 25;\n                break;\n              }\n\n              publicKeys = [];\n              i = 0;\n\n            case 14:\n              if (!(i < this.bip32Paths.length)) {\n                _context.next = 22;\n                break;\n              }\n\n              _context.next = 17;\n              return _regeneratorRuntime.awrap(ledgerbtc.getWalletPublicKey(this.bip32Paths[i], {\n                verify: i === 0\n              }));\n\n            case 17:\n              _result = _context.sent;\n              publicKeys.push(_result);\n\n            case 19:\n              i++;\n              _context.next = 14;\n              break;\n\n            case 22:\n              return _context.abrupt(\"return\", publicKeys);\n\n            case 25:\n              throw new Error(\"You must provide a bip32 path string or an array of bip32 paths\");\n\n            case 26:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return LedgerExportHDNode;\n}(LedgerInteraction);\n/**\n * Class for wallet public key interaction at a given BIP32 path.\n * @extends {module:ledger.LedgerExportHDNode}\n */\n\n\nexports.LedgerExportHDNode = LedgerExportHDNode;\n\nvar LedgerExportPublicKey =\n/*#__PURE__*/\nfunction (_LedgerExportHDNode) {\n  _inherits(LedgerExportPublicKey, _LedgerExportHDNode);\n\n  function LedgerExportPublicKey() {\n    _classCallCheck(this, LedgerExportPublicKey);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LedgerExportPublicKey).apply(this, arguments));\n  }\n\n  _createClass(LedgerExportPublicKey, [{\n    key: \"run\",\n\n    /**\n     * Retrieve public key from Ledger device for a given instance\n     * @example\n     * const ledgerKeyExporter = new LedgerExportPublicKey({network: \"mainnet\", bip32Path: \"m/48'/0'/0'/2'/0\"});\n     * const publicKey = await ledgerKeyExporter.run();\n     * console.log(publicKey);\n     * @returns {string|Array<string>} public key or keys for the BIP32 paths of a given instance\n     */\n    value: function run() {\n      var result, compressedPublicKey;\n      return _regeneratorRuntime.async(function run$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(_get(_getPrototypeOf(LedgerExportPublicKey.prototype), \"run\", this).call(this));\n\n            case 2:\n              result = _context2.sent;\n\n              if (!result.publicKey) {\n                _context2.next = 8;\n                break;\n              }\n\n              compressedPublicKey = (0, _unchainedBitcoin.compressPublicKey)(result.publicKey);\n              return _context2.abrupt(\"return\", compressedPublicKey);\n\n            case 8:\n              if (!Array.isArray(result)) {\n                _context2.next = 12;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", result.map(function (publicKeyObject) {\n                var compressedPublicKey = (0, _unchainedBitcoin.compressPublicKey)(publicKeyObject.publicKey);\n                return compressedPublicKey;\n              }));\n\n            case 12:\n              throw new {\n                message: \"Unable to export public key.\"\n              }();\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return LedgerExportPublicKey;\n}(LedgerExportHDNode);\n\nexports.LedgerExportPublicKey = LedgerExportPublicKey;\n\nvar LedgerExportExtendedPublicKey =\n/*#__PURE__*/\nfunction (_LedgerExportHDNode2) {\n  _inherits(LedgerExportExtendedPublicKey, _LedgerExportHDNode2);\n\n  function LedgerExportExtendedPublicKey() {\n    _classCallCheck(this, LedgerExportExtendedPublicKey);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LedgerExportExtendedPublicKey).apply(this, arguments));\n  }\n\n  _createClass(LedgerExportExtendedPublicKey, [{\n    key: \"run\",\n    value: function run() {\n      return _regeneratorRuntime.async(function run$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(_get(_getPrototypeOf(LedgerExportExtendedPublicKey.prototype), \"run\", this).call(this));\n\n            case 2:\n              return _context3.abrupt(\"return\", {\n                error: \"Unable to export extended public key.\"\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return LedgerExportExtendedPublicKey;\n}(LedgerExportHDNode);\n/**\n * Class for wallet signing interaction.\n * @extends {module:ledger.LedgerInteraction}\n */\n\n\nexports.LedgerExportExtendedPublicKey = LedgerExportExtendedPublicKey;\n\nvar LedgerSignMultisigTransaction =\n/*#__PURE__*/\nfunction (_LedgerInteraction2) {\n  _inherits(LedgerSignMultisigTransaction, _LedgerInteraction2);\n  /**\n   * @param {object} options\n   * @param {string} options.network - bitcoin network\n   * @param {array<object>} options.inputs - inputs for the transaction\n   * @param {array<object>} options.outputs - outputs for the transaction\n   * @param {array<string>} options.bip32Paths - BIP32 paths\n   */\n\n\n  function LedgerSignMultisigTransaction(_ref2) {\n    var _this2;\n\n    var network = _ref2.network,\n        inputs = _ref2.inputs,\n        outputs = _ref2.outputs,\n        bip32Paths = _ref2.bip32Paths;\n\n    _classCallCheck(this, LedgerSignMultisigTransaction);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(LedgerSignMultisigTransaction).call(this, {\n      network: network\n    }));\n    _this2.inputs = inputs;\n    _this2.outputs = outputs;\n    _this2.bip32Paths = bip32Paths;\n    return _this2;\n  }\n\n  _createClass(LedgerSignMultisigTransaction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(LedgerSignMultisigTransaction.prototype), \"messages\", this).call(this); // TODO: what is needed here?\n\n\n      return messages;\n    }\n    /**\n     * Retrieve signatures from Ledger device for a given transaction\n     * @example\n     * import {generateMultisigFromHex, NETWORKS, MULTISIG_ADDRESS_TYPES} from \"unchained-bitcoin\";\n     * ...\n     * const input = {\n     *     txid: \"8d276c76b3550b145e44d35c5833bae175e0351b4a5c57dc1740387e78f57b11\",\n     *     index: 1,\n     *     multisig: generateMultisigFromHex(NETWORKS.TESTNET, MULTISIG_ADDRESS_TYPES.P2SH, redeemScript),\n     *     amountSats: BigNumber(1234000)\n     * }\n     * const output = {\n     *     amountSats: BigNumber(1299659),\n     *     address: \"2NGHod7V2TAAXC1iUdNmc6R8UUd4TVTuBmp\"\n     * }\n     * const ledgerSigner = new LedgerSignMultisigTransaction({\n     *   network: \"testnet\",\n     *   inputs: [input],\n     *   outputs: [output],\n     *   bip32Paths: [\"m/45'/0'/0'/0\"]\n     * });\n     * const signatures = await ledgerSigner.run();\n     * console.log(signatures);\n     * @returns {string} string representation of an array of signatures\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var transport, ledgerbtc;\n      return _regeneratorRuntime.async(function run$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(TransportU2F.create());\n\n            case 2:\n              transport = _context4.sent;\n              transport.setExchangeTimeout(20000 * this.outputs.length);\n              ledgerbtc = new LedgerBtc(transport);\n              return _context4.abrupt(\"return\", signMultisigSpendLedger(this.bip32Paths, this.inputs, this.outputs, isTestnet(this.network), ledgerbtc));\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return LedgerSignMultisigTransaction;\n}(LedgerInteraction);\n\nexports.LedgerSignMultisigTransaction = LedgerSignMultisigTransaction;\n\nfunction isTestnet(network) {\n  return network === _unchainedBitcoin.NETWORKS.TESTNET;\n}\n\nfunction exportLedgerPubKey(path, ledgerbtc) {\n  var result, compressedPublicKey;\n  return _regeneratorRuntime.async(function exportLedgerPubKey$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _context5.next = 3;\n          return _regeneratorRuntime.awrap(ledgerbtc.getWalletPublicKey(path, {\n            verify: true\n          }));\n\n        case 3:\n          result = _context5.sent;\n\n          if (!result.publicKey) {\n            _context5.next = 9;\n            break;\n          }\n\n          compressedPublicKey = (0, _unchainedBitcoin.compressPublicKey)(result.publicKey);\n          return _context5.abrupt(\"return\", {\n            success: true,\n            publicKey: compressedPublicKey\n          });\n\n        case 9:\n          return _context5.abrupt(\"return\", null);\n\n        case 10:\n          _context5.next = 15;\n          break;\n\n        case 12:\n          _context5.prev = 12;\n          _context5.t0 = _context5[\"catch\"](0);\n          return _context5.abrupt(\"return\", {\n            success: false,\n            text: _context5.t0.message\n          });\n\n        case 15:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, [[0, 12]]);\n}\n\nfunction signMultisigSpendLedger(bip32Paths, inputs, outputs, testnet, ledgerbtc) {\n  var txTmp, i, j, txToSign, txHex, addressType, segwit, splitTx, outputScriptHex, ledgerIns, ledgerKeySets, signatures;\n  return _regeneratorRuntime.async(function signMultisigSpendLedger$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          // OUTPUTS\n          txTmp = new bitcoin.TransactionBuilder();\n          txTmp.setVersion(1);\n\n          if (testnet) {\n            txTmp.network = bitcoin.networks.testnet;\n          }\n\n          for (i = 0; i < outputs.length; i++) {\n            txTmp.addOutput(outputs[i].address, outputs[i].amountSats.toNumber());\n          }\n\n          for (j = 0; j < inputs.length; j++) {\n            txTmp.addInput(inputs[j].txid, inputs[j].index);\n          }\n\n          txToSign = txTmp.buildIncomplete();\n          txHex = txToSign.toHex();\n          addressType = (0, _unchainedBitcoin.multisigAddressType)(inputs[0].multisig); // TODO: multiple inputs?\n\n          segwit = addressType == _unchainedBitcoin.MULTISIG_ADDRESS_TYPES.P2SH_P2WSH || addressType == _unchainedBitcoin.MULTISIG_ADDRESS_TYPES.P2WSH;\n          _context6.next = 11;\n          return _regeneratorRuntime.awrap(ledgerbtc.splitTransaction(txHex, segwit));\n\n        case 11:\n          splitTx = _context6.sent;\n          _context6.next = 14;\n          return _regeneratorRuntime.awrap(ledgerbtc.serializeTransactionOutputs(splitTx).toString('hex'));\n\n        case 14:\n          outputScriptHex = _context6.sent;\n          ledgerIns = inputs.map(function (input) {\n            return ledgerInput(ledgerbtc, input);\n          }); // BIP32 PATH\n\n          ledgerKeySets = bip32Paths.map(function (bip32Path) {\n            return bip32Path.split(\"/\").slice(1).join(\"/\");\n          }); // SIGN\n\n          _context6.next = 19;\n          return _regeneratorRuntime.awrap(ledgerbtc.signP2SHTransaction(ledgerIns, ledgerKeySets, outputScriptHex, 0, // locktime\n          1, // sighash type\n          segwit, 1 // tx version\n          ));\n\n        case 19:\n          signatures = _context6.sent;\n          return _context6.abrupt(\"return\", signatures);\n\n        case 21:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  });\n}\n\nfunction ledgerInput(ledgerbtc, input) {\n  var addressType = (0, _unchainedBitcoin.multisigAddressType)(input.multisig);\n  var tx = ledgerbtc.splitTransaction(input.transactionHex, true);\n\n  if (addressType == _unchainedBitcoin.MULTISIG_ADDRESS_TYPES.P2SH) {\n    return [tx, input.index, (0, _unchainedBitcoin.scriptToHex)((0, _unchainedBitcoin.multisigRedeemScript)(input.multisig))];\n  } else {\n    return [tx, input.index, (0, _unchainedBitcoin.scriptToHex)((0, _unchainedBitcoin.multisigWitnessScript)(input.multisig))];\n  }\n}","\"use strict\";\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.object.create\");\n\nrequire(\"core-js/modules/es.object.define-property\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of\");\n\nrequire(\"core-js/modules/es.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.object.values\");\n\nrequire(\"core-js/modules/es.reflect.get\");\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/es.string.match\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HermitSignTransaction = exports.HermitExportExtendedPublicKey = exports.HermitExportPublicKey = exports.HermitExport = exports.HermitInteraction = void 0;\n\nvar _hiBase = _interopRequireDefault(require(\"hi-base32\"));\n\nvar _pako = _interopRequireDefault(require(\"pako\"));\n\nvar _unchainedBitcoin = require(\"unchained-bitcoin\");\n\nvar _interaction = require(\"./interaction\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n/**\n * Interaction with Hermit (SLIP39) sharded wallet\n * @extends {module:interaction.WalletInteraction}\n */\n\n\nvar HermitInteraction =\n/*#__PURE__*/\nfunction (_WalletInteraction) {\n  _inherits(HermitInteraction, _WalletInteraction);\n\n  function HermitInteraction() {\n    _classCallCheck(this, HermitInteraction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(HermitInteraction).apply(this, arguments));\n  }\n\n  _createClass(HermitInteraction, [{\n    key: \"_parseQRCodeData\",\n    //\n    // Encoded string from QR code => JavaScript Object\n    //\n    value: function _parseQRCodeData(encodedString) {\n      try {\n        var compressedBytes = _hiBase[\"default\"].decode.asBytes(encodedString);\n\n        return this._decompressAndParseJSON(compressedBytes);\n      } catch (base32DecodingError) {\n        throw new Error(\"Unable to parse QR code (Base32 decode error).\");\n      }\n    }\n  }, {\n    key: \"_decompressAndParseJSON\",\n    value: function _decompressAndParseJSON(compressedBytes) {\n      try {\n        var decompressedJSON = _pako[\"default\"].inflate(compressedBytes, {\n          to: 'string'\n        });\n\n        return this._parseJSON(decompressedJSON);\n      } catch (decompressError) {\n        throw new Error(\"Unable to parse QR code (gzip decompress error).\");\n      }\n    }\n  }, {\n    key: \"_parseJSON\",\n    value: function _parseJSON(json) {\n      try {\n        return JSON.parse(json);\n      } catch (parseJSONError) {\n        throw new Error(\"Unable to parse QR code (JSON parse error).\");\n      }\n    } //\n    // JavaScript object => encoded string for QR code\n    //\n\n  }, {\n    key: \"_encodeQRCodeData\",\n    value: function _encodeQRCodeData(data) {\n      try {\n        var jsonString = JSON.stringify(data);\n        return this._compressAndBase32Encode(jsonString);\n      } catch (encodeJSONError) {\n        console.error(encodeJSONError);\n        throw new Error(\"Unable to create QR code (JSON encode error).\");\n      }\n    }\n  }, {\n    key: \"_compressAndBase32Encode\",\n    value: function _compressAndBase32Encode(jsonString) {\n      try {\n        var compressedBytes = _pako[\"default\"].deflate(jsonString, {\n          gzip: true\n        });\n\n        return this._base32Encode(compressedBytes);\n      } catch (compressionError) {\n        console.error(compressionError);\n        throw new Error(\"Unable to create QR code (gzip compress error).\");\n      }\n    }\n  }, {\n    key: \"_base32Encode\",\n    value: function _base32Encode(compressedBytes) {\n      try {\n        var encodedData = _hiBase[\"default\"].encode(compressedBytes);\n\n        return encodedData;\n      } catch (base32EncodingError) {\n        console.error(base32EncodingError);\n        throw new Error(\"Unable to create QR code (Base32 encode error).\");\n      }\n    }\n  }]);\n\n  return HermitInteraction;\n}(_interaction.WalletInteraction);\n/**\n * Base class for exports from Hermit (SLIP39) sharded wallet\n * Adds message for extended classes, mainly for internal use\n * @extends {module:hermit.HermitInteraction}\n */\n\n\nexports.HermitInteraction = HermitInteraction;\n\nvar HermitExport =\n/*#__PURE__*/\nfunction (_HermitInteraction) {\n  _inherits(HermitExport, _HermitInteraction);\n\n  function HermitExport() {\n    _classCallCheck(this, HermitExport);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(HermitExport).apply(this, arguments));\n  }\n\n  _createClass(HermitExport, [{\n    key: \"messages\",\n    // TODO: should this be exported?\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(HermitExport.prototype), \"messages\", this).call(this);\n\n      messages[_interaction.ACTIVE].push({\n        level: _interaction.INFO,\n        code: \"hermit.scanning\",\n        text: \"Scan Hermit QR code now.\"\n      });\n\n      return messages;\n    }\n  }]);\n\n  return HermitExport;\n}(HermitInteraction);\n/**\n * Class for wallet public key interaction for use with QR scanner\n * @extends {module:hermit.HermitExport}\n */\n\n\nexports.HermitExport = HermitExport;\n\nvar HermitExportPublicKey =\n/*#__PURE__*/\nfunction (_HermitExport) {\n  _inherits(HermitExportPublicKey, _HermitExport);\n  /**\n   * @example\n   * const hermitKeyExporter = new HermitExportPublicKey()\n   */\n\n\n  function HermitExportPublicKey(_ref) {\n    var _this;\n\n    var network = _ref.network,\n        bip32Path = _ref.bip32Path;\n\n    _classCallCheck(this, HermitExportPublicKey); // TODO: are these really needed?  The path seems to come from QR and the network is not referred to.\n\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HermitExportPublicKey).call(this, {\n      network: network\n    }));\n    _this.bip32Path = bip32Path;\n    return _this;\n  }\n\n  _createClass(HermitExportPublicKey, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(HermitExportPublicKey.prototype), \"messages\", this).call(this);\n\n      var instructions = \"Run the following Hermit command, replacing the BIP32 path if you need to:\";\n      var mode = \"wallet\";\n      var command = \"export-pub \".concat(this.bip32Path);\n\n      messages[_interaction.PENDING].push({\n        level: _interaction.INFO,\n        code: \"hermit.command\",\n        instructions: instructions,\n        mode: mode,\n        command: command,\n        text: \"\".concat(instructions, \" '\").concat(command, \"'\")\n      });\n\n      return messages;\n    }\n    /**\n     * Convert base64 encoded QR code to public key and BIP32 path\n     * @param {string} encodedString - base64 encoded QR code from Hermit\n     * @returns {object} public key and BIP32 path\n     * @example\n     * const keyInfo = hermitKeyExporter.run();\n     * console.log(keyInfo);\n     * // {pubkey:\"...\", bip32Path:\"m/48'...\"}\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(encodedString) {\n      var result = this._parseQRCodeData(encodedString);\n\n      var xpub = result.xpub,\n          pubkey = result.pubkey;\n\n      if (!pubkey) {\n        if (xpub) {\n          throw new Error(\"Make sure you export a plain public key and NOT an extended public key.\");\n        } else {\n          throw new Error(\"Did not receive a public key.\");\n        }\n      }\n\n      return result;\n    }\n  }]);\n\n  return HermitExportPublicKey;\n}(HermitExport);\n/**\n * Class for wallet extended public key interaction for use with QR scanner\n * @extends {module:hermit.HermitExport}\n */\n\n\nexports.HermitExportPublicKey = HermitExportPublicKey;\n\nvar HermitExportExtendedPublicKey =\n/*#__PURE__*/\nfunction (_HermitExport2) {\n  _inherits(HermitExportExtendedPublicKey, _HermitExport2);\n\n  function HermitExportExtendedPublicKey(_ref2) {\n    var _this2;\n\n    var network = _ref2.network,\n        bip32Path = _ref2.bip32Path;\n\n    _classCallCheck(this, HermitExportExtendedPublicKey); // TODO: I don't think network is needed here either, encoded in QR\n\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(HermitExportExtendedPublicKey).call(this, {\n      network: network\n    }));\n    _this2.bip32Path = bip32Path;\n    return _this2;\n  }\n\n  _createClass(HermitExportExtendedPublicKey, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(HermitExportExtendedPublicKey.prototype), \"messages\", this).call(this);\n\n      var instructions = \"Run the following Hermit command, replacing the BIP32 path if you need to:\";\n      var mode = \"wallet\";\n      var command = \"export-xpub \".concat(this.bip32Path);\n\n      messages[_interaction.PENDING].push({\n        level: _interaction.INFO,\n        code: \"hermit.command\",\n        instructions: instructions,\n        mode: mode,\n        command: command,\n        text: \"\".concat(instructions, \" '\").concat(command, \"'\")\n      });\n\n      return messages;\n    }\n    /**\n     * Convert base64 encoded QR code to an extended public key and BIP32 path\n     * @param {string} encodedString - base64 encoded QR code from Hermit\n     * @returns {object} extended public key and BIP32 path\n     * @example\n     * const keyInfo = hermitKeyExporter.parse();\n     * console.log(keyInfo);\n     * // {xpub:\"...\", bip32Path:\"m/48'/...\"}\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(encodedString) {\n      var result = this._parseQRCodeData(encodedString);\n\n      var xpub = result.xpub,\n          pubkey = result.pubkey;\n\n      if (!xpub) {\n        if (pubkey) {\n          throw new Error(\"Make sure you export an extended public key and NOT a plain public key.\");\n        } else {\n          throw new Error(\"Did not receive an extended public key.\");\n        }\n      }\n\n      return result;\n    }\n  }]);\n\n  return HermitExportExtendedPublicKey;\n}(HermitExport);\n/**\n * @extends {module:hermit.HermitExport}\n */\n\n\nexports.HermitExportExtendedPublicKey = HermitExportExtendedPublicKey;\n\nvar HermitSignTransaction =\n/*#__PURE__*/\nfunction (_HermitExport3) {\n  _inherits(HermitSignTransaction, _HermitExport3);\n  /**\n   *\n   * @param {object} options\n   * @param {string} options.network - bitcoin network\n   * @param {array<object>} options.inputs - inputs for the transaction\n   * @param {array<object>} options.outputs - outputs for the transaction\n   * @param {array<string>} options.bip32Paths - BIP32 paths\n   */\n\n\n  function HermitSignTransaction(_ref3) {\n    var _this3;\n\n    var network = _ref3.network,\n        inputs = _ref3.inputs,\n        outputs = _ref3.outputs,\n        bip32Paths = _ref3.bip32Paths;\n\n    _classCallCheck(this, HermitSignTransaction); // TODO: check params here also\n\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(HermitSignTransaction).call(this, {\n      network: network\n    }));\n    _this3.inputs = inputs;\n    _this3.outputs = outputs;\n    _this3.bip32Paths = bip32Paths;\n    _this3.supported = true;\n    _this3.inputAddressType = '';\n    return _this3;\n  }\n  /**\n   * Determine if a transaction is supported by Hermit signing\n   * @override\n   * @returns {boolean}\n   */\n\n\n  _createClass(HermitSignTransaction, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return this.inputsAreSupported() && this.outputsAreSupported();\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"outputsAreSupported\",\n    value: function outputsAreSupported() {\n      if (this.outputs && this.outputs.length) {\n        for (var i = 0; i < this.outputs.length; i++) {\n          var output = this.outputs[i];\n\n          if (output.address.match(/^(tb|bc)/)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"inputsAreSupported\",\n    value: function inputsAreSupported() {\n      if (this.inputs && this.inputs.length) {\n        for (var i = 0; i < this.inputs.length; i++) {\n          var input = this.inputs[i];\n          var inputAddressType = (0, _unchainedBitcoin.multisigAddressType)(input.multisig);\n\n          if (inputAddressType !== _unchainedBitcoin.MULTISIG_ADDRESS_TYPES.P2SH) {\n            this.inputAddressType = inputAddressType;\n            return false;\n          }\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(HermitSignTransaction.prototype), \"messages\", this).call(this);\n\n      if (!this.inputsAreSupported()) {\n        messages[_interaction.UNSUPPORTED].push({\n          level: _interaction.ERROR,\n          code: \"hermit.unsupported.inputaddress\",\n          text: \"Unsupported input address type \".concat(this.inputAddressType, \", must be P2SH.\")\n        });\n      }\n\n      if (!this.outputsAreSupported()) {\n        messages[_interaction.UNSUPPORTED].push({\n          level: _interaction.ERROR,\n          code: \"hermit.unsupported.outputaddress\",\n          text: \"Unsupported output address type. bech32 addresses are unsupported.\"\n        });\n      }\n\n      if (!this.inputsAreSupported() || !this.outputsAreSupported()) return messages;\n      var instructions = \"Scan this QR code into Hermit by running the following command:\";\n      var mode = \"wallet\";\n      var command = \"sign-bitcoin\";\n\n      messages[_interaction.PENDING].push({\n        level: _interaction.INFO,\n        code: \"hermit.command\",\n        instructions: instructions,\n        mode: mode,\n        command: command,\n        text: \"\".concat(instructions, \" '\").concat(command, \"'\")\n      });\n\n      var data = this.signatureRequestData();\n\n      var encodedData = this._encodeQRCodeData(data);\n\n      messages[_interaction.PENDING].push({\n        level: _interaction.INFO,\n        code: \"hermit.signature_request\",\n        data: data,\n        encodedData: encodedData,\n        text: \"Signature Request\"\n      });\n\n      return messages;\n    }\n  }, {\n    key: \"signatureRequestData\",\n    value: function signatureRequestData() {\n      var hermitInputsByRedeemScript = {};\n\n      for (var i = 0; i < this.inputs.length; i++) {\n        var input = this.inputs[i];\n        var bip32Path = this.bip32Paths[i];\n        var redeemScriptHex = (0, _unchainedBitcoin.scriptToHex)((0, _unchainedBitcoin.multisigRedeemScript)(input.multisig));\n\n        if (!hermitInputsByRedeemScript[redeemScriptHex]) {\n          hermitInputsByRedeemScript[redeemScriptHex] = [redeemScriptHex, bip32Path];\n        }\n\n        hermitInputsByRedeemScript[redeemScriptHex].push({\n          txid: input.txid,\n          index: input.index,\n          amount: input.amountSats.toNumber()\n        });\n      }\n\n      return {\n        inputs: Object.values(hermitInputsByRedeemScript),\n        outputs: this.outputs.map(function (output) {\n          return {\n            address: output.address,\n            amount: output.amountSats.toNumber()\n          };\n        })\n      };\n    }\n    /**\n     * Retrieve signatures from Hermit generated QR code for a given transaction\n     * @example\n     * import {generateMultisigFromHex, NETWORKS, MULTISIG_ADDRESS_TYPES} from \"unchained-bitcoin\";\n     * ...\n     * const input = {\n     *     txid: \"8d276c76b3550b145e44d35c5833bae175e0351b4a5c57dc1740387e78f57b11\",\n     *     index: 1,\n     *     multisig: generateMultisigFromHex(NETWORKS.TESTNET, MULTISIG_ADDRESS_TYPES.P2SH, redeemScript),\n     *     amountSats: BigNumber(1234000)\n     * }\n     * const output = {\n     *     amountSats: BigNumber(1299659),\n     *     address: \"2NGHod7V2TAAXC1iUdNmc6R8UUd4TVTuBmp\"\n     * }\n     * const hermitSigner = new HermitSignTransaction({\n     *   network: \"testnet\",\n     *   inputs: [input],\n     *   outputs: [output],\n     *   bip32Paths: [\"m/45'/0'/0'/0\"]\n     * });\n     * const signatures = await hermitSigner.parse();\n     * console.log(signatures);\n     * @returns {string} string representation of an array of signatures\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(encodedString) {\n      var result = this._parseQRCodeData(encodedString);\n\n      var signatures = result.signatures;\n      return signatures;\n    }\n  }]);\n\n  return HermitSignTransaction;\n}(HermitExport);\n\nexports.HermitSignTransaction = HermitSignTransaction;","module.exports = __webpack_public_path__ + \"static/media/logo.66481e66.png\";","import React from \"react\";\n\nexport function externalLink(url, text) {\n  return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{text}</a>;\n}\n\nexport function wrapText(text, columns) {\n  let lines   = [];\n  let index   = 0;\n  let element = 0;\n  while (index <= text.length) {\n    lines.push(<span key={element}>{text.slice(index, index += (columns || 64))}</span>);\n    lines.push(<br key={element + 1}/>);\n    element += 2;\n  }\n  return lines;\n}\n\nexport function validatePositiveInteger(numberString) {\n  if (numberString === null || numberString === undefined || numberString === '') {\n    return \"Cannot be blank.\";\n  }\n  const number = parseInt(numberString, 10);\n  if (Number.isNaN(number) || number.toString().length !== numberString.length || number <= 0) {\n    return \"Must be a positive whole number.\";\n  }\n\n  return '';\n\n}\n\nexport function downloadFile(body, filename) {\n  const blob = new Blob([body], {type: 'text/plain'});\n  if(window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveBlob(blob, filename);\n  }\n  else{\n      var elem = window.document.createElement('a');\n      elem.href = window.URL.createObjectURL(blob);\n      elem.download = filename;\n      document.body.appendChild(elem);\n      elem.click();\n      document.body.removeChild(elem);\n  }\n}\n","import React from 'react';\n\n// Components\nimport { Card, CardHeader, CardContent, } from \"@material-ui/core\";\n\nconst Disclaimer = () => (\n  <Card>\n    <CardHeader title=\"Disclaimer\"/>\n    <CardContent>\n      <small>\n        This application is in alpha state and is presented\n        for evaluation and testing only. It is provided as is,\n        and any express or implied warranties, including but not\n        limited to the implied warranties of merchantability and\n        fitness for a particular purpose, are disclaimed. By\n        using this application, you accept all risks of such\n        use, including full responsibility for any direct or\n        indirect loss of any kind resulting from the use of this\n        application, which may involve complete loss of any\n        Bitcoin or other coins associated with addresses used\n        with this application. In no event shall Unchained\n        Capital, Inc., its employees and affiliates, or\n        developers of this application be liable for any direct,\n        indirect, incidental, special, exemplary, or\n        consequential damages (including, but not limited to,\n        procurement of substitute goods or services; loss of\n        use, data, or profits; or business interruption) however\n        caused and on any theory of liability, whether in\n        contract, strict liability, or tort (including\n        negligence or otherwise) arising in any way out of the\n        use of this application, even if advised of the\n        possibility of such damage.\n      </small>\n        \n      </CardContent>\n    </Card>\n);\n\nexport default Disclaimer;\n","import React from 'react';\nimport {externalLink} from \"../utils\";\n\n// Components\nimport {\n  Box, Typography, CardHeader, CardContent, Grid, Card, Button,\n  List, ListItem, ListItemText, ListItemIcon, CardActions,\n} from \"@material-ui/core\";\nimport {Description, GitHub, YouTube, BugReport} from \"@material-ui/icons\";\nimport Disclaimer from \"./Disclaimer\";\n\nconst Help = () => (\n  <div>\n\n    <Box mt={4} mb={2}>\n      <Typography variant=\"h2\">Welcome to Caravan!</Typography>\n    </Box>\n\n    <Grid container spacing={3}>\n\n      <Grid container item md={8} spacing={2} direction=\"column\">\n\n        <Grid item>\n          <Card>\n\n            <CardHeader title=\"Stateless Multisig Coordinator\"/>\n\n            <CardContent>\n\n              <p>\n                Caravan is making bitcoin <strong>multisig</strong> custody easier and safer through transparency and standards.\n              </p>\n\n              <p>\n                Caravan is a <strong>coordination</strong> software.  It connects to a source of consensus and your keys to build and interact with multisig bitcoin addresses.\n              </p>\n\n              <p>Caravan is also <strong>stateless</strong>.  It does not itself store any data.  You must safekeep the addresses (and redeem scripts & BIP32 paths) you create.</p>\n\n            </CardContent>\n          </Card>\n        </Grid>\n\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Keys\"/>\n            <CardContent>\n\n              <p>All bitcoin is ultimately protected by private keys.</p>\n\n              <p>Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind.  Caravan, being stateless, cannot store your private key but it can talk to hardware devices or software applications which do.</p>\n\n              <p>Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.</p>\n\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Consensus\"/>\n            <CardContent>\n\n              <p>In order to look up address balances and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network.</p>\n\n              <p>Running a full bitcoin node is the best way to determine the current state of the bitcoin network.  Caravan can be easily configured to use your own bitcoin node for consensus information and broadcasting transactions.</p>\n\n              <p>If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at <code>blockstream.info</code>.</p>\n\n            </CardContent>\n          </Card>\n        </Grid>\n\n\n      </Grid>\n\n      <Grid container item md={4} spacing={4} direction=\"column\">\n\n        <Grid item>\n\n          <Card>\n            <CardHeader title=\"Learn More\"></CardHeader>\n            <CardContent>\n\n              <List>\n\n                <ListItem>\n                  <ListItemIcon>\n                    <Description />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\"https://www.unchained-capital.com/blog/the-caravan-arrives/\", \"Blog Post\")}\n                  </ListItemText>\n                </ListItem>\n\n                <ListItem>\n                  <ListItemIcon>\n                    <YouTube />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\"https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH\", \"Video Tutorials\")}\n                  </ListItemText>\n                </ListItem>\n\n                <ListItem>\n                  <ListItemIcon>\n                    <GitHub />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\"https://github.com/unchained-capital/caravan\", \"Source Code\")}\n                  </ListItemText>\n                </ListItem>\n\n              </List>\n            </CardContent>\n          </Card>\n\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Supported Devices\"></CardHeader>\n            <CardContent>\n              Caravan has been tested with the following hardware wallets:\n              <ul>\n                <li>{externalLink(\"https://shop.trezor.io/product/trezor-one-white\", \"Trezor One\")}</li>\n                <li>{externalLink(\"https://www.ledger.com/products/ledger-nano-s\", \"Ledger Nano S\")}</li>\n              </ul>\n              And web browsers:\n              <ul>\n                <li>{externalLink(\"https://www.google.com/chrome/\", \"Chrome\")}</li>\n                <li>{externalLink(\"https://www.mozilla.org/en-US/firefox/new/\", \"Firefox\")}</li>\n              </ul>\n              Seeing a bug or need a feature?\n            </CardContent>\n            <CardActions>\n\n              <Button href=\"https://github.com/unchained-capital/caravan/issues\"><BugReport /> &nbsp; Report Issue</Button>\n\n            </CardActions>\n          </Card>\n\n        </Grid>\n\n      </Grid>\n    </Grid>\n\n\n    <Box mt={2}>\n      <Disclaimer />\n    </Box>\n\n  </div>\n);\n\nexport default Help;\n","export const SET_NETWORK = 'SET_NETWORK';\nexport const SET_TOTAL_SIGNERS    = \"SET_TOTAL_SIGNERS\";\nexport const SET_REQUIRED_SIGNERS = \"SET_REQUIRED_SIGNERS\";\nexport const SET_ADDRESS_TYPE = 'SET_ADDRESS_TYPE';\nexport const SET_FROZEN = 'SET_FROZEN';\n\nexport function setNetwork(value) {\n  return {\n    type: SET_NETWORK,\n    value: value,\n  };\n}\n\nexport function setTotalSigners(number) {\n  return {\n    type: SET_TOTAL_SIGNERS,\n    value: number,\n  };\n}\n\n\nexport function setRequiredSigners(number) {\n  return {\n    type: SET_REQUIRED_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setAddressType(value) {\n  return {\n    type: SET_ADDRESS_TYPE,\n    value: value,\n  };\n}\n\n\nexport function setFrozen(value) {\n  return {\n    type: SET_FROZEN,\n    value: value,\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  TESTNET,\n  MAINNET,\n} from \"unchained-bitcoin\";\n\n// Components\n\nimport { Card, CardHeader, CardContent, FormControl, RadioGroup, FormControlLabel,\n         Radio, FormHelperText } from '@material-ui/core';\n\n// Actions\nimport { setNetwork } from '../actions/settingsActions';\n\nclass NetworkPicker extends React.Component {\n\n  static propTypes = {\n    network: PropTypes.string.isRequired,\n    frozen: PropTypes.bool.isRequired,\n    setNetwork: PropTypes.func.isRequired,\n  };\n\n  handleNetworkChange = (event) => {\n    const { setNetwork } = this.props;\n    setNetwork(event.target.value);\n  };\n\n  render() {\n    const { network, frozen } = this.props;\n    return (\n      <Card>\n        <CardHeader title=\"Network\"/>\n        <CardContent>\n\n        <FormControl component=\"fieldset\">\n          <RadioGroup>\n          <FormControlLabel\n            id=\"mainnet\"\n            control={<Radio color=\"primary\"/>}\n            name=\"network\"\n            value=\"mainnet\"\n            label={(<strong>Mainnet</strong>)}\n            onChange={this.handleNetworkChange}\n            checked={network === MAINNET}\n            disabled={frozen}\n          />\n          <FormControlLabel\n            id=\"testnet\"\n            control={<Radio color=\"primary\"/>}\n            name=\"network\"\n            value=\"testnet\"\n            label=\"Testnet\"\n            onChange={this.handleNetworkChange}\n            checked={network === TESTNET}\n            disabled={frozen}\n          />\n          </RadioGroup>\n          <FormHelperText>\n            <small>{'Choose \\'Mainnet\\' if you don\\'t understand the difference.'}</small>\n          </FormHelperText>\n        </FormControl>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return { \n    network: state.settings.network, \n    frozen: state.settings.frozen,\n  };\n}\n\nconst mapDispatchToProps = {\n  setNetwork,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NetworkPicker);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\n// Actions\nimport {\n  setTotalSigners,\n  setRequiredSigners,\n} from \"../actions/settingsActions\";\n\n// Components\nimport {\n  Typography, Grid, IconButton,\n  Card, CardHeader, CardContent, Box,\n} from '@material-ui/core';\nimport { AddCircle, RemoveCircle } from '@material-ui/icons';\nimport './styles.css';\n\nconst MAX_TOTAL_SIGNERS = 7;\n\nclass QuorumPicker extends React.Component {\n  static propTypes = {\n    totalSigners: PropTypes.number.isRequired,\n    requiredSigners: PropTypes.number.isRequired,\n    frozen: PropTypes.bool.isRequired,\n    setTotalSigners: PropTypes.func.isRequired,\n    setRequiredSigners: PropTypes.func.isRequired,\n  };\n\n  render() {\n    const {requiredSigners, totalSigners} = this.props;\n\n    return (\n      <Card>\n        <CardHeader title=\"Quorum\"></CardHeader>\n        <CardContent>\n\n          <Box>\n            <Grid container justify=\"center\">\n\n              <Grid container item xs={2} direction=\"column\">&nbsp;</Grid>\n\n              <Grid container item xs={3} direction=\"column\" alignItems=\"center\">\n\n                <Grid item>\n                  {this.renderIncrementRequiredSigners()}\n                </Grid>\n\n                <Grid item>\n                  <Typography variant=\"h2\">{requiredSigners}</Typography>\n                </Grid>\n\n                <Grid item>\n                  <small><p>Required</p></small>\n                </Grid>\n\n                <Grid item>\n                  {this.renderDecrementRequiredSigners()}\n                </Grid>\n\n              </Grid>\n\n              <Grid container item xs={2} direction=\"column\" alignItems=\"center\" justify=\"center\">\n\n                <Grid item>\n                  <Typography variant=\"h6\">of</Typography>\n                </Grid>\n\n              </Grid>\n\n              <Grid item container xs={3} direction=\"column\" alignItems=\"center\">\n\n                <Grid item>\n                  {this.renderIncrementTotalSigners()}\n                </Grid>\n\n                <Grid item>\n                  <Typography variant=\"h2\">{totalSigners}</Typography>\n                </Grid>\n\n                <Grid item>\n                  <small><p>Total</p></small>\n                </Grid>\n\n                <Grid item>\n                  {this.renderDecrementTotalSigners()}\n                </Grid>\n\n              </Grid>\n              <Grid container item xs={2} direction=\"column\">&nbsp;</Grid>\n\n            </Grid>\n\n          </Box>\n\n        </CardContent>\n      </Card>\n    );\n  }\n\n\n  renderIncrementRequiredSigners = () => {\n    const {requiredSigners, totalSigners, frozen} = this.props;\n    const disabled = (requiredSigners === totalSigners || frozen);\n    return (\n      <IconButton color=\"primary\" onClick={this.handleIncrementRequiredSigners} disabled={disabled}>\n        <AddCircle/>\n      </IconButton>\n    );\n  }\n\n  renderDecrementRequiredSigners = () => {\n    const {requiredSigners, frozen} = this.props;\n    const disabled = (requiredSigners === 1 || frozen);\n    return (\n      <IconButton color=\"secondary\" onClick={this.handleDecrementRequiredSigners} disabled={disabled}>\n        <RemoveCircle />\n      </IconButton>\n    );\n  }\n\n  renderIncrementTotalSigners = () => {\n    const {totalSigners, frozen} = this.props;\n    const disabled = (totalSigners === MAX_TOTAL_SIGNERS || frozen);\n    return (\n      <IconButton color=\"primary\" onClick={this.handleIncrementTotalSigners} disabled={disabled}>\n        <AddCircle />\n      </IconButton>\n    );\n  }\n\n  renderDecrementTotalSigners = () => {\n    const {requiredSigners, totalSigners, frozen} = this.props;\n    const disabled = (totalSigners === requiredSigners || totalSigners === 2 || frozen);\n    return (\n      <IconButton color=\"secondary\" onClick={this.handleDecrementTotalSigners} disabled={disabled}>\n        <RemoveCircle />\n      </IconButton>\n    );\n  }\n\n  handleIncrementRequiredSigners = (event) => {\n    const {requiredSigners, setRequiredSigners} = this.props;\n    setRequiredSigners(requiredSigners + 1);\n    event.preventDefault();\n  }\n\n  handleDecrementRequiredSigners = (event) => {\n    const {requiredSigners, setRequiredSigners} = this.props;\n    setRequiredSigners(requiredSigners - 1);\n    event.preventDefault();\n  }\n\n  handleIncrementTotalSigners = (event) => {\n    const {totalSigners, setTotalSigners} = this.props;\n    setTotalSigners(totalSigners + 1);\n    event.preventDefault();\n  }\n\n  handleDecrementTotalSigners = (event) => {\n    const {totalSigners, setTotalSigners} = this.props;\n    setTotalSigners(totalSigners - 1);\n    event.preventDefault();\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\nconst mapDispatchToProps = {\n  setTotalSigners,\n  setRequiredSigners,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuorumPicker);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  P2SH,\n  P2SH_P2WSH,\n  P2WSH,\n} from \"unchained-bitcoin\";\n\n// Components\nimport { Card, CardHeader, CardContent, FormControl, RadioGroup, FormControlLabel,\n          Radio, FormHelperText } from '@material-ui/core';\n// Actions\nimport {\n    setAddressType,\n} from '../actions/settingsActions';\n\n\nclass AddressTypePicker extends React.Component {\n\n  static propTypes = {\n    addressType: PropTypes.string.isRequired,\n    frozen: PropTypes.bool.isRequired,\n    setType: PropTypes.func.isRequired,\n  };\n\n  handleTypeChange = (event) => {\n    const { setType } = this.props;\n    setType(event.target.value);\n  };\n\n  render() {\n    const { addressType, frozen } = this.props;\n    return (\n      <Card>\n        <CardHeader title=\"Address Type\"/>\n        <CardContent>\n        <FormControl component=\"fieldset\">\n          <RadioGroup>\n          <FormControlLabel\n            id={P2SH}\n            control={<Radio color=\"primary\"/>}\n            name=\"type\"\n            value={P2SH}\n            label={P2SH}\n            onChange={this.handleTypeChange}\n            checked={addressType === P2SH}\n            disabled={frozen}\n          />\n          <FormControlLabel\n            id={P2SH_P2WSH}\n            control={<Radio color=\"primary\"/>}\n            name=\"type\"\n            value={P2SH_P2WSH}\n            label={P2SH_P2WSH}\n            onChange={this.handleTypeChange}\n            checked={addressType === P2SH_P2WSH}\n            disabled={frozen}\n          />\n          <FormControlLabel\n            id={P2WSH}\n            control={<Radio color=\"primary\"/>}\n            name=\"type\"\n            value={P2WSH}\n            label={P2WSH}\n            onChange={this.handleTypeChange}\n            checked={addressType === P2WSH}\n            disabled={frozen}\n          />\n          </RadioGroup>\n          <FormHelperText>\n            <small>Choose '{P2WSH}' for best practices, '{P2SH}' for greatest compatibility.</small>\n          </FormHelperText>\n        </FormControl>\n        </CardContent>\n        </Card>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\n\nconst mapDispatchToProps = {\n    setType: setAddressType,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressTypePicker);\n","function actionWrapper(type) {\n  return (value) => {\n    return  {type, value,};\n  };\n}\n\nexport function wrappedActions(mapping) {\n  const wrappedMapping = {};\n  const actionFunctionNames = Object.keys(mapping);\n  let actionIndex;\n  for (actionIndex = 0; actionIndex < actionFunctionNames.length; actionIndex += 1) {\n    const actionFunctionName = actionFunctionNames[actionIndex];\n    const actionType = mapping[actionFunctionName];\n    wrappedMapping[actionFunctionName] = actionWrapper(actionType);\n  }\n  return wrappedMapping;\n}\n\nfunction numberedActionWrapper(type) {\n  return (number, value) => {\n    return  {type, number, value,};\n  };\n}\n\nexport function wrappedNumberedActions(mapping) {\n  const wrappedMapping = {};\n  const actionFunctionNames = Object.keys(mapping);\n  let actionIndex;\n  for (actionIndex = 0; actionIndex < actionFunctionNames.length; actionIndex += 1) {\n    const actionFunctionName = actionFunctionNames[actionIndex];\n    const actionType = mapping[actionFunctionName];\n    wrappedMapping[actionFunctionName] = numberedActionWrapper(actionType);\n  }\n  return wrappedMapping;\n}\n","export const SET_CLIENT_TYPE = 'SET_CLIENT_TYPE';\nexport const SET_CLIENT_URL = 'SET_CLIENT_URL';\nexport const SET_CLIENT_USERNAME = 'SET_CLIENT_USERNAME';\nexport const SET_CLIENT_PASSWORD = 'SET_CLIENT_PASSWORD';\n\nexport const SET_CLIENT_URL_ERROR = 'SET_CLIENT_URL_ERROR';\nexport const SET_CLIENT_USERNAME_ERROR = 'SET_CLIENT_USERNAME_ERROR';\nexport const SET_CLIENT_PASSWORD_ERROR = 'SET_CLIENT_PASSWORD_ERROR';\n\nexport const SET_CLIENT_STATUS = 'SET_CLIENT_STATUS';\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {externalLink} from \"../utils\";\n\n// Components\nimport {\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  FormControlLabel,\n  TextField,\n  Switch,\n} from '@material-ui/core';\n\n// Actions\nimport { wrappedActions } from '../actions/utils';\nimport {\n  SET_CLIENT_TYPE,\n  SET_CLIENT_URL,\n  SET_CLIENT_USERNAME,\n  SET_CLIENT_PASSWORD,\n\n  SET_CLIENT_URL_ERROR,\n  SET_CLIENT_USERNAME_ERROR,\n  SET_CLIENT_PASSWORD_ERROR,\n\n  SET_CLIENT_STATUS,\n} from '../actions/clientActions';\n\nconst propTypes = {\n  client: PropTypes.shape({}).isRequired,\n  network: PropTypes.string.isRequired,\n  setUrl: PropTypes.func.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  setPasswordError: PropTypes.func.isRequired,\n  setType: PropTypes.func.isRequired,\n  setUsername: PropTypes.func.isRequired,\n  setUsernameError: PropTypes.func.isRequired,\n};\n\nclass ClientPicker extends React.Component {\n  state = {\n    url_edited: false\n  }\n\n  handleTypeChange = (event) => {\n    const { setType, network, setUrl } = this.props;\n    const type = event.target.checked ? 'private' : 'public';\n    if (type === 'private' && !this.state.url_edited) {\n      setUrl(`http://localhost:${network === 'mainnet' ? 8332 : 18332}`)\n    }\n    setType(type);\n  }\n\n  handleUrlChange = (event) => {\n    const { setUrl, setUrlError } = this.props;\n    const url = event.target.value;\n    const error = this.validateUrl(url);\n    if (!this.state.url_edited && !error) this.setState({url_edited: true});\n    setUrl(url);\n    setUrlError(error);\n  };\n\n  handleUsernameChange = (event) => {\n    const { setUsername, setUsernameError } = this.props;\n    const username = event.target.value;\n    const error = this.validateUsername(username);\n    setUsername(username);\n    setUsernameError(error);\n  };\n\n  handlePasswordChange = (event) => {\n    const { setPassword, setPasswordError } = this.props;\n    const password = event.target.value;\n    const error = this.validatePassword(password);\n    setPassword(password);\n    setPasswordError(error);\n  };\n\n  validateUrl(host) {\n    const validhost = /^http(s)?:\\/\\/[^\\s]+$/.exec(host);\n    if (!validhost) return 'Must be a valid URL.'\n    return '';\n  }\n\n  validatePassword(pass) {\n    return '';\n  }\n\n  validateUsername(username) {\n    return '';\n  }\n\n  toggle = () => {\n    const { client } = this.props;\n    const label = client.type.charAt(0).toUpperCase() + client.type.slice(1);\n    return (\n      <FormControlLabel\n        control={\n          <Switch\n            color=\"primary\"\n            checked={client.type === 'private'}\n            onChange={this.handleTypeChange}\n            value=\"private\" />\n        }\n        label={label}\n      />\n    );\n  }\n\n  title = () => (\n    <Grid container justify=\"space-between\">\n      <Grid item>Consensus</Grid>\n      <Grid item>{this.toggle()}</Grid>\n    </Grid>\n  )\n\n  disabled = () => (false);\n\n  render() {\n    const { client, url_error, username_error, password_error } = this.props;\n    return (\n      <Card>\n        <CardHeader title={this.title()}/>\n        <CardContent>\n          {(client.type === 'public')\n           ? (\n             <div>\n              <p>\n                {\"'Public' uses the \"}\n                <code>blockstream.info</code>\n                {' API. Switch to private to use a '}\n                <code>bitcoind</code>\n                {' node.'}\n              </p>\n              {typeof this.props.publicNotes !== 'undefined' && this.props.publicNotes}\n             </div>\n           ) : (\n             <div>\n              <p>A <code>bitcoind</code>-compatible client is required to query UTXO data, estimate fees, and broadcast transactions.</p>\n              <p>\n                <small>\n                  {'Due to CORS requirements, you must use a proxy around the node. Instructions are available '}\n                  {externalLink(\"https://github.com/unchained-capital/caravan#adding-cors-headers\", \"here\")}\n                  {'.'}\n                </small>\n              </p>\n               <form>\n\n                 <Grid container direction=\"column\">\n\n                   <Grid item>\n                     <TextField\n                       fullWidth\n                       label=\"URL\"\n                       value={client.url}\n                       onChange={this.handleUrlChange}\n                       disabled={this.disabled()}\n                       error={url_error !== ''}\n                       helperText={url_error}\n                     />\n                   </Grid>\n\n                   <Grid item>\n\n\n                   </Grid>\n\n                   <Grid item>\n                     <TextField\n                       id=\"bitcoind-username\"\n                       fullWidth\n                       label=\"Username\"\n                       value={client.username}\n                       onChange={this.handleUsernameChange}\n                       disabled={this.disabled()}\n                       error={username_error}\n                       helperText={username_error}\n                     />\n                   </Grid>\n\n                   <Grid item>\n                     <TextField\n                       id=\"bitcoind-password\"\n                       fullWidth\n                       type=\"password\"\n                       label=\"Password\"\n                       value={client.password}\n                       onChange={this.handlePasswordChange}\n                       disabled={this.disabled()}\n                       error={password_error}\n                       helperText={password_error}\n                     />\n                   </Grid>\n                 </Grid>\n               </form>\n               {typeof this.props.privateNotes !== 'undefined' && this.props.privateNotes}\n             </div>\n           )}\n        </CardContent>\n      </Card>\n    );\n  }\n}\nClientPicker.propTypes = propTypes;\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    client: state.client,\n    url_error: state.client.url_error,\n    url: state.client.url,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  wrappedActions({\n    setType: SET_CLIENT_TYPE,\n    setUrl: SET_CLIENT_URL,\n    setUsername: SET_CLIENT_USERNAME,\n    setPassword: SET_CLIENT_PASSWORD,\n\n    setUrlError: SET_CLIENT_URL_ERROR,\n    setUsernameError: SET_CLIENT_USERNAME_ERROR,\n    setPasswordError: SET_CLIENT_PASSWORD_ERROR,\n\n    setStatus: SET_CLIENT_STATUS,\n  }),\n)(ClientPicker);\n","import axios from 'axios';\nimport BigNumber from 'bignumber.js';\nimport {\n  satoshisToBitcoins,\n  blockExplorerAPIURL,\n} from \"unchained-bitcoin\";\n\n/**\n * Fetch information for signing transactions from block explorer API\n * @param {string} address - The address from which to obtain the information\n * @param {string} network - The network for the transaction to sign (mainnet|testnet)\n * @returns {multisig.UTXO} object for signing transaction inputs\n */\nexport async function blockExplorerGetAddresesUTXOs(address, network) {\n  try {\n    const utxosResult = await axios.get(blockExplorerAPIURL(`/address/${address}/utxo`, network));\n    const utxos = utxosResult.data;\n    return await Promise.all(utxos.map(async (utxo) => {\n      // FIXME: inefficient, need to cache here by utxo.txid\n      const transactionResult = await axios.get(blockExplorerAPIURL(`/tx/${utxo.txid}/hex`, network));\n      const transactionHex = transactionResult.data;\n      const amount = new BigNumber(utxo.value);\n      return {\n        confirmed: utxo.status.confirmed,\n        txid: utxo.txid,\n        index: utxo.vout,\n        amount: satoshisToBitcoins(amount).toFixed(8),\n        amountSats: amount,\n        transactionHex,\n      };\n    }));\n  } catch(e) {\n    throw((e.response && e.response.data) || e);\n  }\n}\n\nexport async function blockExplorerGetAddressStatus(address, network) {\n  try {\n    const addressesult = await axios.get(blockExplorerAPIURL(`/address/${address}`, network));\n    const addressData = addressesult.data;\n    return {\n      used: addressData.chain_stats.funded_txo_count > 0 || addressData.mempool_stats.funded_txo_count > 0\n    }\n  } catch(e) {\n    throw((e.response && e.response.data) || e);\n  }\n}\n\nexport async function blockExplorerGetFeeEstimate(network) {\n  try {\n    const feeEstimatesResult = await axios.get(blockExplorerAPIURL('/fee-estimates', network));\n    const feeEstimates = feeEstimatesResult.data;\n    return Math.ceil(feeEstimates[2]);\n  } catch(e) {\n    throw((e.response && e.response.data) || e);\n  }\n}\n\nexport async function blockExplorerBroadcastTransaction(transactionHex, network) {\n  try {\n    const broadcastResult = await axios.post(blockExplorerAPIURL('/tx', network), transactionHex);\n    return broadcastResult.data;\n  } catch(e) {\n    throw((e.response && e.response.data) || e);\n  }\n}\n\n/**\n * @module block_explorer\n */\n\n","import axios from 'axios';\nimport BigNumber from 'bignumber.js';\nimport {bitcoinsToSatoshis} from \"unchained-bitcoin\";\n\nasync function callBitcoind(url, auth, method, params = []) {\n  return new Promise(async (resolve, reject) => {\n    axios(url, {\n      method: 'post',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      auth,\n      data: {\n        jsonrpc: '2.0',\n        id: 0,\n        method: `${method}`,\n        params,\n      },\n    }).then(resp => resolve(resp.data)).catch(reject);\n  });\n}\n\n/**\n * check if error from bitcoind is address not found in wallet\n * this allows client side interpretation of the error\n * @param {Error} e - the error object to check\n * @returns {boolean} true if the desired error\n */\nexport function isWalletAddressNotFoundError(e) {\n  return e.response &&\n  e.response.data &&\n  e.response.data.error &&\n  e.response.data.error.code === -4;\n}\n\nexport function bitcoindParams(client) {\n  const {url, username, password} = client;\n  const auth = { username, password };\n  return {url, auth};\n}\n\n/**\n * Fetch information for signing transactions from bitcoind RPC\n * @param {Object} options - what is needed to communicate with the RPC\n * @param {string} options.url - where to connect\n * @param {AxiosBasicCredentials} options.auth - username and password\n * @param {string} options.address - The address from which to obtain the information\n * @returns {UTXO} object for signing transaction inputs\n */\nexport async function bitcoindListUnspent({url, auth, address, addresses}) {\n  return new Promise(async (resolve) => {\n    try {\n      const addressParam = addresses || [address]\n      const resp = await callBitcoind(url, auth, 'listunspent', [0, 9999999, addressParam], );\n      const promises = [];\n      resp.result.forEach(utxo => {\n        promises.push(callBitcoind(url, auth, 'getrawtransaction', [utxo.txid]))\n      })\n      const previousTransactions = await Promise.all(promises)\n      resolve(resp.result.map((utxo, mapindex) => {\n        const amount = new BigNumber(utxo.amount);\n        return {\n          confirmed: (utxo.confirmations || 0) > 0,\n          txid: utxo.txid,\n          index: utxo.vout,\n          amount: amount.toFixed(8),\n          amountSats: bitcoinsToSatoshis(amount),\n          transactionHex: previousTransactions[mapindex].result\n        };\n      }));\n\n    } catch(e) {throw(e)}\n  });\n}\n\nexport async function bitcoindGetAddressStatus({url, auth, address}) {\n  try {\n    const resp = await callBitcoind(url, auth, 'getreceivedbyaddress', [address] );\n    if (typeof resp.result === 'undefined') {\n      throw(new Error(\"Error: invalid response from \"+url))\n    }\n    return {\n      used: resp.result > 0\n    }\n  } catch(e) {\n    throw(e);\n  }\n}\n\nexport async function bitcoindEstimateSmartFee({url, auth, numBlocks = 2}) {\n  const resp = await callBitcoind(url, auth, 'estimatesmartfee', [numBlocks]);\n  const feeRate = resp.result.feerate;\n  return Math.ceil(feeRate * 100000);\n}\n\nexport async function bitcoindSendRawTransaction({url, auth, hex}) {\n  try {\n    const resp = await callBitcoind(url, auth, 'sendrawtransaction', [hex]);\n    return resp.result;\n    } catch(e) {\n      console.log('send tx error', e)\n      throw((e.response && e.response.data.error.message) || e);\n  }\n\n}\n\nexport function bitcoindImportMulti({url, auth, addresses, label, rescan}) {\n  const imports = addresses.map(address => {\n    return {\n      scriptPubKey: {\n        address: address\n      },\n      label: label,\n      timestamp: 0 // TODO: better option to ensure address history is picked up?\n    }\n  });\n  if (rescan) {\n    callBitcoind(url, auth, 'importmulti', [imports, {rescan: rescan}]); // TODO: what to do on catch?\n    return new Promise(resolve => resolve({result:[]}));\n  } else {\n    return callBitcoind(url, auth, 'importmulti', [imports, {rescan: rescan}]);\n  }\n}","import {\n  blockExplorerGetAddresesUTXOs,\n  blockExplorerGetFeeEstimate,\n  blockExplorerBroadcastTransaction,\n  blockExplorerGetAddressStatus,\n} from \"./block_explorer\";\nimport {\n  bitcoindListUnspent,\n  bitcoindEstimateSmartFee,\n  bitcoindSendRawTransaction,\n  bitcoindParams,\n  bitcoindGetAddressStatus,\n} from \"./bitcoind\";\n\nexport const BLOCK_EXPLORER = 'public';\nexport const BITCOIND = 'private';\n\nexport function fetchAddressUTXOs(address, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetAddresesUTXOs(address, network);\n  } else {\n    return bitcoindListUnspent({\n      ...bitcoindParams(client),\n      ...{address}\n    });\n  }\n}\n\nexport function getAddressStatus(address, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetAddressStatus(address, network);\n  } else {\n    return bitcoindGetAddressStatus({\n      ...bitcoindParams(client),\n      ...{address}\n    });\n  }\n}\n\nexport function fetchFeeEstimate(network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetFeeEstimate(network);\n  } else {\n    return bitcoindEstimateSmartFee({\n      ...bitcoindParams(client),\n      ...{numBlocks: 1}\n    });\n  }\n}\n\nexport function broadcastTransaction(transactionHex, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerBroadcastTransaction(transactionHex, network);\n  } else {\n    return bitcoindSendRawTransaction({\n      ...bitcoindParams(client),\n      ...{hex: transactionHex}\n    });\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport {\n    Table, TableHead, TableBody,\n    TableRow, TableCell,\n    Box\n  } from '@material-ui/core';\n\n  class WalletConfirmation extends React.Component {\n\n    static propTypes = {\n        extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n      };\n\n        render = () => {\n        return (\n          <Box>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Name</TableCell>\n                  <TableCell>BIP32 Path</TableCell>\n                  <TableCell>Extended Public Key</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {this.renderConfirmationInfo()}\n              </TableBody>\n            </Table>\n          </Box>\n        )\n      }\n\n      renderConfirmationInfo = () => {\n        const { extendedPublicKeyImporters } = this.props;\n        return Object.values(extendedPublicKeyImporters).map((importer, i) => (\n          <TableRow key={i}>\n            <TableCell>{importer.name}</TableCell>\n            <TableCell>{importer.bip32Path}</TableCell>\n            <TableCell>{importer.extendedPublicKey}</TableCell>\n          </TableRow>\n        ))\n      }\n  }\n\n  function mapStateToProps(state) {\n    return { extendedPublicKeyImporters: state.quorum.extendedPublicKeyImporters };\n  }\n\n  const mapDispatchToProps = {};\n\n  export default connect(mapStateToProps, mapDispatchToProps)(WalletConfirmation);\n","export const UPDATE_DEPOSIT_NODE = \"UPDATE_DEPOSIT_NODE\";\nexport const UPDATE_CHANGE_NODE = \"UPDATE_CHANGE_NODE\";\nexport const RESET_NODES_SPEND = \"RESET_NODES_SPEND\";\nexport const UPDATE_AUTO_SPEND = \"UPDATE_AUTO_SPEND\";\nexport const UPDATE_VIEW_ADDRESSES = \"UPDATE_VIEW_ADDRESSES\";\nexport const UPDATE_DEPOSITING = \"UPDATE_DEPOSITING\";\nexport const UPDATE_SPENDING = \"UPDATE_SPENDING\";\nexport const UPDATE_WALLET_NAME = \"UPDATE_WALLET_NAME\";\nexport const RESET_WALLET_VIEW = \"RESET_WALLET_VIEW\";\nexport const SPEND_NODES = \"SPEND_NODES\";\n\nexport function updateDepositNodeAction(value) {\n  return {\n    type: UPDATE_DEPOSIT_NODE,\n    value: {\n      ...value,\n      ...{change: false}\n    },\n  };\n}\n\nexport function updateChangeNodeAction(value) {\n  return {\n    type: UPDATE_CHANGE_NODE,\n    value: {\n      ...value,\n      ...{change: true}\n    },\n  };\n}\n\nexport function resetNodesSpend() {\n  return {\n    type: RESET_NODES_SPEND\n  }\n}\n\nexport function spendNodes() {\n  return {\n    type: SPEND_NODES\n  }\n}\n\nexport function updateAutoSpendAction(value) {\n  return {\n    type: UPDATE_AUTO_SPEND,\n    value: value\n  };\n}\n\nexport function updateViewAdderssesAction() {\n  return {\n    type: UPDATE_VIEW_ADDRESSES,\n  };\n}\n\nexport function updateDepositingAction() {\n  return {\n    type: UPDATE_DEPOSITING,\n  };\n}\n\nexport function updateSpendingAction() {\n  return {\n    type: UPDATE_SPENDING,\n  };\n}\n\nexport function updateWalletNameAction(number, value) {\n  return {\n    type: UPDATE_WALLET_NAME,\n    value: value\n  };\n}\n\nexport function resetWalletView() {\n  return {\n    type: RESET_WALLET_VIEW\n  }\n}\n\n","export const CHOOSE_PERFORM_SPEND = \"CHOOSE_PERFORM_SPEND\";\n\nexport const SET_REQUIRED_SIGNERS = 'SET_REQUIRED_SIGNERS';\nexport const SET_TOTAL_SIGNERS = 'SET_TOTAL_SIGNERS';\n\nexport const SET_INPUTS = 'SET_INPUTS';\n\nexport const ADD_OUTPUT = 'ADD_OUTPUT';\nexport const SET_OUTPUT_ADDRESS = 'SET_OUTPUT_ADDRESS';\nexport const SET_OUTPUT_AMOUNT = 'SET_OUTPUT_AMOUNT';\nexport const DELETE_OUTPUT = 'DELETE_OUTPUT';\n\nexport const SET_FEE_RATE = 'SET_FEE_RATE';\nexport const SET_FEE = 'SET_FEE';\n\nexport const FINALIZE_OUTPUTS = 'FINALIZE_OUTPUTS';\nexport const RESET_OUTPUTS = 'RESET_OUTPUTS';\n\nexport const SET_TXID = 'SET_TXID';\nexport const RESET_TRANSACTION = 'RESET_TRANSACTION';\nexport const SET_IS_WALLET = 'SET_IS_WALLET';\n\nexport function choosePerformSpend() {\n  return {\n    type: CHOOSE_PERFORM_SPEND,\n  };\n}\n\nexport function setRequiredSigners(number) {\n  return {\n    type: SET_REQUIRED_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setTotalSigners(number) {\n  return {\n    type: SET_TOTAL_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setInputs(inputs) {\n  return {\n    type: SET_INPUTS,\n    value: inputs,\n  };\n}\n\nexport function addOutput() {\n  return {\n    type: ADD_OUTPUT,\n  };\n}\n\nexport function setOutputAddress(number, address) {\n  return {\n    type: SET_OUTPUT_ADDRESS,\n    number: number,\n    value: address,\n  };\n}\n\nexport function setOutputAmount(number, amountString) {\n  return {\n    type: SET_OUTPUT_AMOUNT,\n    number: number,\n    value: amountString,\n  };\n}\n\nexport function deleteOutput(number) {\n  return {\n    type: DELETE_OUTPUT,\n    number: number,\n  };\n}\n\nexport function setFeeRate(valueString) {\n  return {\n    type: SET_FEE_RATE,\n    value: valueString,\n  };\n}\n\nexport function setFee(valueString) {\n  return {\n    type: SET_FEE,\n    value: valueString,\n  };\n}\n\nexport function finalizeOutputs(finalized) {\n  return {\n    type: FINALIZE_OUTPUTS,\n    value: finalized\n  };\n}\n\nexport function resetOutputs() {\n  return {\n    type: RESET_OUTPUTS,\n  };\n}\n\nexport function resetTransaction() {\n  return {\n    type: RESET_TRANSACTION,\n  };\n}\n\n\nexport function setTXID(txid) {\n  return {\n    type: SET_TXID,\n    value: txid,\n  };\n}\n\nexport function setIsWallet() {\n  return {\n    type: SET_IS_WALLET,\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  satoshisToBitcoins,\n} from 'unchained-bitcoin';\nimport { updateDepositingAction,\n  updateSpendingAction,\n  updateViewAdderssesAction\n} from \"../../actions/walletActions\";\nimport { setRequiredSigners } from \"../../actions/transactionActions\";\nimport {\n  Grid, Button, Box\n} from '@material-ui/core';\n\nclass WalletControl extends React.Component {\n  scrollRef = React.createRef();\n\n  static propTypes = {\n    deposits: PropTypes.object.isRequired,\n    change: PropTypes.object.isRequired,\n    setDepositing: PropTypes.func.isRequired,\n    setSpending: PropTypes.func.isRequired,\n    setViewing: PropTypes.func.isRequired,\n    setRequiredSigners: PropTypes.func.isRequired,\n  };\n\n  componentDidMount = () => {\n    this.scrollRef.current.scrollIntoView({ behavior: 'smooth' });\n  }\n\n\n  render = () => {\n    return (\n      <Grid container justify=\"center\"  ref={this.scrollRef}>\n        <Grid item md={8}>\n          <h3>Balance: {this.totalBalance()}</h3>\n        </Grid>\n        <Grid item md={4}>\n          <Box component=\"span\">\n            <Button variant=\"contained\" color=\"secondary\" onClick={this.setDeposit}>Deposit</Button>\n          </Box>\n          <Box component=\"span\" ml={2}>\n            <Button variant=\"contained\" color=\"primary\" onClick={this.setSpend}>Spend</Button>\n          </Box>\n          <Box component=\"span\" ml={2}>\n            <Button variant=\"contained\" onClick={this.setView}>View Addresses</Button>\n          </Box>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  totalBalance() {\n    const { deposits, change } = this.props;\n    return satoshisToBitcoins(deposits.balanceSats.plus(change.balanceSats)).toFixed();\n  }\n\n  setDeposit = () => {\n    const { setDepositing } = this.props;\n    setDepositing();\n  }\n\n  setSpend = () => {\n    const { setSpending, requiredSigners, setRequiredSigners } = this.props;\n    setRequiredSigners(requiredSigners); // this will generate signature importers\n    setSpending();\n  }\n\n  setView = () => {\n    this.props.setViewing()\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.wallet,\n    requiredSigners: state.spend.transaction.requiredSigners\n  };\n}\n\nconst mapDispatchToProps = {\n  setDepositing: updateDepositingAction,\n  setSpending: updateSpendingAction,\n  setViewing: updateViewAdderssesAction,\n  setRequiredSigners,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletControl);\n","import PropTypes from 'prop-types';\nimport React       from \"react\";\n\n// Components\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport {FileCopy} from '@material-ui/icons';\n\nclass Copyable extends React.Component {\n\n  state = {\n    copied: false,\n    timer: null,\n  };\n\n  componentWillUnmount = () => {\n    const {timer} = this.state;\n    if (timer) {\n      clearTimeout(timer);\n    }\n  }\n\n  render = () => {\n    const {newline, text, children} = this.props;\n    return (\n      <span onClick={e => e.stopPropagation()}>\n        <CopyToClipboard text={text} onCopy={this.onCopy} options={{format: \"text/plain\"}}>\n          <span className=\"copyable\">\n            {children || text}\n            {newline && <br />}\n            {/* {this.props.icon && <span>&nbsp;</span>} */}\n            {/* {this.props.icon && <FAIcon name=\"clipboard\" />} */}\n            {this.badge()}\n          </span>\n        </CopyToClipboard>\n      </span>\n    );\n  }\n\n  badge = () => {\n    const {copied} = this.state;\n    if (copied) {\n      //return (<span>&nbsp; <span className=\"badge badge-success\">Copied</span></span>);\n      return <FileCopy fontSize=\"small\"/>;\n    } else { return null; }\n  }\n\n  onCopy = () => {\n    const timer = setTimeout(() => {\n      this.setState({copied: false, timer: null});\n    }, 1000);\n    this.setState({copied: true, timer});\n  }\n}\n\nCopyable.defaultProps = {\n  newline: false,\n  icon: true,\n}\n\nCopyable.propTypes = {\n  // defaults\n  newline:   PropTypes.bool.isRequired,\n  icon: PropTypes.bool.isRequired,\n  // parent\n  text:     PropTypes.string,\n  children: PropTypes.any,\n};\n\nexport default Copyable;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { fetchAddressUTXOs } from \"../../blockchain\"\nimport {\n  updateDepositNodeAction,\n  resetWalletView,\n} from \"../../actions/walletActions\";\nimport BigNumber from \"bignumber.js\";\n\n// Components\nimport QRCode from \"qrcode.react\";\nimport Copyable from \"../Copyable\";\nimport {\n  Card, CardHeader,\n  CardContent, TextField,\n  Snackbar,\n} from '@material-ui/core';\n\nlet depositTimer;\n\nclass WalletDeposit extends React.Component {\n  state = {\n    address: \"\",\n    bip32Path: \"\",\n    amount: 0,\n    amountError: \"\",\n    showReceived: false,\n  }\n\n  static propTypes = {\n    deposits: PropTypes.object.isRequired,\n    client: PropTypes.object.isRequired,\n    updateDepositNode: PropTypes.func.isRequired,\n  }\n\n  componentDidMount() {\n    const { deposits, network, client, updateDepositNode, resetWalletView } = this.props;\n    const nodes = Object.values(deposits.nodes)\n    for(let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n      if (node.balanceSats.isEqualTo(0) && !node.addressUsed) {\n        this.setState({address: node.multisig.address, bip32Path: node.bip32Path});\n        break;\n      }\n    }\n    if (this.state.address === \"\") {\n      // TODO: get more\n    }\n\n    depositTimer = setInterval(async () => {\n      let utxos;\n      try {\n        utxos = await fetchAddressUTXOs(this.state.address, network, client);\n        if (utxos.length) {\n          clearInterval(depositTimer)\n          const balanceSats = utxos\n          .reduce(\n            (accumulator, currentValue) => accumulator.plus(currentValue.amountSats),\n            new BigNumber(0));\n\n          updateDepositNode({\n            change: false,\n            bip32Path: this.state.bip32Path,\n            utxos,\n            balanceSats,\n            fetchedUTXOs: true,\n            fetchUTXOsError: ''\n          })\n          this.setState({showReceived: true});\n          setTimeout(resetWalletView, 5000);\n        }\n      } catch(e) {\n        console.error(e);\n      }\n\n    }, 2000)\n  }\n\n  componentWillUnmount() {\n    clearInterval(depositTimer)\n  }\n\n  render() {\n    const { amount, amountError, address, showReceived } = this.state;\n    return (\n      <div>\n        <Card>\n          <CardHeader title=\"Deposit\"/>\n          <CardContent>\n          <TextField\n              fullWidth\n              label=\"Amount\"\n              name=\"depositAmount\"\n              onChange={this.handleAmountChange}\n              value={amount}\n              error={amountError !== \"\"}\n              helperText={amountError}\n            />\n            <Copyable text={this.qrString()} newline={true}>\n              <p><code>{address}</code></p>\n              <QRCode size={300} value={this.qrString()} level={'L'} />\n              <p>Scan QR code or click to copy address to clipboard.</p>\n            </Copyable>\n          </CardContent>\n        </Card>\n        <Snackbar\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'left',\n          }}\n          open={showReceived}\n          autoHideDuration={3000}\n          onClose={() => this.setState({showReceived: false})}\n          ContentProps={{\n            'aria-describedby': 'message-id',\n          }}\n          message={<span id=\"message-id\">Deposit received</span>}\n        />\n      </div>\n    )\n  }\n\n  handleAmountChange = (event)=> {\n    const amount = event.target.value;\n    let error = \"\"\n\n    if (amount.length && !amount.match(/^[0-9.]+$/)) {\n      error = \"Amount must be numeric\";\n    }\n    const decimal = amount.split('.');\n    if (decimal.length > 2) {\n      error = \"Amount must be numeric\";\n    } else if (decimal.length === 2 && decimal[1].length > 8) {\n      error = \"Amount must have maximum precision of 8 decimal places\";\n    }\n\n    this.setState({amount: event.target.value, amountError: error})\n  }\n\n  qrString = () => {\n    const {address, amount} = this.state;\n    return `bitcoin:${address}${amount ? '?amount='+amount : ''}`\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return { ...state.wallet,\n    ...state.settings,\n    client: state.client,\n  };\n}\n\nconst mapDispatchToProps = {\n  updateDepositNode: updateDepositNodeAction,\n  resetWalletView,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletDeposit);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  blockExplorerTransactionURL,\n  satoshisToBitcoins,\n} from \"unchained-bitcoin\";\nimport {externalLink} from \"../../utils\";\nimport Copyable from \"../Copyable\";\n\n// Components\nimport {\n  Card, CardHeader, CardContent,\n  Table, TableHead, TableBody, TableFooter,\n  TableRow, TableCell,\n} from '@material-ui/core';\nimport { OpenInNew } from '@material-ui/icons';\n\n// Assets\nimport 'react-table/react-table.css';\nimport styles from './styles.module.scss';\n\nclass UTXOSet extends React.Component {\n\n  static propTypes = {\n    network: PropTypes.string.isRequired,\n    inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n    inputsTotalSats: PropTypes.object.isRequired,\n  };\n\n  render() {\n    const {inputs, inputsTotalSats} = this.props;\n    return (\n      <Card >\n        <CardHeader title={`Available Inputs (${inputs.length})`} />\n        <CardContent>\n          <p>The following UTXOs will be spent as inputs in a new transaction.</p>\n          <Table>\n            <TableHead>\n              <TableRow hover>\n                <TableCell>Number</TableCell>\n                <TableCell>TXID</TableCell>\n                <TableCell>Index</TableCell>\n                <TableCell>Amount (BTC)</TableCell>\n                <TableCell>View</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {this.renderInputs()}\n            </TableBody>\n            <TableFooter>\n              <TableRow hover>\n                <TableCell colSpan={3}>\n                  TOTAL:\n                </TableCell>\n                <TableCell colSpan={2}>\n                  {satoshisToBitcoins(inputsTotalSats).toString()}\n                </TableCell>\n              </TableRow>\n            </TableFooter>\n          </Table>\n\n        </CardContent>\n      </Card>\n    );\n  }\n\n  renderInputs = () => {\n    const { inputs, network } = this.props;\n    return inputs.map((input, inputIndex) => {\n      const confirmedStyle = `${styles.utxoTxid}${input.confirmed ? '' : ' '+styles.unconfirmed}`;\n      const confirmedTitle = input.confirmed ? 'confirmed' : 'unconfirmed';\n      return (\n        <TableRow hover key={input.txid}>\n          <TableCell>\n            {inputIndex + 1}\n          </TableCell>\n          <TableCell className={confirmedStyle}>\n            <Copyable text={input.txid}>\n              <code title={confirmedTitle}>{input.txid}</code>\n            </Copyable>\n          </TableCell>\n          <TableCell>\n            <Copyable text={input.index.toString()} />\n          </TableCell>\n          <TableCell>\n            <Copyable text={satoshisToBitcoins(input.amountSats).toString()} />\n          </TableCell>\n          <TableCell>\n            {externalLink(blockExplorerTransactionURL(input.txid, network), <OpenInNew />)}\n          </TableCell>\n        </TableRow>\n      );\n    });\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n  };\n}\n\nexport default connect(mapStateToProps)(UTXOSet);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  satoshisToBitcoins,\n  blockExplorerAddressURL,\n} from 'unchained-bitcoin';\nimport {\n  externalLink,\n} from \"../../utils\";\n\n// Components\nimport {\n  TableRow, TableCell, Checkbox, FormHelperText,\n  ExpansionPanel, ExpansionPanelDetails, ExpansionPanelSummary\n} from '@material-ui/core';\nimport Copyable from \"../Copyable\";\nimport UTXOSet from \"../Spend/UTXOSet\";\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n// Actions\nimport {\n  setInputs, setFeeRate,\n} from '../../actions/transactionActions';\nimport { updateAutoSpendAction } from \"../../actions/walletActions\";\n\nimport styles from '../Spend//styles.module.scss';\n\nclass Node extends React.Component {\n\n  static propTypes = {\n    network: PropTypes.string.isRequired,\n    addressType: PropTypes.string.isRequired,\n    addNode: PropTypes.func.isRequired,\n    updateNode: PropTypes.func.isRequired,\n    present: PropTypes.bool,\n    bip32Path: PropTypes.string.isRequired,\n    multisig: PropTypes.object,\n    spend: PropTypes.bool.isRequired,\n    change: PropTypes.bool.isRequired,\n    setInputs: PropTypes.func.isRequired,\n    setFeeRate: PropTypes.func.isRequired,\n  };\n\n  componentDidMount = () => {\n    this.generate();\n  }\n\n  render = () => {\n    const {bip32Path, spend, fetchedUTXOs, balanceSats, fetchUTXOsError,\n      multisig, utxos, spending, addressKnown} = this.props;\n    return (\n      <TableRow key={bip32Path}>\n        { spending &&\n          <TableCell>\n            <Checkbox\n              id={bip32Path}\n              name=\"spend\"\n              onChange={this.handleSpend}\n              checked={spend}\n              disabled={!fetchedUTXOs || balanceSats.isEqualTo(0)}\n            />\n          </TableCell>\n        }\n        <TableCell>\n          <code>{bip32Path}</code>\n        </TableCell>\n        <TableCell>\n          {utxos.length}\n        </TableCell>\n        <TableCell>\n          {fetchedUTXOs && addressKnown ? satoshisToBitcoins(balanceSats).toFixed() : ''}\n          {fetchUTXOsError !== '' && <FormHelperText className=\"danger\">{fetchUTXOsError}</FormHelperText>}\n        </TableCell>\n        <TableCell>\n          {multisig ? this.renderAddress()\n           : '...'}\n        </TableCell>\n      </TableRow>\n      );\n  }\n\n  addressContent = () => {\n    const {multisig, network, addressUsed, balanceSats} = this.props;\n    return (\n      <div>\n        <Copyable text={multisig.address}>\n          <code className={addressUsed && balanceSats.isEqualTo(0) ? styles.spent : \"\"}>{multisig.address}</code>\n          </Copyable>\n        &nbsp;\n        {externalLink(blockExplorerAddressURL(multisig.address, network), <LaunchIcon onClick={e => e.stopPropagation()} />)}\n      </div>\n    )\n  }\n\n  renderAddress = () => {\n    const {bip32Path, utxos,  balanceSats} = this.props;\n    return (\n      <ExpansionPanel>\n      <ExpansionPanelSummary\n        expandIcon={balanceSats.isGreaterThan(0) ? <ExpandMoreIcon /> : null}\n        aria-controls=\"panel1a-content\"\n        id={'address-header'+bip32Path}\n      >\n        {this.addressContent()}\n     </ExpansionPanelSummary>\n     <ExpansionPanelDetails>\n       { balanceSats.isGreaterThan(0) &&\n         <UTXOSet\n           inputs={utxos}\n           inputsTotalSats={balanceSats}\n         />\n       }\n     </ExpansionPanelDetails>\n\n   </ExpansionPanel>\n  )\n\n  }\n\n  generate = () => {\n    const {present, change, bip32Path, addNode} = this.props;\n    if (!present) {\n      addNode(change, bip32Path);\n    }\n  }\n\n  handleSpend = (e) => {\n    const {change, bip32Path, updateNode, inputs, utxos, multisig, setInputs,\n      updateAutoSpend, setFeeRate, feeRate} = this.props;\n    let newInputs;\n    if (e.target.checked) {\n      newInputs = inputs.concat(utxos.map(utxo => ({...utxo, multisig, bip32Path: bip32Path})))\n    } else {\n      newInputs = inputs.filter(input => {\n        const newUtxos = utxos.filter(utxo => {\n          return utxo.txid === input.txid && utxo.index === input.index;\n        })\n        return newUtxos.length === 0;\n      })\n    }\n    setInputs(newInputs);\n    updateNode(change, {spend: e.target.checked, bip32Path});\n    updateAutoSpend(false);\n    setFeeRate(feeRate);\n  }\n\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const change = ((ownProps.bip32Path || '').split('/')[1] === '1'); // // m, 0, 1\n  const braid = state.wallet[change ? 'change' : 'deposits'];\n  return {\n    ...state.settings,\n    ...{change},\n    ...braid.nodes[ownProps.bip32Path],\n    ...state.spend.transaction,\n    spending: state.wallet.info.spending,\n\n  };\n}\n\nconst mapDispatchToProps = {\n  setInputs,\n  setFeeRate,\n  updateAutoSpend: updateAutoSpendAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Node);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { bitcoindImportMulti, bitcoindGetAddressStatus } from '../bitcoind';\nimport { bitcoindParams, isWalletAddressNotFoundError } from '../bitcoind'\nimport { FormHelperText, Button, Box, Switch, FormControlLabel } from '@material-ui/core'\n\nlet interval;\nclass BitcoindAddressImporter extends React.Component {\n  static propTypes = {\n    addresses: PropTypes.array.isRequired,\n    client: PropTypes.object.isRequired,\n    autoImport: PropTypes.bool\n  };\n\n  state = {\n    imported: false,\n    importError: \"\",\n    rescan: false,\n    addressesError: \"\",\n    addressPresent: false, // this applies for auto import prop only\n  };\n\n  componentDidMount = () => {\n    if (this.props.autoImport) interval = setInterval(this.checkAddress, 5000);\n  }\n\n  componentWillUnmount = () => {\n    clearInterval(interval);\n  }\n\n  render() {\n    const { imported, importError, rescan, addressPresent, addressesError } = this.state;\n    const { autoImport, addresses } = this.props;\n\n     return (\n      <Box>\n        {\n          imported && rescan && <FormHelperText>{this.pluralOrSingularAddress()} imported, rescan of your node may take some time.</FormHelperText>\n        }\n        {\n          imported && !rescan && <FormHelperText>{this.pluralOrSingularAddress()} imported.</FormHelperText>\n        }\n      { addressPresent &&\n        <div>\n          <FormHelperText>Address {imported ? 'imported to' : 'found in'} your wallet!</FormHelperText>\n          <FormHelperText>You can properly determine your addresses current balance.</FormHelperText>\n          <FormHelperText>\n            Your node may need to do a rescan to determine if an address has been previously used. If you\n            are sure you have done so, or you are sure of the address's history, you may proceed.  If you\n            are unsure, you may select \"rescan\" and import.\n          </FormHelperText>\n        </div>\n      }\n\n      {\n        !addressPresent && autoImport &&\n        <FormHelperText>Checking node for presence of {this.pluralOrSingularAddress()}</FormHelperText>\n      }\n      {\n        !addressPresent && !autoImport &&\n        <FormHelperText>To get accurate information from your node your {this.pluralOrSingularAddress()}\n          will need to be imported to your node.  Importing will give you accurate balance information\n          however to know if an address hase been used previously, a rescan needs to take place.\n        </FormHelperText>\n      }\n      <FormHelperText error>{addressesError}</FormHelperText>\n        {/* <FormHelperText>Addresses used with bitcoind node must be imported to your node.  If you have not already, you can import now.</FormHelperText> */}\n        <p>\n          {/* Import {this.pluralOrSingularAddress()} to your node? */}\n          <Box component=\"span\" ml={2}>\n            <Button\n              variant=\"contained\"\n              disabled = { !rescan && (addressPresent  || addresses.length === 0) }\n              onClick={this.import}>Import</Button>\n          </Box>\n          <Box component=\"span\" ml={2}>\n            <FormControlLabel\n              control={\n                <Switch\n                checked={rescan}\n                onChange={this.handleRescan}\n                color=\"secondary\"\n                />\n              }\n              label=\"Rescan\"\n            />\n\n          </Box>\n        </p>\n        <FormHelperText error>{importError}</FormHelperText>\n\n      </Box>\n    )\n  }\n\n  pluralOrSingularAddress() {\n    const { addresses } = this.props;\n    return `address${addresses.length > 1 ? 'es' : ''}`\n  }\n\n  handleRescan = (e) => {\n    this.setState({rescan: e.target.checked})\n  }\n\n  checkAddress = async () => {\n    const { client, addresses, autoImport } = this.props;\n    const address = addresses[0] // TODO: loop, or maybe just check one\n\n    try {\n      const status = await bitcoindGetAddressStatus({ // TODO: use this to warn if spent\n        ...bitcoindParams(client),\n        address\n      });\n      if (typeof status.used !== 'undefined') {\n        this.setState({addressPresent: true, addressesError: \"\"});\n        clearInterval(interval);\n      }\n    } catch (e) {\n      // e.status 401 e.statusText\n      // e.status 500 e.data.error.message\n      const status = (e.response && e.response.status) || 'unknown'\n      if (autoImport\n        && isWalletAddressNotFoundError(e) && !this.state.rescan) {\n        this.import();\n      }\n      this.setState({\n        addressesError: status === 401 ?\n        e.response.statusText : status === 500 ?\n        e.response.data.error.message :\n        e.message || \"An unknown address error occured\"})\n      console.log(status, e.response)\n    }\n\n  }\n\n  import = () => {\n    const { addresses, client, importCallback } = this.props;\n    const { rescan } = this.state;\n    const label = \"\"; // TODO: do we want to allow to set? or set to \"caravan\"?\n    bitcoindImportMulti({\n      ...bitcoindParams(client),\n      ...{addresses, label, rescan}\n    })\n    .then(response => {\n      const responseError = response.result.reduce((e, c) => {\n        return (c.error && c.error.message) || e\n      }, \"\")\n      this.setState({\n        importError: responseError,\n        imported: responseError === \"\"\n      });\n      if (typeof importCallback !== 'undefined') {\n        importCallback(response.result)\n      }\n    })\n    .catch(e => {\n      this.setState({\n        importError: \"Unable to import, check your settings and try again\",\n        imported: false\n      });\n    });\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    client: state.client,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BitcoindAddressImporter);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport BigNumber from \"bignumber.js\";\nimport {\n  fetchAddressUTXOs,\n  getAddressStatus,\n} from \"../../blockchain\";\n\n// Components\nimport {\n  Button,\n  Box, Grid,\n  Table, TableHead, TableBody,\n  TableRow, TableCell, TablePagination,\n} from '@material-ui/core';\nimport Node from \"./Node\";\nimport BitcoindAddressImporter from '../BitcoindAddressImporter';\n\nclass NodeSet extends React.Component {\n\n  static propTypes = {\n    depositNodes: PropTypes.object.isRequired,\n    changeNodes: PropTypes.object.isRequired,\n    canLoad: PropTypes.bool,\n    addNode: PropTypes.func.isRequired,\n    updateNode: PropTypes.func.isRequired,\n  };\n\n  state = {\n    page: 0,\n    nodesPerPage: 10,\n    change: false,\n    spend: false,\n  };\n\n  addresses = [];\n\n  render() {\n    const {page, nodesPerPage, change} = this.state;\n    const {spending, canLoad, client} = this.props\n    const useAddressImporter = !spending && client.type === \"private\";\n\n    if (useAddressImporter) {\n      this.addresses = this.getUnknownAddressNodes()\n        .map(node => node.multisig.address) ;\n      console.log('filtered addresses set for import', this.addresses)\n    }\n    return (\n      <Box>\n        { useAddressImporter &&\n          <BitcoindAddressImporter\n            addresses={this.addresses}\n            importCallback={this.addressesImported}\n            />\n        }\n      <Table>\n            <TableHead>\n              <TableRow>\n                {spending && <TableCell>Spend?</TableCell>}\n                <TableCell>BIP32 Path</TableCell>\n                <TableCell>UTXOs</TableCell>\n                <TableCell>Balance</TableCell>\n                <TableCell>Address</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {this.renderNodes()}\n            </TableBody>\n          </Table>\n          <Grid container>\n            <Grid item md={6}>\n              <TablePagination\n                component=\"div\"\n                count={this.rowCount()}\n                rowsPerPage={nodesPerPage}\n                page={page}\n                backIconButtonProps={{\n                  'aria-label': 'previous page',\n                }}\n                nextIconButtonProps={{\n                  'aria-label': 'next page',\n                }}\n                onChangePage={this.handlePageChange}\n                onChangeRowsPerPage={this.handleChangeRowsPerPage}\n              />\n            </Grid>\n            <Grid item md={2}>\n              {canLoad && page === this.pageCount() - 1 && <Button type=\"button\" variant=\"contained\" color=\"secondary\" onClick={this.generateAnotherPage}>More</Button>}\n            </Grid>\n            <Grid item md={4}>\n              <Button type=\"button\" variant=\"contained\" color=\"primary\" onClick={this.toggleChange}>{change ? \"View Deposits\" : \"View Change\"}</Button>\n            </Grid>\n          </Grid>\n\n        </Box>\n    );\n  }\n\n  getUnknownAddressNodes = () => {\n    const {changeNodes, depositNodes} = this.props\n    return Object.values(depositNodes).concat(Object.values(changeNodes))\n    .filter(node => !node.addressKnown);\n  }\n\n\n  addressesImported = async result => {\n    // this will give me an array [{success: true/false}...]\n    // need to loop through and mark nodes as addressKnown\n    const { updateNode, client, network } = this.props;\n    const nodes = []\n    const unknown = this.getUnknownAddressNodes();\n    result.forEach((addr, i) => {\n      if (addr.success) nodes.push(unknown[i]); // can now set to known and refresh status\n    });\n\n    nodes.forEach(async node => {\n      const utxos = await fetchAddressUTXOs(node.multisig.address, network, client);\n      const addressStatus = await getAddressStatus(node.multisig.address, network, client);\n      let updates;\n      if (utxos) {\n        const balanceSats = utxos\n              .map((utxo) => utxo.amountSats)\n              .reduce(\n                (accumulator, currentValue) => accumulator.plus(currentValue),\n                new BigNumber(0));\n        updates = {balanceSats, utxos, fetchedUTXOs: true, fetchUTXOsError: ''}\n      }\n\n\n      updateNode(node.change, {\n        bip32Path: node.bip32Path,\n        addressKnown: true,\n        ...updates,\n        addressStatus,\n      });\n    });\n  }\n\n  getNodeSet = () => {\n    const {spending, changeNodes, depositNodes} = this.props;\n    const {change} = this.state;\n\n    const nodes = change ? changeNodes : depositNodes\n    const nodeSet = spending ? Object.values(nodes)\n      .filter(node => node.balanceSats.isGreaterThan(0))\n      .reduce((nodesObject, currentNode) => {\n        nodesObject[currentNode.bip32Path] = currentNode;\n        return nodesObject;\n      },{})\n      : nodes;\n    return nodeSet\n  }\n\n  renderNodes = () => {\n    const {page, nodesPerPage, change, spend} = this.state;\n    const {addNode, updateNode} = this.props;\n    const startingIndex = (page) * nodesPerPage;\n    const nodesRows = [];\n    const nodeSet = this.getNodeSet();\n    for (let index=0; index < nodesPerPage; index++) {\n      const whichOne = startingIndex + index;\n      if(whichOne > Object.keys(nodeSet).length -1) break;\n      const bip32Path = Object.values(nodeSet)[whichOne].bip32Path;\n      const nodeRow = <Node\n        key={bip32Path}\n        bip32Path={bip32Path}\n        addNode={addNode}\n        updateNode={updateNode}\n        change={change}\n        spend={spend}\n        />;\n      nodesRows.push(nodeRow);\n    }\n    return nodesRows;\n  }\n\n  handlePageChange = (e, selected) => {\n    const page = selected // + 1;\n    this.setState({page});\n  }\n\n  handleChangeRowsPerPage = (e) => {\n    this.setState({nodesPerPage: e.target.value, page: 0});\n  }\n\n  bip32Path = (index) => {\n    const {change} = this.state;\n    const changePath = (change ? \"1\" : \"0\");\n    return `m/${changePath}/${index}`;\n  }\n\n  pageCount = () => {\n    const {nodesPerPage} = this.state;\n    return Math.ceil(this.rowCount() / nodesPerPage);\n  }\n\n  rowCount = () => {\n    const nodeSet = this.getNodeSet();\n    return Object.keys(nodeSet).length;\n  }\n\n  generateAnotherPage = async () => {\n    const {addNode, depositNodes, changeNodes} = this.props;\n    const {change, nodesPerPage, page} = this.state;\n    const startingIndex = Object.keys(change ? changeNodes : depositNodes).length;\n    for (let index=0; index < nodesPerPage + (nodesPerPage - (startingIndex % nodesPerPage)); index++) {\n      const bip32path = this.bip32Path(startingIndex + index);\n      await addNode(change, bip32path);\n    }\n    if (startingIndex % nodesPerPage === 0) // otherwise we will be filling this page first\n      this.setState({page: page + 1});\n  }\n\n  toggleChange = () => {\n    const {change} = this.state;\n    this.setState({change: (!change), page: 0});\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    changeNodes: state.wallet.change.nodes,\n    depositNodes: state.wallet.deposits.nodes,\n    spending: state.wallet.info.spending,\n    client: state.client,\n    ...state.settings,\n\n  };\n}\n\nconst mapDispatchToProps = {\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NodeSet);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  satoshisToBitcoins,\n  bitcoinsToSatoshis,\n  validateOutputAmountBTC,\n} from 'unchained-bitcoin';\nimport BigNumber from \"bignumber.js\";\n\n// Actions\nimport {\n  setOutputAddress,\n  setOutputAmount,\n  deleteOutput\n} from '../../actions/transactionActions';\n\n// Components\nimport { Grid, Tooltip, TextField, IconButton } from '@material-ui/core';\nimport { Delete, AddCircle, RemoveCircle } from '@material-ui/icons';\n\n// Assets\nimport styles from './styles.module.scss';\n\nclass OutputEntry extends React.Component {\n\n  static propTypes = {\n    number: PropTypes.number.isRequired,\n    inputsTotalSats: PropTypes.object.isRequired,\n    outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n    fee: PropTypes.string.isRequired,\n    feeError: PropTypes.string.isRequired,\n    address: PropTypes.string.isRequired,\n    amount: PropTypes.string.isRequired,\n    addressError: PropTypes.string.isRequired,\n    amountError: PropTypes.string.isRequired,\n    finalizedOutputs: PropTypes.bool.isRequired,\n    setAddress: PropTypes.func.isRequired,\n    setAmount: PropTypes.func.isRequired,\n    remove: PropTypes.func.isRequired,\n  };\n\n  render() {\n    const {outputs, finalizedOutputs, address, amount, addressError, amountError} = this.props;\n\n    return (\n      <Grid container>\n\n        <Grid item xs={7}>\n          <TextField\n            fullWidth\n            placeholder=\"Address\"\n            name=\"destination\"\n            className={styles.outputsFormInput}\n            disabled={finalizedOutputs}\n            onChange={this.handleAddressChange}\n            value={address}\n            error={this.hasAddressError()}\n            helperText={addressError}\n          />\n        </Grid>\n\n        <Grid item xs={3}>\n          <TextField\n            fullWidth\n            placeholder=\"Amount (BTC)\"\n            className={styles.outputsFormInput}\n            name=\"amount\"\n            disabled={finalizedOutputs}\n            onChange={this.handleAmountChange}\n            value={amount}\n            error={this.hasAmountError()}\n            helperText={amountError}\n            /* type=\"number\" */\n            /* InputProps={{ */\n            /*   min: \"0\",  */\n            /*   max: \"21000000\",  */\n            /*   step: \"0.00000001\" */\n            /* }} */\n          />\n        </Grid>\n\n        {(!finalizedOutputs) && this.hasBalanceError() && this.isBalanceable() &&\n         <Grid item xs={1}>\n           <Tooltip title={`${this.balanceAction()} to ${this.autoBalancedAmount().toString()}`} placement=\"top\">\n             <small>\n               <IconButton onClick={this.handleBalance}>\n                 {this.balanceAction() === \"Increase\" ? <AddCircle /> : <RemoveCircle />}\n               </IconButton>\n             </small>\n           </Tooltip>\n         </Grid>}\n\n        {(!finalizedOutputs) && outputs.length > 1 &&\n         <Grid item xs={1}>\n           <Tooltip title=\"Remove Output\" placement=\"top\">\n             <IconButton onClick={this.handleDelete}>\n               <Delete/>\n             </IconButton>\n           </Tooltip>\n         </Grid>}\n\n      </Grid>\n    );\n  }\n\n  //\n  // Address\n  //\n\n  handleAddressChange = (event) => {\n    const {number, setAddress} = this.props;\n    setAddress(number, event.target.value);\n  }\n\n  hasAddressError = () => {\n    const {addressError} = this.props;\n    return addressError !== '';\n  }\n\n  //\n  // Amount\n  //\n\n  handleAmountChange = (event) => {\n    const {number, setAmount} = this.props;\n    setAmount(number, event.target.value);\n  }\n\n  hasAmountError = () => {\n    const {amountError} = this.props;\n    return amountError !== '';\n  }\n\n  //\n  // Balance\n  //\n\n  isNotBalanceable = () => {\n    const {number, outputs, feeError, amountError, amount, inputsTotalSats} = this.props;\n    if (feeError !== '') { return true; }\n    for (var i = 0; i < outputs.length; i++) {\n      if (i !== (number - 1)) {\n        if (outputs[i].amountError !== '' || outputs[i].amount === '') {\n          return true;\n        }\n      }\n    }\n    const newAmount = this.autoBalancedAmount();\n    if (validateOutputAmountBTC(newAmount, inputsTotalSats) !== '') { return true; }\n    if (amountError === '' && (newAmount === new BigNumber(amount))) { return true; }\n    return false;\n  }\n\n  isBalanceable = () => (!this.isNotBalanceable())\n\n  hasBalanceError = () => {\n    const {balanceError} = this.props;\n    return balanceError !== '';\n  }\n\n  autoBalancedAmount = () => {\n    const {number, fee, inputsTotalSats, outputs} = this.props;\n    const outputTotalSats = outputs\n          .filter((output, i) => i !== number - 1)\n          .map((output) => bitcoinsToSatoshis(new BigNumber(output.amount)))\n          .reduce(\n            (accumulator, currentValue) => accumulator.plus(currentValue),\n            new BigNumber(0));\n    const feeSats = bitcoinsToSatoshis(new BigNumber(fee));\n    return satoshisToBitcoins(inputsTotalSats.minus(outputTotalSats.plus(feeSats)));\n  }\n\n  balanceAction = () => {\n    const {balanceError} = this.props;\n    if ((!this.hasBalanceError()) || this.isNotBalanceable()) {return null; }\n    return balanceError.split(\" \")[0];\n  }\n\n  handleBalance = () => {\n    const {number, setAmount} = this.props;\n    setAmount(number, this.autoBalancedAmount().toString());\n  }\n\n  //\n  // State\n  //\n\n  hasError = () => {\n    return this.hasAddressError() || this.hasAmountError();\n  }\n\n  handleDelete = () => {\n    const {number, remove} = this.props;\n    remove(number);\n  }\n\n}\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.spend.transaction,\n    ...state.spend.transaction.outputs[ownProps.number - 1],\n  };\n}\n\nconst mapDispatchToProps =  {\n  setAddress: setOutputAddress,\n  setAmount: setOutputAmount,\n  remove: deleteOutput,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OutputEntry);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { map } from 'lodash';\nimport BigNumber from 'bignumber.js';\nimport { fetchFeeEstimate } from '../../blockchain';\nimport {\n  bitcoinsToSatoshis,\n  satoshisToBitcoins,\n} from 'unchained-bitcoin';\n\n// Actions\nimport {\n  addOutput,\n  setOutputAmount,\n  setFeeRate,\n  setFee,\n  finalizeOutputs,\n  resetOutputs,\n} from '../../actions/transactionActions';\n\n// Components\nimport {\n  Card, CardHeader, CardContent,\n  Grid, Button, Tooltip, TextField,\n  Box, IconButton, InputAdornment,\n} from \"@material-ui/core\";\nimport {Speed} from \"@material-ui/icons\";\nimport OutputEntry from './OutputEntry';\n\nclass OutputsForm extends React.Component {\n\n  titleRef = React.createRef();\n\n  static propTypes = {\n    network: PropTypes.string.isRequired,\n    client: PropTypes.object.isRequired,\n    inputsTotalSats: PropTypes.object.isRequired,\n    outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n    fee: PropTypes.string.isRequired,\n    feeRate: PropTypes.string.isRequired,\n    finalizedOutputs: PropTypes.bool.isRequired,\n    signatureImporters: PropTypes.shape({}).isRequired,\n    setFeeRate: PropTypes.func.isRequired,\n    setFee: PropTypes.func.isRequired,\n    addOutput: PropTypes.func.isRequired,\n    setOutputAmount: PropTypes.func.isRequired,\n    resetOutputs: PropTypes.func.isRequired,\n    finalizeOutputs: PropTypes.func.isRequired,\n    feeRateError: PropTypes.string.isRequired,\n    feeError: PropTypes.string.isRequired,\n    balanceError: PropTypes.string.isRequired,\n  };\n\n  state = {\n    feeRateFetchError: '',\n  };\n\n  componentDidMount = () => {\n    this.initialOutputState();\n    this.scrollToTitle();\n  }\n\n  componentDidUpdate = () => {\n    this.scrollToTitle();\n  }\n\n  scrollToTitle = () => {\n    const { signatureImporters } = this.props;\n    const finalizedCount = Object.keys(signatureImporters).reduce((o, k) => o + (signatureImporters[k].finalized), 0);\n    if(finalizedCount === 0) this.titleRef.current.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  async initialOutputState() {\n    const { inputs, outputs } = this.props;\n    await this.getFeeEstimate();\n    const {inputsTotalSats, fee, setOutputAmount} = this.props;\n    const feeSats = bitcoinsToSatoshis(new BigNumber(fee));\n    const outputAmount = satoshisToBitcoins(inputsTotalSats.minus(feeSats));\n    // onliy initialize once so we don't lose state\n    if (inputs.length && outputs[0].amount === '') setOutputAmount(1, outputAmount.toFixed(8));\n  }\n\n  render() {\n    const {feeRate, fee, finalizedOutputs, feeRateError, feeError, balanceError, addChange} = this.props;\n    const {feeRateFetchError} = this.state;\n    return (\n      <Card>\n        <CardHeader ref={this.titleRef} title=\"Define Outputs\"/>\n        <CardContent>\n            <Box>\n              <Grid>\n              {this.renderOutputs()}\n              </Grid>\n\n              <Grid item container spacing={1}>\n\n                <Grid item xs={4}>\n                    <Button\n                      variant=\"contained\"\n                      disabled={finalizedOutputs}\n                      onClick={this.handleAddOutput}\n                    >\n                      Add output\n                    </Button>\n                  {\n                  typeof addChange != 'undefined' &&\n                    <Box component=\"span\" ml={2}>\n                    <Button\n                      variant=\"contained\"\n                      disabled={finalizedOutputs}\n                      onClick={addChange}\n                    >\n                      Add change\n                    </Button>\n                    </Box>\n                  }\n                </Grid>\n\n                <Grid item xs={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Fee Rate (Sats/byte)\"\n                    value={feeRate}\n                    placeholder=\"Sats/byte\"\n                    name=\"fee_rate\"\n                    disabled={finalizedOutputs}\n                    onChange={this.handleFeeRateChange}\n                    error={this.hasFeeRateError()}\n                    helperText={feeRateFetchError || feeRateError}\n                    /* type=\"number\" */\n                    InputProps={{\n                      /* min: \"0\", */\n                      /* max: \"1000\", */\n                      /* step: \"any\", */\n                      endAdornment: <InputAdornment position=\"end\">\n                                      <Tooltip placement='top' title='Estimate best rate'>\n                                        <small>\n                                          <IconButton onClick={this.getFeeEstimate}  disabled={finalizedOutputs}>\n                                            <Speed />\n                                          </IconButton>\n                                        </small>\n                                      </Tooltip>\n                                    </InputAdornment>,\n                    }}\n                  />\n                </Grid>\n\n\n                <Grid item xs={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Estimated Fees (BTC)\"\n                    placeholder=\"BTC\"\n                    name=\"fee_total\"\n                    disabled={finalizedOutputs}\n                    value={fee}\n                    onChange={this.handleFeeChange}\n                    error={this.hasFeeError()}\n                    helperText={feeError}\n                    /* type=\"number\" */\n                    /* InputProps={{ */\n                    /*   min: \"0.00000001\", */\n                    /*   max: \"0.025\", */\n                    /*   step: \"0.00000001\", */\n                    /* }} */\n                  />\n                </Grid>\n\n                <Grid item xs={2}/>\n\n              </Grid>\n\n              <Grid item container spacing={1}>\n                <Grid item xs={4}/>\n                <Grid item xs={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Inputs Total\"\n                    readOnly={true}\n                    value={this.inputsTotal().toString()}\n                    disabled={finalizedOutputs}\n                    InputProps={{\n                      readOnly: true,\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Outputs & Fee Total\"\n                    value={this.outputsAndFeeTotal().toString()}\n                    error={this.hasBalanceError()}\n                    disabled={finalizedOutputs}\n                    helperText={balanceError}\n                    InputProps={{\n                      readOnly: true,\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={2}/>\n              </Grid>\n\n              <Grid item>\n\n                <Grid container spacing={3}>\n\n                  <Grid item>\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      disabled={this.gatherSignaturesDisabled()}\n                      onClick={this.handleFinalize}\n                    >\n                      Gather Signatures\n                    </Button>\n                  </Grid>\n\n                  <Grid item>\n                    <Button\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      disabled={finalizedOutputs}\n                      onClick={this.handleReset}\n                    >\n                      Reset Outputs\n                    </Button>\n                  </Grid>\n\n                </Grid>\n\n              </Grid>\n\n            </Box>\n\n\n\n        </CardContent>\n      </Card>\n    );\n  }\n\n  renderOutputs = () => {\n    const { outputs } = this.props;\n    return map(outputs).map((output, i) => (\n      <Grid container key={i}>\n        <OutputEntry number={i+1} />\n      </Grid>\n    ));\n  }\n\n  inputsTotal = () => {\n    const {inputsTotalSats} = this.props;\n    return satoshisToBitcoins(inputsTotalSats);\n  }\n\n  outputsAndFeeTotal = () => {\n    const {outputs, fee, inputs} = this.props;\n    if (!inputs.length) return '';\n    return outputs\n      .map((output) => new BigNumber(output.amount || 0))\n      .reduce(\n        (accumulator, currentValue) => accumulator.plus(currentValue),\n        new BigNumber(0))\n      .plus(new BigNumber(fee));\n  }\n\n  hasFeeRateFetchError = () => {\n    const {feeRateFetchError} = this.state;\n    return feeRateFetchError !== '';\n  }\n\n  hasFeeRateError = () => {\n    const {feeRateError} = this.props;\n    return feeRateError !== '';\n  }\n\n  hasFeeError = () => {\n    const {feeError} = this.props;\n    return feeError !== '';\n  }\n\n  hasBalanceError = () => {\n    const {balanceError} = this.props;\n    return balanceError !== '';\n  }\n\n  hasError = () => {\n    return (\n      this.hasFeeRateFetchError()\n        || this.hasFeeRateError()\n        || this.hasFeeError()\n        || this.hasBalanceError()\n    );\n  }\n\n  handleAddOutput = () => {\n    const {addOutput} = this.props;\n    addOutput();\n  };\n\n  handleFeeRateChange = (event) => {\n    const {setFeeRate, inputs} = this.props;\n    if (inputs.length) setFeeRate(event.target.value);\n  }\n\n  handleFeeChange = (event) => {\n    const {setFee} = this.props;\n    setFee(event.target.value);\n  }\n\n  handleFinalize = () => {\n    const { finalizeOutputs } = this.props;\n    finalizeOutputs(true);\n  };\n\n  handleReset = () => {\n    const { resetOutputs } = this.props;\n    resetOutputs();\n    this.initialOutputState();\n  }\n\n  getFeeEstimate = async () => {\n    const {client, network, setFeeRate} = this.props;\n    let newFeeRate = 1;\n    let feeRateFetchError = '';\n    try {\n      newFeeRate = await fetchFeeEstimate(network, client);\n    } catch (e){\n      console.error(e);\n      feeRateFetchError = 'There was an error fetching the fee rate.';\n    } finally {\n      setFeeRate(newFeeRate.toString());\n      this.setState({feeRateFetchError});\n    }\n  }\n\n  gatherSignaturesDisabled = () => {\n    const {finalizedOutputs, outputs, inputs} = this.props;\n    if (inputs.length === 0) return true;\n    if (finalizedOutputs || this.hasError()) { return true; }\n    for (var i=0; i < outputs.length; i++) {\n      const output = outputs[i];\n      if (output.address === '' || output.amount === '' || output.addressError !== '' || output.amountError !== '') {\n        return true;\n      }\n    }\n    return false;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...{\n      network: state.settings.network,\n      client: state.client,\n      },\n    ...state.spend.transaction,\n    ...state.client,\n    signatureImporters: state.spend.signatureImporters,\n  };\n}\n\nconst mapDispatchToProps = {\n  addOutput,\n  setOutputAmount,\n  setFeeRate,\n  setFee,\n  finalizeOutputs,\n  resetOutputs,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OutputsForm);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// Components\nimport {\n  Box,\n  TextField,\n  Button,\n} from '@material-ui/core';\n\nclass TextSignatureImporter extends React.Component {\n\n  static propTypes =  {\n    signatureImporter: PropTypes.shape({}).isRequired,\n    validateAndSetSignature: PropTypes.func.isRequired,\n  };\n\n  state = {\n    signatureJSON: '',\n    error: '',\n  };\n\n  render = () => {\n    const { signatureJSON, error } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          multiline\n          variant=\"outlined\"\n          name=\"signature\"\n          label=\"Signature\"\n          rows={5}\n          value={signatureJSON}\n          onChange={this.handleChange}\n          error={this.hasError()}\n          helperText={error}\n        />\n\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.finalize}\n            disabled={signatureJSON === ''}\n          >\n            Add Signature\n          </Button>\n        </Box>\n      </Box>\n    );\n  }\n\n  hasError = () => {\n    return this.state.error !== '';\n  }\n\n  setError = (value) => {\n    this.setState({error: value});\n  }\n\n  handleChange = (event) => {\n    const signatureJSON = event.target.value;\n    let error = '';\n    try {\n      JSON.parse(signatureJSON);\n    } catch(parseError) {\n      error = \"Invalid JSON.\";\n    }\n    this.setState({signatureJSON, error});\n  }\n\n  finalize = () => {\n    const {validateAndSetSignature} = this.props;\n    const {signatureJSON} = this.state;\n    validateAndSetSignature(\n      JSON.parse(signatureJSON),\n      this.setError);\n  }\n\n}\n\nexport default TextSignatureImporter;\n","import React, {Component} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  PENDING,\n  ACTIVE,\n} from \"unchained-wallets\";\n\n// Components\nimport QrReader from \"react-qr-reader\";\nimport { Grid, Button, Box, FormHelperText} from '@material-ui/core';\nimport Copyable from \"../Copyable\";\n\nconst QR_CODE_READER_DELAY = 300; // ms?\n\nclass HermitReader extends Component {\n\n  static propTypes = {\n    onStart: PropTypes.func,\n    onSuccess: PropTypes.func.isRequired,\n    onClear: PropTypes.func.isRequired,\n    width: PropTypes.string.isRequired,\n    startText: PropTypes.string.isRequired,\n    interaction: PropTypes.object.isRequired,\n  };\n\n  static defaultProps = {\n    width: \"256px\",\n    startText: \"Scan\",\n  }\n  \n  state = {\n    walletState: PENDING,\n    error: '',\n  };\n\n  render = () => {\n    const {walletState, error} = this.state;\n    const {interaction, width, startText} = this.props;\n\n    if (walletState === PENDING) {\n      const commandMessage = interaction.messageFor({walletState, code: \"hermit.command\"});\n      return (\n        <div>\n          <p>{commandMessage.instructions}</p>\n          <Grid container justify=\"center\" className=\"mb-2\">\n            <Copyable text={commandMessage.command}>\n              <code><strong>{commandMessage.mode}&gt;</strong> {commandMessage.command}</code>\n            </Copyable>\n          </Grid>\n          <p>When you are ready, scan the QR code produced by Hermit:</p>\n          <Box mt={2}>\n            <Button  variant=\"contained\" color=\"primary\" className=\"mt-2\" size=\"large\" onClick={this.handleStart}>{startText}</Button>\n          </Box>\n        </div>\n      );\n    } \n\n    if (walletState === ACTIVE) {\n      return (\n        <Grid container direction=\"column\">\n          <Grid item>\n            <QrReader \n              delay={QR_CODE_READER_DELAY} \n              onError={this.handleError} \n              onScan={this.handleScan}\n              style={{width}}\n              facingMode='user'\n            />\n          </Grid>\n          <Grid item>\n            <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.handleStop}>Cancel</Button>\n          </Grid>\n        </Grid>\n      );\n    }\n    \n    if (walletState === 'error' || walletState === 'success') {\n      return (\n        <div>\n          <FormHelperText error>{error}</FormHelperText>\n          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.handleStop}>Reset</Button>\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  handleStart = () => {\n    const {onStart} = this.props;\n    this.setState({walletState: ACTIVE, error: ''});\n    if (onStart) { onStart(); }\n  }\n\n  handleError = (error) => {\n    const {onClear} = this.props;\n    this.setState({walletState: 'error', error: error.message});\n    if (onClear) {onClear(); }\n  }\n\n  handleScan = (data) => {\n    const {onSuccess, interaction} = this.props;\n    if (data) {\n      try {\n        const result = interaction.parse(data);\n        onSuccess(result);\n        this.setState({walletState: 'success'});\n      } catch(e) {\n        this.handleError(e);\n      }\n    }\n  }\n\n  handleStop = () => {\n    const {onClear} = this.props;\n    this.setState({\n      walletState: PENDING,\n      error: '',\n    });\n    if (onClear) {onClear(); }\n  }\n\n}\n\nexport default HermitReader;\n\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport QRCode from \"qrcode.react\";\nimport Copyable from \"../Copyable\";\n\nclass HermitDisplayer extends React.Component {\n\n  static propTypes = {\n    string: PropTypes.string.isRequired,\n    width: PropTypes.number.isRequired,\n  };\n\n  static defaultProps = {\n    string: '',\n    width: 120,\n  }\n\n  state = {\n    errorMessage: '',\n  };\n\n  render = () => {\n    const {width, string} = this.props;\n    return (\n      <Copyable text={string} newline={true}>\n        <QRCode size={width} value={string} level={'L'} />\n      </Copyable>\n    );\n  }\n\n}\n\nexport default HermitDisplayer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  INFO,\n  WARNING,\n  ERROR,\n} from \"unchained-wallets\";\nimport { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\nimport { Info, Warning, Error } from '@material-ui/icons';\n\nclass WalletFeedback extends React.Component {\n\n  static propTypes = {\n    messages: PropTypes.array.isRequired,\n    excludeCodes: PropTypes.array.isRequired,\n  };\n\n  static defaultProps = {\n    messages: [],\n    excludeCodes: [],\n  }\n\n  render = () => {\n    return (\n      <small>\n        <List>\n          {this.filteredMessages().map((m, i) => this.renderMessage(m, i))}\n        </List>\n      </small>\n    );\n  }\n\n  renderMessage = (message, key) => {\n    return (\n      <ListItem key={key}>\n        <ListItemIcon>\n          {this.messageIcon(message)}\n        </ListItemIcon>\n        <ListItemText>\n          {message.text}\n        </ListItemText>\n      </ListItem>\n    );\n  }\n\n  filteredMessages = () => {\n    const {messages, excludeCodes} = this.props;\n    return messages.filter((message) => {\n      for (let i=0; i < excludeCodes.length; i++) {\n        const excludeCode = excludeCodes[i];\n        if ((message.code || '').includes(excludeCode)) { return false; }\n      }\n      return true;\n    });\n  }\n\n  messageIcon = (message) => {\n    switch (message.level) {\n    case INFO:\n      return <Info />;\n    case WARNING:\n      return <Warning />;\n    case ERROR:\n      return <Error />;\n    default:\n      return null;\n    }    \n  }\n\n  messageColrName = (message) => {\n    switch (message.level) {\n    case INFO:\n      return \"primary.main\";\n    case WARNING:\n      return \"text.secondary\";\n    case ERROR:\n      return \"error.main\";\n    default:\n      return \"\";\n    }\n  }\n}\n\nexport default WalletFeedback;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  PENDING,\n  UNSUPPORTED,\n  HermitSignTransaction,\n} from \"unchained-wallets\";\n\n// Components\nimport {\n  Grid,\n  Box,\n  TextField,\n  Button,\n  FormHelperText,\n} from '@material-ui/core';\nimport HermitReader from \"../Hermit/HermitReader\";\nimport HermitDisplayer from \"../Hermit/HermitDisplayer\";\nimport WalletFeedback from '../WalletFeedback';\n\nclass HermitSignatureImporter extends React.Component {\n\n  static propTypes =  {\n    network: PropTypes.string.isRequired,\n    inputs: PropTypes.array.isRequired,\n    outputs: PropTypes.array.isRequired,\n    signatureImporter: PropTypes.shape({}).isRequired,\n    resetBIP32Path: PropTypes.func.isRequired,\n    defaultBIP32Path: PropTypes.string.isRequired,\n    validateAndSetBIP32Path: PropTypes.func.isRequired,\n    validateAndSetSignature: PropTypes.func.isRequired,\n    enableChangeMethod: PropTypes.func.isRequired,\n    disableChangeMethod: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      bip32PathError: '',\n      bip32PathFinalized: false,\n      signatureError: '',\n      walletState: (this.interaction(true).isSupported() ? PENDING : UNSUPPORTED),\n    };\n  }\n\n  interaction = () => {\n    const {signatureImporter, network, inputs, outputs} = this.props;\n    // Sign all inputs with the same BIP32 path because we currently\n    // assume each input is attached to the same address, hence redeem\n    // script, hence public key, hence BIP32 path.\n    //\n    // This will need to be changed if we are signing inputs across\n    // addresses.\n    const bip32Paths = inputs.map((input) => (signatureImporter.bip32Path));\n    return new HermitSignTransaction({network, inputs, outputs, bip32Paths});\n  }\n\n  render = () => {\n    const {signatureImporter, disableChangeMethod, resetBIP32Path} = this.props;\n    const {bip32PathError, signatureError, walletState} = this.state;\n    const interaction = this.interaction();\n    if (walletState === UNSUPPORTED) {\n      return (\n        <WalletFeedback messages={interaction.messagesFor({walletState})} excludeCodes={[\"hermit.signature_request\", \"hermit.command\"]}/>\n      );\n    }\n    return (\n      <Box mt={2}>\n\n        <Grid container>\n\n          <Grid item md={10}>\n            <TextField\n              name=\"bip32Path\"\n              value={signatureImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={walletState !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={bip32PathError}\n            />\n          </Grid>\n\n          <Grid item md={2}>\n            {!this.bip32PathIsDefault() && \n             <Button type=\"button\" variant=\"contained\" size=\"small\" onClick={resetBIP32Path} disabled={walletState !== PENDING}>Default</Button>}\n          </Grid>\n\n        </Grid>\n\n        <FormHelperText>Use the default value if you don&rsquo;t understand BIP32 paths.</FormHelperText>\n\n\n         <Box mt={2}>\n\n           <Grid container justify=\"center\">\n             <Grid item>\n               <HermitDisplayer width={400} string={interaction.messageFor({code: \"hermit.signature_request\"}).encodedData} />\n             </Grid>\n           </Grid>\n\n           <HermitReader\n             startText=\"Scan Signature QR Code\"\n             interaction={interaction}\n             onStart={disableChangeMethod}\n             onSuccess={this.import}\n             onClear={this.clear} />\n\n           <WalletFeedback messages={interaction.messagesFor({walletState})} excludeCodes={[\"hermit.signature_request\", \"hermit.command\"]}/>\n\n           <FormHelperText error>{signatureError}</FormHelperText>\n         </Box>\n      </Box>\n    );\n  }\n\n  import = (signature) => {\n    console.log(\"IMPORTED SIGNATURE:\", signature);\n    const { validateAndSetSignature, enableChangeMethod } = this.props;\n    this.setState({signatureError: ''});\n    enableChangeMethod();\n    validateAndSetSignature(\n      signature,\n      (signatureError) => {this.setState({signatureError});}\n    );\n  }\n\n  clear = () => {\n    const { resetBIP32Path, enableChangeMethod } = this.props;\n    resetBIP32Path();\n    this.setState({signatureError: ''});\n    enableChangeMethod();\n  }\n\n  hasBIP32PathError = () => (this.state.bip32PathError !== '')\n\n  handleBIP32PathChange = (event) => {\n    const {validateAndSetBIP32Path} = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, (bip32PathError) => {this.setState({bip32PathError});});\n  }\n\n  bip32PathIsDefault = () => {\n    const {signatureImporter, defaultBIP32Path} = this.props;\n    return signatureImporter.bip32Path === defaultBIP32Path;\n  }\n\n}\n\nexport default HermitSignatureImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  multisigRequiredSigners,\n  multisigPublicKeys,\n  satoshisToBitcoins,\n} from 'unchained-bitcoin';\nimport {\n  PENDING,\n  UNSUPPORTED,\n  ACTIVE,\n  ERROR,\n  HardwareWalletExportPublicKey,\n  HardwareWalletSignMultisigTransaction,\n} from 'unchained-wallets';\n\n// Components\nimport {\n  Button, TextField, FormHelperText,\n  Box, Grid,\n  Table, TableHead, TableBody,\n  TableRow, TableCell,\n} from '@material-ui/core';\nimport {Error} from \"@material-ui/icons\";\nimport WalletFeedback from '../WalletFeedback';\n\nclass HardwareWalletSignatureImporter extends React.Component {\n\n  static propTypes =  {\n    network: PropTypes.string.isRequired,\n    inputsTotalSats: PropTypes.object.isRequired,\n    inputs: PropTypes.array.isRequired,\n    outputs: PropTypes.array.isRequired,\n    fee: PropTypes.string.isRequired,\n    signatureImporter: PropTypes.shape({}).isRequired,\n    signatureImporters: PropTypes.shape({}).isRequired,\n    validateAndSetBIP32Path: PropTypes.func.isRequired,\n    validateAndSetSignature: PropTypes.func.isRequired,\n    resetBIP32Path: PropTypes.func.isRequired,\n    defaultBIP32Path: PropTypes.string.isRequired,\n    enableChangeMethod: PropTypes.func.isRequired,\n    disableChangeMethod: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      verified: false,\n      verifyError: '',\n      signatureError: '',\n      bip32PathError: '',\n      walletState: (this.interaction(true).isSupported() ? PENDING : UNSUPPORTED),\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n  }\n\n  interaction = (inConstructor) => {\n    const verified = (inConstructor ? false : this.state.verified);\n    const {signatureImporter, network, inputs, outputs} = this.props;\n    const walletType = signatureImporter.method;\n    if (verified) {\n      const bip32Paths = inputs.map((input) => {\n        if (typeof input.bip32Path === 'undefined') return signatureImporter.bip32Path; // pubkey path\n        return `${signatureImporter.bip32Path}${input.bip32Path.slice(1)}` // xpub/pubkey slice away the m, keep /\n      });\n      return HardwareWalletSignMultisigTransaction({network, walletType, inputs, outputs, bip32Paths});\n    } else {\n      let bip32Path, bip32Paths;\n      bip32Path = signatureImporter.bip32Path; // pubkey path\n      if (typeof inputs[0].bip32Path !== 'undefined') {\n        bip32Paths = inputs.map(input => `${signatureImporter.bip32Path}${input.bip32Path.slice(1)}`); // xpub/pubkey slice away the m, keep /\n      }\n      return HardwareWalletExportPublicKey({network, walletType, bip32Path, bip32Paths});\n    }\n  }\n\n  render = () => {\n    const {signatureImporter} = this.props;\n    const {verified, walletState} = this.state;\n    const interaction = this.interaction();\n    if (walletState === UNSUPPORTED) {\n      return <FormHelperText error>{interaction.messageTextFor({walletState})}</FormHelperText>;\n    }\n    return (\n      <Box mt={2}>\n        <Grid container>\n          <Grid item md={10}>\n            <TextField\n              fullWidth\n              name=\"bip32Path\"\n              label=\"BIP32 Path\"\n              type=\"text\"\n              value={signatureImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={walletState !== PENDING || verified}\n              error={this.hasBIP32PathError()}\n              helperText={this.bip32PathError()}\n            />\n\n          </Grid>\n          <Grid item md={2}>\n            {!this.bip32PathIsDefault() &&\n             <Button type=\"button\" variant=\"contained\" size=\"small\" onClick={this.resetBIP32Path} disabled={verified || walletState !== PENDING}>Default</Button>}\n          </Grid>\n        </Grid>\n        <FormHelperText>Use the default value if you don&rsquo;t understand BIP32 paths.</FormHelperText>\n        <Box mt={2}>\n          {this.renderAction()}\n        </Box>\n        {this.renderDeviceConfirmInfo()}\n        <WalletFeedback messages={interaction.messagesFor({walletState})} excludeCodes={[\"bip32\"]}/>\n      </Box>\n    );\n  }\n\n  renderDeviceConfirmInfo = () => {\n    const {fee, inputsTotalSats} = this.props;\n    const {verified, walletState} = this.state;\n\n    if (verified && walletState === ACTIVE) {\n      return (\n        <Box>\n          <p>Your device will ask you to verify the following information:</p>\n          <Table>\n            <TableHead>\n              <TableRow hover>\n                 <TableCell></TableCell>\n                <TableCell>Amount (BTC)</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {this.renderTargets()}\n              <TableRow hover>\n                <TableCell>Fee</TableCell>\n                <TableCell>{fee}</TableCell>\n              </TableRow>\n              <TableRow hover>\n                <TableCell>Total</TableCell>\n                <TableCell>{satoshisToBitcoins(inputsTotalSats).toString()}</TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </Box>\n      );\n    } else return '';\n  }\n\n  renderTargets = () => {\n    const { outputs } = this.props;\n    return outputs.map((output, i) => {\n      return (\n      <TableRow hover key={i}>\n        <TableCell>Address <code>{output.address}</code></TableCell>\n        <TableCell>{output.amount}</TableCell>\n      </TableRow>\n      );\n    });\n  }\n\n  renderAction = () => {\n    const {verified, verifyError, signatureError, walletState} = this.state;\n    if (verified) {\n      return (\n        <Grid container alignItems=\"center\">\n          <Grid item md={3}>\n            <Button variant=\"contained\" size=\"large\" color=\"primary\" onClick={this.sign} disabled={walletState !== PENDING}>Sign</Button>\n          </Grid>\n          <Grid item md={9}>\n            <FormHelperText error>{signatureError}</FormHelperText>\n          </Grid>\n        </Grid>\n      );\n    } else {\n      return (\n        <Grid container alignItems=\"center\">\n          <Grid item md={3}>\n            <Button variant=\"contained\" size=\"large\" onClick={this.verify} color=\"primary\" disabled={walletState !== PENDING || this.hasBIP32PathError()}>Verify</Button>\n          </Grid>\n          <Grid item md={9}>\n            <FormHelperText error>{verifyError}</FormHelperText>\n          </Grid>\n        </Grid>\n      );\n    }\n  }\n\n  //\n  // BIP32 Path\n  //\n\n  hasBIP32PathError = () => {\n    const {bip32PathError, walletState} = this.state;\n    return (bip32PathError !== '' || this.interaction().hasMessagesFor({walletState, level: ERROR, code: \"bip32\"}));\n  }\n\n  bip32PathError = () => {\n    const {bip32PathError, walletState} = this.state;\n    if (bip32PathError !== '') { return bip32PathError; }\n    return this.interaction().messageTextFor({walletState, level: ERROR, code: \"bip32\"});\n  }\n\n  setBIP32PathError = (value) => {\n    this.setState({bip32PathError: value});\n  }\n\n  handleBIP32PathChange = (event) => {\n    const {validateAndSetBIP32Path} = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError);\n  }\n\n  bip32PathIsDefault = () => {\n    const {signatureImporter, defaultBIP32Path} = this.props;\n    return signatureImporter.bip32Path === defaultBIP32Path;\n  }\n\n  resetBIP32Path = () => {\n    const {resetBIP32Path} = this.props;\n    this.setBIP32PathError('');\n    resetBIP32Path();\n  }\n\n  //\n  // Verify\n  //\n\n  verify = async () => {\n    const { disableChangeMethod, enableChangeMethod } = this.props;\n    disableChangeMethod();\n    this.setState({verifyError: '', walletState: ACTIVE});\n\n    try {\n      const publicKey = await this.interaction().run();\n      this.verifyPublicKey(publicKey);\n    } catch(e) {\n      console.error(e);\n      this.setState({verifyError: e.message, walletState: PENDING});\n      enableChangeMethod();\n    }\n  }\n\n  verifyPublicKey = (publicKey) => {\n    const {inputs, signatureImporters, enableChangeMethod} = this.props;\n\n    let verifyError = '';\n    const publicKeys = typeof publicKey === 'string' ? [publicKey] : publicKey;\n\n    for (let inputIndex=0; inputIndex < inputs.length; inputIndex++) {\n      const input = inputs[inputIndex];\n      let publicKeyIndex\n      for(let i = 0; i < publicKeys.length; i++) {\n        publicKeyIndex = multisigPublicKeys(input.multisig).indexOf(publicKeys[i]);\n        if (publicKeyIndex > -1) break;\n      }\n      if (publicKeyIndex < 0) {\n        verifyError = <span><Error />&nbsp; This device does not contain the correct key.  Are you sure the BIP32 path is correct?</span>;\n        break;\n      }\n\n      for (let signatureImporterNum=1; signatureImporterNum < multisigRequiredSigners(input.multisig); signatureImporterNum++) {\n        const otherSignatureImporter = signatureImporters[signatureImporterNum];\n        for(let otherPublicKeyIndex=0; otherPublicKeyIndex < otherSignatureImporter.publicKeys.length; otherPublicKeyIndex++){\n          const otherPublicKey = otherSignatureImporter.publicKeys[otherPublicKeyIndex];\n          if (otherPublicKey === publicKey) {\n            verifyError = <span><Error />A signature from this key was already imported.</span>;\n            break;\n          }\n        }\n        if (verifyError !== '') { break; }\n      }\n      if (verifyError !== '') { break; }\n    }\n\n    this.setState({\n      verified: (verifyError === ''),\n      verifyError,\n      walletState: PENDING,\n    });\n    enableChangeMethod();\n  }\n\n  //\n  // Sign\n  //\n\n  sign = async () => {\n    const { disableChangeMethod, validateAndSetSignature, enableChangeMethod } = this.props;\n    disableChangeMethod();\n    this.setState({signatureError: '', walletState: ACTIVE});\n\n    try {\n      const signature = await this.interaction().run();\n      validateAndSetSignature(\n        signature,\n        (signatureError) => {\n          const stateUpdate = {signatureError};\n          if (signatureError !== '') stateUpdate.walletState = PENDING;\n          this.setState(stateUpdate);\n        });\n    } catch(e) {\n      console.error(e);\n      this.setState({signatureError: e.message, walletState: PENDING});\n    }\n    enableChangeMethod();\n  }\n\n}\n\nexport default HardwareWalletSignatureImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// Components\nimport { Grid, IconButton, TextField } from '@material-ui/core';\nimport { Check, Clear, Edit } from '@material-ui/icons';\n\nclass EditableName extends React.Component {\n\n  static propTypes =  {\n    number: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    setName: PropTypes.func.isRequired,\n  };\n\n  state = {\n    editing: false,\n    newName: '',\n    error: '',\n  };\n\n  componentDidMount = () => {\n    const {name} = this.props;\n    this.setState({newName: name});\n  }\n\n  render = () => {\n    const {name} = this.props;\n    const {editing, newName, error} = this.state;\n    if (editing) {\n      // <Form onSubmit={this.submit} inline>\n      return (\n        <Grid container alignItems=\"center\">\n\n          <Grid item>\n            <TextField\n              label=\"Name\"\n              value={newName}\n              onChange={this.handleChange}\n              error={this.hasError()}\n              helperText={error}\n            />\n          </Grid>\n\n          <Grid item>\n            <IconButton size=\"small\" onClick={this.submit} disabled={this.hasError()}>\n              <Check />\n            </IconButton>\n          </Grid>\n\n          <Grid item>\n            <IconButton color=\"secondary\" size=\"small\" onClick={this.cancel}>\n              <Clear />\n            </IconButton>\n          </Grid>\n        </Grid>\n      );\n    } else {\n      return (\n        <span>\n          <IconButton size=\"small\" onClick={this.startEditing}>\n            <Edit />\n          </IconButton>\n          &nbsp;\n          {name}\n        </span>\n      );\n    }\n  }\n\n  hasError = () => (this.state.error !== '')\n\n  startEditing = (event) => {\n    const {name} = this.props;\n    event.preventDefault();\n    this.setState({editing: true, newName: name});\n  }\n\n  handleChange = (event) => {\n    const newName = event.target.value;\n    let error = '';\n    if (newName === null || newName === undefined || newName === '') {\n      error =  \"Name cannot be blank.\";\n    }\n    this.setState({newName, error});\n  }\n\n  submit = () => {\n    const {setName, number} = this.props;\n    const {newName} = this.state;\n    setName(number, newName);\n    this.setState({editing: false});\n  }\n\n  cancel = () => {\n    const {name} = this.props;\n    this.setState({error: '', newName: name, editing: false});\n  }\n\n}\n\nexport default EditableName;\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const RESET_SIGNATURES = 'RESET_SIGNATURES';\n\nexport const SET_SIGNATURE_IMPORTER_NAME        = \"SET_SIGNATURE_IMPORTER_NAME\";\nexport const SET_SIGNATURE_IMPORTER_METHOD      = \"SET_SIGNATURE_IMPORTER_METHOD\";\nexport const SET_SIGNATURE_IMPORTER_BIP32_PATH  = \"SET_SIGNATURE_IMPORTER_BIP32_PATH\";\nexport const SET_SIGNATURE_IMPORTER_PUBLIC_KEYS = \"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS\";\nexport const SET_SIGNATURE_IMPORTER_SIGNATURE   = \"SET_SIGNATURE_IMPORTER_SIGNATURE\";\nexport const SET_SIGNATURE_IMPORTER_FINALIZED   = \"SET_SIGNATURE_IMPORTER_FINALIZED\";\nexport const SET_SIGNATURE_IMPORTER_COMPLETE    = \"SET_SIGNATURE_IMPORTER_COMPLETE\";\n\nexport const {\n  setSignatureImporterName,\n  setSignatureImporterMethod,\n  setSignatureImporterBIP32Path,\n  setSignatureImporterPublicKeys,\n  setSignatureImporterSignature,\n  setSignatureImporterFinalized,\n  setSignatureImporterComplete,\n} = wrappedNumberedActions({\n  setSignatureImporterName: SET_SIGNATURE_IMPORTER_NAME,\n  setSignatureImporterMethod: SET_SIGNATURE_IMPORTER_METHOD,\n  setSignatureImporterBIP32Path: SET_SIGNATURE_IMPORTER_BIP32_PATH,\n  setSignatureImporterPublicKeys: SET_SIGNATURE_IMPORTER_PUBLIC_KEYS,\n  setSignatureImporterSignature: SET_SIGNATURE_IMPORTER_SIGNATURE,\n  setSignatureImporterFinalized: SET_SIGNATURE_IMPORTER_FINALIZED,\n  setSignatureImporterComplete: SET_SIGNATURE_IMPORTER_COMPLETE,\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  validateHex,\n  validateMultisigSignature,\n  multisigBIP32Path,\n  multisigBIP32Root,\n  validateBIP32Path,\n} from 'unchained-bitcoin';\nimport {\n  TREZOR,\n  LEDGER,\n  HERMIT,\n} from \"unchained-wallets\";\n\n// Components\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Select,\n  MenuItem,\n  InputLabel,\n  Button,\n  Box,\n  FormControl,\n} from '@material-ui/core';\nimport Copyable from \"../Copyable\";\nimport TextSignatureImporter from \"./TextSignatureImporter\";\nimport HermitSignatureImporter from \"./HermitSignatureImporter\";\nimport HardwareWalletSignatureImporter from \"./HardwareWalletSignatureImporter\";\nimport EditableName from \"../EditableName\";\n\n// Actions\nimport {\n  setSignatureImporterName,\n  setSignatureImporterMethod,\n  setSignatureImporterBIP32Path,\n  setSignatureImporterPublicKeys,\n  setSignatureImporterSignature,\n  setSignatureImporterFinalized,\n  setSignatureImporterComplete,\n} from \"../../actions/signatureImporterActions\";\n\nimport 'react-table/react-table.css';\n\nconst TEXT = \"text\";\n\nclass SignatureImporter extends React.Component {\n\n  titleRef = React.createRef();\n\n  static propTypes = {\n    number: PropTypes.number.isRequired,\n    signatureImporter: PropTypes.shape({}).isRequired,\n    signatureImporters: PropTypes.shape({}).isRequired,\n    inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n    inputsTotalSats:  PropTypes.object.isRequired,\n    outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n    unsignedTransaction: PropTypes.object.isRequired,\n    addressType: PropTypes.string.isRequired,\n    network: PropTypes.string.isRequired,\n    fee: PropTypes.string.isRequired,\n    txid: PropTypes.string.isRequired,\n    setName: PropTypes.func.isRequired,\n    setMethod: PropTypes.func.isRequired,\n    setBIP32Path: PropTypes.func.isRequired,\n    setSignature: PropTypes.func.isRequired,\n    setPublicKeys: PropTypes.func.isRequired,\n    setFinalized: PropTypes.func.isRequired,\n    setComplete: PropTypes.func.isRequired,\n  };\n\n  state = {\n    disableChangeMethod: false,\n    showUnsignedTransaction: false,\n  };\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n    this.scrollToTitle();\n  }\n\n  componentDidUpdate = () => {\n    this.scrollToTitle();\n  }\n\n  scrollToTitle = () => {\n    const {number} = this.props;\n    if (number === this.getCurrent()) {\n      this.titleRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }\n\n  render() {\n    const { signatureImporter } = this.props;\n    return (\n      <Card>\n        <CardHeader title={this.title()} ref={this.titleRef}/>\n        <CardContent>\n          {signatureImporter.finalized ? this.renderSignature() : this.renderImport()}\n          <Box mt={2}>\n            {this.renderUnsignedTransaction()}\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  title = () => {\n    const {number, signatureImporter, setName} = this.props;\n    return <EditableName number={number} name={signatureImporter.name} setName={setName} />;\n  }\n\n  getCurrent() {\n    const { signatureImporters } = this.props;\n    return Object.keys(signatureImporters).reduce((o, k) => {\n      return o + (signatureImporters[k].finalized ? 1 : 0)\n    }, 1);\n  }\n\n  renderImport = () => {\n    const { signatureImporter, number } = this.props;\n    const currentNumber = this.getCurrent();\n    const notMyTurn =  (number > currentNumber);\n    const { disableChangeMethod } = this.state;\n    const labelId = `signature-${number}-importer-select-label`;\n    if (notMyTurn) {\n      return (\n        <p>\n          Once you have imported the signature above, you will be able to import another signature here.\n        </p>\n      );\n    }\n\n    return (\n      <form>\n\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`signature-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={signatureImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value=\"\">{'< Select method >'}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={HERMIT}>Hermit</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n        </FormControl>\n\n        {this.renderImportByMethod()}\n\n      </form>\n    );\n  }\n\n  renderImportByMethod = () => {\n    const {network, signatureImporter, signatureImporters, inputs, inputsTotalSats,  outputs, fee} = this.props;\n    if (signatureImporter.method === TEXT) {\n      return <TextSignatureImporter\n                               signatureImporter={signatureImporter}\n                               validateAndSetSignature={this.validateAndSetSignature} />;\n    }\n    if (signatureImporter.method === HERMIT) {\n      return <HermitSignatureImporter\n               network={network}\n               signatureImporter={signatureImporter}\n               inputs={inputs}\n               outputs={outputs}\n               validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n               resetBIP32Path={this.resetBIP32Path}\n               defaultBIP32Path={this.defaultBIP32Path()}\n               validateAndSetSignature={this.validateAndSetSignature}\n               enableChangeMethod={this.enableChangeMethod}\n               disableChangeMethod={this.disableChangeMethod} />;\n    }\n    if (signatureImporter.method === TREZOR || signatureImporter.method === LEDGER) {\n      return <HardwareWalletSignatureImporter\n               network={network}\n               signatureImporter={signatureImporter}\n               signatureImporters={signatureImporters}\n               inputs={inputs}\n               outputs={outputs}\n               inputsTotalSats={inputsTotalSats}\n               fee={fee}\n               validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n               resetBIP32Path={this.resetBIP32Path}\n               defaultBIP32Path={this.defaultBIP32Path()}\n               validateAndSetSignature={this.validateAndSetSignature}\n               enableChangeMethod={this.enableChangeMethod}\n               disableChangeMethod={this.disableChangeMethod} />;\n    }\n    return null;\n  }\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod } = this.props;\n    setMethod(number, event.target.value);\n    this.reset();\n  }\n\n  disableChangeMethod = () => {\n    this.setState({disableChangeMethod: true});\n  }\n\n  enableChangeMethod = () => {\n    this.setState({disableChangeMethod: false});\n  }\n\n  //\n  // Unsigned Transaction\n  //\n\n  renderUnsignedTransaction = () => {\n    const {showUnsignedTransaction} = this.state;\n    const {unsignedTransaction} = this.props;\n    if (showUnsignedTransaction) {\n      const hex = unsignedTransaction.toHex();\n      return (\n        <div>\n          <p><Copyable text={hex}><code>{hex}</code></Copyable></p>\n          <small>\n            <Button size=\"small\" onClick={this.handleHideUnsignedTransaction}>\n              Hide Unsigned Transaction\n            </Button>\n          </small>\n        </div>\n\n      );\n    } else {\n      return (\n        <small>\n          <Button size=\"small\" onClick={this.handleShowUnsignedTransaction}>\n            Show Unsigned Transaction\n          </Button>\n        </small>\n      );\n    }\n  }\n\n  handleShowUnsignedTransaction = () => {\n    this.setState({showUnsignedTransaction: true});\n  }\n\n  handleHideUnsignedTransaction = () => {\n    this.setState({showUnsignedTransaction: false});\n  }\n\n\n  //\n  // State\n  //\n\n  reset = () => {\n    const { number, setSignature, setPublicKeys, setFinalized } = this.props;\n    setSignature(number, '');\n    setPublicKeys(number, []);\n    setFinalized(number, false);\n  }\n\n  //\n  // BIP32 Path\n  //\n\n  defaultBIP32Path = () => {\n    const {addressType, network, isWallet} = this.props;\n    return isWallet ? multisigBIP32Root(addressType, network) :\n      multisigBIP32Path(addressType, network);\n  }\n\n  resetBIP32Path = () => {\n    const {number, setBIP32Path} = this.props;\n    setBIP32Path(number, this.defaultBIP32Path());\n  }\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const {number, setBIP32Path} = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(number, bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback('');\n      callback();\n    }\n  }\n\n\n  //\n  // Signature\n  //\n\n  renderSignature = () => {\n    const { signatureImporter, txid  } = this.props;\n    const signatureJSON =  JSON.stringify(signatureImporter.signature);\n    return (\n      <div>\n        <p>The following signature was imported:</p>\n        <Box>\n          <Copyable text={signatureJSON}>\n            <small><code>{signatureJSON}</code></small>\n          </Copyable>\n        </Box>\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            disabled={txid !== \"\"}\n            size=\"small\"\n            onClick={this.reset}\n          >\n            Remove Signature\n          </Button>\n        </Box>\n\n      </div>\n    );\n  }\n\n  validateAndSetSignature = (inputsSignatures, errback) => {\n    const {number, inputs, signatureImporters, unsignedTransaction, setComplete} = this.props;\n\n    if (!Array.isArray(inputsSignatures)) {\n      errback(\"Signature is not an array of strings.\");\n      return;\n    }\n\n    if (inputsSignatures.length < inputs.length) {\n      errback(\"Not enough signatures (must be exactly one for each input).\");\n      return;\n    }\n    if (inputsSignatures.length > inputs.length) {\n      errback(\"Too many signatures (must be exactly one for each input).\");\n      return;\n    }\n\n    const publicKeys = [];\n    const finalizedSignatureImporters = Object.values(signatureImporters).filter((signatureImporter) => (signatureImporter.finalized));\n    for (let inputIndex = 0; inputIndex < inputsSignatures.length; inputIndex += 1) {\n      const input = inputs[inputIndex];\n      const inputNumber = inputIndex + 1;\n      const inputSignature = inputsSignatures[inputIndex];\n      if (validateHex(inputSignature) !== '') {\n        errback(`Signature for input ${inputNumber} is not valid hex.`);\n        return;\n      }\n\n      let publicKey;\n      try{\n        publicKey = validateMultisigSignature(unsignedTransaction, inputIndex, input, inputSignature);\n      } catch(e) {\n        errback(`Signature for input ${inputNumber} is invalid.`);\n        return;\n      }\n      if (publicKey) {\n        for (let finalizedSignatureImporterNum=0; finalizedSignatureImporterNum < finalizedSignatureImporters.length; finalizedSignatureImporterNum++) {\n          const finalizedSignatureImporter = finalizedSignatureImporters[finalizedSignatureImporterNum];\n\n          if (finalizedSignatureImporter.signature[inputIndex] === inputSignature || finalizedSignatureImporter.publicKeys[inputIndex] === publicKey) {\n            errback(`Signature for input ${inputNumber} is a duplicate of a previously provided signature.`);\n            return;\n          }\n        }\n        publicKeys.push(publicKey);\n      } else {\n        errback(`Signature for input ${inputNumber} is invalid.`);\n        return;\n      }\n    }\n\n    setComplete(number, {signature: inputsSignatures, publicKeys: publicKeys, finalized: true});\n  }\n\n\n}\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...{\n      signatureImporters: state.spend.signatureImporters,\n      signatureImporter: state.spend.signatureImporters[ownProps.number],\n      fee: state.spend.transaction.fee,\n      txid: state.spend.transaction.txid,\n    },\n    ...state.spend.transaction,\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setSignatureImporterName,\n  setMethod: setSignatureImporterMethod,\n  setBIP32Path: setSignatureImporterBIP32Path,\n  setPublicKeys: setSignatureImporterPublicKeys,\n  setSignature: setSignatureImporterSignature,\n  setFinalized: setSignatureImporterFinalized,\n  setComplete: setSignatureImporterComplete,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignatureImporter);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  signedMultisigTransaction,\n  blockExplorerTransactionURL,\n} from \"unchained-bitcoin\";\nimport { broadcastTransaction } from '../../blockchain';\n\nimport {\n  Typography,\n  Box,\n  FormHelperText,\n  Button,\n  Card,\n  CardHeader,\n  CardContent,\n} from '@material-ui/core';\nimport {OpenInNew} from \"@material-ui/icons\";\nimport Copyable from \"../Copyable\";\nimport {externalLink} from \"../../utils\";\nimport {setTXID} from '../../actions/transactionActions';\n\nclass Transaction extends React.Component {\n\n  static propTypes = {\n    network: PropTypes.string.isRequired,\n    client: PropTypes.object.isRequired,\n    inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n    signatureImporters: PropTypes.object.isRequired,\n  };\n\n  state = {\n    error: '',\n    broadcasting: false,\n    txid: '',\n  }\n\n  render() {\n    const { error, broadcasting, txid } = this.state;\n    const signedTransaction = this.buildSignedTransaction();\n    const signedTransactionHex = signedTransaction.toHex();\n    return (\n      <Card>\n        <CardHeader title=\"Broadcast\"/>\n        <CardContent>\n\n          <form>\n            {signedTransaction &&\n             <Box mt={4}>\n               <Typography variant=\"h6\">Signed Transaction</Typography>\n               <Copyable text={signedTransactionHex}>\n                 <small><code>{signedTransactionHex}</code></small>\n               </Copyable>\n             </Box>}\n\n            {\n              txid === ''\n                ?\n                <Box mt={2}>\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={!signedTransaction || broadcasting}\n                    onClick={this.handleBroadcast}\n                  >\n                    Broadcast Transaction\n                  </Button>\n                  <FormHelperText error>{error}</FormHelperText>\n                  <small><FormHelperText>Warning: Broadcasting this transaction cannot be undone.</FormHelperText></small>\n                </Box>\n              :\n              <Box mt={2}>\n                <Typography variant=\"h5\">\n                  <Copyable text={txid}>\n                    <code>{txid}</code>\n                  </Copyable>\n                  &nbsp;\n                  {externalLink(this.transactionURL(), <OpenInNew />)}\n                </Typography>\n                <p>Transaction successfully broadcast.</p>\n              </Box>\n            }\n          </form>\n\n        </CardContent>\n\n      </Card>\n    );\n  }\n\n  buildSignedTransaction = () => {\n    const {unsignedTransaction, inputs, signatureImporters} = this.props;\n    const inputsSignaturesByPublicKey = [];\n    inputs.forEach((input, inputIndex) => {\n      const inputSignaturesByPublicKey = {};\n      Object.values(signatureImporters).forEach((signatureImporter) => {\n        const signerInputPublicKey = signatureImporter.publicKeys[inputIndex];\n        const signerInputSignature = signatureImporter.signature[inputIndex];\n        inputSignaturesByPublicKey[signerInputPublicKey] = signerInputSignature;\n      });\n      inputsSignaturesByPublicKey.push(inputSignaturesByPublicKey);\n    });\n    return signedMultisigTransaction(unsignedTransaction, inputs, inputsSignaturesByPublicKey);\n  }\n\n  handleBroadcast = async () => {\n    const {client, network, setTxid} = this.props;\n    const signedTransaction = this.buildSignedTransaction();\n    let error = '';\n    let txid = '';\n    this.setState({broadcasting: true});\n    try {\n      txid = await broadcastTransaction(signedTransaction.toHex(), network, client);\n    } catch (e) {\n      console.error(e);\n      error = `There was an error broadcasting the transaction.: ${e}`;\n    } finally {\n      this.setState({txid, error, broadcasting: false});\n      setTxid(txid);\n    }\n  }\n\n  transactionURL = () => {\n    const {network} = this.props;\n    const {txid} = this.state;\n    return blockExplorerTransactionURL(txid, network);\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    client: state.client,\n    ...state.client,\n    signatureImporters: state.spend.signatureImporters,\n    inputs: state.spend.transaction.inputs,\n    unsignedTransaction: state.spend.transaction.unsignedTransaction,\n  };\n}\n\nconst mapDispatchToProps = {\n  setTxid: setTXID\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Transaction);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\n// Components\nimport SignatureImporter from '../Spend/SignatureImporter';\nimport Transaction from '../Spend/Transaction';\nimport {Box, Button} from \"@material-ui/core\";\n\n// Actions\nimport { finalizeOutputs, setRequiredSigners, resetTransaction } from '../../actions/transactionActions';\nimport { spendNodes, resetWalletView,   updateChangeNodeAction } from \"../../actions/walletActions\";\n\nclass WalletSign extends React.Component {\n  static propTypes = {\n    transaction: PropTypes.object.isRequired,\n    signatureImporters: PropTypes.shape({}).isRequired,\n    finalizeOutputs: PropTypes.func.isRequired,\n    setRequiredSigners: PropTypes.func.isRequired,\n    spendNodes: PropTypes.func.isRequired,\n    resetTransaction: PropTypes.func.isRequired,\n    getChangeNode: PropTypes.func.isRequired,\n  };\n\n  state = {\n    spent: false\n  }\n\n  render = () => {\n    return (\n      <Box>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={this.handleCancel}>Cancel</Button>\n\n      {this.renderSignatureImporters()}\n\n      {\n        this.signaturesFinalized() &&\n        <Box mt={2}>\n          <Transaction/>\n        </Box>\n      }\n\n      {\n        (this.transactionFinalized() || this.state.spent) &&\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={this.handleReturn}>Return</Button>\n      }\n  </Box>\n\n    )\n  }\n\n  renderSignatureImporters = () => {\n    const {transaction} = this.props;\n    const signatureImporters = [];\n    for (var signatureImporterNum = 1; signatureImporterNum <= transaction.requiredSigners; signatureImporterNum++) {\n      signatureImporters.push(\n        <Box key={signatureImporterNum} mt={2}>\n          <SignatureImporter number={signatureImporterNum} />\n        </Box>\n      );\n    }\n    return signatureImporters;\n  }\n\n  signaturesFinalized = () => {\n    const {signatureImporters} = this.props;\n    return Object.values(signatureImporters).length > 0 && Object.values(signatureImporters).every((signatureImporter) => signatureImporter.finalized);\n  }\n\n  transactionFinalized = () => {\n    const { transaction, spendNodes, getChangeNode, updateChangeNode } = this.props;\n\n    const txid = transaction.txid;\n    if (txid !== \"\" && !this.state.spent) {\n      this.setState({spent: true})\n      const changeNode = getChangeNode();\n      const changeAddress = changeNode.multisig.address;\n      for (let i = 0; i < transaction.outputs.length; i++) {\n        if (changeAddress === transaction.outputs[i].address) {\n          updateChangeNode({bip32Path: changeNode.bip32Path, balanceSats: transaction.outputs[i].amountSats})\n          break;\n        }\n      }\n      spendNodes();\n      return true;\n    }\n\n    return false;\n  }\n\n  handleReturn = () => {\n    const { resetTransaction, resetWalletView } = this.props;\n    resetTransaction();\n    resetWalletView();\n  }\n\n  handleCancel = () => {\n    const { finalizeOutputs, requiredSigners, setRequiredSigners } = this.props;\n    setRequiredSigners(requiredSigners); // this will generate signature importers\n    finalizeOutputs(false);\n\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.wallet,\n    ...state.spend,\n    requiredSigners: state.spend.transaction.requiredSigners,\n  };\n}\n\nconst mapDispatchToProps = {\n  finalizeOutputs,\n  setRequiredSigners,\n  spendNodes,\n  resetTransaction,\n  resetWalletView,\n  updateChangeNode: updateChangeNodeAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletSign);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport BigNumber from 'bignumber.js'\n\n// Actions\nimport {\n  updateAutoSpendAction,\n  updateDepositNodeAction,\n  updateChangeNodeAction,\n  resetNodesSpend,\n} from \"../../actions/walletActions\";\nimport {\n  setInputs,\n  setFeeRate,\n  addOutput,\n  setOutputAddress,\n } from \"../../actions/transactionActions\";\n\n// Components\nimport NodeSet from \"./NodeSet\";\nimport OutputsForm from '../Spend/OutputsForm';\nimport WalletSign from './WalletSign'\nimport {\n    Box, Card, CardHeader,\n    CardContent, Grid, Switch,\n  } from '@material-ui/core';\n\nimport { bitcoinsToSatoshis } from 'unchained-bitcoin/lib/utils';\n\nlet coinSelectTimer;\n\nclass WalletSpend extends React.Component {\n\n  static propTypes = {\n    addNode: PropTypes.func.isRequired,\n    updateNode: PropTypes.func.isRequired,\n    setFeeRate: PropTypes.func.isRequired,\n  };\n\n  state = {\n    outputsAmount: new BigNumber(0),\n    feeAmount: new BigNumber(0)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.autoSpend) {\n      if (coinSelectTimer) clearTimeout(coinSelectTimer)\n      coinSelectTimer = setTimeout(this.selectCoins, 1000);\n    }\n  }\n\n  componentWillUnmount() {\n    if (coinSelectTimer) clearTimeout(coinSelectTimer)\n  }\n\n  render() {\n    const { finalizedOutputs } = this.props;\n    return (\n      <Box>\n        <Grid container>\n          <Grid item md={12}>\n            <OutputsForm addChange={this.handleAddChange} />\n          </Grid>\n          <Grid item md={12}>\n            <Box mt={2}>\n              { finalizedOutputs ?\n                <WalletSign getChangeNode={this.getChangeNode}/> :\n                this.renderSpend()\n              }\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    )\n  }\n\n  getChangeNode = () => {\n    const {changeNodes} = this.props;\n    const change = Object.values(changeNodes)\n    for (let i=0; i < change.length; i++) {\n      const node = change[i];\n      if (node.balanceSats.isEqualTo(0) && !node.addressUsed) {\n        return node;\n      }\n    }\n  }\n\n  handleAddChange = () => {\n    const {outputs, setAddress, addOutput} = this.props;\n    const node = this.getChangeNode();\n    const outputIndex = outputs.length + 1\n    addOutput();\n    setAddress(outputIndex, node.multisig.address)\n  }\n\n  renderSpend = () => {\n    const { addNode, updateNode, autoSpend } = this.props;\n    return (\n      <Card>\n        <CardHeader title=\"Spend\"/>\n        <CardContent>\n          <Grid item md={12}>\n            <Grid component=\"label\" container alignItems=\"center\" spacing={1}>\n              <Grid item>Manual</Grid>\n              <Grid item>\n                <Switch\n                  checked={autoSpend}\n                  onChange={this.handleSpendMode}\n              />\n              </Grid>\n              <Grid item>Auto</Grid>\n            </Grid>\n          </Grid>\n          <NodeSet addNode={addNode} updateNode={updateNode} />\n        </CardContent>\n      </Card>)\n  }\n\n    handleSpendMode = (event) => {\n      const { updateAutoSpend } = this.props;\n      if (event.target.checked) {\n        // select inputs for transaction\n        // select change address???,\n        // how to identify???\n        // calculate change???\n\n      }\n\n      updateAutoSpend(event.target.checked)\n    }\n\n    selectCoins = () => {\n      const { outputs, setInputs, fee, depositNodes, changeNodes, feeRate,\n        updateChangeNode, updateDepositNode, resetNodesSpend, setFeeRate } = this.props;\n      const outputsAmount = outputs.reduce((sum, output) => sum.plus(output.amountSats), new BigNumber(0));\n      if (outputsAmount.isNaN()) return;\n      const feeAmount = bitcoinsToSatoshis(new BigNumber(fee));\n      if (outputsAmount.isEqualTo(this.state.outputsAmount) && feeAmount.isEqualTo(this.state.feeAmount)) return;\n      const outputTotal = outputsAmount.plus(feeAmount);\n      const spendableInputs = Object.values(depositNodes)\n        .concat(Object.values(changeNodes))\n        .filter(node => node.balanceSats.isGreaterThan(0));\n\n      let selectedUtxos = [];\n      let inputTotal = new BigNumber(0);\n      resetNodesSpend();\n      for (let i=0; i < spendableInputs.length; i++) {\n        const spendableInput = spendableInputs[i];\n        spendableInput.utxos.forEach(utxo => {\n          selectedUtxos.push({...utxo, multisig: spendableInput.multisig, bip32Path: spendableInput.bip32Path});\n        })\n        inputTotal = inputTotal.plus(spendableInput.balanceSats);\n        (spendableInput.change ? updateChangeNode : updateDepositNode)({bip32Path: spendableInput.bip32Path, spend: true})\n        if (inputTotal.isGreaterThanOrEqualTo(outputTotal)) {\n          break;\n        }\n      }\n      this.setState({ outputsAmount, feeAmount })\n      setInputs(selectedUtxos);\n      setFeeRate(feeRate); // recalulate fee\n    }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.spend.transaction,\n    changeNodes: state.wallet.change.nodes,\n    depositNodes: state.wallet.deposits.nodes,\n    autoSpend: state.wallet.info.autoSpend,\n  };\n}\n\nconst mapDispatchToProps = {\n  updateAutoSpend: updateAutoSpendAction,\n  setInputs,\n  updateChangeNode: updateChangeNodeAction,\n  updateDepositNode: updateDepositNodeAction,\n  setAddress: setOutputAddress,\n  resetNodesSpend,\n  setFeeRate,\n  addOutput,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletSpend);\n","import React from 'react';\nimport { connect } from 'react-redux';\n\n// Actions\nimport { updateDepositingAction, updateSpendingAction } from \"../../actions/walletActions\";\n\n// Components\nimport NodeSet from \"./NodeSet\";\n\nclass WalletView extends React.Component {\n\n  render = () => {\n    const { addNode, updateNode } = this.props;\n\n    return (\n        <NodeSet addNode={addNode} updateNode={updateNode} canLoad={true} />\n    )\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return { ...state.wallet, };\n}\n\nconst mapDispatchToProps = {\n  setDepositing: updateDepositingAction,\n  setSpending: updateSpendingAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletView);\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME        = \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME\";\nexport const RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH  = \"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH  = \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD = \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY  = \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED   = \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE   = \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE\";\n\nexport const {\n  setExtendedPublicKeyImporterName,\n  setExtendedPublicKeyImporterBIP32Path,\n  resetExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKeyImporterExtendedPublicKey,\n  setExtendedPublicKeyImporterFinalized,\n} = wrappedNumberedActions({\n  setExtendedPublicKeyImporterName: SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME,\n  resetExtendedPublicKeyImporterBIP32Path: RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setExtendedPublicKeyImporterBIP32Path: SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setExtendedPublicKeyImporterMethod: SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD,\n  setExtendedPublicKeyImporterExtendedPublicKey: SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY,\n  setExtendedPublicKeyImporterFinalized: SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED,\n});\n\nexport function setExtendedPublicKeyImporterVisible(value) {\n  return {\n    type: SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE,\n    value: value\n  };\n}\n","import React from 'react';\nimport BigNumber from \"bignumber.js\";\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  deriveChildPublicKey,\n  generateMultisigFromPublicKeys,\n} from 'unchained-bitcoin';\nimport {\n  fetchAddressUTXOs,\n  getAddressStatus,\n} from \"../../blockchain\";\nimport { isWalletAddressNotFoundError } from '../../bitcoind'\n// Components\nimport {\n  Button, Card, CardHeader,\n  CardContent, Box\n} from '@material-ui/core';\nimport ConfirmWallet from './ConfirmWallet';\nimport WalletControl from './WalletControl';\nimport WalletDeposit from './WalletDeposit';\nimport WalletSpend from './WalletSpend';\nimport WalletView from './WalletView';\n\n// Actions\nimport {setFrozen} from \"../../actions/settingsActions\";\nimport {\n  updateDepositNodeAction,\n  updateChangeNodeAction,\n  updateAutoSpendAction,\n} from \"../../actions/walletActions\";\nimport {setExtendedPublicKeyImporterVisible} from \"../../actions/extendedPublicKeyImporterActions\";\nimport { setIsWallet } from \"../../actions/transactionActions\";\nimport {downloadFile} from \"../../utils\"\n\nconst MAX_TRAILING_EMPTY_NODES = 20;\nconst MAX_FETCH_UTXOS_ERRORS = 5;\n\nclass WalletGenerator extends React.Component {\n\n  static propTypes = {\n    network: PropTypes.string.isRequired,\n    addressType: PropTypes.string.isRequired,\n    client: PropTypes.object.isRequired,\n    extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n    totalSigners: PropTypes.number.isRequired,\n    requiredSigners: PropTypes.number.isRequired,\n    deposits: PropTypes.object.isRequired,\n    change: PropTypes.object.isRequired,\n    freeze: PropTypes.func.isRequired,\n    updateDepositNode: PropTypes.func.isRequired,\n    updateChangeNode: PropTypes.func.isRequired,\n    setIsWallet: PropTypes.func.isRequired,\n  };\n\n  state = {\n    generating: false,\n  };\n\n  render() {\n    return (\n      <div>\n        <Card>\n          <CardHeader title={this.title()}/>\n          <CardContent>\n          {this.body()}\n          </CardContent>\n        </Card>\n        <Box mt={2}>\n          {this.renderModeComponent()}\n        </Box>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const { setIsWallet } = this.props\n    setIsWallet();\n  }\n\n  title = () => {\n    const {totalSigners, requiredSigners} = this.props;\n    return (\n      <span className=\"justify-content-between d-flex\">\n        Your {requiredSigners}-of-{totalSigners} P2SH Multisig Wallet\n        <small className=\"text-muted\">{` Extended Public Keys: ${this.extendedPublicKeyCount()}/${totalSigners}`}</small>\n      </span>\n    );\n  }\n\n  extendedPublicKeyCount = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    return Object.values(extendedPublicKeyImporters).filter(extendedPublicKeyImporter => (extendedPublicKeyImporter.finalized)).length;\n  }\n\n  renderModeComponent = () => {\n    const {depositing, spending, viewAddresses} = this.props;\n    if (depositing) return <WalletDeposit/>\n    else if (spending) return <WalletSpend addNode={this.addNode} updateNode={this.updateNode}/>\n    else if (viewAddresses) return <WalletView  addNode={this.addNode} updateNode={this.updateNode}/>\n    return \"\";\n  }\n\n  body() {\n    const {totalSigners, configuring} = this.props;\n    const {generating} = this.state;\n    if (this.extendedPublicKeyCount() === totalSigners) {\n      if (generating) {\n        return (\n          <div>\n            {<WalletControl/>}\n          </div>\n        );\n      } else {\n\n        // add download details button.\n\n        return (\n          <div>\n            <Button type=\"button\" variant=\"contained\" color=\"secondary\" onClick={this.toggleImporters}>\n              {configuring ? 'Hide Key Selection' : 'Edit Details'}\n            </Button>\n            <ConfirmWallet/>\n            <p>You have imported all {totalSigners} extended public keys.  You will need to save this information.</p>\n            <Button variant=\"contained\" color=\"primary\" onClick={this.downloadWalletDetails}>Download Wallet Details</Button>\n            <p>Please confirm that the above information is correct and you wish to generate your wallet.</p>\n            <Button id=\"confirm-wallet\" type=\"button\" variant=\"contained\" color=\"primary\" onClick={this.generate}>Confirm</Button>\n          </div>\n        );\n      }\n    }\n    return (\n      <p>\n        {`Once you have imported all ${totalSigners} extended public keys, `}\n        {'your wallet will be generated here.'}\n      </p>\n    );\n  }\n\n  downloadWalletDetails = (event) => {\n    event.preventDefault();\n    const body = this.walletDetailsText();\n    const filename = this.walletDetailsFilename();\n    downloadFile(body, filename)\n  }\n\n  walletDetailsText = () => {\n    const {addressType, network, totalSigners, requiredSigners, walletName} = this.props;\n    return `Wallet: ${walletName}\n\nType: ${addressType}\n\nNetwork: ${network}\n\nQuorum: ${requiredSigners}-of-${totalSigners}\n\nBIP32 Paths:\n${this.extendedPublicKeyImporterBIP32Paths()}\n`\n\n  }\n\n  extendedPublicKeyImporterBIP32Paths = () => {\n    const {totalSigners} = this.props;\n    let extendedPublicKeyImporterBIP32Paths = [];\n    for (let extendedPublicKeyImporterNum = 1; extendedPublicKeyImporterNum <= totalSigners; extendedPublicKeyImporterNum++) {\n      extendedPublicKeyImporterBIP32Paths.push(this.extendedPublicKeyImporterBIP32Path(extendedPublicKeyImporterNum));\n    }\n    return extendedPublicKeyImporterBIP32Paths.join(\"\\n\");\n  }\n\n  extendedPublicKeyImporterBIP32Path = (number) => {\n    const {extendedPublicKeyImporters} =  this.props;\n    const extendedPublicKeyImporter = extendedPublicKeyImporters[number];\n    const bip32Path = (extendedPublicKeyImporter.method === 'text' ? 'Unknown (make sure you have written this down previously!)' : extendedPublicKeyImporter.bip32Path);\n    return `  * ${extendedPublicKeyImporter.name}: ${bip32Path}`;\n  }\n\n  walletDetailsFilename = () => {\n    const {totalSigners, requiredSigners, addressType, walletName} = this.props;\n    return `bitcoin-${requiredSigners}-of-${totalSigners}-${addressType}-${walletName}.txt`;\n\n  }\n\n\n  toggleImporters = () => {\n    const { setImportersVisible, configuring } = this.props;\n    setImportersVisible(!configuring);\n  }\n\n  generate = () => {\n    const {freeze} = this.props;\n    freeze(true);\n    this.setState({generating: true});\n    this.addNode(false, \"m/0/0\", true);\n    this.addNode(true, \"m/1/0\", true);\n  }\n\n  updateNode = (isChange, update) => {\n    const {updateChangeNode, updateDepositNode} = this.props;\n    const updater = (isChange ? updateChangeNode : updateDepositNode);\n    updater(update);\n  }\n\n  addNode = async (isChange, bip32Path, attemptToKeepGenerating) => {\n    const multisigUpdates = await this.generateMultisig(isChange, bip32Path, attemptToKeepGenerating);\n    this.updateNode(isChange, {bip32Path, ...multisigUpdates})\n  }\n\n  generateMultisig = async (isChange, bip32Path, attemptToKeepGenerating) => {\n    const {extendedPublicKeyImporters, totalSigners, network, addressType, requiredSigners} = this.props;\n    const publicKeys = [];\n    for (let extendedPublicKeyImporterNumber=1; extendedPublicKeyImporterNumber <= totalSigners; extendedPublicKeyImporterNumber++) {\n      const extendedPublicKeyImporter = extendedPublicKeyImporters[extendedPublicKeyImporterNumber];\n      const publicKey = deriveChildPublicKey(extendedPublicKeyImporter.extendedPublicKey, bip32Path, network);\n      publicKeys.push(publicKey);\n    }\n    publicKeys.sort(); // BIP67\n\n    const multisig = generateMultisigFromPublicKeys(network, addressType, requiredSigners, ...publicKeys);\n\n    const utxoUpdates = await this.fetchUTXOs(isChange, multisig, attemptToKeepGenerating);\n    return {multisig, ...utxoUpdates};\n  }\n\n  fetchUTXOs = async (isChange, multisig, attemptToKeepGenerating) => {\n    const {network, client} = this.props;\n    let utxos, addressStatus;\n    let updates = {};\n    try {\n      utxos = await fetchAddressUTXOs(multisig.address, network, client);\n      addressStatus = await getAddressStatus(multisig.address, network, client);\n    } catch(e) {\n      console.error(e, e.response);\n      if (client.type === 'private' &&\n        isWalletAddressNotFoundError(e)) {\n          // address not found in wallet, just mark as unused/used/other?\n          addressStatus = {used: false}\n          updates = {\n            utxos: [],\n            balanceSats: BigNumber(0),\n            addressKnown: false,\n            fetchedUTXOs: true,\n            fetchUTXOsError: ''}\n      } else {\n        updates =  {fetchUTXOsError: e.toString()}\n      }\n    }\n    if (utxos) {\n      const balanceSats = utxos\n            .map((utxo) => utxo.amountSats)\n            .reduce(\n              (accumulator, currentValue) => accumulator.plus(currentValue),\n              new BigNumber(0));\n      updates = {...updates, balanceSats, utxos, fetchedUTXOs: true, fetchUTXOsError: ''}\n    }\n    if (addressStatus) {\n      updates = {...updates, addressUsed: addressStatus.used};\n    }\n\n    if (attemptToKeepGenerating) {\n      setTimeout(() => this.generateNextNodeIfNecessary(isChange));\n    }\n    return updates;\n  }\n\n  generateNextNodeIfNecessary = (isChange) => {\n    const {change, deposits} = this.props;\n    const trailingEmptyNodes = (isChange ? change : deposits).trailingEmptyNodes;\n    const fetchUTXOsErrors = (isChange ? change : deposits).fetchUTXOsErrors;\n    const allBIP32Paths = Object.keys((isChange ? change : deposits).nodes);\n    if ((trailingEmptyNodes >= MAX_TRAILING_EMPTY_NODES) || (fetchUTXOsErrors >= MAX_FETCH_UTXOS_ERRORS)) {\n      return;\n    }\n\n    allBIP32Paths.sort((p1, p2) => {\n      const p1Segments = (p1 || '').split('/');\n      const p2Segments = (p2 || '').split('/');\n      const p1Index = parseInt(p1Segments[2]);\n      const p2Index = parseInt(p2Segments[2]);\n      return p1Index - p2Index;\n    });\n    const pathSegments = (allBIP32Paths[allBIP32Paths.length-1] || '').split('/'); // m, 0, 1\n    const maxIndex = parseInt(pathSegments[2]);\n    const nextBIP32Path = `m/${pathSegments[1]}/${maxIndex + 1}`;\n    // Similar to above, we wrap the call to add the next node with\n    // setTimeout with a timeout of zero to allow React time to\n    // render.\n    setTimeout(() => this.addNode(isChange, nextBIP32Path, true));\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...{client: state.client},\n    ...state.quorum,\n    ...state.wallet,\n    ...state.wallet.info,\n  };\n}\n\nconst mapDispatchToProps = {\n  freeze: setFrozen,\n  updateDepositNode: updateDepositNodeAction,\n  updateChangeNode: updateChangeNodeAction,\n  updateAutoSpned: updateAutoSpendAction,\n  setImportersVisible: setExtendedPublicKeyImporterVisible,\n  setIsWallet,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletGenerator);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  validateExtendedPublicKey,\n  deriveChildExtendedPublicKey,\n} from \"unchained-bitcoin\";\n\n// Components\nimport {  Button, TextField, FormHelperText, Box, Grid } from '@material-ui/core';\n\nconst DEFAULT_BIP32_PATH = \"m/0\";\n\nclass ExtendedPublicKeyExtendedPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    network: PropTypes.string.isRequired,\n    extendedPublicKeyImporter: PropTypes.shape({}).isRequired,\n    extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n    validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n    validateAndSetBIP32Path: PropTypes.func.isRequired,\n  };\n\n  componentDidMount = () => {\n    this.setBIP32PathToDefault();\n  }\n  state = {\n    error: '',\n    extendedPublicKey: '',\n    extendedPublicKeyError: '',\n    bip32PathError: '',\n  };\n\n  render = () => {\n    const {extendedPublicKeyImporter} = this.props;\n    const {error, extendedPublicKey, extendedPublicKeyError, bip32PathError} = this.state;\n    return (\n      <div>\n        <Box mt={2}>\n          <TextField\n            fullWidth\n            name=\"extendedPublicKey\"\n            label=\"Extended Public Key\"\n            value={extendedPublicKey}\n            onChange={this.handleExtendedPublicKeyChange}\n            error={this.hasExtendedPublicKeyError()}\n            helperText={extendedPublicKeyError}\n          />\n        </Box>\n\n          <Box mt={2}>\n            <Grid container>\n              <Grid item md={10}>\n                  <TextField\n                    fullWidth\n                    name=\"bip32Path\"\n                    label=\"BIP32 Path (relative to xpub)\"\n                    type=\"text\"\n                    value={extendedPublicKeyImporter.bip32Path}\n                    onChange={this.handleBIP32PathChange}\n                    error={this.hasBIP32PathError()}\n                    helperText={bip32PathError}\n                  />\n              <FormHelperText>Use the default value if you don&rsquo;t understand BIP32 paths.</FormHelperText>\n            </Grid>\n            <Grid item md={2}>\n              {! this.bip32PathIsDefault() && <Button type=\"button\" variant=\"contained\" size=\"small\"  onClick={this.resetBIP32Path}>Default</Button>}\n            </Grid>\n          </Grid>\n          <Box mt={2}>\n            <Button type=\"button\" variant=\"contained\" color=\"primary\" size=\"large\" onClick={this.import} disabled={extendedPublicKey === '' || this.hasError()}>Import Extended Public Key</Button>\n          </Box>\n        </Box>\n        <FormHelperText className=\"text-danger\">{error}</FormHelperText>\n    </div>\n    );\n  }\n\n  import = () => {\n    const {network, extendedPublicKeyImporter, validateAndSetExtendedPublicKey } = this.props;\n    const {extendedPublicKey} = this.state;\n    const childExtendedPublicKey = deriveChildExtendedPublicKey(extendedPublicKey, extendedPublicKeyImporter.bip32Path, network);\n    validateAndSetExtendedPublicKey(childExtendedPublicKey, (error) => { this.setState({error}); });\n  }\n\n  setBIP32PathToDefault = () => {\n    const {validateAndSetBIP32Path} = this.props;\n    validateAndSetBIP32Path(DEFAULT_BIP32_PATH, () => {}, () => {});\n  }\n\n  hasBIP32PathError = () => {\n    return this.state.bip32PathError !== '';\n  }\n\n  hasExtendedPublicKeyError = () => {\n    return this.state.extendedPublicKeyError !== '';\n  }\n\n  hasError = () => (this.hasBIP32PathError() || this.hasExtendedPublicKeyError());\n\n  setBIP32PathError = (value) => {\n    this.setState({bip32PathError: value});\n  }\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError, {mode: \"unhardened\"});\n  };\n\n  bip32PathIsDefault = () => {\n    const {extendedPublicKeyImporter} = this.props;\n    return extendedPublicKeyImporter.bip32Path === DEFAULT_BIP32_PATH;\n  }\n\n  resetBIP32Path = () => {\n    this.setBIP32PathToDefault();\n    this.setBIP32PathError('');\n  }\n\n  handleExtendedPublicKeyChange = (event) => {\n    const {network, extendedPublicKeyImporters} = this.props;\n    const extendedPublicKey = event.target.value;\n    let extendedPublicKeyError = validateExtendedPublicKey(extendedPublicKey, network);\n    if (extendedPublicKeyError === '') {\n      if (Object.values(extendedPublicKeyImporters).find((extendedPublicKeyImporter) => (extendedPublicKeyImporter.extendedPublicKey === extendedPublicKey))) {\n        extendedPublicKeyError = \"This extended public key has already been imported.\";\n      }\n    }\n    this.setState({extendedPublicKey, extendedPublicKeyError});\n  };\n\n}\n\nexport default ExtendedPublicKeyExtendedPublicKeyImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// Components\nimport { TextField, Box } from '@material-ui/core';\n\n\nclass TextExtendedPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    extendedPublicKeyImporter: PropTypes.shape({}).isRequired,\n    validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n  };\n\n  state = {\n    error: '',\n  };\n\n  render = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    const { error } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          name=\"publicKey\"\n          label=\"Extended Public Key\"\n            value={extendedPublicKeyImporter.extendedPublicKey}\n            onChange={this.handleChange}\n            error={this.hasError()}\n            helperText={error}\n        />\n      </Box>\n    );\n  }\n\n  hasError = () => {\n    return this.state.error !== '';\n  }\n\n  setError = (value) => {\n    this.setState({error: value});\n  }\n\n  handleChange = (event) => {\n    const {validateAndSetExtendedPublicKey} = this.props;\n    validateAndSetExtendedPublicKey(event.target.value, this.setError);\n  }\n\n}\n\nexport default TextExtendedPublicKeyImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  PENDING,\n  HermitExportExtendedPublicKey,\n} from \"unchained-wallets\";\n\n// Components\nimport { FormGroup, FormHelperText} from '@material-ui/core';\n\nimport HermitReader from \"../Hermit/HermitReader\";\n\nclass HermitExtendedPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    extendedPublicKeyImporter: PropTypes.shape({}).isRequired,\n    validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n    validateAndSetBIP32Path: PropTypes.func.isRequired,\n    reset: PropTypes.func.isRequired,\n    resetBIP32Path: PropTypes.func.isRequired,\n    enableChangeMethod: PropTypes.func.isRequired,\n    disableChangeMethod: PropTypes.func.isRequired,\n  };\n\n  state = {\n    extendedPublicKeyError: '',\n    walletState: PENDING,\n  };\n\n  componentDidMount = () => {\n    const {resetBIP32Path} = this.props;\n    resetBIP32Path();\n  }\n\n  interaction = () => {\n    const {network, extendedPublicKeyImporter} = this.props;\n    return new HermitExportExtendedPublicKey({network, bip32Path: extendedPublicKeyImporter.bip32Path});\n  }\n\n  render  = () => {\n    const {disableChangeMethod} = this.props;\n    const {extendedPublicKeyError} = this.state;\n    return (\n      <FormGroup>\n        <HermitReader\n          startText=\"Import Extended Public Key\"\n          interaction={this.interaction()}\n          onStart={disableChangeMethod}\n          onSuccess={this.import}\n          onClear={this.onClear} />\n        <FormHelperText className=\"text-danger\">{extendedPublicKeyError}</FormHelperText>\n      </FormGroup>\n    );\n  }\n\n  setError = (value) => {\n    this.setState({error: value});\n  }\n\n  import = (data) => {\n    const { validateAndSetBIP32Path, validateAndSetExtendedPublicKey, enableChangeMethod } = this.props;\n    enableChangeMethod();\n    const {xpub, bip32_path} = data;\n    validateAndSetBIP32Path(\n      bip32_path,\n      () => {\n        validateAndSetExtendedPublicKey(xpub, this.setError);\n      },\n      this.setError\n    );\n  }\n\n  onClear = () => {\n    const { reset, enableChangeMethod } = this.props;\n    reset(true);\t\t// clear BIP32 path\n    this.setError('');\n    enableChangeMethod();\n  }\n\n}\n\nexport default HermitExtendedPublicKeyImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  UNSUPPORTED, PENDING, ACTIVE, ERROR,\n  HardwareWalletExportExtendedPublicKey,\n} from \"unchained-wallets\";\n\n// Components\nimport {\n  Button, TextField, FormHelperText,\n  Box, Grid\n} from '@material-ui/core';\nimport WalletFeedback from '../WalletFeedback';\n\nclass HardwareWalletExtendedPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    network: PropTypes.string.isRequired,\n    addressType: PropTypes.string.isRequired,\n    extendedPublicKeyImporter: PropTypes.shape({}).isRequired,\n    validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n    validateAndSetBIP32Path: PropTypes.func.isRequired,\n    defaultBIP32Path: PropTypes.string.isRequired,\n    resetBIP32Path: PropTypes.func.isRequired,\n    enableChangeMethod: PropTypes.func.isRequired,\n    disableChangeMethod: PropTypes.func.isRequired,\n  };\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      extendedPublicKeyError: '',\n      bip32PathError: '',\n      walletState: (this.interaction().isSupported() ? PENDING : UNSUPPORTED),\n    };\n  }\n\n  interaction = () => {\n    const {network, extendedPublicKeyImporter} = this.props;\n    return HardwareWalletExportExtendedPublicKey({network, walletType: extendedPublicKeyImporter.method, bip32Path: extendedPublicKeyImporter.bip32Path});\n  }\n\n  render = () => {\n    const {extendedPublicKeyImporter} = this.props;\n    const {walletState, extendedPublicKeyError} = this.state;\n    const interaction = this.interaction();\n    if (walletState === UNSUPPORTED) {\n      return <FormHelperText className=\"text-danger\">{interaction.messageTextFor({walletState})}</FormHelperText>;\n    }\n    return (\n      <Box mt={2}>\n       <Grid container>\n        <Grid item md={6}>\n            <TextField\n              fullWidth\n              label=\"BIP32 Path\"\n              value={extendedPublicKeyImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={walletState !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={this.bip32PathError()}\n            />\n        </Grid>\n        <Grid item md={6}>\n          {!this.bip32PathIsDefault() && <Button type=\"button\" variant=\"contained\" size=\"small\" onClick={this.resetBIP32Path}  disabled={walletState !== PENDING}>Default</Button>}\n        </Grid>\n       </Grid>\n        <FormHelperText>Use the default value if you don&rsquo;t understand BIP32 paths.</FormHelperText>\n        <Box mt={2}>\n          <Button\n            type=\"button\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={this.hasBIP32PathError() || walletState === ACTIVE}>Import Extended Public Key</Button>\n        </Box>\n        <WalletFeedback messages={interaction.messagesFor({walletState})} excludeCodes={[\"bip32\"]}/>\n        <FormHelperText className=\"text-danger\">{extendedPublicKeyError}</FormHelperText>\n      </Box>\n    );\n  }\n\n  import = async () => {\n    const {validateAndSetExtendedPublicKey, enableChangeMethod, disableChangeMethod} = this.props;\n    disableChangeMethod();\n    this.setState({extendedPublicKeyError: '', walletState: ACTIVE});\n    try {\n      const extendedPublicKey = await this.interaction().run();\n      validateAndSetExtendedPublicKey(extendedPublicKey, (error) => {this.setState({extendedPublicKeyError: error, walletState: PENDING});});\n    } catch(e) {\n      console.error(e);\n      this.setState({extendedPublicKeyError: e.message, walletState: PENDING});\n    }\n\n    enableChangeMethod();\n  }\n\n\n  hasBIP32PathError = () => {\n    const {bip32PathError, walletState} = this.state;\n    return (bip32PathError !== '' || this.interaction().hasMessagesFor({walletState, level: ERROR, code: \"bip32\"}));\n  }\n\n  bip32PathError = () => {\n    const {bip32PathError, walletState} = this.state;\n    if (bip32PathError !== '') { return bip32PathError; }\n    return this.interaction().messageTextFor({walletState, level: ERROR, code: \"bip32\"});\n  }\n\n  setBIP32PathError = (value) => {\n    this.setState({bip32PathError: value});\n  }\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError);\n  };\n\n  bip32PathIsDefault = () => {\n    const {extendedPublicKeyImporter, defaultBIP32Path} = this.props;\n    return extendedPublicKeyImporter.bip32Path === defaultBIP32Path;\n  }\n\n  resetBIP32Path = () => {\n    const {resetBIP32Path} = this.props;\n    this.setBIP32PathError('');\n    resetBIP32Path();\n  }\n\n}\n\nexport default HardwareWalletExtendedPublicKeyImporter;\n","import React from 'react';\n// Components\nimport {\n    List, ListItem, ListItemIcon, ListItemText, Typography\n  } from '@material-ui/core';\nimport {Warning} from '@material-ui/icons';\n\nconst Conflict = (props) => {\n    return (\n        <small>\n          <List>\n            <ListItem color=\"error.main\">\n            <ListItemIcon>\n            <Typography color=\"error\"><Warning/></Typography>\n            </ListItemIcon>\n            <ListItemText>\n              <Typography color=\"error\">\n                {props.message}\n              </Typography>\n            </ListItemText>\n          </ListItem>\n        </List>\n      </small>\n    );\n  }\n\n  export default Conflict;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  validateBIP32Path,\n  validateExtendedPublicKey,\n} from 'unchained-bitcoin';\nimport {\n  TREZOR,\n  LEDGER,\n  HERMIT,\n} from \"unchained-wallets\";\n\n// Components\nimport {\n  Card, CardHeader, CardContent,\n  FormControl, Select, MenuItem,\n  InputLabel, Button,\n} from '@material-ui/core';\nimport Copyable from \"../Copyable\";\nimport ExtendedPublicKeyExtendedPublicKeyImporter from \"./ExtendedPublicKeyExtendedPublicKeyImporter\";\nimport TextExtendedPublicKeyImporter from \"./TextExtendedPublicKeyImporter\";\nimport HermitExtendedPublicKeyImporter from \"./HermitExtendedPublicKeyImporter\";\nimport HardwareWalletExtendedPublicKeyImporter from \"./HardwareWalletExtendedPublicKeyImporter\";\nimport EditableName from \"../EditableName\";\nimport Conflict from \"../CreateAddress/Conflict\";\n\n// Actions\nimport {\n  setExtendedPublicKeyImporterName,\n  resetExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKeyImporterExtendedPublicKey,\n  setExtendedPublicKeyImporterFinalized,\n} from '../../actions/extendedPublicKeyImporterActions';\n\nconst XPUB = \"xpub\";\nconst TEXT = \"text\";\n\nclass ExtendedPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    network: PropTypes.string.isRequired,\n    number: PropTypes.number.isRequired,\n    extendedPublicKeyImporter: PropTypes.shape({}).isRequired,\n    extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n    defaultBIP32Path: PropTypes.string.isRequired,\n    addressType: PropTypes.string.isRequired,\n    setName: PropTypes.func.isRequired,\n    setBIP32Path: PropTypes.func.isRequired,\n    resetBIP32Path: PropTypes.func.isRequired,\n    setMethod: PropTypes.func.isRequired,\n    setExtendedPublicKey: PropTypes.func.isRequired,\n    setFinalized: PropTypes.func.isRequired,\n  };\n\n  state = {\n    disableChangeMethod: false,\n\n  };\n\n  render() {\n    const { extendedPublicKeyImporter, finalizedNetwork, network } = this.props;\n    const hasConflict = extendedPublicKeyImporter.method && extendedPublicKeyImporter.method !== TEXT && extendedPublicKeyImporter.conflict\n    let conflictMessage = \"\";\n    if (hasConflict) {\n      if (finalizedNetwork !== network) {\n        conflictMessage = \"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!\"\n      } else {\n        conflictMessage = \"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!\"\n      }\n    }\n    return (\n      <Card>\n        <CardHeader title={this.title()}/>\n        <CardContent>\n          {hasConflict &&\n            <Conflict message={conflictMessage} />}\n          {extendedPublicKeyImporter.finalized ? this.renderExtendedPublicKey() : this.renderImport()}\n        </CardContent>\n      </Card>\n    );\n  }\n\n  title = () => {\n    const {number, extendedPublicKeyImporter, setName} = this.props;\n    return <EditableName number={number} name={extendedPublicKeyImporter.name} setName={setName} />;\n  }\n\n  renderImport = () => {\n    const { extendedPublicKeyImporter, number } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = `xpub-${number}-importer-select-label`;\n    return (\n      <div>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`public-key-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={extendedPublicKeyImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value=\"\">{'< Select method >'}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={HERMIT}>Hermit</MenuItem>\n            <MenuItem value={XPUB}>Derive from extended public key</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n\n        </FormControl>\n\n        {this.renderImportByMethod()}\n\n      </div>\n    );\n  }\n\n  renderImportByMethod = () => {\n    const {extendedPublicKeyImporters, extendedPublicKeyImporter, network, addressType, defaultBIP32Path} = this.props;\n    if (extendedPublicKeyImporter.method === TREZOR || extendedPublicKeyImporter.method === LEDGER) {\n      return <HardwareWalletExtendedPublicKeyImporter\n               extendedPublicKeyImporter={extendedPublicKeyImporter}\n               validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n               validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n               resetBIP32Path={this.resetBIP32Path}\n               enableChangeMethod={this.enableChangeMethod}\n               disableChangeMethod={this.disableChangeMethod}\n               addressType={addressType}\n               defaultBIP32Path={defaultBIP32Path}\n               network={network} />;\n    }\n    if (extendedPublicKeyImporter.method === HERMIT) {\n      return <HermitExtendedPublicKeyImporter\n               extendedPublicKeyImporter={extendedPublicKeyImporter}\n               validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n               validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n               enableChangeMethod={this.enableChangeMethod}\n               disableChangeMethod={this.disableChangeMethod}\n               resetBIP32Path={this.resetBIP32Path}\n               reset={this.reset} />;\n    }\n    if (extendedPublicKeyImporter.method === XPUB) {\n      return <ExtendedPublicKeyExtendedPublicKeyImporter\n               extendedPublicKeyImporter={extendedPublicKeyImporter}\n               extendedPublicKeyImporters={extendedPublicKeyImporters}\n               validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n               network={network}\n               validateAndSetBIP32Path={this.validateAndSetBIP32Path} />;\n    }\n    if (extendedPublicKeyImporter.method === TEXT) {\n      return <TextExtendedPublicKeyImporter\n               extendedPublicKeyImporter={extendedPublicKeyImporter}\n               validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey} />;\n    }\n    return null;\n  }\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod, setExtendedPublicKey } = this.props;\n    setMethod(number, event.target.value);\n    setExtendedPublicKey(number, '');\n  }\n\n  disableChangeMethod = () => {\n    this.setState({disableChangeMethod: true});\n  }\n\n  enableChangeMethod = () => {\n    this.setState({disableChangeMethod: false});\n  }\n\n  //\n  // State\n  //\n\n  finalize = () => {\n    const { number, setFinalized } = this.props;\n    setFinalized(number, true);\n  }\n\n  reset = (resetBIP32Path) => {\n    const { number, setExtendedPublicKey, setFinalized } = this.props;\n    setExtendedPublicKey(number, '');\n    setFinalized(number, false);\n    if (resetBIP32Path) {this.resetBIP32Path();}\n  }\n\n  //\n  // Position\n  //\n\n  moveUp = (event) => {\n    const {moveUp, number} = this.props;\n    event.preventDefault();\n    moveUp(number);\n  }\n\n  moveDown = (event) => {\n    const {moveDown, number} = this.props;\n    event.preventDefault();\n    moveDown(number);\n  }\n\n  //\n  // BIP32 Path\n  //\n\n  renderBIP32Path = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    if (extendedPublicKeyImporter.method === TEXT) {\n      return (\n        <div className=\"mt-4\">\n          <p>Make sure you <strong>record the corresponding BIP32 path.</strong></p>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"mt-4\">\n          <p>The BIP32 path for this extended public key is:</p>\n          <div className=\"text-center\">\n            <Copyable text={extendedPublicKeyImporter.bip32Path}>\n              <code>{extendedPublicKeyImporter.bip32Path}</code>\n            </Copyable>\n          </div>\n          <p className=\"mt-4\">You will need this BIP32 path to sign for this key later.  <strong>Write down this BIP32 path!</strong></p>\n        </div>\n      );\n    }\n  }\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const {number, setBIP32Path} = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(number, bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback('');\n      callback();\n    }\n  }\n\n  resetBIP32Path = () => {\n    const {number, resetBIP32Path} = this.props;\n    resetBIP32Path(number);\n  }\n\n  //\n  // Extended Public Key\n  //\n\n\n  renderExtendedPublicKey = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    return (\n      <div>\n        <p>The following extended public key was imported:</p>\n        <div className=\"text-center\">\n          <Copyable text={extendedPublicKeyImporter.extendedPublicKey}>\n            <small><code>{extendedPublicKeyImporter.extendedPublicKey}</code></small>\n          </Copyable>\n        </div>\n        {this.renderBIP32Path()}\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          size=\"small\"\n          onClick={() => {this.reset(extendedPublicKeyImporter.method === HERMIT);}}\n        >\n          Remove Extended Public Key\n        </Button>\n      </div>\n    );\n  }\n\n  validateAndSetExtendedPublicKey = (extendedPublicKey, errback, callback) => {\n    const {number, network, extendedPublicKeyImporters, setExtendedPublicKey} = this.props;\n    const error = validateExtendedPublicKey(extendedPublicKey, network);\n    setExtendedPublicKey(number, extendedPublicKey);\n    if (error) {\n      errback(error);\n    } else {\n      if (extendedPublicKey && Object.values(extendedPublicKeyImporters).find((extendedPublicKeyImporter, extendedPublicKeyImporterIndex) => (\n        extendedPublicKeyImporterIndex !== (number - 1) && extendedPublicKeyImporter.extendedPublicKey === extendedPublicKey\n      ))) {\n        errback('This extended public key has already been imported.');\n      } else {\n        errback('');\n        this.finalize();\n        callback && callback();\n      }\n    }\n  }\n\n}\n\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.settings,\n    ...state.quorum,\n    ...{ extendedPublicKeyImporter: state.quorum.extendedPublicKeyImporters[ownProps.number] },\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setExtendedPublicKeyImporterName,\n  resetBIP32Path: resetExtendedPublicKeyImporterBIP32Path,\n  setBIP32Path: setExtendedPublicKeyImporterBIP32Path,\n  setMethod: setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKey: setExtendedPublicKeyImporterExtendedPublicKey,\n  setFinalized: setExtendedPublicKeyImporterFinalized,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps,)(ExtendedPublicKeyImporter);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from \"react-redux\";\n\n// Components\nimport { Grid, Box, Drawer, IconButton } from '@material-ui/core';\nimport { Settings } from '@material-ui/icons';\n\nimport NetworkPicker from '../NetworkPicker';\nimport QuorumPicker from '../QuorumPicker';\nimport AddressTypePicker from '../AddressTypePicker';\nimport ClientPicker from '../ClientPicker';\nimport WalletGenerator from './WalletGenerator';\nimport ExtendedPublicKeyImporter from './ExtendedPublicKeyImporter';\nimport EditableName from \"../EditableName\";\n\nimport { updateWalletNameAction } from '../../actions/walletActions';\n\nconst bip32 = require('bip32');\n\nclass CreateWallet extends React.Component {\n\n  static propTypes = {\n    totalSigners: PropTypes.number.isRequired,\n  };\n\n  static defaultProps = {\n    bip32,\n  }\n\n  state = {\n    showSettings: false,\n  }\n\n  render = () => {\n    const {configuring, walletName, setName, deposits} = this.props;\n    return (\n      <div>\n        <h1>\n        {!Object.values(deposits.nodes).length && <EditableName number={0} name={walletName} setName={setName} />}\n        {Object.values(deposits.nodes).length > 0 && <span>{walletName}</span>}\n        </h1>\n\n        <Box mt={2}>\n        <Grid container spacing={3}>\n          <Grid item md={configuring ? 8 : 12}>\n\n            {this.renderExtendedPublicKeyImporters()}\n\n            <Box mt={2}><WalletGenerator /></Box>\n\n          </Grid>\n          {this.renderSettings()}\n        </Grid>\n      </Box>\n      </div>\n    );\n  }\n\n  renderSettings = () => {\n    const {configuring} = this.props;\n    if (configuring)\n      return (\n        <Grid item md={4}>\n          <Box><QuorumPicker /></Box>\n          <Box mt={2}><AddressTypePicker /></Box>\n          <Box mt={2}><NetworkPicker /></Box>\n          <Box mt={2}><ClientPicker /></Box>\n        </Grid>\n      )\n    else return (\n      <div>\n      <Box position=\"fixed\" right={10}>\n        <IconButton onClick={this.toggleDrawer}>\n          <Settings/>\n        </IconButton>\n      </Box>\n      <Drawer md={4} anchor=\"right\" open={this.state.showSettings} onClose={this.toggleDrawer}>\n        <Box  width={400}>\n\n          <Box mt={2}><ClientPicker /></Box>\n        </Box>\n      </Drawer>\n\n      </div>\n      )\n  }\n\n  toggleDrawer = () => {\n    this.setState({showSettings: !this.state.showSettings})\n  }\n\n  renderExtendedPublicKeyImporters = () => {\n    const {totalSigners, configuring} = this.props;\n    const extendedPublicKeyImporters = [];\n    for (let extendedPublicKeyImporterNum = 1; extendedPublicKeyImporterNum  <= totalSigners; extendedPublicKeyImporterNum++) {\n      extendedPublicKeyImporters.push(\n        <Box key={extendedPublicKeyImporterNum} mt={extendedPublicKeyImporterNum===1 ? 0 : 2} display={configuring ? 'block' : 'none'}>\n          <ExtendedPublicKeyImporter key={extendedPublicKeyImporterNum} number={extendedPublicKeyImporterNum} />\n        </Box>\n      );\n    }\n    return extendedPublicKeyImporters;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...{totalSigners: state.settings.totalSigners},\n    ...state.quorum,\n    ...{walletName: state.wallet.info.walletName},\n    ...state.wallet,\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: updateWalletNameAction\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateWallet);\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const SET_PUBLIC_KEY_IMPORTER_NAME        = \"SET_PUBLIC_KEY_IMPORTER_NAME\";\nexport const RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH  = \"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_BIP32_PATH  = \"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_METHOD = \"SET_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY  = \"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY\";\nexport const SET_PUBLIC_KEY_IMPORTER_FINALIZED   = \"SET_PUBLIC_KEY_IMPORTER_FINALIZED\";\nexport const MOVE_PUBLIC_KEY_IMPORTER_UP         = \"MOVE_PUBLIC_KEY_IMPORTER_UP\";\nexport const MOVE_PUBLIC_KEY_IMPORTER_DOWN       = \"MOVE_PUBLIC_KEY_IMPORTER_DOWN\";\nexport const SORT_PUBLIC_KEY_IMPORTERS           = \"SORT_PUBLIC_KEY_IMPORTERS\";\nexport const UPDATE_MULTISIG_ADDRESS             = \"UPDATE_MULTISIG_ADDRESS\";\n\nexport function sortPublicKeyImporters() {\n  return {\n    type: SORT_PUBLIC_KEY_IMPORTERS,\n  };\n}\n\nexport function setMultisigAddress(address) {\n  return {\n    type: UPDATE_MULTISIG_ADDRESS,\n    value: address,\n  };\n}\n\n\nexport const {\n  setPublicKeyImporterName,\n  setPublicKeyImporterBIP32Path,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n  setPublicKeyImporterFinalized,\n  movePublicKeyImporterUp,\n  movePublicKeyImporterDown,\n} = wrappedNumberedActions({\n  setPublicKeyImporterName: SET_PUBLIC_KEY_IMPORTER_NAME,\n  resetPublicKeyImporterBIP32Path: RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setPublicKeyImporterBIP32Path: SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setPublicKeyImporterMethod: SET_PUBLIC_KEY_IMPORTER_METHOD,\n  setPublicKeyImporterPublicKey: SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n  setPublicKeyImporterFinalized: SET_PUBLIC_KEY_IMPORTER_FINALIZED,\n  movePublicKeyImporterUp: MOVE_PUBLIC_KEY_IMPORTER_UP,\n  movePublicKeyImporterDown: MOVE_PUBLIC_KEY_IMPORTER_DOWN,\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  scriptToOps,\n  scriptToHex,\n  networkLabel,\n  multisigAddressType,\n  multisigRedeemScript,\n  multisigWitnessScript,\n  multisigRequiredSigners,\n  multisigTotalSigners,\n  blockExplorerAddressURL,\n} from 'unchained-bitcoin';\nimport {\n  externalLink,\n} from \"../utils\";\n\n// Components\nimport Copyable from \"./Copyable\";\nimport { Typography, Grid, Box, Chip} from '@material-ui/core';\nimport { OpenInNew } from '@material-ui/icons';\n\nclass MultisigDetails extends React.Component {\n\n  static propTypes = {\n    network:  PropTypes.string.isRequired,\n    multisig: PropTypes.object.isRequired,\n  };\n\n  render() {\n    const {network, multisig} = this.props;\n    const address = multisig.address;\n    const redeemScript = multisigRedeemScript(multisig);\n    const witnessScript = multisigWitnessScript(multisig);\n    return (\n      <Box mt={2}>\n\n        <Typography variant=\"h6\">Address</Typography>\n\n        <Typography align=\"center\" variant=\"h5\">\n\n          <Grid container direction=\"column\" spacing={2}>\n\n            <Grid item>\n              <Copyable text={address}>\n                <code>{address}</code>\n              </Copyable>\n              &nbsp;\n              {externalLink(blockExplorerAddressURL(address, network), <OpenInNew />)}\n            </Grid>\n\n            <Grid item justify=\"center\" container spacing={3}>\n\n              <Grid item>\n                <Chip label=\"BTC\" />\n              </Grid>\n\n              <Grid item>\n                <Chip label={networkLabel(network)}/>\n              </Grid>\n\n              <Grid item>\n                <Chip label={`${multisigRequiredSigners(multisig)}-of-${multisigTotalSigners(multisig)}`}/>\n              </Grid>\n\n              <Grid item>\n                <Chip label={multisigAddressType(multisig)}/>\n              </Grid>\n\n            </Grid>\n          </Grid>\n\n        </Typography>\n\n        {this.renderScript(\"Script\", multisig)}\n        {redeemScript && this.renderScript(\"Redeem Script\", redeemScript)}\n        {witnessScript && this.renderScript(\"Witness Script\", witnessScript)}\n      </Box>\n    );\n  }\n\n  renderScript = (name, script) => {\n    const hex = scriptToHex(script);\n    const ops = scriptToOps(script);\n    return (\n      <Box mt={2}>\n        <Typography variant=\"h6\">{name}</Typography>\n        <Grid container spacing={2}>\n          <Grid item sm={6}>\n            <Copyable text={hex}><code>{hex}</code></Copyable>\n          </Grid>\n          <Grid item sm={6}>\n            <Copyable text={ops}><code>{ops}</code></Copyable>\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\nconst mapDispatchToProps = {\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MultisigDetails);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  generateMultisigFromPublicKeys,\n  scriptToHex,\n  multisigRedeemScript,\n  multisigWitnessScript,\n} from 'unchained-bitcoin';\nimport {externalLink} from \"../../utils\";\n\n// Actions\nimport {sortPublicKeyImporters, setMultisigAddress} from \"../../actions/publicKeyImporterActions\";\n\n// Components\nimport {\n  Box, Grid, Button, Card, CardHeader,\n  CardContent, FormHelperText,\n} from '@material-ui/core';\nimport MultisigDetails from \"../MultisigDetails\";\nimport Conflict from './Conflict';\nimport {downloadFile} from \"../../utils\";\n\nclass AddressGenerator extends React.Component {\n\n  static propTypes = {\n    network: PropTypes.string.isRequired,\n    totalSigners: PropTypes.number.isRequired,\n    requiredSigners: PropTypes.number.isRequired,\n    addressType: PropTypes.string.isRequired,\n    publicKeyImporters: PropTypes.shape({}).isRequired,\n    fingerprint: PropTypes.string.isRequired,\n    sortPublicKeyImporters: PropTypes.func.isRequired,\n  };\n\n  render() {\n    return (\n      <Card>\n        <CardHeader title={this.title()}/>\n          <CardContent>\n            {this.body()}\n          </CardContent>\n      </Card>\n    );\n  }\n\n  body() {\n    const {totalSigners} = this.props;\n    if (this.publicKeyCount() === totalSigners) {\n      const multisig = this.generateMultisig();\n\n      const canonicallySorted = this.publicKeysAreCanonicallySorted();\n      return (\n        <div>\n          {this.isInConflict() && <Conflict/>}\n          {!canonicallySorted &&\n           <Grid container justify=\"space-between\">\n             <Grid item md={8}>\n               <FormHelperText error={true}>WARNING: These public keys are not in the standard {externalLink('https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki', 'BIP67 order')}.</FormHelperText>\n             </Grid>\n             <Grid item md={4}>\n               <Button variant=\"contained\" color=\"primary\" onClick={this.canonicallySortPublicKeys}>Sort Public Keys</Button>\n             </Grid>\n           </Grid>\n          }\n\n          <Box mt={2}>\n            <MultisigDetails multisig={multisig} />\n          </Box>\n\n          <Box mt={2}>\n            <Button variant=\"contained\" color=\"primary\" onClick={this.downloadAddressDetails}>Download Address Details</Button>\n          </Box>\n\n\n        </div>\n      );\n    }\n    return (\n      <p>\n        {`Once you have imported all ${totalSigners} public keys, `}\n        {'your address details will be displayed here.'}\n      </p>\n    );\n  }\n\n\n  title = () => {\n    const {totalSigners, requiredSigners, addressType} = this.props;\n    return (\n      <Grid container justify=\"space-between\">\n        <Grid item>{requiredSigners}-of-{totalSigners} Multisig {addressType} Address</Grid>\n        <Grid item><small>{`Public Keys: ${this.publicKeyCount()}/${totalSigners}`}</small></Grid>\n      </Grid>\n    );\n  }\n\n  isInConflict = () => {\n    const { publicKeyImporters } = this.props;\n    return Object.values(publicKeyImporters).some(importer => importer.conflict)\n  }\n\n  publicKeyCount = () => {\n    const { publicKeyImporters } = this.props;\n    return Object.values(publicKeyImporters).filter(publicKeyImporter => (publicKeyImporter.finalized)).length;\n  }\n\n  publicKeysAreCanonicallySorted = () => {\n    const {publicKeyImporters} = this.props;\n    const publicKeys = Object.values(publicKeyImporters).map((publicKeyImporter) => publicKeyImporter.publicKey).filter((publicKey) => publicKey !== '');\n    const sortedPublicKeys = Object.values(publicKeyImporters).map((publicKeyImporter) => publicKeyImporter.publicKey).filter((publicKey) => publicKey !== '').sort(); // sort mutates the array\n    const sorted = publicKeys.filter((publicKey, index) => { return publicKey === sortedPublicKeys[index];}).length === publicKeys.length;\n    return sorted;\n  }\n\n  canonicallySortPublicKeys = () => {\n    const {sortPublicKeyImporters} = this.props;\n    sortPublicKeyImporters();\n  }\n\n  generateMultisig = () => {\n    const { network, publicKeyImporters, totalSigners, requiredSigners,\n      addressType, setMultisigAddress } = this.props;\n    let publicKeys = [];\n    for (let publicKeyImporterNum = 1; publicKeyImporterNum <= totalSigners; publicKeyImporterNum++) {\n      publicKeys.push(publicKeyImporters[publicKeyImporterNum].publicKey);\n    }\n    const multisig = generateMultisigFromPublicKeys(network, addressType, requiredSigners, ...publicKeys);\n    setMultisigAddress(multisig.address);\n    return multisig\n  }\n\n  downloadAddressDetails = (event) => {\n    event.preventDefault();\n    const multisig = this.generateMultisig();\n    const body = this.addressDetailsText(multisig);\n    const filename = this.addressDetailsFilename(multisig);\n    downloadFile(body, filename);\n  }\n\n  addressDetailsFilename = (multisig) => {\n    const {totalSigners, requiredSigners, addressType} = this.props;\n    return `bitcoin-${requiredSigners}-of-${totalSigners}-${addressType}-${multisig.address}.txt`;\n  }\n\n  addressDetailsText = (multisig) => {\n    const {addressType, network, totalSigners, requiredSigners} = this.props;\n    const redeemScript = multisigRedeemScript(multisig);\n    const witnessScript = multisigWitnessScript(multisig);\n    const redeemScriptLine = (redeemScript ? `Redeem Script: ${scriptToHex(redeemScript)}` : '');\n    const witnessScriptLine = (witnessScript ? `Witness Script: ${scriptToHex(witnessScript)}` : '');\n    const scriptsSpacer = (redeemScript && witnessScript ? '\\n\\n' : '');\n    return `Address: ${multisig.address}\n\nType: ${addressType}\n\nNetwork: ${network}\n\nQuorum: ${requiredSigners}-of-${totalSigners}\n\nBIP32 Paths:\n${this.publicKeyImporterBIP32Paths()}\n\n${redeemScriptLine}${scriptsSpacer}${witnessScriptLine}\n`;\n  }\n\n  publicKeyImporterBIP32Paths = () => {\n    const {totalSigners} = this.props;\n    let publicKeyImporterBIP32Paths = [];\n    for (let publicKeyImporterNum = 1; publicKeyImporterNum <= totalSigners; publicKeyImporterNum++) {\n      publicKeyImporterBIP32Paths.push(this.publicKeyImporterBIP32Path(publicKeyImporterNum));\n    }\n    return publicKeyImporterBIP32Paths.join(\"\\n\");\n  }\n\n  publicKeyImporterBIP32Path = (number) => {\n    const {publicKeyImporters} =  this.props;\n    const publicKeyImporter = publicKeyImporters[number];\n    const bip32Path = (publicKeyImporter.method === 'text' ? 'Unknown (make sure you have written this down previously!)' : publicKeyImporter.bip32Path);\n    return `  * ${publicKeyImporter.name}: ${bip32Path}`;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...state.address,\n  };\n}\n\nconst mapDispatchToProps = {\n  sortPublicKeyImporters,\n  setMultisigAddress,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressGenerator);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  validatePublicKey,\n} from \"unchained-bitcoin\";\n\n// Components\nimport { Button, TextField, Box } from '@material-ui/core';\n\nclass TextPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    publicKeyImporter: PropTypes.shape({}).isRequired,\n    validateAndSetPublicKey: PropTypes.func.isRequired,\n  };\n\n  state = {\n    error: '',\n    publicKey: '',\n  };\n\n  render = () => {\n    const { error, publicKey } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          name=\"publicKey\"\n          label=\"Public Key\"\n          value={publicKey}\n          onChange={this.handleChange}\n          error={this.hasError()}\n          helperText={error}\n        />\n\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={publicKey === '' || this.hasError()}\n          >\n            Add Public Key\n          </Button>\n        </Box>\n      </Box>\n    );\n  }\n\n  import = () => {\n    const {validateAndSetPublicKey} = this.props;\n    const {publicKey} = this.state;\n    validateAndSetPublicKey(publicKey, this.setError);\n  }\n  \n  hasError = () => {\n    return this.state.error !== '';\n  }\n\n  setError = (value) => {\n    this.setState({error: value});\n  }\n\n  handleChange = (event) => {\n    const publicKey = event.target.value;\n    const error = validatePublicKey(publicKey);\n    this.setState({publicKey, error});\n  }\n\n}\n\nexport default TextPublicKeyImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  validateExtendedPublicKey,\n  deriveChildPublicKey,\n} from \"unchained-bitcoin\";\n\n// Components\nimport {  Button, TextField, FormHelperText, Box, Grid } from '@material-ui/core';\n\n\nconst DEFAULT_BIP32_PATH = \"m/0\";\n\nclass ExtendedPublicKeyPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    network: PropTypes.string.isRequired,\n    publicKeyImporter: PropTypes.shape({}).isRequired,\n    validateAndSetPublicKey: PropTypes.func.isRequired,\n    validateAndSetBIP32Path: PropTypes.func.isRequired,\n  };\n\n  componentDidMount = () => {\n    this.setBIP32PathToDefault();\n  }\n\n  state = {\n    extendedPublicKey: '',\n    extendedPublicKeyError: '',\n    bip32PathError: '',\n  };\n\n  render = () => {\n    const {publicKeyImporter} = this.props;\n    const {extendedPublicKey, extendedPublicKeyError, bip32PathError} = this.state;\n    return (\n      <div>\n        <Box mt={2}>\n          <TextField\n            fullWidth\n            name=\"extendedPublicKey\"\n            label=\"Extended Public Key\"\n            value={extendedPublicKey}\n            onChange={this.handleExtendedPublicKeyChange}\n            error={this.hasExtendedPublicKeyError()}\n            helperText={extendedPublicKeyError}\n          />\n        </Box>\n\n          <Box mt={2}>\n            <Grid container>\n              <Grid item md={10}>\n                  <TextField\n                    fullWidth\n                    name=\"bip32Path\"\n                    label=\"BIP32 Path (relative to xpub)\"\n                    type=\"text\"\n                    value={publicKeyImporter.bip32Path}\n                    onChange={this.handleBIP32PathChange}\n                    error={this.hasBIP32PathError()}\n                    helperText={bip32PathError}\n                  />\n              <FormHelperText>Use the default value if you don&rsquo;t understand BIP32 paths.</FormHelperText>\n            </Grid>\n            <Grid item md={2}>\n              {! this.bip32PathIsDefault() && <Button type=\"button\" variant=\"contained\" size=\"small\"  onClick={this.resetBIP32Path}>Default</Button>}\n            </Grid>\n          </Grid>\n          <Box mt={2}>\n            <Button type=\"button\" variant=\"contained\" color=\"primary\" size=\"large\" onClick={this.import} disabled={extendedPublicKey === '' || this.hasError()}>Import Public Key</Button>\n          </Box>\n        </Box>\n      </div>\n    );\n  }\n\n  import = () => {\n    const {network, publicKeyImporter, validateAndSetPublicKey} = this.props;\n    const {extendedPublicKey} = this.state;\n    const publicKey = deriveChildPublicKey(extendedPublicKey, publicKeyImporter.bip32Path, network);\n    validateAndSetPublicKey(publicKey, (bip32PathError) => this.setState({bip32PathError}));\n  }\n\n  setBIP32PathToDefault = () => {\n    const {validateAndSetBIP32Path} = this.props;\n    validateAndSetBIP32Path(DEFAULT_BIP32_PATH, () => {}, () => {});\n  }\n\n  hasBIP32PathError = () => {\n    return this.state.bip32PathError !== '';\n  }\n\n  hasExtendedPublicKeyError = () => {\n    return this.state.extendedPublicKeyError !== '';\n  }\n\n  hasError = () => (this.hasBIP32PathError() || this.hasExtendedPublicKeyError());\n\n  setBIP32PathError = (value) => {\n    this.setState({bip32PathError: value});\n  }\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError, {mode: \"unhardened\"});\n  };\n\n  bip32PathIsDefault = () => {\n    const {publicKeyImporter} = this.props;\n    return publicKeyImporter.bip32Path === DEFAULT_BIP32_PATH;\n  }\n\n  resetBIP32Path = () => {\n    this.setBIP32PathToDefault();\n    this.setBIP32PathError('');\n  }\n\n  handleExtendedPublicKeyChange = (event) => {\n    const {network} = this.props;\n    const extendedPublicKey = event.target.value;\n    const extendedPublicKeyError = validateExtendedPublicKey(extendedPublicKey, network);\n    this.setState({extendedPublicKey, extendedPublicKeyError});\n  };\n\n}\n\nexport default ExtendedPublicKeyPublicKeyImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  PENDING,\n  HermitExportPublicKey,\n} from \"unchained-wallets\";\n\n// Components\nimport { FormGroup, FormHelperText} from '@material-ui/core';\n\nimport HermitReader from \"../Hermit/HermitReader\";\n\nclass HermitPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    publicKeyImporter: PropTypes.shape({}).isRequired,\n    validateAndSetPublicKey: PropTypes.func.isRequired,\n    validateAndSetBIP32Path: PropTypes.func.isRequired,\n    reset: PropTypes.func.isRequired,\n    resetBIP32Path: PropTypes.func.isRequired,\n    enableChangeMethod: PropTypes.func.isRequired,\n    disableChangeMethod: PropTypes.func.isRequired,\n  };\n\n  state = {\n    publicKeyError: '',\n    walletState: PENDING,\n  };\n\n  componentDidMount = () => {\n    const {resetBIP32Path} = this.props;\n    resetBIP32Path();\n  }\n\n  interaction = () => {\n    const {network, publicKeyImporter} = this.props;\n    return new HermitExportPublicKey({network, bip32Path: publicKeyImporter.bip32Path});\n  }\n\n  render = () => {\n    const {disableChangeMethod} = this.props;\n    const {publicKeyError} = this.state;\n    return (\n      <FormGroup>\n        <HermitReader\n          startText=\"Import Public Key\"\n          interaction={this.interaction()}\n          onStart={disableChangeMethod}\n          onSuccess={this.import}\n          onClear={this.onClear} />\n        <FormHelperText error>{publicKeyError}</FormHelperText>\n      </FormGroup>\n    );\n  }\n\n  setError = (value) => {\n    this.setState({publicKeyError: value});\n  }\n\n  import = (data) => {\n    const { validateAndSetBIP32Path, validateAndSetPublicKey, enableChangeMethod } = this.props;\n    enableChangeMethod();\n    const {pubkey, bip32_path} = data;\n    validateAndSetBIP32Path(\n      bip32_path,\n      () => {\n        validateAndSetPublicKey(pubkey, this.setError);\n      },\n      this.setError\n    );\n  }\n\n  onClear = () => {\n    const { reset, enableChangeMethod } = this.props;\n    reset(true);\t\t// clear BIP32 path\n    this.setError('');\n    enableChangeMethod();\n  }\n\n}\n\nexport default HermitPublicKeyImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  UNSUPPORTED, PENDING, ACTIVE, ERROR,\n  HardwareWalletExportPublicKey,\n} from \"unchained-wallets\";\n\n// Components\nimport {\n  Button, TextField, FormHelperText,\n  Box, Grid\n} from '@material-ui/core';\n\nimport WalletFeedback from '../WalletFeedback';\n\nclass HardwareWalletPublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    network: PropTypes.string.isRequired,\n    addressType: PropTypes.string.isRequired,\n    publicKeyImporter: PropTypes.shape({}).isRequired,\n    validateAndSetPublicKey: PropTypes.func.isRequired,\n    validateAndSetBIP32Path: PropTypes.func.isRequired,\n    resetBIP32Path: PropTypes.func.isRequired,\n    defaultBIP32Path: PropTypes.string.isRequired,\n    enableChangeMethod: PropTypes.func.isRequired,\n    disableChangeMethod: PropTypes.func.isRequired,\n  };\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      publicKeyError: '',\n      bip32PathError: '',\n      walletState: (this.interaction().isSupported() ? PENDING : UNSUPPORTED),\n    };\n  }\n\n  interaction = () => {\n    const {network, publicKeyImporter} = this.props;\n    return HardwareWalletExportPublicKey({network, walletType: publicKeyImporter.method, bip32Path:publicKeyImporter.bip32Path});\n  }\n\n  render = () => {\n    const {publicKeyImporter} = this.props;\n    const {walletState, publicKeyError} = this.state;\n    const interaction = this.interaction();\n    if (walletState === UNSUPPORTED) {\n      return <FormHelperText error>{interaction.messageTextFor({walletState})}</FormHelperText>;\n    }\n    return (\n      <Box mt={2}>\n       <Grid container>\n        <Grid item md={6}>\n            <TextField\n              fullWidth\n              label=\"BIP32 Path\"\n              value={publicKeyImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={walletState !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={this.bip32PathError()}\n              />\n        </Grid>\n        <Grid item md={6}>\n              {!this.bip32PathIsDefault() && <Button type=\"button\" variant=\"contained\" size=\"small\" onClick={this.resetBIP32Path} disabled={walletState !== PENDING}>Default</Button>}\n        </Grid>\n       </Grid>\n        <FormHelperText>Use the default value if you don&rsquo;t understand BIP32 paths.</FormHelperText>\n        <Box mt={2}>\n          <Button\n            type=\"button\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={this.hasBIP32PathError() || walletState === ACTIVE}>Import Public Key</Button>\n        </Box>\n        <WalletFeedback messages={interaction.messagesFor({walletState})} excludeCodes={[\"bip32\"]}/>\n        <FormHelperText error>{publicKeyError}</FormHelperText>\n      </Box>\n    );\n  }\n\n  import = async () => {\n    const {validateAndSetPublicKey, enableChangeMethod, disableChangeMethod} = this.props;\n    disableChangeMethod();\n    this.setState({publicKeyError: '', walletState: ACTIVE});\n    try {\n      const publicKey = await this.interaction().run();\n      validateAndSetPublicKey(publicKey, (error) => {this.setState({publicKeyError: error, walletState: PENDING});});\n    } catch(e) {\n      console.error(e);\n      this.setState({publicKeyError: e.message, walletState: PENDING});\n    }\n\n    enableChangeMethod();\n  }\n\n  hasBIP32PathError = () => {\n    const {bip32PathError, walletState} = this.state;\n    return (bip32PathError !== '' || this.interaction().hasMessagesFor({walletState, level: ERROR, code: \"bip32\"}));\n  }\n\n  bip32PathError = () => {\n    const {bip32PathError, walletState} = this.state;\n    if (bip32PathError !== '') { return bip32PathError; }\n    return this.interaction().messageTextFor({walletState, level: ERROR, code: \"bip32\"});\n  }\n\n  setBIP32PathError = (value) => {\n    this.setState({bip32PathError: value});\n  }\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError);\n  };\n\n  bip32PathIsDefault = () => {\n    const {publicKeyImporter, defaultBIP32Path} = this.props;\n    return publicKeyImporter.bip32Path === defaultBIP32Path;\n  }\n\n  resetBIP32Path = () => {\n    const {resetBIP32Path} = this.props;\n    this.setBIP32PathError('');\n    resetBIP32Path();\n  }\n\n}\n\nexport default HardwareWalletPublicKeyImporter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  validateBIP32Path,\n  validatePublicKey,\n} from 'unchained-bitcoin';\nimport {\n  TREZOR,\n  LEDGER,\n  HERMIT,\n} from \"unchained-wallets\";\n\n// Components\nimport {\n  Card, CardHeader, CardContent,\n  FormControl, Select, MenuItem,\n  InputLabel, Button, Grid,\n  Box,\n} from '@material-ui/core';\nimport {ArrowUpward, ArrowDownward} from '@material-ui/icons';\n\nimport Copyable from \"../Copyable\";\nimport TextPublicKeyImporter from \"./TextPublicKeyImporter\";\nimport ExtendedPublicKeyPublicKeyImporter from \"./ExtendedPublicKeyPublicKeyImporter\";\nimport HermitPublicKeyImporter from \"./HermitPublicKeyImporter\";\nimport HardwareWalletPublicKeyImporter from \"./HardwareWalletPublicKeyImporter\";\nimport EditableName from \"../EditableName\";\nimport Conflict from \"./Conflict\";\n\n// Actions\nimport {\n  setPublicKeyImporterName,\n  setPublicKeyImporterBIP32Path,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n  setPublicKeyImporterFinalized,\n  movePublicKeyImporterUp,\n  movePublicKeyImporterDown,\n} from '../../actions/publicKeyImporterActions';\n\nconst XPUB = \"xpub\";\nconst TEXT = \"text\";\n\nclass PublicKeyImporter extends React.Component {\n\n  static propTypes =  {\n    network: PropTypes.string.isRequired,\n    totalSigners: PropTypes.number.isRequired,\n    number: PropTypes.number.isRequired,\n    publicKeyImporter: PropTypes.shape({}).isRequired,\n    publicKeyImporters: PropTypes.shape({}).isRequired,\n    defaultBIP32Path: PropTypes.string.isRequired,\n    addressType: PropTypes.string.isRequired,\n    setName: PropTypes.func.isRequired,\n    setBIP32Path: PropTypes.func.isRequired,\n    setMethod: PropTypes.func.isRequired,\n    setPublicKey: PropTypes.func.isRequired,\n    setFinalized: PropTypes.func.isRequired,\n    moveUp: PropTypes.func.isRequired,\n    moveDown: PropTypes.func.isRequired,\n  };\n\n  state = {\n    disableChangeMethod: false,\n  };\n\n  render() {\n    const { publicKeyImporter } = this.props;\n    return (\n      <Card>\n        <CardHeader title={this.title()}/>\n        <CardContent>\n          {publicKeyImporter.method && publicKeyImporter.method !== TEXT && publicKeyImporter.conflict &&\n          <Conflict message=\"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!\" />}\n          {publicKeyImporter.finalized ? this.renderPublicKey() : this.renderImport()}\n        </CardContent>\n      </Card>\n    );\n  }\n\n  title = () => {\n    const {number, totalSigners, publicKeyImporter, setName} = this.props;\n    return (\n      <Grid container justify=\"space-between\">\n        <Grid item>\n          <EditableName number={number} name={publicKeyImporter.name} setName={setName} />\n        </Grid>\n        <Grid item>\n          <Grid container justify=\"flex-end\">\n            <Button type=\"button\" variant=\"contained\" onClick={this.moveUp} disabled={number === 1}><ArrowUpward /></Button>\n            <span>&nbsp;</span>\n            <Button type=\"button\" variant=\"contained\" onClick={this.moveDown} disabled={number === totalSigners}><ArrowDownward /></Button>\n          </Grid>\n        </Grid>\n      </Grid>\n    );\n  }\n\n  renderImport = () => {\n    const { publicKeyImporter, number } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = `public-key-${number}-importer-select-label`;\n    return (\n      <div>\n\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`public-key-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={publicKeyImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value=\"\">{'< Select method >'}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={HERMIT}>Hermit</MenuItem>\n            <MenuItem value={XPUB}>Derive from extended public key</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n\n        </FormControl>\n\n        {this.renderImportByMethod()}\n      </div>\n    );\n  }\n\n  renderImportByMethod = () => {\n    const {publicKeyImporter, network, addressType, defaultBIP32Path} = this.props;\n    if (publicKeyImporter.method === TREZOR || publicKeyImporter.method === LEDGER) {\n      return <HardwareWalletPublicKeyImporter\n                                  publicKeyImporter={publicKeyImporter}\n                                  validateAndSetPublicKey={this.validateAndSetPublicKey}\n                                  validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n                                  resetBIP32Path={this.resetBIP32Path}\n                                  enableChangeMethod={this.enableChangeMethod}\n                                  disableChangeMethod={this.disableChangeMethod}\n                                  addressType={addressType}\n                                  defaultBIP32Path={defaultBIP32Path}\n                                  network={network} />;\n    }\n    if (publicKeyImporter.method === HERMIT) {\n      return <HermitPublicKeyImporter\n                                  publicKeyImporter={publicKeyImporter}\n                                  validateAndSetPublicKey={this.validateAndSetPublicKey}\n                                  validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n                                  resetBIP32Path={this.resetBIP32Path}\n                                  enableChangeMethod={this.enableChangeMethod}\n                                  disableChangeMethod={this.disableChangeMethod}\n                                  reset={this.reset} />;\n    }\n    if (publicKeyImporter.method === XPUB) {\n      return <ExtendedPublicKeyPublicKeyImporter\n                                                network={network}\n                                                publicKeyImporter={publicKeyImporter}\n                                                validateAndSetPublicKey={this.validateAndSetPublicKey}\n                                                validateAndSetBIP32Path={this.validateAndSetBIP32Path} />;\n    }\n    if (publicKeyImporter.method === TEXT) {\n      return <TextPublicKeyImporter\n                                                 publicKeyImporter={publicKeyImporter}\n                                                 validateAndSetPublicKey={this.validateAndSetPublicKey} />;\n    }\n    return null;\n  }\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod, setPublicKey } = this.props;\n    setMethod(number, event.target.value);\n    setPublicKey(number, '');\n  }\n\n  disableChangeMethod = () => {\n    this.setState({disableChangeMethod: true});\n  }\n\n  enableChangeMethod = () => {\n    this.setState({disableChangeMethod: false});\n  }\n\n  //\n  // State\n  //\n\n  finalize = () => {\n    const { number, setFinalized } = this.props;\n    setFinalized(number, true);\n  }\n\n  reset = (resetBIP32Path) => {\n    const { number, setPublicKey, setFinalized } = this.props;\n    setPublicKey(number, '');\n    setFinalized(number, false);\n    if (resetBIP32Path) {this.resetBIP32Path();}\n  }\n\n  //\n  // Position\n  //\n\n  moveUp = (event) => {\n    const {moveUp, number} = this.props;\n    event.preventDefault();\n    moveUp(number);\n  }\n\n  moveDown = (event) => {\n    const {moveDown, number} = this.props;\n    event.preventDefault();\n    moveDown(number);\n  }\n\n  //\n  // BIP32 Path\n  //\n\n  renderBIP32Path = () => {\n    const { publicKeyImporter } = this.props;\n    if (publicKeyImporter.method !== TEXT) {\n      return (\n        <Box mt={4}>\n          <p>The BIP32 path for this public key is:</p>\n          <Grid container justify=\"center\">\n            <Copyable text={publicKeyImporter.bip32Path}>\n              <code>{publicKeyImporter.bip32Path}</code>\n            </Copyable>\n          </Grid>\n          <Box mt={4}><p>You will need this BIP32 path to sign for this key later.  <strong>Write down this BIP32 path!</strong></p></Box>\n        </Box>\n      );\n    }\n    return null;\n  }\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const {number, setBIP32Path} = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(number, bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback('');\n      callback();\n    }\n  }\n\n  resetBIP32Path = () => {\n    const {number, resetBIP32Path} = this.props;\n    resetBIP32Path(number);\n  }\n\n  //\n  // Public Key\n  //\n\n\n  renderPublicKey = () => {\n    const { publicKeyImporter } = this.props;\n    return (\n      <div>\n        <p>The following public key was imported:</p>\n        <Grid container justify=\"center\">\n          <Copyable text={publicKeyImporter.publicKey}>\n            <code>{publicKeyImporter.publicKey}</code>\n          </Copyable>\n        </Grid>\n        {this.renderBIP32Path()}\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            size=\"small\"\n            onClick={() => {this.reset(publicKeyImporter.method === HERMIT);}}\n          >\n            Remove Public Key\n          </Button>\n        </Box>\n      </div>\n    );\n  }\n\n  validateAndSetPublicKey = (publicKey, errback, callback) => {\n    const {number, publicKeyImporters, setPublicKey} = this.props;\n    const error = validatePublicKey(publicKey);\n    setPublicKey(number, publicKey);\n    if (error) {\n      errback && errback(error);\n    } else {\n      if (publicKey && Object.values(publicKeyImporters).find((publicKeyImporter, publicKeyImporterIndex) => (\n        publicKeyImporterIndex !== (number - 1) && publicKeyImporter.publicKey === publicKey\n      ))) {\n        errback && errback('This public key has already been imported.');\n      } else {\n        errback && errback('');\n        this.finalize();\n        callback && callback();\n      }\n    }\n  }\n\n}\n\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.settings,\n    ...state.address,\n    ...{ publicKeyImporter: state.address.publicKeyImporters[ownProps.number] },\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setPublicKeyImporterName,\n  setBIP32Path: setPublicKeyImporterBIP32Path,\n  resetBIP32Path: resetPublicKeyImporterBIP32Path,\n  setMethod: setPublicKeyImporterMethod,\n  setPublicKey: setPublicKeyImporterPublicKey,\n  setFinalized: setPublicKeyImporterFinalized,\n  moveUp: movePublicKeyImporterUp,\n  moveDown: movePublicKeyImporterDown,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps,)(PublicKeyImporter);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Grid, Box } from '@material-ui/core';\nimport {connect} from \"react-redux\";\n\n// Components\nimport NetworkPicker from '../NetworkPicker';\nimport QuorumPicker from '../QuorumPicker';\nimport AddressTypePicker from '../AddressTypePicker';\nimport AddressGenerator from './AddressGenerator';\nimport PublicKeyImporter from './PublicKeyImporter';\nimport ClientPicker from '../ClientPicker';\nimport BitcoindAddressImporter from '../BitcoindAddressImporter';\n\nimport '../styles.css';\n\nclass CreateAddress extends React.Component {\n\n  static propTypes = {\n    totalSigners: PropTypes.number.isRequired,\n  };\n\n  render = () => {\n    const { address } = this.props\n    return (\n      <Box mt={2}>\n        <Grid container spacing={3}>\n          <Grid item md={8}>\n\n            {this.renderPublicKeyImporters()}\n\n            <Box mt={2}><AddressGenerator /></Box>\n\n          </Grid>\n          <Grid item md={4}>\n            <Box><QuorumPicker /></Box>\n            <Box mt={2}><AddressTypePicker /></Box>\n            <Box mt={2}><NetworkPicker /></Box>\n            {address !== \"\" && this.renderClientPicker()}\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  }\n\n  renderClientPicker = () => {\n    const { address } = this.props\n    return (\n      <Box mt={2}><ClientPicker\n        publicNotes={<span>If you plan to use this address with your own bitcoind node\n          you can import the address created here by switching for \"Public\" to \"Private\".\n          Otherwise no action is needed here.\n        </span>}\n        privateNotes={<div><BitcoindAddressImporter\n          addresses={[address]}/></div>}\n      /></Box>\n\n    )\n  }\n\n  renderPublicKeyImporters = () => {\n    const {totalSigners} = this.props;\n    const publicKeyImporters = [];\n    for (let publicKeyImporterNum = 1; publicKeyImporterNum  <= totalSigners; publicKeyImporterNum++) {\n      publicKeyImporters.push(\n        <Box key={publicKeyImporterNum} mt={publicKeyImporterNum===1 ? 0 : 2}>\n          <PublicKeyImporter number={publicKeyImporterNum} />\n        </Box>\n      );\n    }\n    return publicKeyImporters;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...{totalSigners: state.settings.totalSigners},\n    ...state.address,\n  };\n}\n\nexport default connect(mapStateToProps)(CreateAddress);\n","export const CHOOSE_CONFIRM_OWNERSHIP = \"CHOOSE_CONFIRM_OWNERSHIP\";\nexport const SET_OWNERSHIP_MULTISIG               = \"SET_OWNERSHIP_MULTISIG\";\nexport const RESET_PUBLIC_KEY_IMPORTER            = \"RESET_PUBLIC_KEY_IMPORTER\";\nexport const RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH = \"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_BIP32_PATH   = \"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_METHOD       = \"SET_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY   = \"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY\";\n\nexport function chooseConfirmOwnership() {\n  return {\n    type: CHOOSE_CONFIRM_OWNERSHIP,\n  };\n}\n\nexport function setOwnershipMultisig(value) {\n  return {\n    type: SET_OWNERSHIP_MULTISIG,\n    value,\n  };\n}\n\nexport function resetPublicKeyImporter() {\n  return {\n    type: RESET_PUBLIC_KEY_IMPORTER,\n  };\n}\n\nexport function resetPublicKeyImporterBIP32Path() {\n  return {\n    type: RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  };\n}\n\nexport function setPublicKeyImporterBIP32Path(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n    value,\n  };\n}\n\nexport function setPublicKeyImporterMethod(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_METHOD,\n    value,\n  };\n}\n\nexport function setPublicKeyImporterPublicKey(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n    value,\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport BigNumber from 'bignumber.js';\nimport {\n  P2SH,\n  P2SH_P2WSH,\n  P2WSH,\n  generateMultisigFromHex,\n  validateHex,\n  multisigRequiredSigners,\n  multisigTotalSigners,\n} from 'unchained-bitcoin';\nimport { fetchAddressUTXOs } from '../../blockchain';\n\n// Components\nimport {\n  Box,\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  Button,\n  TextField,\n  FormHelperText,\n} from '@material-ui/core';\nimport MultisigDetails from \"../MultisigDetails\";\nimport BitcoindAddressImporter from \"../BitcoindAddressImporter\";\n\n// Actions\nimport {\n  setFrozen,\n} from '../../actions/settingsActions';\nimport {\n  choosePerformSpend,\n  setRequiredSigners,\n  setTotalSigners,\n  setInputs,\n} from '../../actions/transactionActions';\nimport {\n  chooseConfirmOwnership,\n  setOwnershipMultisig,\n} from \"../../actions/ownershipActions\";\n\nclass ScriptEntry extends React.Component {\n\n  static propTypes = {\n    network: PropTypes.string.isRequired,\n    client: PropTypes.object.isRequired,\n    setFrozen: PropTypes.func.isRequired,\n    setRequiredSigners: PropTypes.func.isRequired,\n    setTotalSigners: PropTypes.func.isRequired,\n    setInputs: PropTypes.func.isRequired,\n    addressType: PropTypes.string.isRequired,\n    setOwnershipMultisig: PropTypes.func.isRequired,\n    chosePerformSpend: PropTypes.bool.isRequired,\n    choseConfirmOwnership: PropTypes.bool.isRequired,\n  };\n\n  state = {\n    scriptHex: '',\n    scriptError: '',\n    fetchUTXOsError: '',\n    fetchedUTXOs: false,\n  };\n\n  disabled = () => {\n\n  }\n\n  render() {\n    const { scriptHex, scriptError, fetchedUTXOs } = this.state;\n\n    return (\n      <Card>\n        <CardHeader title={`Enter ${this.scriptTitle()} Script`} />\n        <CardContent>\n          <form>\n            <TextField\n              fullWidth\n              multiline\n              autoFocus\n              variant=\"outlined\"\n              label={`${this.scriptTitle()} Script`}\n              value={scriptHex}\n              rows={5}\n              onChange={this.handleScriptChange}\n              disabled={fetchedUTXOs && (! this.hasFetchUTXOsError())}\n              helperText={scriptError}\n              error={scriptError!==''}\n            />\n          </form>\n\n          {(scriptHex !== '' && !this.hasScriptError())\n           ?\n           this.renderDetails()\n           :\n           <p>Enter a valid {this.scriptName()} script to generate an address to spend funds from.</p>}\n\n\n        </CardContent>\n\n      </Card>\n    );\n  }\n\n  hasScriptError = () => (this.state.scriptError !== '')\n  hasFetchUTXOsError = () => (this.state.fetchUTXOsError !== '')\n  hasError = () => (this.hasScriptError() || this.hasFetchUTXOsError())\n\n  //\n  // Script\n  //\n\n  scriptName = () => {\n    const {addressType} = this.props;\n    switch (addressType) {\n    case P2SH:\n      return \"redeem\";\n    case P2SH_P2WSH:\n      return \"witness\";\n    case P2WSH:\n      return \"witness\";\n    default:\n      return null;\n    }\n  }\n\n  scriptTitle = () => {\n    const scriptName = this.scriptName();\n    return scriptName.charAt(0).toUpperCase() + scriptName.substring(1);\n  }\n\n  handleScriptChange = (event) => {\n    const scriptHex = event.target.value;\n    let scriptError = '';\n\n    if (scriptHex === '') {\n      scriptError = `${this.scriptTitle()} script cannot be blank.`;\n    }\n\n    if (scriptError === '' && (scriptHex.includes('\\n') || scriptHex.includes('\\t') || scriptHex.includes(' '))) {\n      scriptError = `${this.scriptTitle()} script should not contain spaces, tabs, or newlines.`;\n    }\n\n    if (scriptError === '') {\n      const hexError = validateHex(scriptHex);\n      if (hexError !== '') {\n        scriptError = `${this.scriptTitle()} script is not valid hex.`;\n      }\n    }\n\n    if (scriptHex !== '' && scriptError === '') {\n      try {\n        this.generateMultisig(scriptHex);\n      } catch (parseError) {\n        console.error(parseError);\n        scriptError = `Failed to parse ${this.scriptName()} script.`;\n      }\n    }\n\n    this.setState({\n      scriptHex,\n      scriptError,\n      fetchUTXOsError: '',\n      fetchedUTXOs: false,\n    });\n  };\n\n  generateMultisig = (scriptHex) => {\n    const {network, addressType} = this.props;\n    if (! scriptHex) {\n      scriptHex = this.state.scriptHex;\n    }\n    return generateMultisigFromHex(network, addressType, scriptHex);\n  }\n\n  //\n  // Details\n  //\n\n  renderDetails = () => {\n    const { fetchUTXOsError } = this.state;\n    const { chosePerformSpend, choseConfirmOwnership, client } = this.props;\n    const multisig = this.generateMultisig();\n    const buttonsDisabled = (chosePerformSpend || choseConfirmOwnership);\n    return (\n      <div>\n        <MultisigDetails multisig={multisig} />\n\n        <Box mt={2}>\n\n          <Grid container spacing={3}>\n\n            <Grid item>\n              <Button variant=\"contained\" color=\"primary\" size=\"large\" onClick={this.performSpend} disabled={buttonsDisabled}>Spend from this address</Button>\n            </Grid>\n\n            <Grid item>\n              <Button variant=\"contained\" size=\"large\" onClick={this.confirmOwnership} disabled={buttonsDisabled}>Confirm ownership</Button>\n            </Grid>\n\n          </Grid>\n\n          <FormHelperText error>{fetchUTXOsError}</FormHelperText>\n\n        </Box>\n        {\n          client.type === \"private\" &&\n          <Box mt={2}>\n            <BitcoindAddressImporter addresses={[multisig.address]} autoImport={true}/>\n          </Box>\n        }\n      </div>\n    );\n  }\n\n  //\n  // Perform Spend\n  //\n\n  performSpend = async () => {\n    const {setRequiredSigners, setTotalSigners, setInputs, setFrozen, choosePerformSpend} = this.props;\n    const multisig = this.generateMultisig();\n    const fetchUTXOsResult = await this.fetchUTXOs(multisig);\n    if (fetchUTXOsResult) {\n      const {utxos, inputsTotalSats} = fetchUTXOsResult;\n      let fetchUTXOsError = '';\n      if (inputsTotalSats.isLessThanOrEqualTo(0)) {\n        fetchUTXOsError = \"This address has a zero balance.\";\n      }\n      this.setState({\n        fetchedUTXOs: true,\n        fetchUTXOsError,\n      });\n      if (fetchUTXOsError === '') {\n        setInputs(utxos);\n        setRequiredSigners(multisigRequiredSigners(multisig));\n        setTotalSigners(multisigTotalSigners(multisig));\n        setFrozen(true);\n        choosePerformSpend();\n      }\n    } else {\n      this.setState({\n        fetchedUTXOs: false,\n        fetchUTXOsError: \"Failed to fetch UTXOs.\",\n      });\n    }\n  }\n\n  fetchUTXOs = async (multisig) => {\n    const {network, client} = this.props;\n    let utxos = null;\n    try {\n      utxos = await fetchAddressUTXOs(multisig.address, network, client);\n    } catch(e) {\n      console.error(e);\n      return false;\n    }\n    if (utxos !== null) {\n      return {\n        utxos: utxos.map((utxo) => ({...utxo, multisig})),\n        inputsTotalSats: utxos\n          .map((utxo) => utxo.amount)\n          .reduce(\n            (accumulator, currentValue) => accumulator.plus(currentValue),\n            new BigNumber(0)),\n      };\n    }\n    return false;\n  }\n\n  //\n  // Confirm Ownership\n  //\n\n  confirmOwnership = () => {\n    const {chooseConfirmOwnership, setOwnershipMultisig, setFrozen} = this.props;\n    setOwnershipMultisig(this.generateMultisig());\n    chooseConfirmOwnership();\n    setFrozen(true);\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...{client: state.client},\n    ...{\n      choseConfirmOwnership: state.spend.ownership.chosen,\n      chosePerformSpend: state.spend.transaction.chosen,\n    }\n  };\n}\n\nconst mapDispatchToProps = {\n  choosePerformSpend,\n  setFrozen,\n  setInputs,\n  setTotalSigners,\n  setRequiredSigners,\n  chooseConfirmOwnership,\n  setOwnershipMultisig,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ScriptEntry);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  validatePublicKey,\n  validateBIP32Path,\n} from 'unchained-bitcoin';\nimport {\n  TREZOR,\n  LEDGER,\n  HERMIT,\n} from \"unchained-wallets\";\n\n// Components\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { styled } from '@material-ui/core/styles';\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Select,\n  MenuItem,\n  InputLabel,\n  FormControl,\n  Button,\n  Typography,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText\n} from '@material-ui/core';\nimport HardwareWalletPublicKeyImporter from \"../CreateAddress/HardwareWalletPublicKeyImporter\";\nimport HermitPublicKeyImporter from \"../CreateAddress/HermitPublicKeyImporter\";\n\n// Actions\nimport {\n  resetPublicKeyImporter,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n} from \"../../actions/ownershipActions\";\n\nimport 'react-table/react-table.css';\n\nclass ConfirmOwnership extends React.Component {\n\n  titleRef = React.createRef();\n\n  static propTypes = {\n    publicKeyImporter: PropTypes.shape({}).isRequired,\n    addressType: PropTypes.string.isRequired,\n    network: PropTypes.string.isRequired,\n    publicKeys: PropTypes.array.isRequired,\n    address: PropTypes.string.isRequired,\n    setMethod: PropTypes.func.isRequired,\n    setPublicKey: PropTypes.func.isRequired,\n    setBIP32Path: PropTypes.func.isRequired,\n    resetBIP32Path: PropTypes.func.isRequired,\n    reset: PropTypes.func.isRequired,\n  };\n\n  state = {\n    disableChangeMethod: false,\n  };\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n    this.scrollToTitle();\n  }\n\n  componentDidUpdate = () => {\n    this.scrollToTitle();\n  }\n\n  scrollToTitle = () => {\n    this.titleRef.current.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  render() {\n    const { publicKeyImporter } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = \"public-key-importer-select-label\";\n    return (\n      <Card>\n        <CardHeader ref={this.titleRef} title=\"Confirm Ownership\" />\n        <CardContent>\n          <form>\n            <p>\n              How will you confirm your ownership of this address?\n            </p>\n\n            <FormControl\n              fullWidth={true}>\n              <InputLabel id={labelId}>Select Method</InputLabel>\n\n              <Select\n                labelId\n                id=\"public-key-importer-select\"\n                disabled={disableChangeMethod}\n                value={publicKeyImporter.method}\n                onChange={this.handleMethodChange}\n              >\n                <MenuItem value=\"\">{'< Select method >' }</MenuItem>\n                <MenuItem value={TREZOR}>Trezor</MenuItem>\n                <MenuItem value={LEDGER}>Ledger</MenuItem>\n                <MenuItem value={HERMIT}>Hermit</MenuItem>\n              </Select>\n\n            </FormControl>\n\n            {this.renderImportByMethod()}\n\n            {this.renderConfirmation()}\n\n            {publicKeyImporter.method !== '' &&\n             <Button variant=\"contained\" size=\"small\" color=\"secondary\" role=\"button\" onClick={this.reset}>Start Again</Button>}\n\n          </form>\n\n        </CardContent>\n\n      </Card>\n    );\n  }\n\n  renderImportByMethod = () => {\n    const {network, publicKeyImporter, defaultBIP32Path} = this.props;\n    if (publicKeyImporter.method === HERMIT) {\n      return <HermitPublicKeyImporter\n               publicKeyImporter={publicKeyImporter}\n               validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n               validateAndSetPublicKey={this.validateAndSetPublicKey}\n               resetBIP32Path={this.resetBIP32Path}\n               enableChangeMethod={this.enableChangeMethod}\n               disableChangeMethod={this.disableChangeMethod}\n               reset={this.reset} />;\n    }\n    if (publicKeyImporter.method === TREZOR || publicKeyImporter.method === LEDGER) {\n      return <HardwareWalletPublicKeyImporter\n               network={network}\n               publicKeyImporter={publicKeyImporter}\n               validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n               resetBIP32Path={this.resetBIP32Path}\n               defaultBIP32Path={defaultBIP32Path}\n               validateAndSetPublicKey={this.validateAndSetPublicKey}\n               enableChangeMethod={this.enableChangeMethod}\n               disableChangeMethod={this.disableChangeMethod} />;\n    }\n    return null;\n  }\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { setMethod } = this.props;\n    setMethod(event.target.value);\n    this.reset();\n  }\n\n  disableChangeMethod = () => {\n    this.setState({disableChangeMethod: true});\n  }\n\n  enableChangeMethod = () => {\n    this.setState({disableChangeMethod: false});\n  }\n\n  //\n  // State\n  //\n\n  reset = () => {\n    const { reset } = this.props;\n    reset();\n  }\n\n  //\n  // BIP32 Path\n  //\n\n  resetBIP32Path = () => {\n    const {resetBIP32Path} = this.props;\n    resetBIP32Path();\n  }\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const {setBIP32Path} = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback('');\n      callback();\n    }\n  }\n\n\n  //\n  // Public Keey & Confirmation\n  //\n\n  validateAndSetPublicKey = (publicKey, errback, callback) => {\n    const {setPublicKey} = this.props;\n    const error = validatePublicKey(publicKey);\n    setPublicKey(publicKey);\n    if (error) {\n      errback && errback(error);\n    } else {\n      errback && errback('');\n      callback && callback();\n    }\n  }\n\n  renderConfirmation = () => {\n    const { publicKeys, publicKeyImporter } = this.props;\n    if (publicKeyImporter.publicKey === '') {return null;}\n    if (publicKeys.includes(publicKeyImporter.publicKey)) {\n      const GreenListItemIcon = styled(ListItemIcon)({color: 'green'});\n      return (\n      <List>\n       <ListItem>\n        <GreenListItemIcon>\n          <CheckIcon/>\n        </GreenListItemIcon>\n        <ListItemText>\n        The public key exported at BIP32 path <code>{publicKeyImporter.bip32Path}</code> is present in the provided redeem script.\n        </ListItemText>\n      </ListItem>\n     </List>);\n    } else {\n     return (\n      <List>\n       <ListItem>\n        <ListItemIcon>\n          <Typography color=\"error\">\n            <ClearIcon/>\n          </Typography>\n        </ListItemIcon>\n        <ListItemText>\n        The public key exported at BIP32 path <code>{publicKeyImporter.bip32Path}</code> is not present in the provided redeem script.\n        </ListItemText>\n      </ListItem>\n     </List>);\n    }\n  }\n\n}\n\nfunction mapStateToProps(state, ownProps) {\n  return state.spend.ownership;\n}\n\nconst mapDispatchToProps = {\n  setMethod: setPublicKeyImporterMethod,\n  setBIP32Path: setPublicKeyImporterBIP32Path,\n  setPublicKey: setPublicKeyImporterPublicKey,\n  resetBIP32Path: resetPublicKeyImporterBIP32Path,\n  reset: resetPublicKeyImporter,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmOwnership);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\n// Components\nimport NetworkPicker from '../NetworkPicker';\nimport ClientPicker from '../ClientPicker';\nimport AddressTypePicker from '../AddressTypePicker';\nimport ScriptEntry from './ScriptEntry';\nimport UTXOSet from './UTXOSet';\nimport OutputsForm from './OutputsForm';\nimport SignatureImporter from './SignatureImporter';\nimport Transaction from './Transaction';\nimport {Grid, Box} from \"@material-ui/core\";\nimport ConfirmOwnership from './ConfirmOwnership';\nimport '../styles.css';\n\nclass Spend extends React.Component {\n\n  static propTypes = {\n    transaction: PropTypes.object.isRequired,\n    ownership: PropTypes.object.isRequired,\n    signatureImporters: PropTypes.object.isRequired,\n  };\n\n  render = () => {\n    return (\n      <Box mt={2}>\n        <Grid container spacing={3}>\n          <Grid item md={8}>\n            <Box><ScriptEntry /></Box>\n            {this.renderBody()}\n          </Grid>\n          <Grid item md={4}>\n            <Box><AddressTypePicker /></Box>\n            <Box mt={2}><NetworkPicker /></Box>\n            <Box mt={2}><ClientPicker /></Box>\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  renderBody = () => {\n    const {transaction, ownership} = this.props;\n    if (ownership.chosen) {\n      return <Box mt={2}><ConfirmOwnership /></Box>;\n    } else return (\n      <Box>\n      {\n        this.spendable() &&\n        <Box>\n          <Box mt={2}>\n            <UTXOSet\n              inputs={transaction.inputs}\n              inputsTotalSats={transaction.inputsTotalSats}\n            />\n          </Box>\n          <Box mt={2}><OutputsForm/></Box>\n        </Box>\n      }\n\n      {\n        transaction.finalizedOutputs &&\n        <Box>\n          {this.renderSignatureImporters()}\n        </Box>\n\n      }\n\n      {\n        this.signaturesFinalized() &&\n        <Box mt={2}>\n          <Transaction/>\n        </Box>\n      }\n      </Box>\n\n    )\n  }\n\n  renderSignatureImporters = () => {\n    const {transaction} = this.props;\n    const signatureImporters = [];\n    for (var signatureImporterNum = 1; signatureImporterNum <= transaction.requiredSigners; signatureImporterNum++) {\n      signatureImporters.push(\n        <Box key={signatureImporterNum} mt={2}>\n          <SignatureImporter number={signatureImporterNum} />\n        </Box>\n      );\n    }\n    return signatureImporters;\n  }\n\n  spendable = () => {\n    const {transaction} = this.props;\n    return transaction.inputs.length > 0;\n  }\n\n  signaturesFinalized = () => {\n    const {signatureImporters} = this.props;\n    return Object.values(signatureImporters).length > 0 && Object.values(signatureImporters).every((signatureImporter) => signatureImporter.finalized);\n  }\n\n  confirmOwnership = (value) => {\n    this.setState({addressFinalized: true, confirmOwnership: value});\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return state.spend;\n}\n\nexport default connect(mapStateToProps)(Spend);\n","import React from 'react';\nimport { AppBar, Toolbar, Button,  makeStyles, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nconst Navbar = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n              Caravan\n          </Typography>\n\n          <Button color=\"inherit\" href=\"#/wallet\" target=\"_blank\">Wallet</Button>\n\n          <Button color=\"inherit\" href=\"#/address\" target=\"_blank\">Create</Button>\n\n          <Button color=\"inherit\" href=\"#/spend\" target=\"_blank\">Interact</Button>\n\n          <Button color=\"inherit\" href=\"#/\" target=\"_blank\">Help</Button>\n\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n\n}\n\nexport default Navbar;\n","import React from 'react';\nimport {externalLink} from \"../utils\";\nimport {version} from \"../../package.json\";\n\n// Components\nimport { Grid, Box } from '@material-ui/core';\n\n// Assets\nconst logo = require('../images/logo.png');\n\nconst Footer = () => (\n  <Box mt={2}>\n    <hr />\n    <Grid container alignItems=\"center\">\n\n      <Grid item sm={2}>\n        {externalLink(\n          'https://www.unchained-capital.com',\n          <img\n            src={logo}\n            className=\"logo\"\n            alt=\"Unchained Capital logo\"\n            height=\"32\" />\n        )}\n      </Grid>\n\n      <Grid item  sm={6}>\n        <p>Copyright 2019 by Unchained Capital and released under an MIT license.</p>\n      </Grid>\n\n      <Grid item sm={1}>\n        <p> v{version} </p>\n      </Grid>\n    </Grid>\n\n  </Box>\n\n\n);\n\nexport default Footer;\n","import {Box, Typography} from '@material-ui/core';\nimport React from 'react';\n\nconst reportingURL = 'https://github.com/unchained-capital/caravan/issues'\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null, errorInfo: null };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      errorInfo: errorInfo,\n      error: error\n    })\n  }\n\n  render() {\n    const {error, errorInfo} = this.state;\n    if (errorInfo) {\n      return (\n        <Box m={4}>\n          <Box m={2}>\n            <Typography variant={'h3'} component={'h1'}>Something went wrong.</Typography>\n          </Box>\n          <Box m={2}>\n            <Typography variant={'body1'}>\n              Let us know what happened on <a href={reportingURL} target={'_blank'}>github</a>.\n            </Typography>\n          </Box>\n          <Box mx={2} my={3}>\n            <details style={{ whiteSpace: 'pre-wrap' }}>\n              {error && error.toString()}\n              <br />\n              {errorInfo.componentStack}\n            </details>\n          </Box>\n        </Box>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport {ErrorBoundary}\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\n\n// Components\nimport Help from './Help';\nimport Wallet from './Wallet';\nimport CreateAddress from './CreateAddress';\nimport Spend from './Spend';\nimport Navbar from './Navbar';\nimport Footer from \"./Footer\";\nimport { CssBaseline, Container } from '@material-ui/core';\nimport {ErrorBoundary} from './ErrorBoundry';\n\n\nconst App = () => (\n  <div className=\"App\">\n    <CssBaseline />\n    <Container maxWidth=\"lg\">\n      <Navbar />\n      <ErrorBoundary>\n        <Router>\n          <Switch>\n            <Route path=\"/wallet\" component={Wallet} />\n            <Route path=\"/address\" component={CreateAddress} />\n            <Route path=\"/spend\" component={Spend} />\n            <Route path=\"/\" component={Help} />\n          </Switch>\n        </Router>\n      </ErrorBoundary>\n      <Footer />\n    </Container>\n  </div>\n);\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export function updateState(state, change) {\n    return {\n\t    ...state,\n\t    ...change,\n    };\n}\n","import {\n  MAINNET, \n  P2SH,\n} from \"unchained-bitcoin\";\n\nimport { updateState } from './utils';\nimport {\n  SET_NETWORK,\n  SET_TOTAL_SIGNERS,\n  SET_REQUIRED_SIGNERS,\n  SET_ADDRESS_TYPE,\n  SET_FROZEN,\n} from '../actions/settingsActions';\n\nconst initialState = {\n  network: MAINNET,\n  totalSigners: 3,\n  requiredSigners: 2,\n  addressType: P2SH,\n  frozen: false,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_NETWORK:\n      return updateState(state, { network: action.value });\n    case SET_TOTAL_SIGNERS:\n      return updateState(state, { totalSigners: action.value });\n    case SET_REQUIRED_SIGNERS:\n      return updateState(state, { requiredSigners: action.value });\n    case SET_ADDRESS_TYPE:\n      return updateState(state, { addressType: action.value });\n    case SET_FROZEN:\n      return updateState(state, { frozen: action.value });\n    default:\n      return state;\n  }\n};\n","import { updateState } from './utils';\nimport {\n  SET_CLIENT_TYPE,\n  SET_CLIENT_URL,\n  SET_CLIENT_USERNAME,\n  SET_CLIENT_PASSWORD,\n\n  SET_CLIENT_URL_ERROR,\n  SET_CLIENT_USERNAME_ERROR,\n  SET_CLIENT_PASSWORD_ERROR,\n\n  SET_CLIENT_STATUS,\n} from '../actions/clientActions';\n\nconst initialState = {\n  type: 'public',\n  url: '',\n  username: '',\n  password: '',\n  url_error: '',\n  username_error: '',\n  password_error: '',\n  status: 'unknown',\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_CLIENT_TYPE:\n      return updateState(state, { type: action.value });\n    case SET_CLIENT_URL:\n      return updateState(state, { url: action.value });\n    case SET_CLIENT_USERNAME:\n      return updateState(state, { username: action.value });\n    case SET_CLIENT_PASSWORD:\n      return updateState(state, { password: action.value });\n    case SET_CLIENT_URL_ERROR:\n      return updateState(state, { url_error: action.value });\n    case SET_CLIENT_USERNAME_ERROR:\n      return updateState(state, { username_error: action.value });\n    case SET_CLIENT_PASSWORD_ERROR:\n      return updateState(state, { password_error: action.value });\n\n    case SET_CLIENT_STATUS:\n      return updateState(state, { status: action.value });\n\n    default:\n      return state;\n  }\n};\n","import BigNumber from \"bignumber.js\";\nimport { RESET_NODES_SPEND, SPEND_NODES } from \"../actions/walletActions\";\n\nconst initialNodeState = {\n  present: true,\n  bip32Path: '',\n  publicKeys: [],\n  multisig: {},\n  address: '',\n  balanceSats: new BigNumber(0),\n  utxos: [],\n  change: false,\n  spend: false,\n  fetchedUTXOs: false,\n  fetchUTXOsError: '',\n  addressUsed: false,\n  addressKnown: true,\n};\n\nconst initialState = {\n  nodes: {},\n  trailingEmptyNodes: 0,\n  fetchUTXOsErrors: 0,\n  balanceSats: new BigNumber(0),\n  spendingSats: new BigNumber(0),\n  autoSpend: false,\n};\n\nfunction updateNode(state, action) {\n  const node = {\n    ...initialNodeState,\n    ...(state.nodes[action.value.bip32Path] || {}),\n    ...action.value,\n  };\n  const newNodes = {};\n  newNodes[node.bip32Path] = node;\n\n  const updatedState = {\n    ...state,\n    ...{\n      nodes: {\n        ...state.nodes,\n        ...newNodes,\n      },\n      // balanceSats: state.balanceSats.plus(node.balanceSats),\n    },\n  };\n\n  if (typeof action.value.spend !== 'undefined') {\n    updatedState.spendingSats = action.value.spend ?\n      state.spendingSats.plus(node.balanceSats) :\n      state.spendingSats.minus(node.balanceSats);\n  }\n\n  if (action.value.balanceSats) {\n    updatedState.balanceSats = state.balanceSats.plus(node.balanceSats)\n  }\n\n  let trailingEmptyNodes = 0;\n  let fetchUTXOsErrors = 0;\n  const allBIP32Paths = Object.keys(updatedState.nodes);\n  allBIP32Paths.sort((p1, p2) => {\n    const p1Segments = (p1 || '').split('/');\n    const p2Segments = (p2 || '').split('/');\n    const p1Index = parseInt(p1Segments[2]);\n    const p2Index = parseInt(p2Segments[2]);\n    return p1Index - p2Index;\n  });\n  let nodeFoundWithValue = false\n  for (let i=0; i < allBIP32Paths.length; i++) {\n    const bip32Path = allBIP32Paths[allBIP32Paths.length - (i + 1)];\n    const otherNode = updatedState.nodes[bip32Path];\n    if (otherNode.fetchedUTXOs) {\n      if (otherNode.balanceSats.isEqualTo(0) && !otherNode.addressUsed && !nodeFoundWithValue) {\n        trailingEmptyNodes++;\n      } else nodeFoundWithValue = true\n    }\n    if (otherNode.fetchUTXOsError !== '') {\n      fetchUTXOsErrors++;\n    }\n  }\n  updatedState.trailingEmptyNodes = trailingEmptyNodes;\n  updatedState.fetchUTXOsErrors = fetchUTXOsErrors;\n  return updatedState;\n}\n\nfunction spendNodes(state) {\n  const updatedState = {...state };\n  Object.values(updatedState.nodes).forEach(node => {\n    if (node.spend) {\n      updatedState.balanceSats = updatedState.balanceSats.minus(node.balanceSats);\n      node.balanceSats = new BigNumber(0);\n      node.spend = false;\n      node.utxos = [];\n    }\n  })\n  return updatedState;\n\n}\n\nfunction resetSpend(state) {\n  const updatedState = {...state };\n  Object.values(updatedState.nodes).forEach(node => {\n    node.spend = false;\n  })\n  return updatedState;\n}\n\nexport default (actionType) => (state = initialState, action) => {\n  switch (action.type) {\n  case RESET_NODES_SPEND:\n    return resetSpend(state);\n  case SPEND_NODES:\n    return spendNodes(state);\n  case actionType:\n    return updateNode(state, action);\n  default:\n    return state;\n  }\n};\n","import {\n  MAINNET,\n  P2SH,\n  multisigBIP32Root,\n} from \"unchained-bitcoin\";\nimport { updateState } from './utils';\nimport {\n  SET_TOTAL_SIGNERS,\n} from \"../actions/settingsActions\";\nimport {\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME,\n  RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE,\n} from '../actions/extendedPublicKeyImporterActions';\nimport {\n  SET_NETWORK,\n  SET_ADDRESS_TYPE,\n} from '../actions/settingsActions';\n\nconst TEXT = \"text\";\n\nfunction fingerprint(state) {\n  const timestamp = new Date().getTime().toString();\n  const extendedPublicKeys = Object.values(state.extendedPublicKeyImporters).map((extendedPublicKeyImporter) => (extendedPublicKeyImporter.extendedPublicKey)).join('');\n  return `${timestamp}-${extendedPublicKeys}`;\n}\n\nconst initialExtendedPublicKeyImporterState = {\n  name: '',\n  bip32Path: multisigBIP32Root(P2SH, MAINNET),\n  bip32PathModified: false,\n  method: '',\n  extendedPublicKey: '',\n  finalized: false,\n  confliect: false,\n};\n\nconst initialState = {\n  extendedPublicKeyImporters: {\n    1: { ...initialExtendedPublicKeyImporterState, ...{name: \"Extended Public Key 1\"}  },\n    2: { ...initialExtendedPublicKeyImporterState, ...{name: \"Extended Public Key 2\"}  },\n    3: { ...initialExtendedPublicKeyImporterState, ...{name: \"Extended Public Key 3\"}  },\n  },\n  defaultBIP32Path: multisigBIP32Root(P2SH, MAINNET),\n  network: MAINNET,\n  addressType: P2SH,\n  fingerprint: '',\n  finalizedNetwork: '',\n  finalizedAddressType: '',\n  configuring: true,\n};\n\nfunction updateExtendedPublicKeyImporterState(state, action, field) {\n  const extendedPublicKeyImporterChange = {};\n  extendedPublicKeyImporterChange[field] = action.value;\n  const newState = {\n    ...state,\n    ...{nodes: {}},\n  };\n  newState.extendedPublicKeyImporters[action.number] = updateState(state.extendedPublicKeyImporters[action.number], extendedPublicKeyImporterChange);\n  const importCount = Object.values(newState.extendedPublicKeyImporters)\n  .reduce((sum, current) => {\n    return sum + (current.finalized)\n  }, 0)\n  if (importCount === Object.keys(newState.extendedPublicKeyImporters).length) {\n    newState.configuring = false;\n  }\n  setConflict(newState.extendedPublicKeyImporters[action.number] ,state);\n  return updateState(newState, {fingerprint: fingerprint(newState)});\n}\n\nfunction updateTotalSigners(state, action) {\n  const totalSigners = action.value;\n  const extendedPublicKeyImporters = {};\n  for (let extendedPublicKeyImporterNum = 1; extendedPublicKeyImporterNum <= totalSigners; extendedPublicKeyImporterNum++) {\n    extendedPublicKeyImporters[extendedPublicKeyImporterNum] = state.extendedPublicKeyImporters[extendedPublicKeyImporterNum] || {\n      ...initialExtendedPublicKeyImporterState,\n      ...{\n        name: `Extended Public key ${extendedPublicKeyImporterNum}`,\n      },\n    };\n  }\n\n  return {\n    ...state,\n    ...{extendedPublicKeyImporters},\n  };\n}\n\nfunction setConflict(extendedPublicKeyImporter ,state) {\n  if (state.finalizedNetwork) {\n    extendedPublicKeyImporter.conflict = state.finalizedNetwork !== state.network || state.finalizedAddressType !== state.addressType;\n  }\n}\n\nfunction updateImporterPaths(state, newState, bip32Path) {\n  for (let extendedPublicKeyImporterNum = 1; extendedPublicKeyImporterNum <= Object.values(state.extendedPublicKeyImporters).length; extendedPublicKeyImporterNum++) {\n    const extendedPublicKeyImporter = newState.extendedPublicKeyImporters[extendedPublicKeyImporterNum];\n    if (! extendedPublicKeyImporter.bip32PathModified) {\n      if (!extendedPublicKeyImporter.finalized) extendedPublicKeyImporter.bip32Path = bip32Path;\n    }\n    setConflict(extendedPublicKeyImporter, newState);\n  }\n}\n\nfunction updateNetwork(state, action) {\n  const addressType = state.addressType;\n  const network = action.value;\n  const bip32Path = multisigBIP32Root(addressType, network);\n  const newState = {...state, ...{network, defaultBIP32Path: bip32Path}};\n  updateImporterPaths(state, newState, bip32Path);\n  return newState;\n}\n\nfunction updateAddressType(state, action) {\n  const addressType = action.value;\n  const network = state.network;\n  const bip32Path = multisigBIP32Root(addressType, network);\n  const newState = {...state, ...{addressType, defaultBIP32Path: bip32Path}};\n  updateImporterPaths(state, newState, bip32Path);\n  return newState;\n}\n\nfunction updateFinalizedSettings(state, action) {\n  const newState = {...state}\n  if (action.value === true && state.finalizedNetwork === '' && newState.extendedPublicKeyImporters[action.number].method !== TEXT) {\n    newState.finalizedNetwork = state.network;\n    newState.finalizedAddressType = state.addressType;\n  } else if (action.value === false && state.finalizedNetwork !== '') {\n    const finalizedCount = Object.values(state.extendedPublicKeyImporters).reduce((count, importer) => {\n      if (importer.finalized === true && importer.method !== TEXT) return count+1; else return count\n    }, 0);\n    if (finalizedCount === 1) { // last one to be removed\n      newState.finalizedNetwork = '';\n      newState.finalizedAddressType = '';\n      Object.values(newState.extendedPublicKeyImporters).forEach(importer => importer.conflict = false);\n    }\n  }\n  return newState;\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n  case SET_NETWORK:\n    return updateNetwork(state, action);\n  case SET_ADDRESS_TYPE:\n    return updateAddressType(state, action);\n  case SET_TOTAL_SIGNERS:\n    return updateTotalSigners(state, action);\n  case SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME:\n    return updateExtendedPublicKeyImporterState(state, action, 'name');\n  case SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n    return updateExtendedPublicKeyImporterState(\n      updateExtendedPublicKeyImporterState(state, action, 'bip32Path'),\n      {number: action.number, value: true},\n      \"bip32PathModified\");\n  case RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n    return updateExtendedPublicKeyImporterState(\n      updateExtendedPublicKeyImporterState(state, {number: action.number, value: state.defaultBIP32Path}, 'bip32Path'),\n      {number: action.number, value: false},\n      \"bip32PathModified\");\n  case SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD:\n    return updateExtendedPublicKeyImporterState(state, action, 'method');\n  case SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY:\n    return updateExtendedPublicKeyImporterState(state, action, 'extendedPublicKey');\n  case SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED:\n    return updateExtendedPublicKeyImporterState(updateFinalizedSettings(state, action), action, 'finalized');\n  case SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE:\n    return {...state, ...{configuring: action.value}};\n  default:\n    return state;\n  }\n};\n","import {\n  MAINNET,\n  P2SH,\n  multisigBIP32Path,\n} from \"unchained-bitcoin\";\nimport { updateState } from './utils';\nimport {\n  SET_TOTAL_SIGNERS,\n} from \"../actions/settingsActions\";\nimport {\n  SET_NETWORK,\n  SET_ADDRESS_TYPE,\n} from '../actions/settingsActions';\nimport {\n  SET_PUBLIC_KEY_IMPORTER_NAME,\n  RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n  SET_PUBLIC_KEY_IMPORTER_FINALIZED,\n  MOVE_PUBLIC_KEY_IMPORTER_UP,\n  MOVE_PUBLIC_KEY_IMPORTER_DOWN,\n  SORT_PUBLIC_KEY_IMPORTERS,\n  UPDATE_MULTISIG_ADDRESS\n} from '../actions/publicKeyImporterActions';\n\nconst TEXT = \"text\";\n\nfunction fingerprint(state) {\n  const timestamp = new Date().getTime().toString();\n  const publicKeys = Object.values(state.publicKeyImporters).map((publicKeyImporter) => (publicKeyImporter.publicKey)).join('');\n  return `${timestamp}-${publicKeys}`;\n}\n\nconst initialPublicKeyImporterState = {\n  name: '',\n  bip32Path: multisigBIP32Path(P2SH, MAINNET),\n  bip32PathModified: false,\n  method: '',\n  publicKey: '',\n  finalized: false,\n  conflict: false,\n};\n\nconst initialState = {\n  publicKeyImporters: {\n    1: { ...initialPublicKeyImporterState, ...{name: \"Public Key 1\"} },\n    2: { ...initialPublicKeyImporterState, ...{name: \"Public Key 2\"} },\n    3: { ...initialPublicKeyImporterState, ...{name: \"Public Key 3\"} },\n  },\n  defaultBIP32Path: multisigBIP32Path(P2SH, MAINNET),\n  network: MAINNET,\n  addressType: P2SH,\n  fingerprint: '',\n  finalizedNetwork: '',\n  finalizedAddressType: '',\n  address: '',\n};\n\nfunction movePublicKeyImporterUp(state, action) {\n  if (action.number === 1) { return state; }\n  const newState = {\n    ...state,\n  };\n  const abovePublicKeyImporter = state.publicKeyImporters[action.number-1];\n  const publicKeyImporter = state.publicKeyImporters[action.number];\n  newState.publicKeyImporters[action.number - 1] = publicKeyImporter;\n  newState.publicKeyImporters[action.number] = abovePublicKeyImporter;\n  return updateState(newState, {fingerprint: fingerprint(newState)});\n}\n\n\nfunction movePublicKeyImporterDown(state, action) {\n  if (action.number === Object.values(state.publicKeyImporters).length) { return state; }\n  const newState = {\n    ...state,\n   };\n  const belowPublicKeyImporter = state.publicKeyImporters[action.number+1];\n  const publicKeyImporter = state.publicKeyImporters[action.number];\n  newState.publicKeyImporters[action.number + 1] = publicKeyImporter;\n  newState.publicKeyImporters[action.number] = belowPublicKeyImporter;\n  return updateState(newState, {fingerprint: fingerprint(newState)});\n}\n\nfunction sortPublicKeyImporters(state, action) {\n  const publicKeyImporters = Object.values(state.publicKeyImporters);\n  const sortedPublicKeys = publicKeyImporters.map((publicKeyImporter) => publicKeyImporter.publicKey).sort();\n  const sortedPublicKeyImporters = sortedPublicKeys.map((publicKey) => {\n    return publicKeyImporters.find((publicKeyImporter) => publicKeyImporter.publicKey === publicKey);\n  });\n  const publicKeyImportersChange = {};\n  for (var publicKeyImporterNum=1; publicKeyImporterNum <= sortedPublicKeyImporters.length; publicKeyImporterNum++) {\n    publicKeyImportersChange[publicKeyImporterNum] = sortedPublicKeyImporters[publicKeyImporterNum - 1];\n  }\n\n  const newState = {\n    ...state,\n    ...{publicKeyImporters: publicKeyImportersChange},\n  };\n  return updateState(newState, {fingerprint: fingerprint(newState)});\n}\n\nfunction updatePublicKeyImporterState(state, action, field) {\n  const publicKeyImporterChange = {};\n  publicKeyImporterChange[field] = action.value;\n  const newState = {\n    ...state,\n  };\n  newState.publicKeyImporters[action.number] = updateState(state.publicKeyImporters[action.number], publicKeyImporterChange);\n  setConflict(newState.publicKeyImporters[action.number] ,state);\n  return updateState(newState, {fingerprint: fingerprint(newState)});\n}\n\nfunction updateTotalSigners(state, action) {\n  const totalSigners = action.value;\n  const publicKeyImporters = {};\n  for (let publicKeyImporterNum = 1; publicKeyImporterNum <= totalSigners; publicKeyImporterNum++) {\n    publicKeyImporters[publicKeyImporterNum] = state.publicKeyImporters[publicKeyImporterNum] || {\n      ...initialPublicKeyImporterState,\n      ...{\n        name: `Public Key ${publicKeyImporterNum}`,\n      },\n    };\n  }\n  const newState = {\n    ...state,\n    ...{publicKeyImporters, stub: action.type},\n  };\n  return updateState(newState, {fingerprint: fingerprint(newState)});\n}\n\nfunction setConflict(publicKeyImporter ,state) {\n  if (state.finalizedNetwork) {\n    publicKeyImporter.conflict = state.finalizedNetwork !== state.network || state.finalizedAddressType !== state.addressType;\n  }\n}\n\nfunction updateImporterPaths(state, newState, bip32Path) {\n  for (let publicKeyImporterNum = 1; publicKeyImporterNum <= Object.values(state.publicKeyImporters).length; publicKeyImporterNum++) {\n    const publicKeyImporter = newState.publicKeyImporters[publicKeyImporterNum];\n    if (!publicKeyImporter.bip32PathModified) {\n      if (!publicKeyImporter.finalized) publicKeyImporter.bip32Path = bip32Path;\n    }\n    setConflict(publicKeyImporter, newState);\n  }\n}\n\nfunction updateNetwork(state, action) {\n  const network = action.value;\n  const addressType = state.addressType;\n  const bip32Path = multisigBIP32Path(addressType, network);\n  const newState = {...state, ...{network, defaultBIP32Path: bip32Path}};\n  updateImporterPaths(state, newState, bip32Path);\n  return newState;\n}\n\nfunction updateAddressType(state, action) {\n  const network = state.network;\n  const addressType = action.value;\n  const bip32Path = multisigBIP32Path(addressType, network);\n  const newState = {...state, ...{addressType, defaultBIP32Path: bip32Path}};\n  updateImporterPaths(state, newState, bip32Path);\n  return newState;\n}\n\nfunction updateFinalizedSettings(state, action) {\n  const newState = {...state}\n  if (action.value === true && state.finalizedNetwork === '' && newState.publicKeyImporters[action.number].method !== TEXT) {\n    newState.finalizedNetwork = state.network;\n    newState.finalizedAddressType = state.addressType;\n  } else if (action.value === false && state.finalizedNetwork !== '') {\n    const finalizedCount = Object.values(state.publicKeyImporters).reduce((count, importer) => {\n      if (importer.finalized === true && importer.method !== TEXT) return count+1; else return count\n    }, 0);\n    if (finalizedCount === 1) { // last one to be removed\n      newState.finalizedNetwork = '';\n      newState.finalizedAddressType = '';\n      Object.values(newState.publicKeyImporters).forEach(importer => importer.conflict = false);\n    }\n  }\n  return newState;\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n  case SET_NETWORK:\n    return updateNetwork(state, action);\n  case SET_ADDRESS_TYPE:\n    return updateAddressType(state, action);\n  case SET_TOTAL_SIGNERS:\n    return updateTotalSigners(state, action);\n  case SET_PUBLIC_KEY_IMPORTER_NAME:\n    return updatePublicKeyImporterState(state, action, 'name');\n  case RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n    return updatePublicKeyImporterState(\n      updatePublicKeyImporterState(state, {number: action.number, value: state.defaultBIP32Path}, 'bip32Path'),\n      {number: action.number, value: false},\n      \"bip32PathModified\");\n  case SET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n    return updatePublicKeyImporterState(\n      updatePublicKeyImporterState(state, action, 'bip32Path'),\n      {number: action.number, value: true},\n      \"bip32PathModified\");\n  case SET_PUBLIC_KEY_IMPORTER_METHOD:\n    return updatePublicKeyImporterState(state, action, 'method');\n  case SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY:\n    return updatePublicKeyImporterState(state, action, 'publicKey');\n  case SET_PUBLIC_KEY_IMPORTER_FINALIZED:\n      return updatePublicKeyImporterState(updateFinalizedSettings(state, action), action, 'finalized');\n  case MOVE_PUBLIC_KEY_IMPORTER_UP:\n    return movePublicKeyImporterUp(state, action);\n  case MOVE_PUBLIC_KEY_IMPORTER_DOWN:\n    return movePublicKeyImporterDown(state, action);\n  case SORT_PUBLIC_KEY_IMPORTERS:\n    return sortPublicKeyImporters(state, action);\n  case UPDATE_MULTISIG_ADDRESS:\n    return updateState(state, {address: action.value});\n  default:\n    return state;\n  }\n};\n","import {\n  UPDATE_AUTO_SPEND,\n  UPDATE_VIEW_ADDRESSES,\n  UPDATE_DEPOSITING,\n  UPDATE_SPENDING,\n  UPDATE_WALLET_NAME,\n  RESET_WALLET_VIEW,\n} from \"../actions/walletActions\"\nimport { updateState } from './utils';\n\nconst initialState = {\n  autoSpend: true,\n  viewAddresses: false,\n  depositing: false,\n  spending: false,\n  walletName: \"My Multisig Wallet\",\n};\n\nfunction resetWalletViews(state) {\n  return updateState(state, {\n    spending: false,\n    depositing: false,\n    viewAddresses: false,\n  });\n}\n\nfunction setUnique(state, key) {\n  const newState = resetWalletViews(state);\n  newState[key] = true;\n  return newState;\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case UPDATE_AUTO_SPEND:\n      return updateState(state, { autoSpend: action.value });\n    case UPDATE_DEPOSITING:\n      return setUnique(state, 'depositing');\n    case UPDATE_SPENDING:\n      return setUnique(state, 'spending');\n    case UPDATE_VIEW_ADDRESSES:\n      return setUnique(state, 'viewAddresses');\n    case UPDATE_WALLET_NAME:\n      return updateState(state, { walletName: action.value });\n    case RESET_WALLET_VIEW:\n      return resetWalletViews(state);\n    default:\n      return state;\n  }\n};\n","import {\n  P2SH,\n  MAINNET,\n  multisigAddressType,\n  multisigBIP32Path,\n  multisigPublicKeys,\n} from \"unchained-bitcoin\";\nimport { updateState } from './utils';\nimport { \n  SET_NETWORK,\n} from \"../actions/settingsActions\";\nimport {\n  CHOOSE_CONFIRM_OWNERSHIP,\n  SET_OWNERSHIP_MULTISIG,\n  RESET_PUBLIC_KEY_IMPORTER,\n  RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n} from '../actions/ownershipActions';\n\nconst initialPublicKeyImporterState = {\n  bip32Path: '',\n  method: '',\n  publicKey: '',\n};\n\nconst initialState = {\n  chosen: false,\n  publicKeyImporter: {...initialPublicKeyImporterState},\n  network: MAINNET,\n  addressType: P2SH,\n  publicKeys: [],\n  address: '',\n  defaultBIP32Path: multisigBIP32Path(P2SH, MAINNET),\n};\n\nfunction updatePublicKeyImporterState(state, action, field) {\n  const publicKeyImporterChange = {};\n  publicKeyImporterChange[field] = action.value;\n  return {\n    ...state,\n    ...{\n      publicKeyImporter: {\n        ...state.publicKeyImporter,\n        ...publicKeyImporterChange,\n      }\n    }\n  };\n}\n\nfunction updateMultisig(state, action) {\n  const multisig = action.value;\n  const addressType = multisigAddressType(multisig);\n  const defaultBIP32Path = multisigBIP32Path(addressType, state.network);\n  return {\n    ...state,\n    ...{\n      network: state.network,\n      addressType,\n      publicKeys: multisigPublicKeys(multisig),\n      address: multisig.address,\n      defaultBIP32Path,\n    },\n  };\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n  case CHOOSE_CONFIRM_OWNERSHIP:\n    return updateState(state, {chosen: true});\n  case SET_NETWORK:\n    return updateState(state, {network: action.value});\n  case SET_OWNERSHIP_MULTISIG:\n    return updateMultisig(state, action);\n  case SET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n    const keyResetState = updatePublicKeyImporterState(state, {value: ''}, \"publicKey\");\n    return updatePublicKeyImporterState(keyResetState, action, \"bip32Path\");\n  case SET_PUBLIC_KEY_IMPORTER_METHOD:\n    return updatePublicKeyImporterState(state, action, \"method\");\n  case SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY:\n    return updatePublicKeyImporterState(state, action, \"publicKey\");\n  case RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n    return updatePublicKeyImporterState(state, {value: state.defaultBIP32Path}, \"bip32Path\");\n  case RESET_PUBLIC_KEY_IMPORTER:\n    return {\n      ...state,\n      ...{\n        publicKeyImporter: {\n          ...state.publicKeyImporter,\n          ...{bip32Path: state.defaultBIP32Path, publicKey: ''}\n        }\n      }\n    };\n  default:\n    return state;\n  }\n};\n","import { updateState } from './utils';\nimport {\n  RESET_SIGNATURES,\n  \n  SET_SIGNATURE_IMPORTER_NAME,\n  SET_SIGNATURE_IMPORTER_METHOD,\n  SET_SIGNATURE_IMPORTER_BIP32_PATH,\n  SET_SIGNATURE_IMPORTER_SIGNATURE,\n  SET_SIGNATURE_IMPORTER_PUBLIC_KEYS,\n  SET_SIGNATURE_IMPORTER_FINALIZED,\n  SET_SIGNATURE_IMPORTER_COMPLETE,\n} from '../actions/signatureImporterActions';\nimport {\n  SET_REQUIRED_SIGNERS,\n} from \"../actions/transactionActions\";\n\nconst initialSignatureImporterState = {\n  name: '',\n  method: '',\n  publicKeys: [],\n  signature: [],\n  bip32Path: '',\n  finalized: false,\n};\n\nconst initialState = {};\n\nfunction setRequiredSigners(state, action) {\n  const signatureImporters = {};\n  for (let signatureImporterNum=1; signatureImporterNum <= action.value; signatureImporterNum++) {\n    signatureImporters[signatureImporterNum] = {\n      ...initialSignatureImporterState,\n      ...{name: `Signature ${signatureImporterNum}`},\n    };\n  }\n  return {\n    ...state,\n    ...signatureImporters,\n  };\n}\n\nfunction updateSignatureImporterState(state, action, field) {\n  const signatureImporterChange = {};\n  signatureImporterChange[field] = action.value;\n  const newState = {\n    ...state,\n  };\n  newState[action.number] = updateState(state[action.number], signatureImporterChange);\n  return newState;\n}\n\nfunction finalizeSignatureImporterState(state, action) {\n  const newState = {\n    ...state,\n  };\n  newState[action.number] = updateState(state[action.number], action.value);\n  return newState;\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n  case RESET_SIGNATURES:\n    return {...initialState};\n  case SET_REQUIRED_SIGNERS:\n    return setRequiredSigners(state, action);\n  case SET_SIGNATURE_IMPORTER_NAME:\n    return updateSignatureImporterState(state, action, \"name\");\n  case SET_SIGNATURE_IMPORTER_METHOD:\n    return updateSignatureImporterState(state, action, \"method\");\n  case SET_SIGNATURE_IMPORTER_BIP32_PATH:\n    return updateSignatureImporterState(state, action, \"bip32Path\");\n  case SET_SIGNATURE_IMPORTER_SIGNATURE:\n    return updateSignatureImporterState(state, action, \"signature\");\n  case SET_SIGNATURE_IMPORTER_PUBLIC_KEYS:\n    return updateSignatureImporterState(state, action, \"publicKeys\");\n  case SET_SIGNATURE_IMPORTER_FINALIZED:\n    return updateSignatureImporterState(state, action, \"finalized\");\n  case SET_SIGNATURE_IMPORTER_COMPLETE:\n    return finalizeSignatureImporterState(state, action);\n  \n  default:\n    return state;\n  }\n};\n","import BigNumber from 'bignumber.js';\nimport { updateState } from './utils';\nimport {\n  MAINNET,\n  P2SH,\n  estimateMultisigTransactionFee,\n  estimateMultisigTransactionFeeRate,\n  validateFeeRate,\n  validateFeeBTC,\n  validateOutputAmountBTC,\n  satoshisToBitcoins,\n  bitcoinsToSatoshis,\n  validateAddress,\n  unsignedMultisigTransaction,\n} from \"unchained-bitcoin\";\n\nimport {\n  SET_NETWORK,\n  SET_ADDRESS_TYPE,\n} from \"../actions/settingsActions\";\nimport {\n  CHOOSE_PERFORM_SPEND,\n\n  SET_REQUIRED_SIGNERS,\n  SET_TOTAL_SIGNERS,\n\n  SET_INPUTS,\n\n  ADD_OUTPUT,\n  SET_OUTPUT_ADDRESS,\n  SET_OUTPUT_AMOUNT,\n  DELETE_OUTPUT,\n\n  SET_FEE_RATE,\n  SET_FEE,\n\n  FINALIZE_OUTPUTS,\n  RESET_OUTPUTS,\n\n  SET_TXID,\n  RESET_TRANSACTION,\n\n  SET_IS_WALLET\n} from '../actions/transactionActions';\n\nfunction sortInputs(a, b) {\n  var x = a.txid.toLowerCase();\n  var y = b.txid.toLowerCase();\n  if (x < y) {return -1;}\n  if (x > y) {return 1;}\n  if (a.n < b.n) {return -1;}\n  if (a.n > b.n) {return 1;}\n  return 0;\n};\n\nconst initialOutputState  = {\n  address: '',\n  amount: '',\n  amountSats: '',\n  addressError: '',\n  amountError: '',\n};\n\nconst initialOutputsState = [\n  {...initialOutputState}\n];\n\nconst initialState = {\n  chosen: false,\n  network: MAINNET,\n  inputs: [],\n  inputsTotalSats: new BigNumber(0),\n  outputs: [...initialOutputsState],\n  feeRate: '',\n  feeRateError: '',\n  fee: '',\n  feeError: '',\n  finalizedOutputs: false,\n  txid: '',\n  balanceError: '',\n  addressType: P2SH,\n  requiredSigners: 2,\n  totalSigners: 3,\n  unsignedTransaction: {},\n  isWallet: false,\n};\n\nfunction updateInputs(state, action) {\n  const inputsTotalSats = action.value\n        .map((input) => input.amountSats)\n        .reduce(\n          (accumulator, currentValue) => accumulator.plus(currentValue),\n          new BigNumber(0));\n  return updateState(\n    state,\n    {\n      inputs: action.value.sort(sortInputs),\n      inputsTotalSats,\n    });\n}\n\nfunction validateTransaction(state) {\n  if (\n    state.outputs.find((output) => (output.addressError !== '' || output.amountError  !== ''))\n      || state.feeError !== ''\n      || state.feeRateError !== ''\n      || state.inputs.length === 0\n  ) {\n    return {\n      ...state,\n      ...{balanceError: \"\"},\n    };\n  }\n  const feeSats = bitcoinsToSatoshis(new BigNumber(state.fee));\n  const outputTotalSats = state.outputs\n        .map((output) => bitcoinsToSatoshis(new BigNumber(output.amount || 0)))\n        .reduce(\n          (accumulator, currentValue) => accumulator.plus(currentValue),\n          new BigNumber(0));\n  if (! state.inputsTotalSats.isEqualTo(outputTotalSats.plus(feeSats))) {\n    const diff = outputTotalSats.plus(feeSats).minus(state.inputsTotalSats);\n    let balanceError;\n    if (diff.isNaN()) {\n      balanceError = \"Cannot calculate total.\";\n    } else{\n      const action = diff.isLessThan(0) ? 'Increase' : 'Decrease';\n      balanceError =`${action} by ${satoshisToBitcoins(diff.absoluteValue()).toFixed(8)}.`;\n    }\n    return {\n      ...state,\n      ...{balanceError},\n    };\n  } else {\n    return {\n      ...state,\n      ...{balanceError: ''},\n    };\n  }\n}\n\nfunction setFeeForRate(state, feeRateString, nout) {\n  return satoshisToBitcoins(estimateMultisigTransactionFee(\n    {\n      addressType: state.addressType,\n      numInputs: state.inputs.length,\n      numOutputs: nout,\n      m: state.requiredSigners,\n      n: state.totalSigners,\n      feesPerByteInSatoshis: feeRateString\n    })).toString()\n}\n\nfunction updateFeeRate(state, action) {\n  const feeRateString = action.value;\n  const feeRateError = validateFeeRate(feeRateString);\n  const fee = (\n    feeRateError === '' ?\n      setFeeForRate(state, feeRateString, state.outputs.length) :\n      '');\n\n  return updateState(state, {\n    feeRate: feeRateString,\n    feeRateError,\n    fee,\n    feeError: '',\n  });\n}\n\nfunction updateFee(state, action) {\n  const feeString = action.value;\n  const feeError = validateFeeBTC(feeString, state.inputsTotalSats);\n  const feeRate = (\n    feeError === '' ?\n      estimateMultisigTransactionFeeRate(\n        {\n          addressType: state.addressType,\n          numInputs: state.inputs.length,\n          numOutputs: state.outputs.length,\n          m: state.requiredSigners,\n          n: state.totalSigners,\n          feesInSatoshis: bitcoinsToSatoshis(new BigNumber(feeString))\n        }).toString()\n      :\n      '');\n\n  return updateState(state, {\n    fee: feeString,\n    feeError,\n    feeRate,\n    feeRateError: '',\n  });\n}\n\nfunction addOutput(state, action) {\n  const newOutputs = state.outputs.concat({...initialOutputState});\n  return {\n    ...state,\n    ...{outputs: newOutputs, fee: setFeeForRate(state, state.feeRate, newOutputs.length)},\n  };\n}\n\nfunction updateOutputAddress(state, action) {\n  const newOutputs = [...state.outputs];\n  const address = action.value;\n  let error = validateAddress(address, state.network);\n  if (error === '') {\n    for (var inputIndex=0; inputIndex < state.inputs.length; inputIndex++) {\n      const input = state.inputs[inputIndex];\n      if (address === input.address) {\n        error = \"Output address cannot equal input address.\";\n        break;\n      }\n    }\n  }\n  if (error === '') {\n    for (var outputIndex=0; outputIndex < state.outputs.length; outputIndex++) {\n      if (outputIndex !== (action.number - 1)) {\n        if (state.outputs[outputIndex].address === address) {\n          error = \"Duplicate output address.\";\n          break;\n        }\n      }\n    }\n  }\n  newOutputs[action.number - 1].address = address;\n  newOutputs[action.number - 1].addressError = error;\n  return {\n    ...state,\n    ...{outputs: newOutputs},\n  };\n}\n\nfunction updateOutputAmount(state, action) {\n  const newOutputs = [...state.outputs];\n  const amount = action.value;\n  let error = state.inputs.length ? validateOutputAmountBTC(amount, state.inputsTotalSats) : \"\";\n\n  // this is a bit of a hack\n  // this error prevents from setting output amounts in the wellet\n  // a better proposal would be to update at the library level\n  // make seconde argument to validateOutputAmountBTC optional\n  // if not provided, supress error\n  if (state.isWallet && error === \"Output amount is too large.\") error = \"\"\n\n  newOutputs[action.number - 1].amount = amount;\n  newOutputs[action.number - 1].amountError = error;\n  newOutputs[action.number - 1].amountSats = (error ? '' : bitcoinsToSatoshis(new BigNumber(action.value)));\n  return {\n    ...state,\n    ...{outputs: newOutputs},\n  };\n}\n\nfunction deleteOutput(state, action) {\n  const newOutputs = [];\n  for (var i = 0; i < state.outputs.length; i++) {\n    if (i !== (action.number - 1)) {\n      newOutputs.push(state.outputs[i]);\n    }\n  }\n  return {\n    ...state,\n    ...{outputs: newOutputs, fee: setFeeForRate(state, state.feeRate, newOutputs.length)},\n  };\n}\n\nfunction finalizeOutputs(state, action) {\n  const unsignedTransaction = unsignedMultisigTransaction(state.network, state.inputs, state.outputs);\n  return {\n    ...state,\n    ...{finalizedOutputs: action.value, unsignedTransaction},\n  };\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n  case CHOOSE_PERFORM_SPEND:\n    return updateState(state, { chosen: true} );\n  case SET_NETWORK:\n    return updateState(state, { network: action.value });\n  case SET_ADDRESS_TYPE:\n    return updateState(state, { addressType: action.value });\n  case SET_REQUIRED_SIGNERS:\n    return updateState(state, { requiredSigners: action.value });\n  case SET_TOTAL_SIGNERS:\n    return updateState(state, { totalSigners: action.value });\n  case SET_INPUTS:\n    return validateTransaction(updateInputs(state, action));\n  case ADD_OUTPUT:\n    return validateTransaction(addOutput(state, action));\n  case SET_OUTPUT_ADDRESS:\n    return validateTransaction(updateOutputAddress(state, action));\n  case SET_OUTPUT_AMOUNT:\n    return validateTransaction(updateOutputAmount(state, action));\n  case DELETE_OUTPUT:\n    return validateTransaction(deleteOutput(state, action));\n  case SET_FEE_RATE:\n    return validateTransaction(updateFeeRate(state, action));\n  case SET_FEE:\n    return validateTransaction(updateFee(state, action));\n  case FINALIZE_OUTPUTS:\n    return finalizeOutputs(state, action);\n  case RESET_OUTPUTS:\n    return updateState(state, {\n      outputs: initialOutputsState,\n      fee: '',\n      balanceError: '',\n      // FIXME what about feeRate ?\n    });\n  case SET_TXID:\n    return updateState(state, { txid: action.value });\n  case SET_IS_WALLET:\n    return updateState(state, { isWallet: true} );\n  case RESET_TRANSACTION:\n    return updateState(state, initialState)\n  default:\n    return state;\n  }\n};\n","import { combineReducers } from 'redux';\n\nimport settingsReducer from './settingsReducer';\nimport clientReducer from './clientReducer';\nimport braidReducer from './braidReducer';\nimport quorumReducer from './quorumReducer';\nimport addressReducer from './addressReducer';\nimport walletReducer from './walletReducer';\n\nimport ownershipReducer from './ownershipReducer';\nimport signatureImportersReducer from './signatureImportersReducer';\nimport transactionReducer from './transactionReducer';\n\nimport {\n  UPDATE_DEPOSIT_NODE,\n  UPDATE_CHANGE_NODE,\n} from '../actions/walletActions';\n\nconst spendReducers = combineReducers({\n  ownership: ownershipReducer,\n  transaction: transactionReducer,\n  signatureImporters: signatureImportersReducer,\n});\n\nconst walletReducers = combineReducers({\n  deposits: braidReducer(UPDATE_DEPOSIT_NODE),\n  change: braidReducer(UPDATE_CHANGE_NODE),\n  info: walletReducer\n});\n\nconst rootReducers = combineReducers({\n  settings: settingsReducer,\n  client: clientReducer,\n  address: addressReducer,\n  spend: spendReducers,\n  quorum: quorumReducer,\n  wallet: walletReducers,\n});\n\nexport default rootReducers;\n","import 'babel-polyfill';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { Provider } from 'react-redux';\nimport logger from 'redux-logger';\nimport ReduxPromise from 'redux-promise';\nimport thunk from 'redux-thunk';\n\nimport App from './components/App';\nimport registerServiceWorker from './registerServiceWorker';\nimport reducers from './reducers';\n\n/* eslint-disable-next-line no-underscore-dangle */\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(\n    applyMiddleware(logger, ReduxPromise, thunk),\n  ),\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('app'),\n);\nregisterServiceWorker();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feeMagicBtn\":\"styles_feeMagicBtn__3R6H-\",\"utxoTxid\":\"styles_utxoTxid__1oJ63\",\"outputsFormInput\":\"styles_outputsFormInput__2eCJm\",\"unconfirmed\":\"styles_unconfirmed__1u5jD\",\"spent\":\"styles_spent__1ho2q\"};","\"use strict\";\n\nrequire(\"core-js/modules/es.array.join\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.array.slice\");\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toHexString = toHexString;\nexports.validateHex = validateHex;\nexports.satoshisToBitcoins = satoshisToBitcoins;\nexports.bitcoinsToSatoshis = bitcoinsToSatoshis;\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n/**\n * This module provides various utility conversion and validation functions.\n * @module utils\n */\n\n/**\n * Converts a byte array to its hex representation.\n * @param {number[]} byteArray - array of bytes to convert\n * @example\n * const hex = toHexString([255, 0, 15, 16, 31, 32]);\n * console.log(hex) // ff000f101f20\n * @returns {string} hex representation of bytes\n */\n\n\nfunction toHexString(byteArray) {\n  return Array.prototype.map.call(byteArray, function (_byte) {\n    return ('0' + (_byte & 0xFF).toString(16)).slice(-2);\n  }).join('');\n}\n/**\n * Provide validation messages for a hex string.\n * @param {string} inputString - hex string to validate\n * @example\n * const validationError = validateHex('00112233gg');\n * console.log(validationError) // invalid hex - invalid characters\n * @returns {string} empty if valid or corresponding validation message\n */\n\n\nfunction validateHex(inputString) {\n  if (inputString.length % 2) {\n    return 'invalid hex - odd-length string';\n  }\n\n  var re = /^[0-9A-Fa-f]*$/;\n\n  if (!re.test(inputString)) {\n    return 'invalid hex - invalid characters';\n  }\n\n  return '';\n}\n/**\n * Convert a value in satoshis to corresponding value in BTC.\n * @param {BigNumber} num - value in satoshis\n * @example\n * const sats = BigNumber(123450000);\n * const btc = satoshisToBitcoins(sats);\n * console.log(btc); // 1.2345\n * @returns {BigNumber} value in BTC\n */\n\n\nfunction satoshisToBitcoins(num) {\n  return new _bignumber[\"default\"](num).shiftedBy(-8);\n}\n/**\n * Convert a value in BTC to corresponding value in satoshis.\n * @param {BigNumber} num - value in BTC\n * @example\n * const btc = BigNumber(1.2345);\n * const sats = bitcoinsToSatoshis(btc);\n * console.log(sats); // 123450000\n * @returns {BigNumber} value in satoshis\n */\n\n\nfunction bitcoinsToSatoshis(num) {\n  return new _bignumber[\"default\"](num).shiftedBy(8);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.networkData = networkData;\nexports.networkLabel = networkLabel;\nexports.NETWORKS = exports.TESTNET = exports.MAINNET = void 0;\n\nvar bitcoin = require('bitcoinjs-lib');\n/**\n * This module provides network constant enumerations and utility function.\n * @module networks\n */\n\n/**\n * @constant {string} - Constant for selection of the bitcoin mainnet network.\n */\n\n\nvar MAINNET = \"mainnet\";\n/**\n * @constant {string} - Constant for selection of the bitcoin testnet netwrok.\n */\n\nexports.MAINNET = MAINNET;\nvar TESTNET = \"testnet\";\n/**\n * @enum {string} Enumeration of possible values for bitcoin networks ([MAINET]{@link module:networks.MAINNET}|[TESTNET]{@link module:networks.TESTNET}).\n */\n\nexports.TESTNET = TESTNET;\nvar NETWORKS = {\n  MAINNET: MAINNET,\n  TESTNET: TESTNET\n};\n/**\n * Returns network configuration object for the specified network for internal use.\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const key = bip32.fromBase58(extendedPublicKey, networkData(NETWORKS.MAINNET));\n * const child = key.derivePath(\"m/0/0\");\n * @returns {Network} network object for use as a parameter to other functions where needed, do not access directly\n */\n\nexports.NETWORKS = NETWORKS;\n\nfunction networkData(network) {\n  switch (network) {\n    case NETWORKS.MAINNET:\n      return bitcoin.networks.bitcoin;\n\n    case NETWORKS.TESTNET:\n      return bitcoin.networks.testnet;\n\n    default:\n      return bitcoin.networks.testnet;\n  }\n}\n/**\n * Returns human-readable network label for the specified network.\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} network label\n */\n\n\nfunction networkLabel(network) {\n  switch (network) {\n    case NETWORKS.MAINNET:\n      return \"Mainnet\";\n\n    case NETWORKS.TESTNET:\n      return \"Testnet\";\n\n    default:\n      return \"Testnet\";\n  }\n}","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/bondibit/projects/unchained/caravan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.includes\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.object.create\");\n\nrequire(\"core-js/modules/es.object.define-property\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of\");\n\nrequire(\"core-js/modules/es.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.promise\");\n\nrequire(\"core-js/modules/es.reflect.get\");\n\nrequire(\"core-js/modules/es.string.includes\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnsupportedInteraction = exports.WalletInteraction = exports.ERROR = exports.WARNING = exports.INFO = exports.ACTIVE = exports.PENDING = exports.UNSUPPORTED = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _bowser = _interopRequireDefault(require(\"bowser\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/**\n * Unsupported wallet state constant\n * @type {string}\n */\n\n\nvar UNSUPPORTED = \"unsupported\";\n/**\n * Pending wallet state constant\n * @type {string}\n */\n\nexports.UNSUPPORTED = UNSUPPORTED;\nvar PENDING = \"pending\";\n/**\n * Active wallet state constant\n * @type {string}\n */\n\nexports.PENDING = PENDING;\nvar ACTIVE = \"active\";\n/**\n * Info message level constant\n * @type {string}\n */\n\nexports.ACTIVE = ACTIVE;\nvar INFO = \"info\";\n/**\n * Warning message level constant\n * @type {string}\n */\n\nexports.INFO = INFO;\nvar WARNING = \"warning\";\n/**\n * Error message level constant\n * @type {string}\n */\n\nexports.WARNING = WARNING;\nvar ERROR = \"error\";\n/**\n * Base class for wallet interaction.  Derived classes will inherit these methods for\n * messaging and will be extended with additional functionality for key exports and signing.\n * @example\n * class MyWalletInteraction extends WalletInteraction {   *\n *   constructor({network}) {\n *     super({network});\n *     // additional constructor actions\n *   }\n *   // additional class member definitions\n * }\n *\n * const myInteraction = new MyWalletInteraction({network: \"mainnet\"})\n */\n\nexports.ERROR = ERROR;\n\nvar WalletInteraction =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Base class constructor.  Child classes will provide additional options.\n   * @constructor\n   * @param {object} options\n   * @param {string} options.network - bitcoin network\n   */\n  function WalletInteraction(_ref) {\n    var network = _ref.network;\n\n    _classCallCheck(this, WalletInteraction);\n\n    this.network = network;\n    this.environment = _bowser[\"default\"].getParser(window.navigator.userAgent);\n    this.failureText = '';\n    this.failureCode = '';\n  } //\n  // Uses Bowser syntax in a subclass to make assertions about which\n  // environments are supported.\n  //\n  //   isSupported() {\n  //     return this.environment.satisfies({\n  //       // declare browsers per OS\n  //       windows: {\n  //         \"internet explorer\": \">10\",\n  //       },\n  //       macos: {\n  //         safari: \">10.1\"\n  //       },\n  //\n  //       // per platform (mobile, desktop or tablet)\n  //       mobile: {\n  //         safari: '>=9',\n  //         'android browser': '>3.10'\n  //       },\n  //\n  //       // or in general\n  //       chrome: \"~20.1.1432\",\n  //       firefox: \">31\",\n  //       opera: \">=22\",\n  //\n  //       // also supports equality operator\n  //       chrome: \"=20.1.1432\", // will match particular build only\n  //\n  //       // and loose-equality operator\n  //       chrome: \"~20\",        // will match any 20.* sub-version\n  //       chrome: \"~20.1\"       // will match any 20.1.* sub-version (20.1.19 as well as 20.1.12.42-alpha.1)\n  //     });\n  //   }\n  //\n  // See https://github.com/lancedikson/bowser for more details.\n  //\n\n  /**\n   * Override this method for derived classes\n   * @returns {boolean}\n   */\n\n\n  _createClass(WalletInteraction, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return true;\n    }\n    /**\n     * Retrieves default empty messages object for supported states\n     * @returns {object} {pending:[], active:[], unsupported:[]}\n     */\n\n  }, {\n    key: \"messages\",\n    value: function messages() {\n      var messages = {};\n      messages[PENDING] = [];\n      messages[ACTIVE] = [];\n      messages[UNSUPPORTED] = [];\n      return messages;\n    }\n    /**\n     * Determine whether or not any messages are currently available\n     * @example\n     * if (interaction.hasMessages()) {\n     *  // Code to report messages here\n     * }\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"hasMessages\",\n    value: function hasMessages() {\n      return this.messages().length > 0;\n    }\n    /**\n     * Retrieve filtered messages about the wallet\n     * @param {object} options\n     * @param {string} options.walletState - filter by the provided wallet state\n     * @param {string} options.level - filter by the provided message level\n     * @param {string} options.code - filter messages containing this string in the 'code' field\n     * @param {string} options.text - filter messages containing this string in the 'text' field\n     * @example\n     * const messages = interaction.messagesFor({walletState: ACTIVE, level: INFO});\n     * messages.foreEach(msg => console.log(msg.text));\n     * @returns {Array<object>} the filtered list of message objects\n     * @public\n     */\n\n  }, {\n    key: \"messagesFor\",\n    value: function messagesFor(_ref2) {\n      var walletState = _ref2.walletState,\n          level = _ref2.level,\n          code = _ref2.code,\n          text = _ref2.text;\n      var allMessages = this.messages();\n      var messages;\n\n      if (walletState) {\n        messages = allMessages[walletState];\n      } else {\n        messages = allMessages[UNSUPPORTED].concat(allMessages[PENDING]).concat(allMessages[ACTIVE]);\n      }\n\n      var matchingMessages = [];\n\n      for (var i = 0; i < messages.length; i++) {\n        var message = messages[i];\n\n        if (level && message.level !== level) {\n          continue;\n        }\n\n        if (code && !(message.code || '').includes(code)) {\n          continue;\n        }\n\n        if (text && !(message.text || '').includes(text)) {\n          continue;\n        }\n\n        matchingMessages.push(message);\n      }\n\n      return matchingMessages;\n    }\n    /**\n     * Determines if filtered messages are available\n     * @param {object} options\n     * @param {string} options.walletState - filter by the provided wallet state\n     * @param {string} options.level - filter by the provided message level\n     * @param {string} options.code - filter messages containing this string in the 'code' field\n     * @param {string} options.text - filter messages containing this string in the 'text' field\n     * @example\n     * const hasActiveInfo = interaction.hasMessagesFor({walletState: ACTIVE, level: INFO})) {\n     * if (hasActiveInfo) {\n     *  // do something\n     * }\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"hasMessagesFor\",\n    value: function hasMessagesFor(_ref3) {\n      var walletState = _ref3.walletState,\n          level = _ref3.level,\n          code = _ref3.code,\n          text = _ref3.text;\n      return this.messagesFor({\n        walletState: walletState,\n        level: level,\n        code: code,\n        text: text\n      }).length > 0;\n    }\n    /**\n     * Retrieve the first filtered messages about the wallet\n     * @param {object} options\n     * @param {string} options.walletState - filter by the provided wallet state\n     * @param {string} options.level - filter by the provided message level\n     * @param {string} options.code - filter messages containing this string in the 'code' field\n     * @param {string} options.text - filter messages containing this string in the 'text' field\n     * @example\n     * const message = interaction.messageFor({walletState: ACTIVE, level: INFO});\n     * console.log(message.text);\n     * @returns {object} the first filtered message object\n     */\n\n  }, {\n    key: \"messageFor\",\n    value: function messageFor(_ref4) {\n      var walletState = _ref4.walletState,\n          level = _ref4.level,\n          code = _ref4.code,\n          text = _ref4.text;\n      var messages = this.messagesFor({\n        walletState: walletState,\n        level: level,\n        code: code,\n        text: text\n      });\n\n      if (messages.length > 0) {\n        return messages[0];\n      }\n\n      return null;\n    }\n    /**\n     * Retrieve the first filtered messages about the wallet\n     * @param {object} options\n     * @param {string} options.walletState - filter by the provided wallet state\n     * @param {string} options.level - filter by the provided message level\n     * @param {string} options.code - filter messages containing this string in the 'code' field\n     * @param {string} options.text - filter messages containing this string in the 'text' field\n     * @example\n     * const message = interaction.messageFor({walletState: ACTIVE, level: INFO});\n     * console.log(message);\n     * @returns {string} the text for the first filtered message\n     */\n\n  }, {\n    key: \"messageTextFor\",\n    value: function messageTextFor(_ref5) {\n      var walletState = _ref5.walletState,\n          level = _ref5.level,\n          code = _ref5.code,\n          text = _ref5.text;\n      var message = this.messageFor({\n        walletState: walletState,\n        level: level,\n        code: code,\n        text: text\n      });\n      return message ? message.text : null;\n    } // Should return a promise\n\n    /**\n     * implement this in derived class to interact with your device\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      return _regeneratorRuntime.async(function run$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  return WalletInteraction;\n}();\n/**\n * Simple interaction messages for unsupported devices\n * @extends {module:interaction.WalletInteraction}\n */\n\n\nexports.WalletInteraction = WalletInteraction;\n\nvar UnsupportedInteraction =\n/*#__PURE__*/\nfunction (_WalletInteraction) {\n  _inherits(UnsupportedInteraction, _WalletInteraction);\n  /**\n   * @param {object} options\n   * @param {string} options.network - bitcoin network\n   * @param {string} options.failureText - text to describe the nature of the failure\n   * @param {string} options.failureCode - failure code\n   */\n\n\n  function UnsupportedInteraction(_ref6) {\n    var _this;\n\n    var network = _ref6.network,\n        failureText = _ref6.failureText,\n        failureCode = _ref6.failureCode;\n\n    _classCallCheck(this, UnsupportedInteraction);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UnsupportedInteraction).call(this, {\n      network: network\n    }));\n    _this.failureText = failureText;\n    _this.failureCode = failureCode;\n    return _this;\n  }\n\n  _createClass(UnsupportedInteraction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(UnsupportedInteraction.prototype), \"messages\", this).call(this);\n\n      messages[PENDING].push({\n        level: ERROR,\n        code: this.failureCode,\n        text: this.failureText\n      });\n    }\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      return false;\n    }\n  }]);\n\n  return UnsupportedInteraction;\n}(WalletInteraction);\n\nexports.UnsupportedInteraction = UnsupportedInteraction;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = require(\"./utils\");\n\nObject.keys(_utils).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _utils[key];\n    }\n  });\n});\n\nvar _bip = require(\"./bip32\");\n\nObject.keys(_bip).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _bip[key];\n    }\n  });\n});\n\nvar _keys = require(\"./keys\");\n\nObject.keys(_keys).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _keys[key];\n    }\n  });\n});\n\nvar _networks = require(\"./networks\");\n\nObject.keys(_networks).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _networks[key];\n    }\n  });\n});\n\nvar _script = require(\"./script\");\n\nObject.keys(_script).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _script[key];\n    }\n  });\n});\n\nvar _addresses = require(\"./addresses\");\n\nObject.keys(_addresses).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _addresses[key];\n    }\n  });\n});\n\nvar _transactions = require(\"./transactions\");\n\nObject.keys(_transactions).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _transactions[key];\n    }\n  });\n});\n\nvar _multisig = require(\"./multisig\");\n\nObject.keys(_multisig).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _multisig[key];\n    }\n  });\n});\n\nvar _block_explorer = require(\"./block_explorer\");\n\nObject.keys(_block_explorer).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _block_explorer[key];\n    }\n  });\n});","\"use strict\";\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.scriptToOps = scriptToOps;\nexports.scriptToHex = scriptToHex;\n/**\n * This module provides script conversion functions.\n * @module script\n */\n\nvar bitcoin = require('bitcoinjs-lib');\n/**\n * Extracts the asm representation of a script from a Multisig object.\n * @param {Multisig} script - Multisig object to parse\n * @example\n * const redeemMultisig = generateMultisigFromHex(NETWORKS.MAINNET, MULTISIG_ADDRESS_TYPES.P2WSH, redeemScript)\n * console.log(scriptToOps(redeemMultisig)) // OP_0 81aaef2af523f8b269ea9c8337d4fdcc3f982a668c54f63bf2d0d9dda6a662e6\n * @returns {string} asm representation of script\n */\n\n\nfunction scriptToOps(script) {\n  return bitcoin.script.toASM(script.output);\n}\n/**\n * Extracts the hex representation of a script from a Multisig object.\n * @param {Multisig} script - Multisig object to parse\n * @example\n * const redeemMultisig = multisigRedeemScript(multisig)\n * console.log(scriptToHex(redeemMultisig)) // 522102e326263c35e...\n * @returns {string} hex representation of script\n */\n\n\nfunction scriptToHex(script) {\n  return script.output.toString('hex');\n}","\"use strict\";\n\nrequire(\"core-js/modules/es.array.join\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.array.slice\");\n\nrequire(\"core-js/modules/es.array.splice\");\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.number.constructor\");\n\nrequire(\"core-js/modules/es.number.is-nan\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.parse-int\");\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.match\");\n\nrequire(\"core-js/modules/es.string.split\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bip32PathToSequence = bip32PathToSequence;\nexports.bip32SequenceToPath = bip32SequenceToPath;\nexports.validateBIP32Path = validateBIP32Path;\nexports.deriveChildPublicKey = deriveChildPublicKey;\nexports.deriveChildExtendedPublicKey = deriveChildExtendedPublicKey;\nexports.HARDENING_OFFSET = void 0;\n\nvar _utils = require(\"./utils\");\n\nvar _networks = require(\"./networks\");\n/**\n * This module contains various utility functions for converting and validating BIP32 derivation paths.\n * It also provides functions for deriving child public keys and child extended public keys for a given BIP32 derivation path.\n * @module bip32\n */\n\n\nvar bip32 = require('bip32');\n/**\n * Integer representation of the hardened path offset.\n */\n\n\nvar HARDENING_OFFSET = Math.pow(2, 31);\nexports.HARDENING_OFFSET = HARDENING_OFFSET;\nvar BIP32_PATH_REGEX = /^(m\\/)?(\\d+'?\\/)*\\d+'?$/;\nvar BIP32_HARDENED_PATH_REGEX = /^(m\\/)?(\\d+'\\/)*\\d+'$/;\nvar BIP32_UNHARDENED_PATH_REGEX = /^(m\\/)?(\\d+\\/)*\\d+$/;\nvar MAX_BIP32_HARDENED_NODE_INDEX = Math.pow(2, 31) - 1;\nvar MAX_BIP32_NODE_INDEX = Math.pow(2, 32) - 1;\n/**\n * Convert derivation path to an array of integer values representing the derivation sequence.\n * @param {string} pathString - BIP32 derivation path string\n * @example\n * const sequence = bip32PathToSequence(\"m/45'/1/99\");\n * console.log(sequence); // [2147483693, 1, 99]\n * @returns {number[]} the segments of the derivation path sequence as integer values, hardened path values will be segment + 2^31\n */\n\nfunction bip32PathToSequence(pathString) {\n  var pathSegments = pathString.split(\"/\").splice(1);\n  return pathSegments.map(function (pathSegment) {\n    if (pathSegment.substr(-1) === \"'\") {\n      return parseInt(pathSegment.slice(0, -1), 10) + HARDENING_OFFSET;\n    } else {\n      return parseInt(pathSegment, 10);\n    }\n  });\n}\n/**\n * Convert an array of integers representaing a derivation sequence to derivation path string.\n * @param {number[]} sequence -the segments of the derivation path sequence as integer values\n * @example\n * const sequence = bip32SequenceToPath([2147483693, 1, 99]);\n * console.log(sequence); // m/45'/1/99\n * @returns {string} BIP32 derivation path\n */\n\n\nfunction bip32SequenceToPath(sequence) {\n  return \"m/\" + sequence.map(function (index) {\n    if (index >= HARDENING_OFFSET) {\n      return \"\".concat(index - HARDENING_OFFSET, \"'\");\n    } else {\n      return index.toString();\n    }\n  }).join('/');\n}\n/**\n * Provide validation messages for a BIP32 derivation path string.\n * @param {string} pathString - BIP32 derivation path string\n * @param {Object} [options] - additional options\n * @param {string} [options.mode] - \"hardened\" and \"unhardened\" verify respectively\n * @example\n * const validationError = validateBIP32Path(\"\");\n * console.log(validationError); // BIP32 path cannot be blank.\n * @returns {string} empty if valid or corresponding validation message\n */\n\n\nfunction validateBIP32Path(pathString, options) {\n  if (pathString === null || pathString === undefined || pathString === '') {\n    return \"BIP32 path cannot be blank.\";\n  }\n\n  if (!pathString.match(BIP32_PATH_REGEX)) {\n    return \"BIP32 path is invalid.\";\n  }\n\n  if (options && options.mode === 'hardened') {\n    if (!pathString.match(BIP32_HARDENED_PATH_REGEX)) {\n      return \"BIP32 path must be fully-hardened.\";\n    }\n  }\n\n  if (options && options.mode === 'unhardened') {\n    if (!pathString.match(BIP32_UNHARDENED_PATH_REGEX)) {\n      return \"BIP32 path cannot include hardened segments.\";\n    }\n  }\n\n  var segmentStrings = pathString.toLowerCase().split('/');\n  return validateBIP32PathSegments(segmentStrings.slice(1));\n}\n\nfunction validateBIP32PathSegments(segmentStrings) {\n  for (var i = 0; i < segmentStrings.length; i++) {\n    var segmentString = segmentStrings[i];\n    var error = validateBIP32PathSegment(segmentString);\n\n    if (error !== '') {\n      return error;\n    }\n  }\n\n  return '';\n}\n\nfunction validateBIP32PathSegment(segmentString) {\n  if (segmentString === null || segmentString === undefined || segmentString === '') {\n    return \"BIP32 path segment cannot be blank.\";\n  }\n\n  var numberString, hardened;\n\n  if (segmentString.substr(segmentString.length - 1) === \"'\") {\n    numberString = segmentString.substr(0, segmentString.length - 1);\n    hardened = true;\n  } else {\n    numberString = segmentString;\n    hardened = false;\n  } // We should never actually wind up throwing this error b/c of an\n  // earlier check against BIP32_PATH_REGEX.\n\n\n  var numberError = \"Invalid BIP32 path segment.\";\n  var number;\n\n  try {\n    number = parseInt(numberString, 10);\n  } catch (parseError) {\n    // shouldn't reach here b/c we already applied a regex check\n    return numberError;\n  }\n\n  if (Number.isNaN(number) || number.toString().length !== numberString.length) {\n    return numberError;\n  }\n\n  if (number < 0) {\n    return numberError;\n  }\n\n  if (number > (hardened ? MAX_BIP32_HARDENED_NODE_INDEX : MAX_BIP32_NODE_INDEX)) {\n    return \"BIP32 index is too high.\";\n  }\n\n  return '';\n}\n/**\n * Derive a hex representation of a child public key for derivation path.\n * @param {string} extendedPublicKey - base58 encoded extended public key\n * @param {string} bip32Path - BIP32 derivation path string\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const xpub = \"xpub6CCHViYn5VzKSmKD9cK9LBDPz9wBLV7owXJcNDioETNvhqhVtj3ABnVUERN9aV1RGTX9YpyPHnC4Ekzjnr7TZthsJRBiXA4QCeXNHEwxLab\"\n * const child = deriveChildPublicKey(xpub, \"m/0/0\", NETWORKS.MAINNET);\n * console.log(child); // 021a0b6eb37bd9d2767a364601e41635a11c1dbbbb601efab8406281e210336ace\n * @returns {string} hex string representation of the derived public key\n */\n\n\nfunction deriveChildPublicKey(extendedPublicKey, bip32Path, network) {\n  if (bip32Path.slice(0, 2) === 'm/') {\n    return deriveChildPublicKey(extendedPublicKey, bip32Path.slice(2), network);\n  }\n\n  var node = bip32.fromBase58(extendedPublicKey, (0, _networks.networkData)(network));\n  var child = node.derivePath(bip32Path);\n  return (0, _utils.toHexString)(child.publicKey);\n}\n/**\n * Derive a base58 encoded representation fo a child extended public key.\n * @param {string} extendedPublicKey - base58 encoded extended public key\n * @param {string} bip32Path - BIP32 derivation path string\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const xpub = \"xpub6CCHViYn5VzKSmKD9cK9LBDPz9wBLV7owXJcNDioETNvhqhVtj3ABnVUERN9aV1RGTX9YpyPHnC4Ekzjnr7TZthsJRBiXA4QCeXNHEwxLab\"\n * const child = deriveChildExtendedPublicKey(xpub, \"m/0/0\", NETWORKS.MAINNET);\n * console.log(child); // xpub6GYTTMaaN8bSEhicdKq7ji9H7B2SL4un33obThv9aekop4J7L7B3snYMnJUuwXJiUmsbSVSyZydbqLC97JMWnj3R4MHz6JNunMJhjEBKovS\n * @returns {string} base58 encoded representation of the derived child extended public key\n */\n\n\nfunction deriveChildExtendedPublicKey(extendedPublicKey, bip32Path, network) {\n  if (bip32Path.slice(0, 2) === 'm/') {\n    return deriveChildExtendedPublicKey(extendedPublicKey, bip32Path.slice(2), network);\n  }\n\n  var node = bip32.fromBase58(extendedPublicKey, (0, _networks.networkData)(network));\n  var child = node.derivePath(bip32Path);\n  return child.toBase58();\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  TREZOR: true,\n  LEDGER: true,\n  HERMIT: true,\n  HardwareWalletExportPublicKey: true,\n  HardwareWalletExportExtendedPublicKey: true,\n  HardwareWalletSignMultisigTransaction: true\n};\nexports.HardwareWalletExportPublicKey = HardwareWalletExportPublicKey;\nexports.HardwareWalletExportExtendedPublicKey = HardwareWalletExportExtendedPublicKey;\nexports.HardwareWalletSignMultisigTransaction = HardwareWalletSignMultisigTransaction;\nexports.HERMIT = exports.LEDGER = exports.TREZOR = void 0;\n\nvar _interaction = require(\"./interaction\");\n\nObject.keys(_interaction).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _interaction[key];\n    }\n  });\n});\n\nvar _trezor = require(\"./trezor\");\n\nObject.keys(_trezor).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _trezor[key];\n    }\n  });\n});\n\nvar _ledger = require(\"./ledger\");\n\nObject.keys(_ledger).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _ledger[key];\n    }\n  });\n});\n\nvar _hermit = require(\"./hermit\");\n\nObject.keys(_hermit).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _hermit[key];\n    }\n  });\n});\nvar TREZOR = 'trezor';\nexports.TREZOR = TREZOR;\nvar LEDGER = 'ledger';\nexports.LEDGER = LEDGER;\nvar HERMIT = 'hermit';\nexports.HERMIT = HERMIT;\n\nfunction HardwareWalletExportPublicKey(_ref) {\n  var walletType = _ref.walletType,\n      network = _ref.network,\n      bip32Path = _ref.bip32Path,\n      bip32Paths = _ref.bip32Paths;\n\n  switch (walletType) {\n    case TREZOR:\n      return new _trezor.TrezorExportPublicKey({\n        network: network,\n        bip32Path: bip32Path,\n        bip32Paths: bip32Paths\n      });\n\n    case LEDGER:\n      return new _ledger.LedgerExportPublicKey({\n        network: network,\n        bip32Path: bip32Path,\n        bip32Paths: bip32Paths\n      });\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        network: network,\n        failureCode: \"unsupported\",\n        failureText: \"This wallet is not supported when exporting public keys.\"\n      });\n  }\n}\n\nfunction HardwareWalletExportExtendedPublicKey(_ref2) {\n  var walletType = _ref2.walletType,\n      network = _ref2.network,\n      bip32Path = _ref2.bip32Path;\n\n  switch (walletType) {\n    case TREZOR:\n      return new _trezor.TrezorExportExtendedPublicKey({\n        network: network,\n        bip32Path: bip32Path\n      });\n\n    case LEDGER:\n      return new _ledger.LedgerExportExtendedPublicKey({\n        network: network,\n        bip32Path: bip32Path\n      });\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        network: network,\n        failureCode: \"unsupported\",\n        failureText: \"This wallet is not supported when exporting extended public keys.\"\n      });\n  }\n}\n\nfunction HardwareWalletSignMultisigTransaction(_ref3) {\n  var walletType = _ref3.walletType,\n      network = _ref3.network,\n      inputs = _ref3.inputs,\n      outputs = _ref3.outputs,\n      bip32Paths = _ref3.bip32Paths;\n\n  switch (walletType) {\n    case TREZOR:\n      return new _trezor.TrezorSignMultisigTransaction({\n        network: network,\n        inputs: inputs,\n        outputs: outputs,\n        bip32Paths: bip32Paths\n      });\n\n    case LEDGER:\n      return new _ledger.LedgerSignMultisigTransaction({\n        network: network,\n        inputs: inputs,\n        outputs: outputs,\n        bip32Paths: bip32Paths\n      });\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        network: network,\n        failureCode: \"unsupported\",\n        failureText: \"This wallet is not supported when signing multisig transactions.\"\n      });\n  }\n}","\"use strict\";\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.slice\");\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateExtendedPublicKey = validateExtendedPublicKey;\nexports.validatePublicKey = validatePublicKey;\nexports.compressPublicKey = compressPublicKey;\n\nvar _utils = require(\"./utils\");\n\nvar _networks = require(\"./networks\");\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n/**\n * This module provides validation of public keys and extended public keys.  Also it provides public key compression.\n * @module keys\n */\n\n\nvar bip32 = require('bip32');\n/**\n * Provide validation messages for an extended public key.\n * @param {string} inputString - base58 encoded extended public key\n * @param {module:networks.NETWORKS} network  - bitcoin network\n * @example\n * const key = \"apub6CCHViYn5VzKSmKD9cK9LBDPz9wBLV7owXJcNDioETNvhqhVtj3ABnVUERN9aV1RGTX9YpyPHnC4Ekzjnr7TZthsJRBiXA4QCeXNHEwxLab\";\n * const validationError = validateExtendedPublicKey(key, NETWORKS.TESTNET);\n * console.log(validationError); // Extended public key must begin with 'xpub' or 'tpub'.\"\n * @returns {string} empty if valid or corresponding validation message\n */\n\n\nfunction validateExtendedPublicKey(inputString, network) {\n  if (inputString === null || inputString === undefined || inputString === '') {\n    return \"Extended public key cannot be blank.\";\n  }\n\n  var requiredPrefix = \"'xpub'\";\n\n  if (network === _networks.NETWORKS.TESTNET) {\n    requiredPrefix += \" or 'tpub'\";\n  }\n\n  var notXpubError = \"Extended public key must begin with \".concat(requiredPrefix, \".\");\n\n  if (inputString.length < 111) {\n    return \"Extended public key length is too short.\";\n  }\n\n  var prefix = inputString.slice(0, 4);\n\n  if (!(prefix === 'xpub' || network === _networks.NETWORKS.TESTNET && prefix === 'tpub')) {\n    return notXpubError;\n  }\n\n  try {\n    bip32.fromBase58(inputString, (0, _networks.networkData)(network));\n  } catch (e) {\n    return \"Invalid extended public key: \".concat(e);\n  }\n\n  return '';\n}\n/**\n * Provide validation messages for a public key.\n * @param {string} inputString - hex public key string\n * @example\n * const validationError = validatePublicKey(\"03b32dc780fba98db25b4b72cf2b69da228f5e10ca6aa8f46eabe7f9fe22c994ee\"); // result empty, valid key\n * @returns {string} empty if valid or corresponding validation message\n */\n\n\nfunction validatePublicKey(inputString) {\n  if (inputString === null || inputString === undefined || inputString === '') {\n    return \"Public key cannot be blank.\";\n  }\n\n  var error = (0, _utils.validateHex)(inputString);\n\n  if (error !== '') {\n    return error;\n  }\n\n  try {\n    _bitcoinjsLib.ECPair.fromPublicKey(Buffer.from(inputString, 'hex'));\n  } catch (e) {\n    return \"Invalid public key \".concat(e, \".\");\n  }\n\n  return '';\n}\n/**\n * Compresses a public key.\n * @param {string} publicKey - the hex public key to compress\n * @example\n * const compressed = compressPublicKey(\"04b32dc780fba98db25b4b72cf2b69da228f5e10ca6aa8f46eabe7f9fe22c994ee6e43c09d025c2ad322382347ec0f69b4e78d8e23c8ff9aa0dd0cb93665ae83d5\");\n * console.log(compressed); // 03b32dc780fba98db25b4b72cf2b69da228f5e10ca6aa8f46eabe7f9fe22c994ee\n * @returns {string} compressed public key\n */\n\n\nfunction compressPublicKey(publicKey) {\n  // validate Public Key Length\n  // validate Public Key Structure\n  var pubkeyBuffer = Buffer.from(publicKey, 'hex'); // eslint-disable-next-line no-bitwise\n\n  var prefix = (pubkeyBuffer[64] & 1) !== 0 ? 0x03 : 0x02;\n  var prefixBuffer = Buffer.alloc(1);\n  prefixBuffer[0] = prefix;\n  return Buffer.concat([prefixBuffer, pubkeyBuffer.slice(1, 1 + 32)]).toString('hex');\n}","\"use strict\";\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.string.match\");\n\nrequire(\"core-js/modules/es.string.trim\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateAddress = validateAddress;\n\nvar _bitcoinAddressValidation = _interopRequireDefault(require(\"bitcoin-address-validation\"));\n\nvar _networks = require(\"./networks\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n/**\n * This modulde provides validation messages related to addresses.\n * @module address\n */\n\n\nvar MAINNET_ADDRESS_MAGIC_BYTE_PATTERN = \"^(bc1|[13])\";\nvar TESTNET_ADDRESS_MAGIC_BYTE_PATTERN = \"^(tb1|bcrt1|[mn2])\";\nvar ADDRESS_BODY_PATTERN = \"[A-HJ-NP-Za-km-z1-9]+$\";\nvar BECH32_ADDRESS_MAGIC_BYTE_REGEX = /^(tb|bc)/;\nvar BECH32_ADDRESS_BODY_PATTERN = \"[ac-hj-np-z02-9]+$\";\n/**\n * Provide a validation messages for a given address.\n * @param {string} address - the address to validate\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const validationError = validateAddress('2Mx6Y8VRj8rmSdLfwrvnpBR7ctjctPLzpWs', NETWORKS.MAINNET);\n * console.log(validationError); // Address must start with either of 'bc1', '1' or '3' followed by letters or digits.\n * @returns {string} empty if valid or corresponding validation message\n */\n\nfunction validateAddress(address, network) {\n  if (!address || address.trim() === '') {\n    return 'Address cannot be blank.';\n  }\n\n  var magic_byte_regex = network === _networks.NETWORKS.TESTNET ? TESTNET_ADDRESS_MAGIC_BYTE_PATTERN : MAINNET_ADDRESS_MAGIC_BYTE_PATTERN;\n  var isBech32 = address.match(BECH32_ADDRESS_MAGIC_BYTE_REGEX);\n  var address_body_regex = isBech32 ? BECH32_ADDRESS_BODY_PATTERN : ADDRESS_BODY_PATTERN;\n  var address_regex = magic_byte_regex + address_body_regex;\n\n  if (!address.match(address_regex)) {\n    if (network === _networks.NETWORKS.TESTNET) {\n      return \"Address must start with one of 'tb1', 'm', 'n', or '2' followed by letters or digits.\";\n    } else {\n      return \"Address must start with either of 'bc1', '1' or '3' followed by letters or digits.\";\n    }\n  } // try {\n  //   // FIXME does this support Bech32 addresses?\n  //   bitcoin.address.toOutputScript(address, network);\n  // } catch (e) {\n  //   return `Address is invalid: ${e}`;\n  // }\n\n\n  var result = (0, _bitcoinAddressValidation[\"default\"])(address);\n\n  if (result) {\n    if (network === _networks.NETWORKS.TESTNET && !result.testnet) {\n      return \"This is a \".concat(_networks.NETWORKS.MAINNET, \" address.\");\n    }\n\n    if (network === _networks.NETWORKS.MAINNET && result.testnet) {\n      return \"This is a \".concat(_networks.NETWORKS.TESTNET, \" address.\");\n    }\n  } else {\n    return \"Address is invalid.\";\n  }\n\n  return '';\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateFeeRate = validateFeeRate;\nexports.validateFeeBTC = validateFeeBTC;\nexports.validateOutputAmountBTC = validateOutputAmountBTC;\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n/** \n * This module provides validation messages related to transactions.\n * @module transactions\n */\n\n\nvar ZERO = (0, _bignumber[\"default\"])(0);\nvar MAX_FEE_RATE = new _bignumber[\"default\"](1000); // 1000 Sats/byte\n\nvar MAX_FEE_BTC = new _bignumber[\"default\"](0.025); // ~ $250 if 1 BTC = $10k\n\nvar DUST_LIMIT_SATS = (0, _bignumber[\"default\"])(546);\n/**\n * Provide a validation message for a given fee rate expressed in satoshis per byte.\n * @param {string} feeRateString - a string representation of the fee rate\n * @example\n * const feerate = -1;\n * const validationError = validateFeeRate(feerate);\n * console.log(validationError); // Fee rate must be positive.\n * @returns {string} empty if valid or corresponding validation message\n */\n\nfunction validateFeeRate(feeRateString) {\n  var feeRate;\n\n  try {\n    feeRate = new _bignumber[\"default\"](feeRateString);\n  } catch (e) {\n    return \"Invalid fee rate.\";\n  }\n\n  if (feeRate.isLessThanOrEqualTo(ZERO)) {\n    return \"Fee rate must be positive.\";\n  }\n\n  if (feeRate.isGreaterThan(MAX_FEE_RATE)) {\n    return \"Fee rate is too high.\";\n  }\n\n  return '';\n}\n/**\n * Provide a validation message for a given fee expressed in BTC.\n * @param {string} feeBTCString - total fee in BTC\n * @param {BigNumber} inputsTotalSats - total satoshis\n * @example\n * const fee = \"0.03\";\n * const validationError = validateFeeBTC(fee, BigNumber(\"100000\"));\n * console.log(validationError) // Fee is too high.\n * @returns {string} empty if valid or corresponding validation message\n */\n\n\nfunction validateFeeBTC(feeBTCString, inputsTotalSats) {\n  var fee;\n\n  try {\n    fee = new _bignumber[\"default\"](feeBTCString);\n  } catch (e) {\n    return \"Invalid fee.\";\n  }\n\n  if (fee.isLessThan(ZERO)) {\n    return \"Fee cannot be negative.\";\n  }\n\n  if (fee.isGreaterThan((0, _utils.satoshisToBitcoins)(inputsTotalSats))) {\n    return \"Fee is too high.\";\n  }\n\n  if (fee.isGreaterThan(MAX_FEE_BTC)) {\n    return \"Fee is too high.\";\n  }\n\n  return '';\n}\n/**\n * Provide a validation message for a given BTC output amount\n * @param {string} amountString - BTC output amount\n * @param {BigNumber} inputsTotalSats - total satoshis being spent\n * @example\n * const out = \"0.00000500\";\n * const validationError = validateOutputAmountBTC(out, BigNumber(1000000));\n * console.log(validationError) // Output amount is too small.\n * @returns {string} empty if valid or corresponding validation message\n */\n\n\nfunction validateOutputAmountBTC(amountString, inputsTotalSats) {\n  var amount;\n\n  try {\n    amount = new _bignumber[\"default\"](amountString);\n  } catch (e) {\n    return \"Invalid output amount.\";\n  }\n\n  if (amount.isLessThanOrEqualTo(ZERO)) {\n    return \"Output amount must be positive.\";\n  }\n\n  if (amount.isLessThanOrEqualTo((0, _utils.satoshisToBitcoins)(DUST_LIMIT_SATS))) {\n    return \"Output amount is too small.\";\n  } // Check that value does not have a fraction of a satoshi\n\n\n  if ((0, _utils.bitcoinsToSatoshis)(amount).dp()) {\n    return \"Invalid output amount.\";\n  }\n\n  if (amount.isGreaterThan((0, _utils.satoshisToBitcoins)(inputsTotalSats))) {\n    return \"Output amount is too large.\";\n  }\n\n  return '';\n}","\"use strict\";\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.from\");\n\nrequire(\"core-js/modules/es.array.is-array\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.join\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.array.slice\");\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.number.to-fixed\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.parse-int\");\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/es.string.match\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.multisigBIP32Root = multisigBIP32Root;\nexports.multisigBIP32Path = multisigBIP32Path;\nexports.multisigAddressType = multisigAddressType;\nexports.multisigRequiredSigners = multisigRequiredSigners;\nexports.multisigTotalSigners = multisigTotalSigners;\nexports.multisigRedeemScript = multisigRedeemScript;\nexports.multisigWitnessScript = multisigWitnessScript;\nexports.multisigPublicKeys = multisigPublicKeys;\nexports.multisigAddress = multisigAddress;\nexports.generateMultisigFromPublicKeys = generateMultisigFromPublicKeys;\nexports.generateMultisigFromHex = generateMultisigFromHex;\nexports.estimateMultisigTransactionFeeRate = estimateMultisigTransactionFeeRate;\nexports.estimateMultisigTransactionFee = estimateMultisigTransactionFee;\nexports.unsignedMultisigTransaction = unsignedMultisigTransaction;\nexports.validateMultisigSignature = validateMultisigSignature;\nexports.signedMultisigTransaction = signedMultisigTransaction;\nexports.MULTISIG_ADDRESS_TYPES = exports.P2WSH = exports.P2SH_P2WSH = exports.P2SH = void 0;\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _networks = require(\"./networks\");\n\nvar _p2sh = require(\"./p2sh\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\nvar _utils = require(\"./utils\");\n\nvar _bip = _interopRequireDefault(require(\"bip66\"));\n\nvar _script = require(\"./script\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar bitcoin = require('bitcoinjs-lib');\n/**\n * Address type constant for \"pay to script hash\" address type.\n * @type {string}\n */\n\n\nvar P2SH = \"P2SH\";\n/**\n * Address type constant for \"pay to script hash - pay to witness script hash\" address type.\n * @type {string}\n */\n\nexports.P2SH = P2SH;\nvar P2SH_P2WSH = \"P2SH-P2WSH\";\n/**\n * Address type constant for \"pay to witness script hash\" address type.\n * @type {string}\n */\n\nexports.P2SH_P2WSH = P2SH_P2WSH;\nvar P2WSH = \"P2WSH\";\n/**\n * Enumeration of possible multisig address types ([P2SH]{@link module:multisig.P2SH}|[P2SH_P2WSH]{@link module:multisig.P2SH_P2WSH}|[P2WSH]{@link module:multisig.P2WSH}).\n * @enum {string} \n */\n\nexports.P2WSH = P2WSH;\nvar MULTISIG_ADDRESS_TYPES = {\n  P2SH: P2SH,\n  P2SH_P2WSH: P2SH_P2WSH,\n  P2WSH: P2WSH\n};\n/**\n * Retrieve the standard derivation path for a given multisig address type and network.\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - type from which to create the root path\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const p2sh_root = multisigBIP32Root(MULTISIG_ADDRESS_TYPES.P2SH, NETWORKS.MAINNET); // m/45'/0'/0'\n * const p2sh_p2wsh_root = multisigBIP32Root(MULTISIG_ADDRESS_TYPES.P2SH_P2WSH, NETWORKS.MAINNET); // m/48'/0'/0'/1'\n * const p2wsh_root = multisigBIP32Root(MULTISIG_ADDRESS_TYPES.P2SH, NETWORKS.MAINNET); // m/48'/0'/0'/2'\n * @returns {string} full root derivation path\n */\n\nexports.MULTISIG_ADDRESS_TYPES = MULTISIG_ADDRESS_TYPES;\n\nfunction multisigBIP32Root(addressType, network) {\n  var coinPath = network === _networks.NETWORKS.MAINNET ? \"0'\" : \"1'\";\n\n  switch (addressType) {\n    case MULTISIG_ADDRESS_TYPES.P2SH:\n      return \"m/45'/\".concat(coinPath, \"/0'\");\n\n    case MULTISIG_ADDRESS_TYPES.P2SH_P2WSH:\n      return \"m/48'/\".concat(coinPath, \"/0'/1'\");\n\n    case MULTISIG_ADDRESS_TYPES.P2WSH:\n      return \"m/48'/\".concat(coinPath, \"/0'/2'\");\n\n    default:\n      return null;\n  }\n}\n/**\n * Retrieve the standard derivation path for a given multisig address type and network at a given index.\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - type from which to create the child path\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {number} index - completes the derivation path\n * @example\n * const p2sh_path = multisigBIP32Path(MULTISIG_ADDRESS_TYPES.P2SH, NETWORKS.MAINNET, 0); // m/45'/0'/0'/0\n * const p2sh_p2wsh_path = multisigBIP32Path(MULTISIG_ADDRESS_TYPES.P2SH_P2WSH, NETWORKS.MAINNET, 0); // m/48'/0'/0'/1'/0\n * const p2wsh_path = multisigBIP32Path(MULTISIG_ADDRESS_TYPES.P2WSH, NETWORKS.MAINNET, 0); // m/48'/0'/0'/2'/0\n * @returns {string} full child derivation path\n */\n\n\nfunction multisigBIP32Path(addressType, network, index) {\n  var root = multisigBIP32Root(addressType, network);\n\n  if (root) {\n    return root + \"/\".concat(index || \"0\");\n  }\n\n  return null;\n}\n/**\n * Determine the multisig address type for a Multisig object.\n * @param {Multisig} multisig - derive the address type from this object\n * @example\n * const addressType = multisigAddressType(multisig);\n * if (addressType == MULTISIG_ADDRESS_TYPES.P2SH) {\n *  // handle P2SH here\n * }\n * // check other address types and handle\n * @returns {module:multisig.MULTISIG_ADDRESS_TYPES} the address type\n */\n\n\nfunction multisigAddressType(multisig) {\n  if (multisig.redeem.redeem) {\n    return MULTISIG_ADDRESS_TYPES.P2SH_P2WSH;\n  } else {\n    // FIXME why is multisig.witness null?\n    // if (multisig.witness) {\n    if (multisig.address.match(/^(tb|bc)/)) {\n      return MULTISIG_ADDRESS_TYPES.P2WSH;\n    } else {\n      return MULTISIG_ADDRESS_TYPES.P2SH;\n    }\n  }\n}\n/**\n * Extract the number of required signers value from a Multisig object.\n * @param {Multisig} multisig - object to parse\n * @example\n * const m = multisigRequiredSigners(multisig); // m = 2 for a 2 of 3 multisig\n * @returns {number} number of signatures required to spend from a given multisig address\n */\n\n\nfunction multisigRequiredSigners(multisig) {\n  return multisigAddressType(multisig) === MULTISIG_ADDRESS_TYPES.P2SH_P2WSH ? multisig.redeem.redeem.m : multisig.redeem.m;\n}\n/**\n * Extract the total number of signers value from a Multisig object.\n * @param {Multisig} multisig - object to parse\n * @example\n * const n = multisigTotalSigners(multisig); // n = 3 for a 2 of 3 multisig\n * @returns {number} number of keys available for signing for a given multisig address\n */\n\n\nfunction multisigTotalSigners(multisig) {\n  return multisigAddressType(multisig) === MULTISIG_ADDRESS_TYPES.P2SH_P2WSH ? multisig.redeem.redeem.n : multisig.redeem.n;\n}\n/**\n * Retrieve the Multisig object representing proper redeem script from a base Multisig object.\n * @param {Multisig} multisig - object to parse\n * @example\n * const redeemMultisig = multisigRedeemScript(multisig)\n * console.log(scriptToHex(redeemMultisig)) // 522102e326263c35e...\n * @returns {Multisig|null} object for further parsing\n */\n\n\nfunction multisigRedeemScript(multisig) {\n  switch (multisigAddressType(multisig)) {\n    case MULTISIG_ADDRESS_TYPES.P2SH:\n      return multisig.redeem;\n\n    case MULTISIG_ADDRESS_TYPES.P2SH_P2WSH:\n      return multisig.redeem;\n\n    case MULTISIG_ADDRESS_TYPES.P2WSH:\n      return null;\n\n    default:\n      return null;\n  }\n}\n/**\n * Retrieve the Multisig object representing proper witness script from a base Multisig object.\n * @param {Multisig} multisig - object to parse\n * @example\n * const witnessScript = multisigWitnessScript(multisig)\n * console.log(scriptToHex(witnessScript)) // 522102e326263c35e...\n * @returns {Multisig|null} object for further parsing\n */\n\n\nfunction multisigWitnessScript(multisig) {\n  switch (multisigAddressType(multisig)) {\n    case MULTISIG_ADDRESS_TYPES.P2SH:\n      return null;\n\n    case MULTISIG_ADDRESS_TYPES.P2SH_P2WSH:\n      return multisig.redeem.redeem;\n\n    case MULTISIG_ADDRESS_TYPES.P2WSH:\n      return multisig.redeem;\n\n    default:\n      return null;\n  }\n}\n/**\n * Extract the public keys from a given Multisig object.\n * @param {Multisig} multisig - object to parse\n * @example\n * const pubkeys = multisigPublicKeys(multisig);\n * @returns {string[]} the hex representation of the public keys used in the multisig address\n */\n\n\nfunction multisigPublicKeys(multisig) {\n  return (multisigAddressType(multisig) === P2SH ? multisigRedeemScript(multisig) : multisigWitnessScript(multisig)).pubkeys.map(_utils.toHexString);\n}\n/**\n * Return the address for a given Multisig object.\n * @param {Multisig} multisig - object to parse\n * @returns {string} the address\n */\n\n\nfunction multisigAddress(multisig) {\n  return multisig.address;\n}\n/**\n * Create a Multisig object by specifying the network, address type, total number of signers and the public keys.\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - address type for determining Multisig object\n * @param {number} requiredSigners - number of signers needed to spend funds\n * @param  {...string} publicKeys - list of hex string representation of public keys\n * @example\n * const multisig = generateMultisigFromSpec(NETWORKS.MAINNET, MULTISIG_ADDRESS_TYPES.P2SH, 3, pubkey1, pubkey2, ..., pubkeyN);\n * @returns {Multisig} object for further parsing\n */\n\n\nfunction generateMultisigFromPublicKeys(network, addressType, requiredSigners) {\n  for (var _len = arguments.length, publicKeys = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    publicKeys[_key - 3] = arguments[_key];\n  }\n\n  var redeemScript = bitcoin.payments.p2ms({\n    m: requiredSigners,\n    pubkeys: publicKeys.map(function (hex) {\n      return Buffer.from(hex, 'hex');\n    }),\n    network: (0, _networks.networkData)(network)\n  });\n  return generateMultisigFromRedeemScript(addressType, redeemScript);\n}\n/**\n * Create a Multisig object from the hex representation of a redeem script.\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - address type for object creation\n * @param {string} redeemScriptHex - hex representation of the redeem script\n * @example\n * const redeemScript = \"512103a90d10bf3794352bb1fa533dbd4ea75a0ffc98e0d05124938fcc3e10cdbe1a4321030d60e8d497fa8ce59a2b3203f0e597cd0182e1fe0cc3688f73497f2e99fbf64b52ae\";\n * const multisig = generateMultisigFromHex(NETWORKS.MAINNET, MULTISIG_ADDRESS_TYPES.P2SH, redeemScript);\n * @returns {Multisig} object for further parsing\n */\n\n\nfunction generateMultisigFromHex(network, addressType, redeemScriptHex) {\n  var redeemScript = bitcoin.payments.p2ms({\n    output: Buffer.from(redeemScriptHex, 'hex'),\n    network: (0, _networks.networkData)(network)\n  });\n  return generateMultisigFromRedeemScript(addressType, redeemScript);\n}\n\nfunction generateMultisigFromRedeemScript(addressType, redeemScript) {\n  switch (addressType) {\n    case MULTISIG_ADDRESS_TYPES.P2SH:\n      return bitcoin.payments.p2sh({\n        redeem: redeemScript\n      });\n\n    case MULTISIG_ADDRESS_TYPES.P2SH_P2WSH:\n      return bitcoin.payments.p2sh({\n        redeem: bitcoin.payments.p2wsh({\n          redeem: redeemScript\n        })\n      });\n\n    case MULTISIG_ADDRESS_TYPES.P2WSH:\n      return bitcoin.payments.p2wsh({\n        redeem: redeemScript\n      });\n\n    default:\n      return null;\n  }\n}\n/**\n * Estimate transaction fee rate based on actual fee and address type, number of inputs and number of outputs.\n * @param {Object} config - configuration for the calculation\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} config.addressType - address type used for estimation\n * @param {number} config.numInputs - number of inputs used in calculation\n * @param {number} config.numOutputs - number of outputs used in calculation\n * @param {number} config.m - number of required signers for the quorum\n * @param {number} config.n - number of total signers for the quorum\n * @param {BigNumber} config.feesInSatoshis - total transaction fee in satoshis\n * @example \n * // get the fee rate a P2WSH multisig transaction with 2 inputs and 3 outputs with a known fee of 7060\n * const feerate = estimateMultisigTransactionFeeRate({\n *   addressType: MULTISIG_ADDRESS_TYPES.P2WSH, \n *   numInputs: 2, \n *   numOutputs: 3, \n *   m: 2,\n *   n: 3,\n *   feesInSatoshis: 7060\n * });\n * \n * \n * @returns {string} estimated fee rate\n */\n\n\nfunction estimateMultisigTransactionFeeRate(config) {\n  return new _bignumber[\"default\"](config.feesInSatoshis).dividedBy(estimateMultisigTransactionLength(config)).toFixed(0);\n}\n/**\n * Estimate transaction fee based on fee rate, address type, number of inputs and outputs.\n * @param {Object} config - configuration for the calculation\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} config.addressType - address type used for estimation\n * @param {number} config.numInputs - number of inputs used in calculation\n * @param {number} config.numOutputs - number of outputs used in calculation\n * @param {number} config.m - number of required signers for the quorum\n * @param {number} config.n - number of total signers for the quorum\n * @param {string} config.feesPerByteInSatoshis - satoshis per byte fee rate\n * @example\n * // get fee for P2SH multisig transaction with 2 inputs and 3 outputs at 10 satoshis per byte\n * const fee = estimateMultisigTransactionFee({\n *   addressType: MULTISIG_ADDRESS_TYPES.P2SH, \n *   numInputs: 2, \n *   numOutputs: 3, \n *   m: 2,\n *   n: 3,\n *   feesPerByteInSatoshis: 10\n * });\n * @returns {number} estimated transaction fee\n */\n\n\nfunction estimateMultisigTransactionFee(config) {\n  return new _bignumber[\"default\"](config.feesPerByteInSatoshis).multipliedBy(estimateMultisigTransactionLength(config));\n}\n\nfunction estimateMultisigTransactionLength(config) {\n  switch (config.addressType) {\n    case MULTISIG_ADDRESS_TYPES.P2SH:\n      return (0, _p2sh.estimateMultisigP2SHTransactionLength)(config);\n\n    case MULTISIG_ADDRESS_TYPES.P2SH_P2WSH:\n      return (0, _p2sh_p2wsh.estimateMultisigP2SHP2WSHTransactionLength)(config);\n\n    case MULTISIG_ADDRESS_TYPES.P2WSH:\n      return (0, _p2wsh.estimateMultisigP2WSHTransactionLength)(config);\n\n    default:\n      return null;\n  }\n}\n/**\n * Create an unsigned bitcoin transaction based on the network, inputs and outputs.\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {UTXO[]} inputs - inputs used to create transaction\n * @param {Object[]} outputs - transaction recipients\n * @example\n * const unsignedTransaction = unsignedMultisigTransaction(NETWORKS.MAINNET, inputs, outputs);\n * @returns {Transaction} an unsigned {@link https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/types/transaction.d.ts|Transaction} object\n */\n\n\nfunction unsignedMultisigTransaction(network, inputs, outputs) {\n  var transactionBuilder = new bitcoin.TransactionBuilder();\n  transactionBuilder.setVersion(1); // FIXME this depends on type...\n\n  transactionBuilder.network = (0, _networks.networkData)(network);\n\n  for (var inputIndex = 0; inputIndex < inputs.length; inputIndex += 1) {\n    var input = inputs[inputIndex];\n    transactionBuilder.addInput(input.txid, input.index);\n  }\n\n  for (var outputIndex = 0; outputIndex < outputs.length; outputIndex += 1) {\n    var output = outputs[outputIndex];\n    transactionBuilder.addOutput(output.address, output.amountSats.toNumber());\n  }\n\n  return transactionBuilder.buildIncomplete();\n}\n/**\n * Validate a signature for a signed transaction input.\n * @param {Transaction} unsignedTransaction - transaction to validate\n * @param {number} inputIndex - the index where the input appears in the transaction\n * @param {UTXO} input - the object representing the input whose signature you wish to validate\n * @param {string} signerInputSignature - signature to validate\n * @example\n * const publicKey = validateMultisigSignature(unsignedTransaction, inputIndex, input, inputSignature);\n * if (publicKey) {\n *   // is valid, do something with publicKey\n * } else {\n *   // not valid, handle here\n * }\n * @returns {string|boolean} false if invalid or corresponding public key\n */\n\n\nfunction validateMultisigSignature(unsignedTransaction, inputIndex, input, signerInputSignature) {\n  var hash = multisigSignatureHash(unsignedTransaction, inputIndex, input);\n  var signatureBuffer = multisigSignatureBuffer(signatureNoSighashType(signerInputSignature));\n  var publicKeys = multisigPublicKeys(input.multisig);\n\n  for (var publicKeyIndex = 0; publicKeyIndex < multisigTotalSigners(input.multisig); publicKeyIndex++) {\n    var publicKey = publicKeys[publicKeyIndex];\n    var publicKeyBuffer = Buffer.from(publicKey, 'hex');\n    var keyPair = bitcoin.ECPair.fromPublicKey(publicKeyBuffer);\n\n    if (keyPair.verify(hash, signatureBuffer)) {\n      return publicKey;\n    }\n  }\n\n  return false;\n}\n\nfunction signatureNoSighashType(signature) {\n  var len = parseInt(signature.slice(2, 4), 16);\n  if (len == (signature.length - 4) / 2) return signature;else return signature.slice(0, -2);\n}\n\nfunction multisigSignatureHash(unsignedTransaction, inputIndex, input) {\n  if (multisigAddressType(input.multisig) === MULTISIG_ADDRESS_TYPES.P2WSH || multisigAddressType(input.multisig) === MULTISIG_ADDRESS_TYPES.P2SH_P2WSH) {\n    return unsignedTransaction.hashForWitnessV0(inputIndex, multisigWitnessScript(input.multisig).output, input.amountSats.toNumber(), bitcoin.Transaction.SIGHASH_ALL);\n  } else {\n    return unsignedTransaction.hashForSignature(inputIndex, multisigRedeemScript(input.multisig).output, bitcoin.Transaction.SIGHASH_ALL);\n  }\n}\n\nfunction multisigSignatureBuffer(signature) {\n  var encodedSignerInputSignatureBuffer = new Buffer(signature, 'hex');\n\n  var decodedSignerInputSignatureBuffer = _bip[\"default\"].decode(encodedSignerInputSignatureBuffer);\n\n  var r = decodedSignerInputSignatureBuffer.r,\n      s = decodedSignerInputSignatureBuffer.s; // Ignore the leading 0 if r is 33 bytes\n\n  var rToUse = r;\n\n  if (r.byteLength > 32) {\n    rToUse = r.slice(1);\n  }\n\n  var signatureBuffer = new Buffer(64);\n  signatureBuffer.set(new Buffer(rToUse), 0);\n  signatureBuffer.set(new Buffer(s), 32);\n  return signatureBuffer;\n}\n/**\n * Add signatures to an unsigned transaction.\n * @param {Transaction} unsignedTransaction - generated transaction object from call to unsignedMultisigTransaction\n * @param {UTXO[]} inputs - generated array of inputs to the transaction (blockExplorerGetAddresesUTXOs|bitcoindListUnspent)\n * @param {Object[]} inputsSignaturesByPublicKey - input signatures mapped to the pulic key index [{signature: index},...]\n * @example\n * const keysigs = [{[pubkey1]: signature1}, {[pubkey2]: signature2}]\n * const signedTx = signedMultisigTransaction(unsignedTx, inputs, keysigs)\n * console.log(signedTx.toHex()) // 0100000001d73e679f...\n * @returns {Transaction} a signed {@link https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/types/transaction.d.ts|Transaction} object\n */\n\n\nfunction signedMultisigTransaction(unsignedTransaction, inputs, inputsSignaturesByPublicKey) {\n  var signedTransaction = bitcoin.Transaction.fromHex(unsignedTransaction.toHex()); // FIXME inefficient?\n\n  var _loop = function _loop(inputIndex) {\n    var input = inputs[inputIndex];\n    var inputPublicKeys = multisigPublicKeys(input.multisig); // Sort the signatures for this input across signers by the index\n    // of their public key within this input's redeem script.\n\n    var sortedSignatures = inputPublicKeys.map(function (publicKey) {\n      return inputsSignaturesByPublicKey[inputIndex][publicKey];\n    }).filter(function (signature) {\n      return signature ? signatureNoSighashType(signature) : signature;\n    });\n\n    if (multisigAddressType(input.multisig) === MULTISIG_ADDRESS_TYPES.P2WSH) {\n      var witness = multisigWitnessField(input.multisig, sortedSignatures);\n      signedTransaction.setWitness(inputIndex, witness);\n    } else if (multisigAddressType(input.multisig) === MULTISIG_ADDRESS_TYPES.P2SH_P2WSH) {\n      var _witness = multisigWitnessField(input.multisig, sortedSignatures);\n\n      signedTransaction.setWitness(inputIndex, _witness);\n      var scriptSig = multisigRedeemScript(input.multisig);\n      signedTransaction.ins[inputIndex].script = Buffer.from([scriptSig.output.length].concat(_toConsumableArray(scriptSig.output)));\n    } else {\n      var _scriptSig = multisigScriptSig(input.multisig, sortedSignatures);\n\n      signedTransaction.ins[inputIndex].script = _scriptSig.input;\n    }\n  };\n\n  for (var inputIndex = 0; inputIndex < inputs.length; inputIndex++) {\n    _loop(inputIndex);\n  }\n\n  return signedTransaction;\n}\n\nfunction multisigWitnessField(multisig, sortedSignatures) {\n  var witness = [\"\"].concat(sortedSignatures.map(function (s) {\n    return signatureNoSighashType(s) + '01';\n  }));\n  var witnessScript = multisigWitnessScript(multisig);\n  witness.push((0, _script.scriptToHex)(witnessScript));\n  return witness.map(function (wit) {\n    return Buffer.from(wit, 'hex');\n  });\n}\n\nfunction multisigScriptSig(multisig, signersInputSignatures) {\n  var signatureOps = signersInputSignatures.map(function (signature) {\n    return \"\".concat(signatureNoSighashType(signature), \"01\");\n  }).join(' '); // 01 => SIGHASH_ALL\n\n  var inputScript = \"OP_0 \".concat(signatureOps);\n  var inputScriptBuffer = bitcoin.script.fromASM(inputScript);\n  var redeemScript = bitcoin.payments.p2ms({\n    network: multisig.network,\n    output: Buffer.from(multisigRedeemScript(multisig).output, 'hex'),\n    input: inputScriptBuffer\n  });\n  return generateMultisigFromRedeemScript(multisigAddressType(multisig), redeemScript);\n}\n/**\n* @typedef {'Multisig'} Multisig - IMPORTANT: Always parse this and never use properties directly!\n*/\n\n/**\n* A utxo object for signing with various wallets\n* @typedef {Object} UTXO\n* @property {boolean} confirmed - This is for UI developers and not signing related\n* @property {string} txid - The transaction ID where funds were received\n* @property {number} index - The index in the transaction referred to by {txid}\n* @property {string} amount - String representation of BTC value\n* @property {BigNumber} amountSats - Value in satoshis\n* @property {string} [transactionHex] - Hex representation of the raw transaction referred to by txid\n* @property {Multisig} [multisig] - For parsing only\n*/","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.estimateMultisigP2SHTransactionLength = estimateMultisigP2SHTransactionLength;\n/**\n * This module provides a utility function for P2SH address type.\n * @module p2sh\n */\n\n/**\n * Estimate the transaction size for P2SH address type.\n * @param {Object} config - configuration for the calculation\n * @param {number} config.numInputs - input count used for calculation\n * @param {number} config.numOutputs - output count used for calculation\n * @param {number} config.m - number of required signers for the quorum\n * @param {number} config.n - number of total signers for the quorum\n * @returns {number} estimated transaction size in bytes\n */\n\nfunction estimateMultisigP2SHTransactionLength(config) {\n  var baseSize = 41 * config.numInputs + 34 * config.numOutputs + 30;\n  var signatureLength = 72 + 1; // approx including push byte\n\n  var scriptOverhead = 4;\n  var keylength = 33 + 1; // push byte\n\n  var sigSize = signatureLength * config.m * config.numInputs + keylength * config.n * config.numInputs + scriptOverhead * config.numInputs;\n  var vsize = baseSize + sigSize;\n  return vsize;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.estimateMultisigP2SHP2WSHTransactionLength = estimateMultisigP2SHP2WSHTransactionLength;\n/**\n * This module provides a utility function for P2SH-P2WSH address type.\n * @module p2sh_p2wsh\n */\n\n/**\n * Estimate the transaction vsize for P2SH-P2WSH address type.\n * @param {Object} config - configuration for the calculation\n * @param {number} config.numInputs - input count used for calculation\n * @param {number} config.numOutputs - output count used for calculation\n * @param {number} config.m - number of required signers for the quorum\n * @param {number} config.n - number of total signers for the quorum\n * @returns {number} estimated transaction vsize in bytes\n */\n\nfunction estimateMultisigP2SHP2WSHTransactionLength(config) {\n  var baseSize = 76 * config.numInputs + 34 * config.numOutputs + 30;\n  var signatureLength = 72;\n  var overhead = 6;\n  var keylength = 33;\n  var witnessSize = signatureLength * config.m * config.numInputs + keylength * config.n * config.numInputs + overhead * config.numInputs;\n  var vsize = Math.ceil(0.75 * baseSize + 0.25 * (baseSize + witnessSize));\n  return vsize;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.estimateMultisigP2WSHTransactionLength = estimateMultisigP2WSHTransactionLength;\n/**\n * This module provides a utility function for P2WSH address type.\n * @module p2wsh\n */\n\n/**\n * Estimate the transaction vsize for P2WSH address type.\n * @param {Object} config - configuration for the calculation\n * @param {number} config.numInputs - input count used for calculation\n * @param {number} config.numOutputs - output count used for calculation\n * @param {number} config.m - number of required signers for the quorum\n * @param {number} config.n - number of total signers for the quorum\n * @returns {number} estimated transaction vsize in bytes\n */\n\nfunction estimateMultisigP2WSHTransactionLength(config) {\n  var baseSize = 41 * config.numInputs + 34 * config.numOutputs + 30;\n  var signatureLength = 72;\n  var overhead = 6;\n  var keylength = 33;\n  var witnessSize = signatureLength * config.m * config.numInputs + keylength * config.n * config.numInputs + overhead * config.numInputs;\n  var vsize = Math.ceil(0.75 * baseSize + 0.25 * (baseSize + witnessSize));\n  return vsize;\n}","\"use strict\";\n\nrequire(\"core-js/modules/es.array.concat\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.blockExplorerURL = blockExplorerURL;\nexports.blockExplorerAPIURL = blockExplorerAPIURL;\nexports.blockExplorerTransactionURL = blockExplorerTransactionURL;\nexports.blockExplorerAddressURL = blockExplorerAddressURL;\n\nvar _networks = require(\"./networks\");\n/**\n * This module provides various helper functions for the Blockstream block explorer and associated API.\n * Use this to easily access the block explorer links and API endpoint URLs\n * @module block_explorer\n */\n\n\nvar BASE_URL_MAINNET = 'https://blockstream.info';\nvar BASE_URL_TESTNET = 'https://blockstream.info/testnet';\n\nfunction blockExplorerBaseURL(network) {\n  return network === _networks.NETWORKS.TESTNET ? BASE_URL_TESTNET : BASE_URL_MAINNET;\n}\n/**\n * Formats the proper URL based on the block explorer path and network.\n * @param {string} path - the explorer path\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const path = \"/block/00000000000000000011341d69792271766e4683e29b3ea169eacc59bde10a57\";\n * const url = blockExplorerURL(path, NETWORKS.MAINNET);\n * console.log(url) // https://blockstream.info/block/00000000000000000011341d69792271766e4683e29b3ea169eacc59bde10a57\n * @returns {string} the full block explorer url\n */\n\n\nfunction blockExplorerURL(path, network) {\n  return \"\".concat(blockExplorerBaseURL(network)).concat(path);\n}\n/**\n * Formats the proper API URL based on the api path and network.\n * @param {string} path - the api path\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const path = \"/tx/1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\";\n * const url = blockExplorerAPIURL(path, NETWORKS.MAINNET);\n * console.log(url); // https://blockstream.info/api/tx/1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\n * @returns {string} the full block explorer url\n */\n\n\nfunction blockExplorerAPIURL(path, network) {\n  return \"\".concat(blockExplorerBaseURL(network), \"/api\").concat(path);\n}\n/**\n * Formats the proper URL for a transaction on a given network.\n * @param {string} txid - the transaction id to look up\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const txid = \"1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\";\n * const url = blockExplorerTransactionURL(txid, NETWORKS.MAINNET);\n * console.log(url); // https://blockstream.info/tx/1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\n * @returns {string} the full transaction URL\n */\n\n\nfunction blockExplorerTransactionURL(txid, network) {\n  return blockExplorerURL(\"/tx/\".concat(txid), network);\n}\n/**\n * Formats the proper URL for an address on a given network.\n * @param {string} address the address to look up\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @example\n * const address = \"39YqNoLULDpbjmeCTdGJ42DQhrQLzRcMdX\";\n * const url = blockExplorerAddressURL(address, NETWORKS.MAINNET);\n * console.log(url); // https://blockstream.info/address/39YqNoLULDpbjmeCTdGJ42DQhrQLzRcMdX\n * @returns {string} full URL for address lookup\n */\n\n\nfunction blockExplorerAddressURL(address, network) {\n  return blockExplorerURL(\"/address/\".concat(address), network);\n}"],"sourceRoot":""}