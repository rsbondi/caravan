(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){e.exports={feeMagicBtn:"styles_feeMagicBtn__3R6H-",utxoTxid:"styles_utxoTxid__1oJ63",outputsFormInput:"styles_outputsFormInput__2eCJm",unconfirmed:"styles_unconfirmed__1u5jD",spent:"styles_spent__1ho2q"}},248:function(e,t,a){},376:function(e){e.exports={a:"0.1.5"}},391:function(e,t,a){e.exports=a(760)},580:function(e,t){},583:function(e,t){},603:function(e,t){},605:function(e,t){},758:function(e,t,a){e.exports=a.p+"static/media/logo.66481e66.png"},760:function(e,t,a){"use strict";a.r(t);a(392);var n=a(0),r=a.n(n),i=a(29),o=a.n(i),l=a(88),c=a(16),s=a(363),u=a.n(s),d=a(364),p=a.n(d),m=a(365),h=a(859),E=a(868),b=a(869);function f(e,t){return r.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)}function v(e,t){var a=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,t);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}var g=a(858),P=a(89),y=a(813),I=a(807),S=a(811),O=a(812),T=a(814),w=a(762),j=a(815),C=a(817),x=a(820),k=a(821),K=a(816),N=a(818),R=a(819),_=a(822),B=function(){return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Disclaimer"}),r.a.createElement(O.a,null,r.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},A=function(){return r.a.createElement("div",null,r.a.createElement(g.a,{mt:4,mb:2},r.a.createElement(P.a,{variant:"h2"},"Welcome to Caravan!")),r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},r.a.createElement(y.a,{item:!0},r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Stateless Multisig Coordinator"}),r.a.createElement(O.a,null,r.a.createElement("p",null,"Caravan is making bitcoin ",r.a.createElement("strong",null,"multisig")," custody easier and safer through transparency and standards."),r.a.createElement("p",null,"Caravan is a ",r.a.createElement("strong",null,"coordination")," software.  It connects to a source of consensus and your keys to build and interact with multisig bitcoin addresses."),r.a.createElement("p",null,"Caravan is also ",r.a.createElement("strong",null,"stateless"),".  It does not itself store any data.  You must safekeep the addresses (and redeem scripts & BIP32 paths) you create.")))),r.a.createElement(y.a,{item:!0},r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Keys"}),r.a.createElement(O.a,null,r.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),r.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind.  Caravan, being stateless, cannot store your private key but it can talk to hardware devices or software applications which do."),r.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),r.a.createElement(y.a,{item:!0},r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Consensus"}),r.a.createElement(O.a,null,r.a.createElement("p",null,"In order to look up address balances and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),r.a.createElement("p",null,"Running a full bitcoin node is the best way to determine the current state of the bitcoin network.  Caravan can be easily configured to use your own bitcoin node for consensus information and broadcasting transactions."),r.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at ",r.a.createElement("code",null,"blockstream.info"),"."))))),r.a.createElement(y.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},r.a.createElement(y.a,{item:!0},r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Learn More"}),r.a.createElement(O.a,null,r.a.createElement(T.a,null,r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(K.a,null)),r.a.createElement(C.a,null,f("https://www.unchained-capital.com/blog/the-caravan-arrives/","Blog Post"))),r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,null)),r.a.createElement(C.a,null,f("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(R.a,null)),r.a.createElement(C.a,null,f("https://github.com/unchained-capital/caravan","Source Code"))))))),r.a.createElement(y.a,{item:!0},r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Supported Devices"}),r.a.createElement(O.a,null,"Caravan has been tested with the following hardware wallets:",r.a.createElement("ul",null,r.a.createElement("li",null,f("https://shop.trezor.io/product/trezor-one-white","Trezor One")),r.a.createElement("li",null,f("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S"))),"And web browsers:",r.a.createElement("ul",null,r.a.createElement("li",null,f("https://www.google.com/chrome/","Chrome")),r.a.createElement("li",null,f("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),r.a.createElement(x.a,null,r.a.createElement(k.a,{href:"https://github.com/unchained-capital/caravan/issues"},r.a.createElement(_.a,null)," \xa0 Report Issue")))))),r.a.createElement(g.a,{mt:2},r.a.createElement(B,null)))},M=a(8),D=a(10),U=a(12),z=a(11),L=a(13),F=a(380),H=a(863),W=a(852),q=a(20),G=a(3),X=a(763),Y=a(823),V=a(824),Z=a(861),J=a(765),Q="SET_NETWORK",$="SET_TOTAL_SIGNERS",ee="SET_REQUIRED_SIGNERS",te="SET_ADDRESS_TYPE",ae="SET_FROZEN";function ne(e){return{type:ae,value:e}}var re=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).handleNetworkChange=function(e){(0,a.props.setNetwork)(e.target.value)},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.frozen;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Network"}),r.a.createElement(O.a,null,r.a.createElement(X.a,{component:"fieldset"},r.a.createElement(Y.a,null,r.a.createElement(V.a,{id:"mainnet",control:r.a.createElement(Z.a,{color:"primary"}),name:"network",value:"mainnet",label:r.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===G.MAINNET,disabled:a}),r.a.createElement(V.a,{id:"testnet",control:r.a.createElement(Z.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===G.TESTNET,disabled:a})),r.a.createElement(J.a,null,r.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),t}(r.a.Component);var ie={setNetwork:function(e){return{type:Q,value:e}}},oe=Object(c.b)(function(e){return{network:e.settings.network,frozen:e.settings.frozen}},ie)(re),le=a(825),ce=a(826),se=(a(248),7),ue=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).renderIncrementRequiredSigners=function(){var e=a.props,t=e.requiredSigners,n=e.totalSigners,i=e.frozen,o=t===n||i;return r.a.createElement(F.a,{color:"primary",onClick:a.handleIncrementRequiredSigners,disabled:o},r.a.createElement(le.a,null))},a.renderDecrementRequiredSigners=function(){var e=a.props,t=e.requiredSigners,n=e.frozen,i=1===t||n;return r.a.createElement(F.a,{color:"secondary",onClick:a.handleDecrementRequiredSigners,disabled:i},r.a.createElement(ce.a,null))},a.renderIncrementTotalSigners=function(){var e=a.props,t=e.totalSigners,n=e.frozen,i=t===se||n;return r.a.createElement(F.a,{color:"primary",onClick:a.handleIncrementTotalSigners,disabled:i},r.a.createElement(le.a,null))},a.renderDecrementTotalSigners=function(){var e=a.props,t=e.requiredSigners,n=e.totalSigners,i=e.frozen,o=n===t||2===n||i;return r.a.createElement(F.a,{color:"secondary",onClick:a.handleDecrementTotalSigners,disabled:o},r.a.createElement(ce.a,null))},a.handleIncrementRequiredSigners=function(e){var t=a.props,n=t.requiredSigners;(0,t.setRequiredSigners)(n+1),e.preventDefault()},a.handleDecrementRequiredSigners=function(e){var t=a.props,n=t.requiredSigners;(0,t.setRequiredSigners)(n-1),e.preventDefault()},a.handleIncrementTotalSigners=function(e){var t=a.props,n=t.totalSigners;(0,t.setTotalSigners)(n+1),e.preventDefault()},a.handleDecrementTotalSigners=function(e){var t=a.props,n=t.totalSigners;(0,t.setTotalSigners)(n-1),e.preventDefault()},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,a=e.totalSigners;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Quorum"}),r.a.createElement(O.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{container:!0,justify:"center"},r.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),r.a.createElement(y.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},r.a.createElement(y.a,{item:!0},this.renderIncrementRequiredSigners()),r.a.createElement(y.a,{item:!0},r.a.createElement(P.a,{variant:"h2"},t)),r.a.createElement(y.a,{item:!0},r.a.createElement("small",null,r.a.createElement("p",null,"Required"))),r.a.createElement(y.a,{item:!0},this.renderDecrementRequiredSigners())),r.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},r.a.createElement(y.a,{item:!0},r.a.createElement(P.a,{variant:"h6"},"of"))),r.a.createElement(y.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},r.a.createElement(y.a,{item:!0},this.renderIncrementTotalSigners()),r.a.createElement(y.a,{item:!0},r.a.createElement(P.a,{variant:"h2"},a)),r.a.createElement(y.a,{item:!0},r.a.createElement("small",null,r.a.createElement("p",null,"Total"))),r.a.createElement(y.a,{item:!0},this.renderDecrementTotalSigners())),r.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),t}(r.a.Component);var de={setTotalSigners:function(e){return{type:$,value:e}},setRequiredSigners:function(e){return{type:ee,value:e}}},pe=Object(c.b)(function(e){return e.settings},de)(ue),me=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).handleTypeChange=function(e){(0,a.props.setType)(e.target.value)},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addressType,a=e.frozen;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Address Type"}),r.a.createElement(O.a,null,r.a.createElement(X.a,{component:"fieldset"},r.a.createElement(Y.a,null,r.a.createElement(V.a,{id:G.P2SH,control:r.a.createElement(Z.a,{color:"primary"}),name:"type",value:G.P2SH,label:G.P2SH,onChange:this.handleTypeChange,checked:t===G.P2SH,disabled:a}),r.a.createElement(V.a,{id:G.P2SH_P2WSH,control:r.a.createElement(Z.a,{color:"primary"}),name:"type",value:G.P2SH_P2WSH,label:G.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===G.P2SH_P2WSH,disabled:a}),r.a.createElement(V.a,{id:G.P2WSH,control:r.a.createElement(Z.a,{color:"primary"}),name:"type",value:G.P2WSH,label:G.P2WSH,onChange:this.handleTypeChange,checked:t===G.P2WSH,disabled:a})),r.a.createElement(J.a,null,r.a.createElement("small",null,"Choose '",G.P2WSH,"' for best practices, '",G.P2SH,"' for greatest compatibility.")))))}}]),t}(r.a.Component);var he={setType:function(e){return{type:te,value:e}}},Ee=Object(c.b)(function(e){return e.settings},he)(me),be=a(827),fe=a(828);function ve(e){return function(t){return{type:e,value:t}}}function ge(e){return function(t,a){return{type:e,number:t,value:a}}}function Pe(e){var t,a={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var r=n[t],i=e[r];a[r]=ge(i)}return a}var ye=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={url_edited:!1},a.handleTypeChange=function(e){var t=a.props,n=t.setType,r=t.network,i=t.setUrl,o=e.target.checked?"private":"public";"private"!==o||a.state.url_edited||i("http://localhost:".concat("mainnet"===r?8332:18332)),n(o)},a.handleUrlChange=function(e){var t=a.props,n=t.setUrl,r=t.setUrlError,i=e.target.value,o=a.validateUrl(i);a.state.url_edited||o||a.setState({url_edited:!0}),n(i),r(o)},a.handleUsernameChange=function(e){var t=a.props,n=t.setUsername,r=t.setUsernameError,i=e.target.value,o=a.validateUsername(i);n(i),r(o)},a.handlePasswordChange=function(e){var t=a.props,n=t.setPassword,r=t.setPasswordError,i=e.target.value,o=a.validatePassword(i);n(i),r(o)},a.toggle=function(){var e=a.props.client,t=e.type.charAt(0).toUpperCase()+e.type.slice(1);return r.a.createElement(V.a,{control:r.a.createElement(be.a,{color:"primary",checked:"private"===e.type,onChange:a.handleTypeChange,value:"private"}),label:t})},a.title=function(){return r.a.createElement(y.a,{container:!0,justify:"space-between"},r.a.createElement(y.a,{item:!0},"Consensus"),r.a.createElement(y.a,{item:!0},a.toggle()))},a.disabled=function(){return!1},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}},{key:"validatePassword",value:function(e){return""}},{key:"validateUsername",value:function(e){return""}},{key:"render",value:function(){var e=this.props,t=e.client,a=e.url_error,n=e.username_error,i=e.password_error;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:this.title()}),r.a.createElement(O.a,null,"public"===t.type?r.a.createElement("div",null,r.a.createElement("p",null,"'Public' uses the ",r.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",r.a.createElement("code",null,"bitcoind")," node."),"undefined"!==typeof this.props.publicNotes&&this.props.publicNotes):r.a.createElement("div",null,r.a.createElement("p",null,"A ",r.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),r.a.createElement("p",null,r.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",f("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),r.a.createElement("form",null,r.a.createElement(y.a,{container:!0,direction:"column"},r.a.createElement(y.a,{item:!0},r.a.createElement(fe.a,{fullWidth:!0,label:"URL",value:t.url,onChange:this.handleUrlChange,disabled:this.disabled(),error:""!==a,helperText:a})),r.a.createElement(y.a,{item:!0}),r.a.createElement(y.a,{item:!0},r.a.createElement(fe.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:t.username,onChange:this.handleUsernameChange,disabled:this.disabled(),error:n,helperText:n})),r.a.createElement(y.a,{item:!0},r.a.createElement(fe.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:t.password,onChange:this.handlePasswordChange,disabled:this.disabled(),error:i,helperText:i})))),"undefined"!==typeof this.props.privateNotes&&this.props.privateNotes)))}}]),t}(r.a.Component);var Ie=Object(c.b)(function(e){return{network:e.settings.network,client:e.client,url_error:e.client.url_error,url:e.client.url}},function(e){var t,a={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var r=n[t],i=e[r];a[r]=ve(i)}return a}({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR",setStatus:"SET_CLIENT_STATUS"}))(ye),Se=a(14),Oe=a.n(Se),Te=a(22),we=a(19),je=a.n(we),Ce=a(104),xe=a.n(Ce);function ke(){return(ke=Object(Te.a)(Oe.a.mark(function e(t,a){var n,r;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe.a.get(Object(G.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),a));case 3:return n=e.sent,r=n.data,e.next=7,Promise.all(r.map(function(){var e=Object(Te.a)(Oe.a.mark(function e(t){var n,r,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.a.get(Object(G.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),a));case 2:return n=e.sent,r=n.data,i=new je.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(G.satoshisToBitcoins)(i).toFixed(8),amountSats:i,transactionHex:r});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Ke(){return(Ke=Object(Te.a)(Oe.a.mark(function e(t,a){var n,r;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe.a.get(Object(G.blockExplorerAPIURL)("/address/".concat(t),a));case 3:return n=e.sent,r=n.data,e.abrupt("return",{used:r.chain_stats.funded_txo_count>0||r.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Ne(){return(Ne=Object(Te.a)(Oe.a.mark(function e(t){var a,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe.a.get(Object(G.blockExplorerAPIURL)("/fee-estimates",t));case 3:return a=e.sent,n=a.data,e.abrupt("return",Math.ceil(n[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Re(){return(Re=Object(Te.a)(Oe.a.mark(function e(t,a){var n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe.a.post(Object(G.blockExplorerAPIURL)("/tx",a),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function _e(e,t,a){return Be.apply(this,arguments)}function Be(){return(Be=Object(Te.a)(Oe.a.mark(function e(t,a,n){var r,i=arguments;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>3&&void 0!==i[3]?i[3]:[],e.abrupt("return",new Promise(function(){var e=Object(Te.a)(Oe.a.mark(function e(i,o){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:xe()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:a,data:{jsonrpc:"2.0",id:0,method:"".concat(n),params:r}}).then(function(e){return i(e.data)}).catch(o);case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ae(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function Me(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function De(){return(De=Object(Te.a)(Oe.a.mark(function e(t){var a,n,r,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.address,i=t.addresses,e.abrupt("return",new Promise(function(){var e=Object(Te.a)(Oe.a.mark(function e(t){var o,l,c,s;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=i||[r],e.next=4,_e(a,n,"listunspent",[0,9999999,o]);case 4:return l=e.sent,c=[],l.result.forEach(function(e){c.push(_e(a,n,"getrawtransaction",[e.txid]))}),e.next=9,Promise.all(c);case 9:s=e.sent,t(l.result.map(function(e,t){var a=new je.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:a.toFixed(8),amountSats:Object(G.bitcoinsToSatoshis)(a),transactionHex:s[t].result}})),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ue(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(Te.a)(Oe.a.mark(function e(t){var a,n,r,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.address,e.prev=1,e.next=4,_e(a,n,"getreceivedbyaddress",[r]);case 4:if("undefined"!==typeof(i=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from "+a);case 7:return e.abrupt("return",{used:i.result>0});case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Le(){return(Le=Object(Te.a)(Oe.a.mark(function e(t){var a,n,r,i,o,l;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.numBlocks,i=void 0===r?2:r,e.next=3,_e(a,n,"estimatesmartfee",[i]);case 3:return o=e.sent,l=o.result.feerate,e.abrupt("return",Math.ceil(1e5*l));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fe(){return(Fe=Object(Te.a)(Oe.a.mark(function e(t){var a,n,r,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.hex,e.prev=1,e.next=4,_e(a,n,"sendrawtransaction",[r]);case 4:return i=e.sent,e.abrupt("return",i.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var He="public";function We(e,t,a){return a.type===He?function(e,t){return ke.apply(this,arguments)}(e,t):function(e){return De.apply(this,arguments)}(Object(M.a)({},Me(a),{address:e}))}function qe(e,t,a){return a.type===He?function(e,t){return Ke.apply(this,arguments)}(e,t):Ue(Object(M.a)({},Me(a),{address:e}))}function Ge(e,t){return t.type===He?function(e){return Ne.apply(this,arguments)}(e):function(e){return Le.apply(this,arguments)}(Object(M.a)({},Me(t),{numBlocks:1}))}function Xe(e,t,a){return a.type===He?function(e,t){return Re.apply(this,arguments)}(e,t):function(e){return Fe.apply(this,arguments)}(Object(M.a)({},Me(a),{hex:e}))}var Ye=a(831),Ve=a(832),Ze=a(833),Je=a(834),Qe=a(835),$e=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return r.a.createElement(g.a,null,r.a.createElement(Ye.a,null,r.a.createElement(Ve.a,null,r.a.createElement(Ze.a,null,r.a.createElement(Je.a,null,"Name"),r.a.createElement(Je.a,null,"BIP32 Path"),r.a.createElement(Je.a,null,"Extended Public Key"))),r.a.createElement(Qe.a,null,a.renderConfirmationInfo())))},a.renderConfirmationInfo=function(){var e=a.props.extendedPublicKeyImporters;return Object.values(e).map(function(e,t){return r.a.createElement(Ze.a,{key:t},r.a.createElement(Je.a,null,e.name),r.a.createElement(Je.a,null,"text"===e.method?"N/A":e.bip32Path),r.a.createElement(Je.a,null,e.extendedPublicKey))})},a}return Object(L.a)(t,e),t}(r.a.Component);var et=Object(c.b)(function(e){return{extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}},{})($e),tt="UPDATE_DEPOSIT_NODE",at="UPDATE_CHANGE_NODE",nt="RESET_NODES_SPEND",rt="UPDATE_AUTO_SPEND",it="UPDATE_VIEW_ADDRESSES",ot="UPDATE_DEPOSITING",lt="UPDATE_SPENDING",ct="UPDATE_WALLET_NAME",st="RESET_WALLET_VIEW",ut="SPEND_NODES";function dt(e){return{type:tt,value:Object(M.a)({},e,{change:!1})}}function pt(e){return{type:at,value:Object(M.a)({},e,{change:!0})}}function mt(e){return{type:rt,value:e}}function ht(){return{type:ot}}function Et(){return{type:lt}}function bt(){return{type:st}}var ft="CHOOSE_PERFORM_SPEND",vt="SET_REQUIRED_SIGNERS",gt="SET_TOTAL_SIGNERS",Pt="SET_INPUTS",yt="ADD_OUTPUT",It="SET_OUTPUT_ADDRESS",St="SET_OUTPUT_AMOUNT",Ot="DELETE_OUTPUT",Tt="SET_FEE_RATE",wt="SET_FEE",jt="FINALIZE_OUTPUTS",Ct="RESET_OUTPUTS",xt="SET_TXID",kt="RESET_TRANSACTION",Kt="SET_IS_WALLET";function Nt(e){return{type:vt,value:e}}function Rt(e){return{type:Pt,value:e}}function _t(){return{type:yt}}function Bt(e,t){return{type:It,number:e,value:t}}function At(e,t){return{type:St,number:e,value:t}}function Mt(e){return{type:Tt,value:e}}function Dt(e){return{type:jt,value:e}}var Ut=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).scrollRef=r.a.createRef(),a.componentDidMount=function(){a.scrollRef.current.scrollIntoView({behavior:"smooth"})},a.render=function(){return r.a.createElement(y.a,{container:!0,justify:"center",ref:a.scrollRef},r.a.createElement(y.a,{item:!0,md:8},r.a.createElement("h3",null,"Balance: ",a.totalBalance())),r.a.createElement(y.a,{item:!0,md:4},r.a.createElement(g.a,{component:"span"},r.a.createElement(k.a,{variant:"contained",color:"secondary",onClick:a.setDeposit},"Deposit")),r.a.createElement(g.a,{component:"span",ml:2},r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:a.setSpend},"Spend")),r.a.createElement(g.a,{component:"span",ml:2},r.a.createElement(k.a,{variant:"contained",onClick:a.setView},"View Addresses"))))},a.setDeposit=function(){(0,a.props.setDepositing)()},a.setSpend=function(){var e=a.props,t=e.setSpending,n=e.requiredSigners;(0,e.setRequiredSigners)(n),t()},a.setView=function(){a.props.setViewing()},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"totalBalance",value:function(){var e=this.props,t=e.deposits,a=e.change;return Object(G.satoshisToBitcoins)(t.balanceSats.plus(a.balanceSats)).toFixed()}}]),t}(r.a.Component);var zt={setDepositing:ht,setSpending:Et,setViewing:function(){return{type:it}},setRequiredSigners:Nt},Lt=Object(c.b)(function(e){return Object(M.a)({},e.wallet,{requiredSigners:e.spend.transaction.requiredSigners})},zt)(Ut),Ft=a(197),Ht=a.n(Ft),Wt=a(367),qt=a.n(Wt),Gt=a(836),Xt=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={copied:!1,timer:null},a.componentWillUnmount=function(){var e=a.state.timer;e&&clearTimeout(e)},a.render=function(){var e=a.props,t=e.newline,n=e.text,i=e.children;return r.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},r.a.createElement(qt.a,{text:n,onCopy:a.onCopy,options:{format:"text/plain"}},r.a.createElement("span",{className:"copyable"},i||n,t&&r.a.createElement("br",null),a.badge())))},a.badge=function(){return a.state.copied?r.a.createElement(Gt.a,{fontSize:"small"}):null},a.onCopy=function(){var e=setTimeout(function(){a.setState({copied:!1,timer:null})},1e3);a.setState({copied:!0,timer:e})},a}return Object(L.a)(t,e),t}(r.a.Component);Xt.defaultProps={newline:!1,icon:!0};var Yt,Vt=Xt,Zt=a(865),Jt=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).state={address:"",bip32Path:"",amount:0,amountError:"",showReceived:!1},a.handleAmountChange=function(e){var t=e.target.value,n="";t.length&&!t.match(/^[0-9.]+$/)&&(n="Amount must be numeric");var r=t.split(".");r.length>2?n="Amount must be numeric":2===r.length&&r[1].length>8&&(n="Amount must have maximum precision of 8 decimal places"),a.setState({amount:e.target.value,amountError:n})},a.qrString=function(){var e=a.state,t=e.address,n=e.amount;return"bitcoin:".concat(t).concat(n?"?amount="+n:"")},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){for(var e=this,t=this.props,a=t.deposits,n=t.network,r=t.client,i=t.updateDepositNode,o=t.resetWalletView,l=Object.values(a.nodes),c=0;c<l.length;c++){var s=l[c];if(s.balanceSats.isEqualTo(0)&&!s.addressUsed){this.setState({address:s.multisig.address,bip32Path:s.bip32Path});break}}this.state.address,Yt=setInterval(Object(Te.a)(Oe.a.mark(function t(){var a,l;return Oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,We(e.state.address,n,r);case 3:(a=t.sent).length&&(clearInterval(Yt),l=a.reduce(function(e,t){return e.plus(t.amountSats)},new je.a(0)),i({change:!1,bip32Path:e.state.bip32Path,utxos:a,balanceSats:l,fetchedUTXOs:!0,fetchUTXOsError:""}),e.setState({showReceived:!0}),setTimeout(o,5e3)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])})),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(Yt)}},{key:"render",value:function(){var e=this,t=this.state,a=t.amount,n=t.amountError,i=t.address,o=t.showReceived;return r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Deposit"}),r.a.createElement(O.a,null,r.a.createElement(fe.a,{fullWidth:!0,label:"Amount",name:"depositAmount",onChange:this.handleAmountChange,value:a,error:""!==n,helperText:n}),r.a.createElement(Vt,{text:this.qrString(),newline:!0},r.a.createElement("p",null,r.a.createElement("code",null,i)),r.a.createElement(Ht.a,{size:300,value:this.qrString(),level:"L"}),r.a.createElement("p",null,"Scan QR code or click to copy address to clipboard.")))),r.a.createElement(Zt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:3e3,onClose:function(){return e.setState({showReceived:!1})},ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Deposit received")}))}}]),t}(r.a.Component);var Qt={updateDepositNode:dt,resetWalletView:bt},$t=Object(c.b)(function(e){return Object(M.a)({},e.wallet,e.settings,{client:e.client})},Qt)(Jt),ea=a(862),ta=a(864),aa=a(866),na=a(839),ra=a(840),ia=a(838),oa=a(837),la=(a(249),a(103)),ca=a.n(la),sa=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).renderInputs=function(){var e=a.props,t=e.inputs,n=e.network;return t.map(function(e,t){var a="".concat(ca.a.utxoTxid).concat(e.confirmed?"":" "+ca.a.unconfirmed),i=e.confirmed?"confirmed":"unconfirmed";return r.a.createElement(Ze.a,{hover:!0,key:e.txid},r.a.createElement(Je.a,null,t+1),r.a.createElement(Je.a,{className:a},r.a.createElement(Vt,{text:e.txid},r.a.createElement("code",{title:i},e.txid))),r.a.createElement(Je.a,null,r.a.createElement(Vt,{text:e.index.toString()})),r.a.createElement(Je.a,null,r.a.createElement(Vt,{text:Object(G.satoshisToBitcoins)(e.amountSats).toString()})),r.a.createElement(Je.a,null,f(Object(G.blockExplorerTransactionURL)(e.txid,n),r.a.createElement(oa.a,null))))})},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inputs,a=e.inputsTotalSats;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Available Inputs (".concat(t.length,")")}),r.a.createElement(O.a,null,r.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),r.a.createElement(Ye.a,null,r.a.createElement(Ve.a,null,r.a.createElement(Ze.a,{hover:!0},r.a.createElement(Je.a,null,"Number"),r.a.createElement(Je.a,null,"TXID"),r.a.createElement(Je.a,null,"Index"),r.a.createElement(Je.a,null,"Amount (BTC)"),r.a.createElement(Je.a,null,"View"))),r.a.createElement(Qe.a,null,this.renderInputs()),r.a.createElement(ia.a,null,r.a.createElement(Ze.a,{hover:!0},r.a.createElement(Je.a,{colSpan:3},"TOTAL:"),r.a.createElement(Je.a,{colSpan:2},Object(G.satoshisToBitcoins)(a).toString()))))))}}]),t}(r.a.Component);var ua=Object(c.b)(function(e){return Object(M.a)({},e.settings)})(sa),da=a(368),pa=a.n(da),ma=a(369),ha=a.n(ma),Ea=a(867),ba=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).renderScript=function(e,t){var a=Object(G.scriptToHex)(t),n=Object(G.scriptToOps)(t);return r.a.createElement(g.a,{mt:2},r.a.createElement(P.a,{variant:"h6"},e),r.a.createElement(y.a,{container:!0,spacing:2},r.a.createElement(y.a,{item:!0,sm:6},r.a.createElement(Vt,{text:a},r.a.createElement("code",null,a))),r.a.createElement(y.a,{item:!0,sm:6},r.a.createElement(Vt,{text:n},r.a.createElement("code",null,n)))))},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.multisig,n=a.address,i=Object(G.multisigRedeemScript)(a),o=Object(G.multisigWitnessScript)(a);return r.a.createElement(g.a,{mt:2},r.a.createElement(P.a,{variant:"h6"},"Address"),r.a.createElement(P.a,{align:"center",variant:"h5"},r.a.createElement(y.a,{container:!0,direction:"column",spacing:2},r.a.createElement(y.a,{item:!0},r.a.createElement(Vt,{text:n},r.a.createElement("code",null,n)),"\xa0",f(Object(G.blockExplorerAddressURL)(n,t),r.a.createElement(oa.a,null))),r.a.createElement(y.a,{item:!0,justify:"center",container:!0,spacing:3},r.a.createElement(y.a,{item:!0},r.a.createElement(Ea.a,{label:"BTC"})),r.a.createElement(y.a,{item:!0},r.a.createElement(Ea.a,{label:Object(G.networkLabel)(t)})),r.a.createElement(y.a,{item:!0},r.a.createElement(Ea.a,{label:"".concat(Object(G.multisigRequiredSigners)(a),"-of-").concat(Object(G.multisigTotalSigners)(a))})),r.a.createElement(y.a,{item:!0},r.a.createElement(Ea.a,{label:Object(G.multisigAddressType)(a)}))))),this.renderScript("Script",a),i&&this.renderScript("Redeem Script",i),o&&this.renderScript("Witness Script",o))}}]),t}(r.a.Component);var fa=Object(c.b)(function(e){return e.settings},{})(ba),va=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){a.generate()},a.render=function(){var e=a.props,t=e.bip32Path,n=e.spend,i=e.fetchedUTXOs,o=e.balanceSats,l=e.fetchUTXOsError,c=e.multisig,s=e.utxos,u=e.spending,d=e.addressKnown;return r.a.createElement(Ze.a,{key:t},u&&r.a.createElement(Je.a,null,r.a.createElement(ta.a,{id:t,name:"spend",onChange:a.handleSpend,checked:n,disabled:!i||o.isEqualTo(0)})),r.a.createElement(Je.a,null,r.a.createElement("code",null,t)),r.a.createElement(Je.a,null,s.length),r.a.createElement(Je.a,null,i&&d?Object(G.satoshisToBitcoins)(o).toFixed():"",""!==l&&r.a.createElement(J.a,{className:"danger"},l)),r.a.createElement(Je.a,null,c?a.renderAddress():"..."))},a.addressContent=function(){var e=a.props,t=e.multisig,n=e.network,i=e.addressUsed,o=e.balanceSats;return r.a.createElement("div",null,r.a.createElement(Vt,{text:t.address},r.a.createElement("code",{className:i&&o.isEqualTo(0)?ca.a.spent:""},t.address)),"\xa0",f(Object(G.blockExplorerAddressURL)(t.address,n),r.a.createElement(pa.a,{onClick:function(e){return e.stopPropagation()}})))},a.renderAddress=function(){var e=a.props,t=e.bip32Path,n=e.utxos,i=e.balanceSats,o=e.multisig;return r.a.createElement(aa.a,null,r.a.createElement(na.a,{expandIcon:r.a.createElement(ha.a,null),"aria-controls":"panel1a-content",id:"address-header"+t},a.addressContent()),r.a.createElement(ra.a,null,r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:12},r.a.createElement(fa,{multisig:o})),i.isGreaterThan(0)&&r.a.createElement(y.a,{item:!0,md:12},r.a.createElement(ua,{inputs:n,inputsTotalSats:i})))))},a.generate=function(){var e=a.props,t=e.present,n=e.change,r=e.bip32Path,i=e.addNode;t||i(n,r)},a.handleSpend=function(e){var t=a.props,n=t.change,r=t.bip32Path,i=t.updateNode,o=t.inputs,l=t.utxos,c=t.multisig,s=t.setInputs,u=t.updateAutoSpend,d=t.setFeeRate,p=t.feeRate;s(e.target.checked?o.concat(l.map(function(e){return Object(M.a)({},e,{multisig:c,bip32Path:r})})):o.filter(function(e){return 0===l.filter(function(t){return t.txid===e.txid&&t.index===e.index}).length})),i(n,{spend:e.target.checked,bip32Path:r}),u(!1),d(p)},a}return Object(L.a)(t,e),t}(r.a.Component);var ga,Pa={setInputs:Rt,setFeeRate:Mt,updateAutoSpend:mt},ya=Object(c.b)(function(e,t){var a="1"===(t.bip32Path||"").split("/")[1],n=e.wallet[a?"change":"deposits"];return Object(M.a)({},e.settings,{change:a},n.nodes[t.bip32Path],e.spend.transaction,{spending:e.wallet.info.spending})},Pa)(va),Ia=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).state={imported:!1,importError:"",rescan:!1,addressesError:"",addressPresent:!1},a.componentDidMount=function(){a.props.autoImport&&(ga=setInterval(a.checkAddress,5e3))},a.componentWillUnmount=function(){clearInterval(ga)},a.handleRescan=function(e){a.setState({rescan:e.target.checked})},a.checkAddress=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i,o,l;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.client,r=t.addresses,i=t.autoImport,o=r[0],e.prev=2,e.next=5,Ue(Object(M.a)({},Me(n),{address:o}));case 5:"undefined"!==typeof e.sent.used&&(a.setState({addressPresent:!0,addressesError:""}),clearInterval(ga)),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),l=e.t0.response&&e.t0.response.status||"unknown",i&&Ae(e.t0)&&!a.state.rescan&&a.import(),a.setState({addressesError:401===l?e.t0.response.statusText:500===l?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured"}),console.log(l,e.t0.response);case 15:case"end":return e.stop()}},e,null,[[2,9]])})),a.import=function(){var e=a.props,t=e.addresses,n=e.client,r=e.importCallback,i=a.state.rescan;(function(e){var t=e.url,a=e.auth,n=e.addresses,r=e.label,i=e.rescan,o=n.map(function(e){return{scriptPubKey:{address:e},label:r,timestamp:0}});return i?(_e(t,a,"importmulti",[o,{rescan:i}]),new Promise(function(e){return e({result:[]})})):_e(t,a,"importmulti",[o,{rescan:i}])})(Object(M.a)({},Me(n),{addresses:t,label:"",rescan:i})).then(function(e){var t=e.result.reduce(function(e,t){return t.error&&t.error.message||e},"");a.setState({importError:t,imported:""===t}),"undefined"!==typeof r&&r(e.result)}).catch(function(e){a.setState({importError:"Unable to import, check your settings and try again",imported:!1})})},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.autoImport&&e.addresses.length&&e.addresses[0]!==this.props.addresses[0]&&(clearInterval(ga),ga=setInterval(this.checkAddress,5e3))}},{key:"render",value:function(){var e=this.state,t=e.imported,a=e.importError,n=e.rescan,i=e.addressPresent,o=e.addressesError,l=this.props,c=l.autoImport,s=l.addresses;return r.a.createElement(g.a,null,t&&n&&r.a.createElement(J.a,null,this.pluralOrSingularAddress()," imported, rescan of your node may take some time."),t&&!n&&r.a.createElement(J.a,null,this.pluralOrSingularAddress()," imported."),i&&r.a.createElement("div",null,r.a.createElement(J.a,null,"Address ",t?"imported to":"found in"," your wallet!"),r.a.createElement(J.a,null,"You can properly determine your addresses current balance."),r.a.createElement(J.a,null,'Your node may need to do a rescan to determine if an address has been previously used. If you are sure you have done so, or you are sure of the address\'s history, you may proceed.  If you are unsure, you may select "rescan" and import.')),!i&&c&&r.a.createElement(J.a,null,"Checking node for presence of ",this.pluralOrSingularAddress()),!i&&!c&&r.a.createElement(J.a,null,"To get accurate information from your node your ",this.pluralOrSingularAddress(),"will need to be imported to your node.  Importing will give you accurate balance information however to know if an address hase been used previously, a rescan needs to take place."),r.a.createElement(J.a,{error:!0},o),r.a.createElement("p",null,r.a.createElement(g.a,{component:"span",ml:2},r.a.createElement(k.a,{variant:"contained",disabled:!n&&(i||0===s.length),onClick:this.import},"Import")),r.a.createElement(g.a,{component:"span",ml:2},r.a.createElement(V.a,{control:r.a.createElement(be.a,{checked:n,onChange:this.handleRescan,color:"secondary"}),label:"Rescan"}))),r.a.createElement(J.a,{error:!0},a))}},{key:"pluralOrSingularAddress",value:function(){var e=this.props.addresses;return"address".concat(e.length>1?"es":"")}}]),t}(r.a.Component);var Sa=Object(c.b)(function(e){return{client:e.client}},{})(Ia),Oa=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={page:0,nodesPerPage:10,change:!1,spend:!1},a.addresses=[],a.getUnknownAddressNodes=function(){var e=a.props,t=e.changeNodes,n=e.depositNodes;return Object.values(n).concat(Object.values(t)).filter(function(e){return!e.addressKnown})},a.addressesImported=function(){var e=Object(Te.a)(Oe.a.mark(function e(t){var n,r,i,o,l,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,r=n.updateNode,i=n.client,o=n.network,l=[],c=a.getUnknownAddressNodes(),t.forEach(function(e,t){e.success&&l.push(c[t])}),l.forEach(function(){var e=Object(Te.a)(Oe.a.mark(function e(t){var a,n,l,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(t.multisig.address,o,i);case 2:return a=e.sent,e.next=5,qe(t.multisig.address,o,i);case 5:n=e.sent,a&&(c=a.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new je.a(0)),l={balanceSats:c,utxos:a,fetchedUTXOs:!0,fetchUTXOsError:""}),r(t.change,Object(M.a)({bip32Path:t.bip32Path,addressKnown:!0},l,{addressStatus:n}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getNodeSet=function(){var e=a.props,t=e.spending,n=e.changeNodes,r=e.depositNodes,i=a.state.change?n:r;return t?Object.values(i).filter(function(e){return e.balanceSats.isGreaterThan(0)}).reduce(function(e,t){return e[t.bip32Path]=t,e},{}):i},a.renderNodes=function(){for(var e=a.state,t=e.page,n=e.nodesPerPage,i=e.change,o=e.spend,l=a.props,c=l.addNode,s=l.updateNode,u=t*n,d=[],p=a.getNodeSet(),m=0;m<n;m++){var h=u+m;if(h>Object.keys(p).length-1)break;var E=Object.values(p)[h].bip32Path,b=r.a.createElement(ya,{key:E,bip32Path:E,addNode:c,updateNode:s,change:i,spend:o});d.push(b)}return d},a.handlePageChange=function(e,t){var n=t;a.setState({page:n})},a.handleChangeRowsPerPage=function(e){a.setState({nodesPerPage:e.target.value,page:0})},a.bip32Path=function(e){var t=a.state.change;return"m/".concat(t?"1":"0","/").concat(e)},a.pageCount=function(){var e=a.state.nodesPerPage;return Math.ceil(a.rowCount()/e)},a.rowCount=function(){var e=a.getNodeSet();return Object.keys(e).length},a.generateAnotherPage=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i,o,l,c,s,u,d,p;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.addNode,r=t.depositNodes,i=t.changeNodes,o=a.state,l=o.change,c=o.nodesPerPage,s=o.page,u=Object.keys(l?i:r).length,d=0;case 4:if(!(d<c+(c-u%c))){e.next=11;break}return p=a.bip32Path(u+d),e.next=8,n(l,p);case 8:d++,e.next=4;break;case 11:u%c===0&&a.setState({page:s+1});case 12:case"end":return e.stop()}},e)})),a.toggleChange=function(){var e=a.state.change;a.setState({change:!e,page:0})},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.state,t=e.page,a=e.nodesPerPage,n=e.change,i=this.props,o=i.spending,l=i.canLoad,c=i.client,s=!o&&"private"===c.type;return s&&(this.addresses=this.getUnknownAddressNodes().map(function(e){return e.multisig.address})),r.a.createElement(y.a,{item:!0,md:12},s&&r.a.createElement(Sa,{addresses:this.addresses,importCallback:this.addressesImported}),r.a.createElement(Ye.a,{style:{tableLayout:"fixed"}},r.a.createElement(Ve.a,null,r.a.createElement(Ze.a,null,o&&r.a.createElement(Je.a,{width:62},"Spend?"),r.a.createElement(Je.a,{width:106},"BIP32 Path"),r.a.createElement(Je.a,{width:68},"UTXOs"),r.a.createElement(Je.a,{width:82},"Balance"),r.a.createElement(Je.a,null,"Address"))),r.a.createElement(Qe.a,null,this.renderNodes())),r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:6},r.a.createElement(ea.a,{component:"div",count:this.rowCount(),rowsPerPage:a,page:t,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage})),r.a.createElement(y.a,{item:!0,md:2},l&&t===this.pageCount()-1&&r.a.createElement(k.a,{type:"button",variant:"contained",color:"secondary",onClick:this.generateAnotherPage},"More")),r.a.createElement(y.a,{item:!0,md:4},r.a.createElement(k.a,{type:"button",variant:"contained",color:"primary",onClick:this.toggleChange},n?"View Deposits":"View Change"))))}}]),t}(r.a.Component);var Ta=Object(c.b)(function(e){return Object(M.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,spending:e.wallet.info.spending,client:e.client},e.settings)},{})(Oa),wa=a(257),ja=a(844),Ca=a(870),xa=a(845),ka=a(843),Ka=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).handleAddressChange=function(e){var t=a.props,n=t.number;(0,t.setAddress)(n,e.target.value)},a.hasAddressError=function(){return""!==a.props.addressError},a.handleAmountChange=function(e){var t=a.props,n=t.number;(0,t.setAmount)(n,e.target.value)},a.hasAmountError=function(){return""!==a.props.amountError},a.isNotBalanceable=function(){var e=a.props,t=e.number,n=e.outputs,r=e.feeError,i=e.amountError,o=e.amount,l=e.inputsTotalSats;if(""!==r)return!0;for(var c=0;c<n.length;c++)if(c!==t-1&&(""!==n[c].amountError||""===n[c].amount))return!0;var s=a.autoBalancedAmount();return""!==Object(G.validateOutputAmountBTC)(s,l)||""===i&&s===new je.a(o)},a.isBalanceable=function(){return!a.isNotBalanceable()},a.hasBalanceError=function(){return""!==a.props.balanceError},a.autoBalancedAmount=function(){var e=a.props,t=e.number,n=e.fee,r=e.inputsTotalSats,i=e.outputs.filter(function(e,a){return a!==t-1}).map(function(e){return Object(G.bitcoinsToSatoshis)(new je.a(e.amount))}).reduce(function(e,t){return e.plus(t)},new je.a(0)),o=Object(G.bitcoinsToSatoshis)(new je.a(n));return Object(G.satoshisToBitcoins)(r.minus(i.plus(o)))},a.balanceAction=function(){var e=a.props.balanceError;return!a.hasBalanceError()||a.isNotBalanceable()?null:e.split(" ")[0]},a.handleBalance=function(){var e=a.props,t=e.number;(0,e.setAmount)(t,a.autoBalancedAmount().toString())},a.hasError=function(){return a.hasAddressError()||a.hasAmountError()},a.handleDelete=function(){var e=a.props,t=e.number;(0,e.remove)(t)},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.outputs,a=e.finalizedOutputs,n=e.address,i=e.amount,o=e.addressError,l=e.amountError;return r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,xs:7},r.a.createElement(fe.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:ca.a.outputsFormInput,disabled:a,onChange:this.handleAddressChange,value:n,error:this.hasAddressError(),helperText:o})),r.a.createElement(y.a,{item:!0,xs:3},r.a.createElement(fe.a,{fullWidth:!0,placeholder:"Amount (BTC)",className:ca.a.outputsFormInput,name:"amount",disabled:a,onChange:this.handleAmountChange,value:i,error:this.hasAmountError(),helperText:l})),!a&&this.hasBalanceError()&&this.isBalanceable()&&r.a.createElement(y.a,{item:!0,xs:1},r.a.createElement(Ca.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},r.a.createElement("small",null,r.a.createElement(F.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?r.a.createElement(le.a,null):r.a.createElement(ce.a,null))))),!a&&t.length>1&&r.a.createElement(y.a,{item:!0,xs:1},r.a.createElement(Ca.a,{title:"Remove Output",placement:"top"},r.a.createElement(F.a,{onClick:this.handleDelete},r.a.createElement(ka.a,null)))))}}]),t}(r.a.Component);var Na={setAddress:Bt,setAmount:At,remove:function(e){return{type:Ot,number:e}}},Ra=Object(c.b)(function(e,t){return Object(M.a)({},e.spend.transaction,e.spend.transaction.outputs[t.number-1])},Na)(Ka),_a=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).titleRef=r.a.createRef(),a.state={feeRateFetchError:""},a.componentDidMount=function(){a.initialOutputState(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){var e=a.props.signatureImporters;0===Object.keys(e).reduce(function(t,a){return t+e[a].finalized},0)&&a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderOutputs=function(){var e=a.props.outputs;return Object(wa.map)(e).map(function(e,t){return r.a.createElement(y.a,{container:!0,key:t},r.a.createElement(Ra,{number:t+1}))})},a.inputsTotal=function(){var e=a.props.inputsTotalSats;return Object(G.satoshisToBitcoins)(e)},a.outputsAndFeeTotal=function(){var e=a.props,t=e.outputs,n=e.fee;return e.inputs.length?t.map(function(e){return new je.a(e.amount||0)}).reduce(function(e,t){return e.plus(t)},new je.a(0)).plus(new je.a(n)):""},a.hasFeeRateFetchError=function(){return""!==a.state.feeRateFetchError},a.hasFeeRateError=function(){return""!==a.props.feeRateError},a.hasFeeError=function(){return""!==a.props.feeError},a.hasBalanceError=function(){return""!==a.props.balanceError},a.hasError=function(){return a.hasFeeRateFetchError()||a.hasFeeRateError()||a.hasFeeError()||a.hasBalanceError()},a.handleAddOutput=function(){(0,a.props.addOutput)()},a.handleFeeRateChange=function(e){var t=a.props,n=t.setFeeRate;t.inputs.length&&n(e.target.value)},a.handleFeeChange=function(e){(0,a.props.setFee)(e.target.value)},a.handleFinalize=function(){(0,a.props.finalizeOutputs)(!0)},a.handleReset=function(){(0,a.props.resetOutputs)(),a.initialOutputState()},a.getFeeEstimate=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i,o,l;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.client,r=t.network,i=t.setFeeRate,o=1,l="",e.prev=3,e.next=6,Ge(r,n);case 6:o=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),l="There was an error fetching the fee rate.";case 13:return e.prev=13,i(o.toString()),a.setState({feeRateFetchError:l}),e.finish(13);case 17:case"end":return e.stop()}},e,null,[[3,9,13,17]])})),a.gatherSignaturesDisabled=function(){var e=a.props,t=e.finalizedOutputs,n=e.outputs;if(0===e.inputs.length)return!0;if(t||a.hasError())return!0;for(var r=0;r<n.length;r++){var i=n[r];if(""===i.address||""===i.amount||""!==i.addressError||""!==i.amountError)return!0}return!1},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"initialOutputState",value:function(){var e=Object(Te.a)(Oe.a.mark(function e(){var t,a,n,r,i,o,l,c,s;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.inputs,n=t.outputs,e.next=3,this.getFeeEstimate();case 3:r=this.props,i=r.inputsTotalSats,o=r.fee,l=r.setOutputAmount,c=Object(G.bitcoinsToSatoshis)(new je.a(o)),s=Object(G.satoshisToBitcoins)(i.minus(c)),a.length&&""===n[0].amount&&l(1,s.toFixed(8));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,a=e.fee,n=e.finalizedOutputs,i=e.feeRateError,o=e.feeError,l=e.balanceError,c=e.addChange,s=this.state.feeRateFetchError;return r.a.createElement(I.a,null,r.a.createElement(S.a,{ref:this.titleRef,title:"Define Outputs"}),r.a.createElement(O.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,null,this.renderOutputs()),r.a.createElement(y.a,{item:!0,container:!0,spacing:1},r.a.createElement(y.a,{item:!0,xs:4},r.a.createElement(k.a,{variant:"contained",disabled:n,onClick:this.handleAddOutput},"Add output"),"undefined"!=typeof c&&r.a.createElement(g.a,{component:"span",ml:2},r.a.createElement(k.a,{variant:"contained",disabled:n,onClick:c},"Add change"))),r.a.createElement(y.a,{item:!0,xs:3},r.a.createElement(fe.a,{fullWidth:!0,label:"Fee Rate (Sats/byte)",value:t,placeholder:"Sats/byte",name:"fee_rate",disabled:n,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:s||i,InputProps:{endAdornment:r.a.createElement(ja.a,{position:"end"},r.a.createElement(Ca.a,{placement:"top",title:"Estimate best rate"},r.a.createElement("small",null,r.a.createElement(F.a,{onClick:this.getFeeEstimate,disabled:n},r.a.createElement(xa.a,null)))))}})),r.a.createElement(y.a,{item:!0,xs:3},r.a.createElement(fe.a,{fullWidth:!0,label:"Estimated Fees (BTC)",placeholder:"BTC",name:"fee_total",disabled:n,value:a,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:o})),r.a.createElement(y.a,{item:!0,xs:2})),r.a.createElement(y.a,{item:!0,container:!0,spacing:1},r.a.createElement(y.a,{item:!0,xs:4}),r.a.createElement(y.a,{item:!0,xs:3},r.a.createElement(fe.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toString(),disabled:n,InputProps:{readOnly:!0}})),r.a.createElement(y.a,{item:!0,xs:3},r.a.createElement(fe.a,{fullWidth:!0,label:"Outputs & Fee Total",value:this.outputsAndFeeTotal().toString(),error:this.hasBalanceError(),disabled:n,helperText:l,InputProps:{readOnly:!0}})),r.a.createElement(y.a,{item:!0,xs:2})),r.a.createElement(y.a,{item:!0},r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{item:!0},r.a.createElement(k.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),r.a.createElement(y.a,{item:!0},r.a.createElement(k.a,{variant:"contained",color:"secondary",disabled:n,onClick:this.handleReset},"Reset Outputs")))))))}}]),t}(r.a.Component);var Ba={addOutput:_t,setOutputAmount:At,setFeeRate:Mt,setFee:function(e){return{type:wt,value:e}},finalizeOutputs:Dt,resetOutputs:function(){return{type:Ct}}},Aa=Object(c.b)(function(e){return Object(M.a)({},{network:e.settings.network,client:e.client},e.spend.transaction,e.client,{signatureImporters:e.spend.signatureImporters})},Ba)(_a),Ma=a(9),Da=a(770),Ua=a(769),za=a(841),La=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={signatureJSON:"",error:""},a.render=function(){var e=a.state,t=e.signatureJSON,n=e.error;return r.a.createElement(g.a,{mt:2},r.a.createElement(fe.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:a.handleChange,error:a.hasError(),helperText:n}),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{variant:"contained",color:"primary",size:"large",onClick:a.finalize,disabled:""===t},"Add Signature")))},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,n="";try{JSON.parse(t)}catch(r){n="Invalid JSON."}a.setState({signatureJSON:t,error:n})},a.finalize=function(){var e=a.props.validateAndSetSignature,t=a.state.signatureJSON;e(JSON.parse(t),a.setError)},a}return Object(L.a)(t,e),t}(r.a.Component),Fa=a(371),Ha=a.n(Fa),Wa=300,qa=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={walletState:Ma.PENDING,error:""},a.render=function(){var e=a.state,t=e.walletState,n=e.error,i=a.props,o=i.interaction,l=i.width,c=i.startText;if(t===Ma.PENDING){var s=o.messageFor({walletState:t,code:"hermit.command"});return r.a.createElement("div",null,r.a.createElement("p",null,s.instructions),r.a.createElement(y.a,{container:!0,justify:"center",className:"mb-2"},r.a.createElement(Vt,{text:s.command},r.a.createElement("code",null,r.a.createElement("strong",null,s.mode,">")," ",s.command))),r.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:a.handleStart},c)))}return t===Ma.ACTIVE?r.a.createElement(y.a,{container:!0,direction:"column"},r.a.createElement(y.a,{item:!0},r.a.createElement(Ha.a,{delay:Wa,onError:a.handleError,onScan:a.handleScan,style:{width:l},facingMode:"user"})),r.a.createElement(y.a,{item:!0},r.a.createElement(k.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Cancel"))):"error"===t||"success"===t?r.a.createElement("div",null,r.a.createElement(J.a,{error:!0},n),r.a.createElement(k.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Reset")):null},a.handleStart=function(){var e=a.props.onStart;a.setState({walletState:Ma.ACTIVE,error:""}),e&&e()},a.handleError=function(e){var t=a.props.onClear;a.setState({walletState:"error",error:e.message}),t&&t()},a.handleScan=function(e){var t=a.props,n=t.onSuccess,r=t.interaction;if(e)try{n(r.parse(e)),a.setState({walletState:"success"})}catch(i){a.handleError(i)}},a.handleStop=function(){var e=a.props.onClear;a.setState({walletState:Ma.PENDING,error:""}),e&&e()},a}return Object(L.a)(t,e),t}(n.Component);qa.defaultProps={width:"256px",startText:"Scan"};var Ga=qa,Xa=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={errorMessage:""},a.render=function(){var e=a.props,t=e.width,n=e.string;return r.a.createElement(Vt,{text:n,newline:!0},r.a.createElement(Ht.a,{size:t,value:n,level:"L"}))},a}return Object(L.a)(t,e),t}(r.a.Component);Xa.defaultProps={string:"",width:120};var Ya=Xa,Va=a(846),Za=a(847),Ja=a(848),Qa=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return r.a.createElement("small",null,r.a.createElement(T.a,null,a.filteredMessages().map(function(e,t){return a.renderMessage(e,t)})))},a.renderMessage=function(e,t){return r.a.createElement(w.a,{key:t},r.a.createElement(j.a,null,a.messageIcon(e)),r.a.createElement(C.a,null,e.text))},a.filteredMessages=function(){var e=a.props,t=e.messages,n=e.excludeCodes;return t.filter(function(e){for(var t=0;t<n.length;t++){var a=n[t];if((e.code||"").includes(a))return!1}return!0})},a.messageIcon=function(e){switch(e.level){case Ma.INFO:return r.a.createElement(Va.a,null);case Ma.WARNING:return r.a.createElement(Za.a,null);case Ma.ERROR:return r.a.createElement(Ja.a,null);default:return null}},a.messageColrName=function(e){switch(e.level){case Ma.INFO:return"primary.main";case Ma.WARNING:return"text.secondary";case Ma.ERROR:return"error.main";default:return""}},a}return Object(L.a)(t,e),t}(r.a.Component);Qa.defaultProps={messages:[],excludeCodes:[]};var $a=Qa,en=function(e){function t(e){var a;return Object(D.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).interaction=function(){var e=a.props,t=e.signatureImporter,n=e.network,r=e.inputs,i=e.outputs,o=r.map(function(e){return t.bip32Path});return new Ma.HermitSignTransaction({network:n,inputs:r,outputs:i,bip32Paths:o})},a.render=function(){var e=a.props,t=e.signatureImporter,n=e.disableChangeMethod,i=e.resetBIP32Path,o=a.state,l=o.bip32PathError,c=o.signatureError,s=o.walletState,u=a.interaction();return s===Ma.UNSUPPORTED?r.a.createElement($a,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}):r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:10},r.a.createElement(fe.a,{name:"bip32Path",value:t.bip32Path,onChange:a.handleBIP32PathChange,disabled:s!==Ma.PENDING,error:a.hasBIP32PathError(),helperText:l})),r.a.createElement(y.a,{item:!0,md:2},!a.bip32PathIsDefault()&&r.a.createElement(k.a,{type:"button",variant:"contained",size:"small",onClick:i,disabled:s!==Ma.PENDING},"Default"))),r.a.createElement(J.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0,justify:"center"},r.a.createElement(y.a,{item:!0},r.a.createElement(Ya,{width:400,string:u.messageFor({code:"hermit.signature_request"}).encodedData}))),r.a.createElement(Ga,{startText:"Scan Signature QR Code",interaction:u,onStart:n,onSuccess:a.import,onClear:a.clear}),r.a.createElement($a,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}),r.a.createElement(J.a,{error:!0},c)))},a.import=function(e){console.log("IMPORTED SIGNATURE:",e);var t=a.props,n=t.validateAndSetSignature,r=t.enableChangeMethod;a.setState({signatureError:""}),r(),n(e,function(e){a.setState({signatureError:e})})},a.clear=function(){var e=a.props,t=e.resetBIP32Path,n=e.enableChangeMethod;t(),a.setState({signatureError:""}),n()},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},function(e){a.setState({bip32PathError:e})})},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.state={bip32PathError:"",bip32PathFinalized:!1,signatureError:"",walletState:a.interaction(!0).isSupported()?Ma.PENDING:Ma.UNSUPPORTED},a}return Object(L.a)(t,e),t}(r.a.Component),tn=function(e){function t(e){var a;return Object(D.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(e){var t,n,r=!e&&a.state.verified,i=a.props,o=i.signatureImporter,l=i.network,c=i.inputs,s=i.outputs,u=o.method;if(r){var d=c.map(function(e){return"undefined"===typeof e.bip32Path?o.bip32Path:"".concat(o.bip32Path).concat(e.bip32Path.slice(1))});return Object(Ma.HardwareWalletSignMultisigTransaction)({network:l,walletType:u,inputs:c,outputs:s,bip32Paths:d})}return t=o.bip32Path,"undefined"!==typeof c[0].bip32Path&&(n=c.map(function(e){return"".concat(o.bip32Path).concat(e.bip32Path.slice(1))})),Object(Ma.HardwareWalletExportPublicKey)({network:l,walletType:u,bip32Path:t,bip32Paths:n})},a.render=function(){var e=a.props.signatureImporter,t=a.state,n=t.verified,i=t.walletState,o=a.interaction();return i===Ma.UNSUPPORTED?r.a.createElement(J.a,{error:!0},o.messageTextFor({walletState:i})):r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:10},r.a.createElement(fe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:i!==Ma.PENDING||n,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),r.a.createElement(y.a,{item:!0,md:2},!a.bip32PathIsDefault()&&r.a.createElement(k.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:n||i!==Ma.PENDING},"Default"))),r.a.createElement(J.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),r.a.createElement(g.a,{mt:2},a.renderAction()),a.renderDeviceConfirmInfo(),r.a.createElement($a,{messages:o.messagesFor({walletState:i}),excludeCodes:["bip32"]}))},a.renderDeviceConfirmInfo=function(){var e=a.props,t=e.fee,n=e.inputsTotalSats,i=a.state,o=i.verified,l=i.walletState;return o&&l===Ma.ACTIVE?r.a.createElement(g.a,null,r.a.createElement("p",null,"Your device will ask you to verify the following information:"),r.a.createElement(Ye.a,null,r.a.createElement(Ve.a,null,r.a.createElement(Ze.a,{hover:!0},r.a.createElement(Je.a,null),r.a.createElement(Je.a,null,"Amount (BTC)"))),r.a.createElement(Qe.a,null,a.renderTargets(),r.a.createElement(Ze.a,{hover:!0},r.a.createElement(Je.a,null,"Fee"),r.a.createElement(Je.a,null,t)),r.a.createElement(Ze.a,{hover:!0},r.a.createElement(Je.a,null,"Total"),r.a.createElement(Je.a,null,Object(G.satoshisToBitcoins)(n).toString()))))):""},a.renderTargets=function(){return a.props.outputs.map(function(e,t){return r.a.createElement(Ze.a,{hover:!0,key:t},r.a.createElement(Je.a,null,"Address ",r.a.createElement("code",null,e.address)),r.a.createElement(Je.a,null,e.amount))})},a.renderAction=function(){var e=a.state,t=e.verified,n=e.verifyError,i=e.signatureError,o=e.walletState;return t?r.a.createElement(y.a,{container:!0,alignItems:"center"},r.a.createElement(y.a,{item:!0,md:3},r.a.createElement(k.a,{variant:"contained",size:"large",color:"primary",onClick:a.sign,disabled:o!==Ma.PENDING},"Sign")),r.a.createElement(y.a,{item:!0,md:9},r.a.createElement(J.a,{error:!0},i))):r.a.createElement(y.a,{container:!0,alignItems:"center"},r.a.createElement(y.a,{item:!0,md:3},r.a.createElement(k.a,{variant:"contained",size:"large",onClick:a.verify,color:"primary",disabled:o!==Ma.PENDING||a.hasBIP32PathError()},"Verify")),r.a.createElement(y.a,{item:!0,md:9},r.a.createElement(J.a,{error:!0},n)))},a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:n,level:Ma.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:n,level:Ma.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.verify=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.disableChangeMethod,r=t.enableChangeMethod,n(),a.setState({verifyError:"",walletState:Ma.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:i=e.sent,a.verifyPublicKey(i),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({verifyError:e.t0.message,walletState:Ma.PENDING}),r();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.verifyPublicKey=function(e){for(var t=a.props,n=t.inputs,i=t.signatureImporters,o=t.enableChangeMethod,l="",c="string"===typeof e?[e]:e,s=0;s<n.length;s++){for(var u=n[s],d=void 0,p=0;p<c.length&&!((d=Object(G.multisigPublicKeys)(u.multisig).indexOf(c[p]))>-1);p++);if(d<0){l=r.a.createElement("span",null,r.a.createElement(Ja.a,null),"\xa0 This device does not contain the correct key.  Are you sure the BIP32 path is correct?");break}for(var m=1;m<Object(G.multisigRequiredSigners)(u.multisig);m++){for(var h=i[m],E=0;E<h.publicKeys.length;E++){if(h.publicKeys[E]===e){l=r.a.createElement("span",null,r.a.createElement(Ja.a,null),"A signature from this key was already imported.");break}}if(""!==l)break}if(""!==l)break}a.setState({verified:""===l,verifyError:l,walletState:Ma.PENDING}),o()},a.sign=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i,o;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.disableChangeMethod,r=t.validateAndSetSignature,i=t.enableChangeMethod,n(),a.setState({signatureError:"",walletState:Ma.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:o=e.sent,r(o,function(e){var t={signatureError:e};""!==e&&(t.walletState=Ma.PENDING),a.setState(t)}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({signatureError:e.t0.message,walletState:Ma.PENDING});case 14:i();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.state={verified:!1,verifyError:"",signatureError:"",bip32PathError:"",walletState:a.interaction(!0).isSupported()?Ma.PENDING:Ma.UNSUPPORTED},a}return Object(L.a)(t,e),t}(r.a.Component),an=a(849),nn=a(850),rn=a(851),on=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={editing:!1,newName:"",error:""},a.componentDidMount=function(){var e=a.props.name;a.setState({newName:e})},a.render=function(){var e=a.props.name,t=a.state,n=t.editing,i=t.newName,o=t.error;return n?r.a.createElement(y.a,{container:!0,alignItems:"center"},r.a.createElement(y.a,{item:!0},r.a.createElement(fe.a,{label:"Name",value:i,onChange:a.handleChange,error:a.hasError(),helperText:o})),r.a.createElement(y.a,{item:!0},r.a.createElement(F.a,{size:"small",onClick:a.submit,disabled:a.hasError()},r.a.createElement(an.a,null))),r.a.createElement(y.a,{item:!0},r.a.createElement(F.a,{color:"secondary",size:"small",onClick:a.cancel},r.a.createElement(nn.a,null)))):r.a.createElement("span",null,r.a.createElement(F.a,{size:"small",onClick:a.startEditing},r.a.createElement(rn.a,null)),"\xa0",e)},a.hasError=function(){return""!==a.state.error},a.startEditing=function(e){var t=a.props.name;e.preventDefault(),a.setState({editing:!0,newName:t})},a.handleChange=function(e){var t=e.target.value,n="";null!==t&&void 0!==t&&""!==t||(n="Name cannot be blank."),a.setState({newName:t,error:n})},a.submit=function(){var e=a.props;(0,e.setName)(e.number,a.state.newName),a.setState({editing:!1})},a.cancel=function(){var e=a.props.name;a.setState({error:"",newName:e,editing:!1})},a}return Object(L.a)(t,e),t}(r.a.Component),ln=Pe({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),cn=ln.setSignatureImporterName,sn=ln.setSignatureImporterMethod,un=ln.setSignatureImporterBIP32Path,dn=ln.setSignatureImporterPublicKeys,pn=ln.setSignatureImporterSignature,mn=ln.setSignatureImporterFinalized,hn=ln.setSignatureImporterComplete,En="text",bn=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).titleRef=r.a.createRef(),a.state={disableChangeMethod:!1,showUnsignedTransaction:!1},a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.props.number===a.getCurrent()&&a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.title=function(){var e=a.props,t=e.number,n=e.signatureImporter,i=e.setName;return r.a.createElement(on,{number:t,name:n.name,setName:i})},a.renderImport=function(){var e=a.props,t=e.signatureImporter,n=e.number,i=n>a.getCurrent(),o=a.state.disableChangeMethod,l="signature-".concat(n,"-importer-select-label");return i?r.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):r.a.createElement("form",null,r.a.createElement(X.a,{fullWidth:!0},r.a.createElement(Da.a,{id:l},"Select Method"),r.a.createElement(Ua.a,{labelId:l,id:"signature-".concat(n,"-importer-select"),disabled:o,value:t.method,onChange:a.handleMethodChange},r.a.createElement(za.a,{value:""},"< Select method >"),r.a.createElement(za.a,{value:Ma.TREZOR},"Trezor"),r.a.createElement(za.a,{value:Ma.LEDGER},"Ledger"),r.a.createElement(za.a,{value:Ma.HERMIT},"Hermit"),r.a.createElement(za.a,{value:En},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.network,n=e.signatureImporter,i=e.signatureImporters,o=e.inputs,l=e.inputsTotalSats,c=e.outputs,s=e.fee;return n.method===En?r.a.createElement(La,{signatureImporter:n,validateAndSetSignature:a.validateAndSetSignature}):n.method===Ma.HERMIT?r.a.createElement(en,{network:t,signatureImporter:n,inputs:o,outputs:c,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):n.method===Ma.TREZOR||n.method===Ma.LEDGER?r.a.createElement(tn,{network:t,signatureImporter:n,signatureImporters:i,inputs:o,outputs:c,inputsTotalSats:l,fee:s,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number;(0,t.setMethod)(n,e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.renderUnsignedTransaction=function(){var e=a.state.showUnsignedTransaction,t=a.props.unsignedTransaction;if(e){var n=t.toHex();return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(Vt,{text:n},r.a.createElement("code",null,n))),r.a.createElement("small",null,r.a.createElement(k.a,{size:"small",onClick:a.handleHideUnsignedTransaction},"Hide Unsigned Transaction")))}return r.a.createElement("small",null,r.a.createElement(k.a,{size:"small",onClick:a.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},a.handleShowUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!0})},a.handleHideUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!1})},a.reset=function(){var e=a.props,t=e.number,n=e.setSignature,r=e.setPublicKeys,i=e.setFinalized;n(t,""),r(t,[]),i(t,!1)},a.defaultBIP32Path=function(){var e=a.props,t=e.addressType,n=e.network;return e.isWallet?Object(G.multisigBIP32Root)(t,n):Object(G.multisigBIP32Path)(t,n)},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.setBIP32Path)(t,a.defaultBIP32Path())},a.validateAndSetBIP32Path=function(e,t,n,r){var i=a.props,o=i.number,l=i.setBIP32Path,c=Object(G.validateBIP32Path)(e,r);l(o,e),c?n(c):(n(""),t())},a.renderSignature=function(){var e=a.props,t=e.signatureImporter,n=e.txid,i=JSON.stringify(t.signature);return r.a.createElement("div",null,r.a.createElement("p",null,"The following signature was imported:"),r.a.createElement(g.a,null,r.a.createElement(Vt,{text:i},r.a.createElement("small",null,r.a.createElement("code",null,i)))),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{variant:"contained",color:"secondary",disabled:""!==n,size:"small",onClick:a.reset},"Remove Signature")))},a.validateAndSetSignature=function(e,t){var n=a.props,r=n.number,i=n.inputs,o=n.signatureImporters,l=n.unsignedTransaction,c=n.setComplete;if(Array.isArray(e))if(e.length<i.length)t("Not enough signatures (must be exactly one for each input).");else if(e.length>i.length)t("Too many signatures (must be exactly one for each input).");else{for(var s=[],u=Object.values(o).filter(function(e){return e.finalized}),d=0;d<e.length;d+=1){var p=i[d],m=d+1,h=e[d];if(""!==Object(G.validateHex)(h))return void t("Signature for input ".concat(m," is not valid hex."));var E=void 0;try{E=Object(G.validateMultisigSignature)(l,d,p,h)}catch(v){return void t("Signature for input ".concat(m," is invalid."))}if(!E)return void t("Signature for input ".concat(m," is invalid."));for(var b=0;b<u.length;b++){var f=u[b];if(f.signature[d]===h||f.publicKeys[d]===E)return void t("Signature for input ".concat(m," is a duplicate of a previously provided signature."))}s.push(E)}c(r,{signature:e,publicKeys:s,finalized:!0})}else t("Signature is not an array of strings.")},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props.signatureImporter;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:this.title(),ref:this.titleRef}),r.a.createElement(O.a,null,e.finalized?this.renderSignature():this.renderImport(),r.a.createElement(g.a,{mt:2},this.renderUnsignedTransaction())))}},{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce(function(t,a){return t+(e[a].finalized?1:0)},1)}}]),t}(r.a.Component);var fn={setName:cn,setMethod:sn,setBIP32Path:un,setPublicKeys:dn,setSignature:pn,setFinalized:mn,setComplete:hn},vn=Object(c.b)(function(e,t){return Object(M.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid},e.spend.transaction)},fn)(bn),gn=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).state={error:"",broadcasting:!1,txid:""},a.buildSignedTransaction=function(){var e=a.props,t=e.unsignedTransaction,n=e.inputs,r=e.signatureImporters,i=[];return n.forEach(function(e,t){var a={};Object.values(r).forEach(function(e){var n=e.publicKeys[t],r=e.signature[t];a[n]=r}),i.push(a)}),Object(G.signedMultisigTransaction)(t,n,i)},a.handleBroadcast=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i,o,l,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.client,r=t.network,i=t.setTxid,o=a.buildSignedTransaction(),l="",c="",a.setState({broadcasting:!0}),e.prev=5,e.next=8,Xe(o.toHex(),r,n);case 8:c=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),l="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,a.setState({txid:c,error:l,broadcasting:!1}),i(c),e.finish(15);case 19:case"end":return e.stop()}},e,null,[[5,11,15,19]])})),a.transactionURL=function(){var e=a.props.network,t=a.state.txid;return Object(G.blockExplorerTransactionURL)(t,e)},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.broadcasting,n=e.txid,i=this.buildSignedTransaction(),o=i.toHex();return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Broadcast"}),r.a.createElement(O.a,null,r.a.createElement("form",null,i&&r.a.createElement(g.a,{mt:4},r.a.createElement(P.a,{variant:"h6"},"Signed Transaction"),r.a.createElement(Vt,{text:o},r.a.createElement("small",null,r.a.createElement("code",null,o)))),""===n?r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{variant:"contained",color:"primary",disabled:!i||a,onClick:this.handleBroadcast},"Broadcast Transaction"),r.a.createElement(J.a,{error:!0},t),r.a.createElement("small",null,r.a.createElement(J.a,null,"Warning: Broadcasting this transaction cannot be undone."))):r.a.createElement(g.a,{mt:2},r.a.createElement(P.a,{variant:"h5"},r.a.createElement(Vt,{text:n},r.a.createElement("code",null,n)),"\xa0",f(this.transactionURL(),r.a.createElement(oa.a,null))),r.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),t}(r.a.Component);var Pn={setTxid:function(e){return{type:xt,value:e}}},yn=Object(c.b)(function(e){return Object(M.a)({network:e.settings.network,client:e.client},e.client,{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,unsignedTransaction:e.spend.transaction.unsignedTransaction})},Pn)(gn),In=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={spent:!1},a.render=function(){return r.a.createElement(g.a,null,r.a.createElement(k.a,{variant:"contained",color:"secondary",onClick:a.handleCancel},"Cancel"),a.renderSignatureImporters(),a.signaturesFinalized()&&r.a.createElement(g.a,{mt:2},r.a.createElement(yn,null)),(a.transactionFinalized()||a.state.spent)&&r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:a.handleReturn},"Return"))},a.renderSignatureImporters=function(){for(var e=a.props.transaction,t=[],n=1;n<=e.requiredSigners;n++)t.push(r.a.createElement(g.a,{key:n,mt:2},r.a.createElement(vn,{number:n})));return t},a.signaturesFinalized=function(){var e=a.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},a.transactionFinalized=function(){var e=a.props,t=e.transaction,n=e.spendNodes,r=e.getChangeNode,i=e.updateChangeNode;if(""!==t.txid&&!a.state.spent){a.setState({spent:!0});for(var o=r(),l=o.multisig.address,c=0;c<t.outputs.length;c++)if(l===t.outputs[c].address){i({bip32Path:o.bip32Path,balanceSats:t.outputs[c].amountSats});break}return n(),!0}return!1},a.handleReturn=function(){var e=a.props,t=e.resetTransaction,n=e.resetWalletView;t(),n()},a.handleCancel=function(){var e=a.props,t=e.finalizeOutputs,n=e.requiredSigners;(0,e.setRequiredSigners)(n),t(!1)},a}return Object(L.a)(t,e),t}(r.a.Component);var Sn,On={finalizeOutputs:Dt,setRequiredSigners:Nt,spendNodes:function(){return{type:ut}},resetTransaction:function(){return{type:kt}},resetWalletView:bt,updateChangeNode:pt},Tn=Object(c.b)(function(e){return Object(M.a)({},e.wallet,e.spend,{requiredSigners:e.spend.transaction.requiredSigners})},On)(In),wn=a(121),jn=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={outputsAmount:new je.a(0),feeAmount:new je.a(0)},a.getChangeNode=function(){for(var e=a.props.changeNodes,t=Object.values(e),n=0;n<t.length;n++){var r=t[n];if(r.balanceSats.isEqualTo(0)&&!r.addressUsed)return r}},a.handleAddChange=function(){var e=a.props,t=e.outputs,n=e.setAddress,r=e.addOutput,i=a.getChangeNode(),o=t.length+1;r(),n(o,i.multisig.address)},a.renderSpend=function(){var e=a.props,t=e.addNode,n=e.updateNode,i=e.autoSpend;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Spend"}),r.a.createElement(O.a,null,r.a.createElement(y.a,{item:!0,md:12},r.a.createElement(y.a,{component:"label",container:!0,alignItems:"center",spacing:1},r.a.createElement(y.a,{item:!0},"Manual"),r.a.createElement(y.a,{item:!0},r.a.createElement(be.a,{checked:i,onChange:a.handleSpendMode})),r.a.createElement(y.a,{item:!0},"Auto"))),r.a.createElement(Ta,{addNode:t,updateNode:n})))},a.handleSpendMode=function(e){var t=a.props.updateAutoSpend;e.target.checked,t(e.target.checked)},a.selectCoins=function(){var e=a.props,t=e.outputs,n=e.setInputs,r=e.fee,i=e.depositNodes,o=e.changeNodes,l=e.feeRate,c=e.updateChangeNode,s=e.updateDepositNode,u=e.resetNodesSpend,d=e.setFeeRate,p=t.reduce(function(e,t){return e.plus(t.amountSats)},new je.a(0));if(!p.isNaN()){var m=Object(wn.bitcoinsToSatoshis)(new je.a(r));if(!p.isEqualTo(a.state.outputsAmount)||!m.isEqualTo(a.state.feeAmount)){var h=p.plus(m),E=Object.values(i).concat(Object.values(o)).filter(function(e){return e.balanceSats.isGreaterThan(0)}),b=[],f=new je.a(0);u();for(var v=function(e){var t=E[e];if(t.utxos.forEach(function(e){b.push(Object(M.a)({},e,{multisig:t.multisig,bip32Path:t.bip32Path}))}),f=f.plus(t.balanceSats),(t.change?c:s)({bip32Path:t.bip32Path,spend:!0}),f.isGreaterThanOrEqualTo(h))return"break"},g=0;g<E.length;g++){if("break"===v(g))break}a.setState({outputsAmount:p,feeAmount:m}),n(b),d(l)}}},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.autoSpend&&(Sn&&clearTimeout(Sn),Sn=setTimeout(this.selectCoins,1e3))}},{key:"componentWillUnmount",value:function(){Sn&&clearTimeout(Sn)}},{key:"render",value:function(){var e=this.props.finalizedOutputs;return r.a.createElement(g.a,null,r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:12},r.a.createElement(Aa,{addChange:this.handleAddChange})),r.a.createElement(y.a,{item:!0,md:12},r.a.createElement(g.a,{mt:2},e?r.a.createElement(Tn,{getChangeNode:this.getChangeNode}):this.renderSpend()))))}}]),t}(r.a.Component);var Cn={updateAutoSpend:mt,setInputs:Rt,updateChangeNode:pt,updateDepositNode:dt,setAddress:Bt,resetNodesSpend:function(){return{type:nt}},setFeeRate:Mt,addOutput:_t},xn=Object(c.b)(function(e){return Object(M.a)({},e.spend.transaction,{changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,autoSpend:e.wallet.info.autoSpend})},Cn)(jn),kn=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).render=function(){var e=a.props,t=e.addNode,n=e.updateNode;return r.a.createElement(Ta,{addNode:t,updateNode:n,canLoad:!0})},a}return Object(L.a)(t,e),t}(r.a.Component);var Kn={setDepositing:ht,setSpending:Et},Nn=Object(c.b)(function(e){return Object(M.a)({},e.wallet)},Kn)(kn),Rn="SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",_n=Pe({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"}),Bn=_n.setExtendedPublicKeyImporterName,An=_n.setExtendedPublicKeyImporterBIP32Path,Mn=_n.resetExtendedPublicKeyImporterBIP32Path,Dn=_n.setExtendedPublicKeyImporterMethod,Un=_n.setExtendedPublicKeyImporterExtendedPublicKey,zn=_n.setExtendedPublicKeyImporterFinalized;var Ln=20,Fn=5,Hn=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={generating:!1},a.title=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners;return r.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",n,"-of-",t," P2SH Multisig Wallet",r.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(a.extendedPublicKeyCount(),"/").concat(t)))},a.extendedPublicKeyCount=function(){var e=a.props.extendedPublicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},a.renderModeComponent=function(){var e=a.props,t=e.depositing,n=e.spending,i=e.viewAddresses;return t?r.a.createElement($t,null):n?r.a.createElement(xn,{addNode:a.addNode,updateNode:a.updateNode}):i?r.a.createElement(Nn,{addNode:a.addNode,updateNode:a.updateNode}):""},a.downloadWalletDetails=function(e){e.preventDefault(),v(a.walletDetailsText(),a.walletDetailsFilename())},a.walletDetailsText=function(){var e=a.props,t=e.addressType,n=e.network,r=e.totalSigners,i=e.requiredSigners,o=e.walletName;return"Wallet: ".concat(o,"\n\nType: ").concat(t,"\n\nNetwork: ").concat(n,"\n\nQuorum: ").concat(i,"-of-").concat(r,"\n\nBIP32 Paths:\n").concat(a.extendedPublicKeyImporterBIP32Paths(),"\n")},a.extendedPublicKeyImporterBIP32Paths=function(){for(var e=a.props.totalSigners,t=[],n=1;n<=e;n++)t.push(a.extendedPublicKeyImporterBIP32Path(n));return t.join("\n")},a.extendedPublicKeyImporterBIP32Path=function(e){var t=a.props.extendedPublicKeyImporters[e],n="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(n)},a.walletDetailsFilename=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,r=e.addressType,i=e.walletName;return"bitcoin-".concat(n,"-of-").concat(t,"-").concat(r,"-").concat(i,".txt")},a.toggleImporters=function(){var e=a.props;(0,e.setImportersVisible)(!e.configuring)},a.generate=function(){(0,a.props.freeze)(!0),a.setState({generating:!0}),a.addNode(!1,"m/0/0",!0),a.addNode(!0,"m/1/0",!0)},a.updateNode=function(e,t){var n=a.props,r=n.updateChangeNode,i=n.updateDepositNode;(e?r:i)(t)},a.addNode=function(){var e=Object(Te.a)(Oe.a.mark(function e(t,n,r){var i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.generateMultisig(t,n,r);case 2:i=e.sent,a.updateNode(t,Object(M.a)({bip32Path:n},i));case 4:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.generateMultisig=function(){var e=Object(Te.a)(Oe.a.mark(function e(t,n,r){var i,o,l,c,s,u,d,p,m,h,E,b;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=a.props,o=i.extendedPublicKeyImporters,l=i.totalSigners,c=i.network,s=i.addressType,u=i.requiredSigners,d=[],p=1;p<=l;p++)m=o[p],h=Object(G.deriveChildPublicKey)(m.extendedPublicKey,n,c),d.push(h);return d.sort(),E=G.generateMultisigFromPublicKeys.apply(void 0,[c,s,u].concat(d)),e.next=7,a.fetchUTXOs(t,E,r);case 7:return b=e.sent,e.abrupt("return",Object(M.a)({multisig:E},b));case 9:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.fetchUTXOs=function(){var e=Object(Te.a)(Oe.a.mark(function e(t,n,r){var i,o,l,c,s,u,d;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.props,o=i.network,l=i.client,u={},e.prev=2,e.next=5,We(n.address,o,l);case 5:return c=e.sent,e.next=8,qe(n.address,o,l);case 8:s=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0,e.t0.response),"private"===l.type&&Ae(e.t0)?(s={used:!1},u={utxos:[],balanceSats:je()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}):u={fetchUTXOsError:e.t0.toString()};case 15:return c&&(d=c.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new je.a(0)),u=Object(M.a)({},u,{balanceSats:d,utxos:c,fetchedUTXOs:!0,fetchUTXOsError:""})),s&&(u=Object(M.a)({},u,{addressUsed:s.used})),r&&setTimeout(function(){return a.generateNextNodeIfNecessary(t)}),e.abrupt("return",u);case 19:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,a,n){return e.apply(this,arguments)}}(),a.generateNextNodeIfNecessary=function(e){var t=a.props,n=t.change,r=t.deposits,i=(e?n:r).trailingEmptyNodes,o=(e?n:r).fetchUTXOsErrors,l=Object.keys((e?n:r).nodes);if(!(i>=Ln||o>=Fn)){l.sort(function(e,t){var a=(e||"").split("/"),n=(t||"").split("/");return parseInt(a[2])-parseInt(n[2])});var c=(l[l.length-1]||"").split("/"),s=parseInt(c[2]),u="m/".concat(c[1],"/").concat(s+1);setTimeout(function(){return a.addNode(e,u,!0)})}},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(S.a,{title:this.title()}),r.a.createElement(O.a,null,this.body())),r.a.createElement(g.a,{mt:2},this.renderModeComponent()))}},{key:"componentDidMount",value:function(){(0,this.props.setIsWallet)()}},{key:"body",value:function(){var e=this.props,t=e.totalSigners,a=e.configuring,n=this.state.generating;return this.extendedPublicKeyCount()===t?n?r.a.createElement("div",null,r.a.createElement(Lt,null)):r.a.createElement("div",null,r.a.createElement(k.a,{type:"button",variant:"contained",color:"secondary",onClick:this.toggleImporters},a?"Hide Key Selection":"Edit Details"),r.a.createElement(et,null),r.a.createElement("p",null,"You have imported all ",t," extended public keys.  You will need to save this information."),r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:this.downloadWalletDetails},"Download Wallet Details"),r.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),r.a.createElement(k.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate},"Confirm")):r.a.createElement("p",null,"Once you have imported all ".concat(t," extended public keys, "),"your wallet will be generated here.")}}]),t}(r.a.Component);var Wn={freeze:ne,updateDepositNode:dt,updateChangeNode:pt,updateAutoSpned:mt,setImportersVisible:function(e){return{type:Rn,value:e}},setIsWallet:function(){return{type:Kt}}},qn=Object(c.b)(function(e){return Object(M.a)({},e.settings,{client:e.client},e.quorum,e.wallet,e.wallet.info)},Wn)(Hn),Gn="m/0",Xn=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){a.setBIP32PathToDefault()},a.state={error:"",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},a.render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state,n=t.error,i=t.extendedPublicKey,o=t.extendedPublicKeyError,l=t.bip32PathError;return r.a.createElement("div",null,r.a.createElement(g.a,{mt:2},r.a.createElement(fe.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:i,onChange:a.handleExtendedPublicKeyChange,error:a.hasExtendedPublicKeyError(),helperText:o})),r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:10},r.a.createElement(fe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,error:a.hasBIP32PathError(),helperText:l}),r.a.createElement(J.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),r.a.createElement(y.a,{item:!0,md:2},!a.bip32PathIsDefault()&&r.a.createElement(k.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path},"Default"))),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===i||a.hasError()},"Import Extended Public Key"))),r.a.createElement(J.a,{className:"text-danger"},n))},a.import=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter,r=e.validateAndSetExtendedPublicKey,i=a.state.extendedPublicKey;r(Object(G.deriveChildExtendedPublicKey)(i,n.bip32Path,t),function(e){a.setState({error:e})})},a.setBIP32PathToDefault=function(){(0,a.props.validateAndSetBIP32Path)(Gn,function(){},function(){})},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.hasExtendedPublicKeyError=function(){return""!==a.state.extendedPublicKeyError},a.hasError=function(){return a.hasBIP32PathError()||a.hasExtendedPublicKeyError()},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError,{mode:"unhardened"})},a.bip32PathIsDefault=function(){return a.props.extendedPublicKeyImporter.bip32Path===Gn},a.resetBIP32Path=function(){a.setBIP32PathToDefault(),a.setBIP32PathError("")},a.handleExtendedPublicKeyChange=function(e){var t=a.props,n=t.network,r=t.extendedPublicKeyImporters,i=e.target.value,o=Object(G.validateExtendedPublicKey)(i,n);""===o&&Object.values(r).find(function(e){return e.extendedPublicKey===i})&&(o="This extended public key has already been imported."),a.setState({extendedPublicKey:i,extendedPublicKeyError:o})},a}return Object(L.a)(t,e),t}(r.a.Component),Yn=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={error:""},a.render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state.error;return r.a.createElement(g.a,{mt:2},r.a.createElement(fe.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:a.handleChange,error:a.hasError(),helperText:t}))},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){(0,a.props.validateAndSetExtendedPublicKey)(e.target.value,a.setError)},a}return Object(L.a)(t,e),t}(r.a.Component),Vn=a(764),Zn=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={extendedPublicKeyError:"",walletState:Ma.PENDING},a.componentDidMount=function(){(0,a.props.resetBIP32Path)()},a.interaction=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter;return new Ma.HermitExportExtendedPublicKey({network:t,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.disableChangeMethod,t=a.state.extendedPublicKeyError;return r.a.createElement(Vn.a,null,r.a.createElement(Ga,{startText:"Import Extended Public Key",interaction:a.interaction(),onStart:e,onSuccess:a.import,onClear:a.onClear}),r.a.createElement(J.a,{className:"text-danger"},t))},a.setError=function(e){a.setState({error:e})},a.import=function(e){var t=a.props,n=t.validateAndSetBIP32Path,r=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var i=e.xpub;n(e.bip32_path,function(){r(i,a.setError)},a.setError)},a.onClear=function(){var e=a.props,t=e.reset,n=e.enableChangeMethod;t(!0),a.setError(""),n()},a}return Object(L.a)(t,e),t}(r.a.Component),Jn=function(e){function t(e){var a;return Object(D.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter;return Object(Ma.HardwareWalletExportExtendedPublicKey)({network:t,walletType:n.method,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state,n=t.walletState,i=t.extendedPublicKeyError,o=a.interaction();return n===Ma.UNSUPPORTED?r.a.createElement(J.a,{className:"text-danger"},o.messageTextFor({walletState:n})):r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:6},r.a.createElement(fe.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:n!==Ma.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),r.a.createElement(y.a,{item:!0,md:6},!a.bip32PathIsDefault()&&r.a.createElement(k.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:n!==Ma.PENDING},"Default"))),r.a.createElement(J.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:a.hasBIP32PathError()||n===Ma.ACTIVE},"Import Extended Public Key")),r.a.createElement($a,{messages:o.messagesFor({walletState:n}),excludeCodes:["bip32"]}),r.a.createElement(J.a,{className:"text-danger"},i))},a.import=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.validateAndSetExtendedPublicKey,r=t.enableChangeMethod,(0,t.disableChangeMethod)(),a.setState({extendedPublicKeyError:"",walletState:Ma.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:i=e.sent,n(i,function(e){a.setState({extendedPublicKeyError:e,walletState:Ma.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({extendedPublicKeyError:e.t0.message,walletState:Ma.PENDING});case 14:r();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:n,level:Ma.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:n,level:Ma.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.extendedPublicKeyImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.state={extendedPublicKeyError:"",bip32PathError:"",walletState:a.interaction().isSupported()?Ma.PENDING:Ma.UNSUPPORTED},a}return Object(L.a)(t,e),t}(r.a.Component),Qn=function(e){return r.a.createElement("small",null,r.a.createElement(T.a,null,r.a.createElement(w.a,{color:"error.main"},r.a.createElement(j.a,null,r.a.createElement(P.a,{color:"error"},r.a.createElement(Za.a,null))),r.a.createElement(C.a,null,r.a.createElement(P.a,{color:"error"},e.message)))))},$n="xpub",er="text",tr=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={disableChangeMethod:!1},a.title=function(){var e=a.props,t=e.number,n=e.extendedPublicKeyImporter,i=e.setName;return r.a.createElement(on,{number:t,name:n.name,setName:i})},a.renderImport=function(){var e=a.props,t=e.extendedPublicKeyImporter,n=e.number,i=a.state.disableChangeMethod,o="xpub-".concat(n,"-importer-select-label");return r.a.createElement("div",null,r.a.createElement(X.a,{fullWidth:!0},r.a.createElement(Da.a,{id:o},"Select Method"),r.a.createElement(Ua.a,{labelId:o,id:"public-key-".concat(n,"-importer-select"),disabled:i,value:t.method,onChange:a.handleMethodChange},r.a.createElement(za.a,{value:""},"< Select method >"),r.a.createElement(za.a,{value:Ma.TREZOR},"Trezor"),r.a.createElement(za.a,{value:Ma.LEDGER},"Ledger"),r.a.createElement(za.a,{value:Ma.HERMIT},"Hermit"),r.a.createElement(za.a,{value:$n},"Derive from extended public key"),r.a.createElement(za.a,{value:er},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.extendedPublicKeyImporters,n=e.extendedPublicKeyImporter,i=e.network,o=e.addressType,l=e.defaultBIP32Path;return n.method===Ma.TREZOR||n.method===Ma.LEDGER?r.a.createElement(Jn,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,addressType:o,defaultBIP32Path:l,network:i}):n.method===Ma.HERMIT?r.a.createElement(Zn,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,resetBIP32Path:a.resetBIP32Path,reset:a.reset}):n.method===$n?r.a.createElement(Xn,{extendedPublicKeyImporter:n,extendedPublicKeyImporters:t,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,network:i,validateAndSetBIP32Path:a.validateAndSetBIP32Path}):n.method===er?r.a.createElement(Yn,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number,r=t.setMethod,i=t.setExtendedPublicKey;r(n,e.target.value),i(n,"")},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.finalize=function(){var e=a.props,t=e.number;(0,e.setFinalized)(t,!0)},a.reset=function(e){var t=a.props,n=t.number,r=t.setExtendedPublicKey,i=t.setFinalized;r(n,""),i(n,!1),e&&a.resetBIP32Path()},a.moveUp=function(e){var t=a.props,n=t.moveUp,r=t.number;e.preventDefault(),n(r)},a.moveDown=function(e){var t=a.props,n=t.moveDown,r=t.number;e.preventDefault(),n(r)},a.renderBIP32Path=function(){var e=a.props.extendedPublicKeyImporter;return e.method===er?r.a.createElement("div",{className:"mt-4"},r.a.createElement("p",null,"Make sure you ",r.a.createElement("strong",null,"record the corresponding BIP32 path."))):r.a.createElement("div",{className:"mt-4"},r.a.createElement("p",null,"The BIP32 path for this extended public key is:"),r.a.createElement("div",{className:"text-center"},r.a.createElement(Vt,{text:e.bip32Path},r.a.createElement("code",null,e.bip32Path))),r.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later.  ",r.a.createElement("strong",null,"Write down this BIP32 path!")))},a.validateAndSetBIP32Path=function(e,t,n,r){var i=a.props,o=i.number,l=i.setBIP32Path,c=Object(G.validateBIP32Path)(e,r);l(o,e),c?n(c):(n(""),t())},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.resetBIP32Path)(t)},a.renderExtendedPublicKey=function(){var e=a.props.extendedPublicKeyImporter;return r.a.createElement("div",null,r.a.createElement("p",null,"The following extended public key was imported:"),r.a.createElement("div",{className:"text-center"},r.a.createElement(Vt,{text:e.extendedPublicKey},r.a.createElement("small",null,r.a.createElement("code",null,e.extendedPublicKey)))),a.renderBIP32Path(),r.a.createElement(k.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){a.reset(e.method===Ma.HERMIT)}},"Remove Extended Public Key"))},a.validateAndSetExtendedPublicKey=function(e,t,n){var r=a.props,i=r.number,o=r.network,l=r.extendedPublicKeyImporters,c=r.setExtendedPublicKey,s=Object(G.validateExtendedPublicKey)(e,o);c(i,e),s?t(s):e&&Object.values(l).find(function(t,a){return a!==i-1&&t.extendedPublicKey===e})?t("This extended public key has already been imported."):(t(""),a.finalize(),n&&n())},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,a=e.finalizedNetwork,n=e.network,i=t.method&&t.method!==er&&t.conflict,o="";return i&&(o=a!==n?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),r.a.createElement(I.a,null,r.a.createElement(S.a,{title:this.title()}),r.a.createElement(O.a,null,i&&r.a.createElement(Qn,{message:o}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),t}(r.a.Component);var ar={setName:Bn,resetBIP32Path:Mn,setBIP32Path:An,setMethod:Dn,setExtendedPublicKey:Un,setFinalized:zn},nr=Object(c.b)(function(e,t){return Object(M.a)({},e.settings,e.quorum,{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})},ar)(tr),rr=a(247),ir=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={showSettings:!1},a.render=function(){var e=a.props,t=e.configuring,n=e.walletName,i=e.setName,o=e.deposits;return r.a.createElement("div",null,r.a.createElement("h1",null,!Object.values(o.nodes).length&&r.a.createElement(on,{number:0,name:n,setName:i}),Object.values(o.nodes).length>0&&r.a.createElement("span",null,n)),r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{item:!0,md:t?8:12},a.renderExtendedPublicKeyImporters(),r.a.createElement(g.a,{mt:2},r.a.createElement(qn,null))),a.renderSettings())))},a.renderSettings=function(){return a.props.configuring?r.a.createElement(y.a,{item:!0,md:4},r.a.createElement(g.a,null,r.a.createElement(pe,null)),r.a.createElement(g.a,{mt:2},r.a.createElement(Ee,null)),r.a.createElement(g.a,{mt:2},r.a.createElement(oe,null)),r.a.createElement(g.a,{mt:2},r.a.createElement(Ie,null))):r.a.createElement("div",null,r.a.createElement(g.a,{position:"fixed",right:10},r.a.createElement(F.a,{onClick:a.toggleDrawer},r.a.createElement(W.a,null))),r.a.createElement(H.a,{md:4,anchor:"right",open:a.state.showSettings,onClose:a.toggleDrawer},r.a.createElement(g.a,{width:400},r.a.createElement(g.a,{mt:2},r.a.createElement(Ie,null)))))},a.toggleDrawer=function(){a.setState({showSettings:!a.state.showSettings})},a.renderExtendedPublicKeyImporters=function(){for(var e=a.props,t=e.totalSigners,n=e.configuring,i=[],o=1;o<=t;o++)i.push(r.a.createElement(g.a,{key:o,mt:1===o?0:2,display:n?"block":"none"},r.a.createElement(nr,{key:o,number:o})));return i},a}return Object(L.a)(t,e),t}(r.a.Component);ir.defaultProps={bip32:rr};var or={setName:function(e,t){return{type:ct,value:t}}},lr=Object(c.b)(function(e){return Object(M.a)({},{totalSigners:e.settings.totalSigners},e.quorum,{walletName:e.wallet.info.walletName},e.wallet)},or)(ir),cr="SORT_PUBLIC_KEY_IMPORTERS",sr="UPDATE_MULTISIG_ADDRESS";var ur=Pe({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),dr=ur.setPublicKeyImporterName,pr=ur.setPublicKeyImporterBIP32Path,mr=ur.resetPublicKeyImporterBIP32Path,hr=ur.setPublicKeyImporterMethod,Er=ur.setPublicKeyImporterPublicKey,br=ur.setPublicKeyImporterFinalized,fr=ur.movePublicKeyImporterUp,vr=ur.movePublicKeyImporterDown,gr=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).title=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,i=e.addressType;return r.a.createElement(y.a,{container:!0,justify:"space-between"},r.a.createElement(y.a,{item:!0},n,"-of-",t," Multisig ",i," Address"),r.a.createElement(y.a,{item:!0},r.a.createElement("small",null,"Public Keys: ".concat(a.publicKeyCount(),"/").concat(t))))},a.isInConflict=function(){var e=a.props.publicKeyImporters;return Object.values(e).some(function(e){return e.conflict})},a.publicKeyCount=function(){var e=a.props.publicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},a.publicKeysAreCanonicallySorted=function(){var e=a.props.publicKeyImporters,t=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}),n=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}).sort();return t.filter(function(e,t){return e===n[t]}).length===t.length},a.canonicallySortPublicKeys=function(){(0,a.props.sortPublicKeyImporters)()},a.generateMultisig=function(){for(var e=a.props,t=e.network,n=e.publicKeyImporters,r=e.totalSigners,i=e.requiredSigners,o=e.addressType,l=e.setMultisigAddress,c=[],s=1;s<=r;s++)c.push(n[s].publicKey);var u=G.generateMultisigFromPublicKeys.apply(void 0,[t,o,i].concat(c));return l(u.address),u},a.downloadAddressDetails=function(e){e.preventDefault();var t=a.generateMultisig();v(a.addressDetailsText(t),a.addressDetailsFilename(t))},a.addressDetailsFilename=function(e){var t=a.props,n=t.totalSigners,r=t.requiredSigners,i=t.addressType;return"bitcoin-".concat(r,"-of-").concat(n,"-").concat(i,"-").concat(e.address,".txt")},a.addressDetailsText=function(e){var t=a.props,n=t.addressType,r=t.network,i=t.totalSigners,o=t.requiredSigners,l=Object(G.multisigRedeemScript)(e),c=Object(G.multisigWitnessScript)(e),s=l?"Redeem Script: ".concat(Object(G.scriptToHex)(l)):"",u=c?"Witness Script: ".concat(Object(G.scriptToHex)(c)):"",d=l&&c?"\n\n":"";return"Address: ".concat(e.address,"\n\nType: ").concat(n,"\n\nNetwork: ").concat(r,"\n\nQuorum: ").concat(o,"-of-").concat(i,"\n\nBIP32 Paths:\n").concat(a.publicKeyImporterBIP32Paths(),"\n\n").concat(s).concat(d).concat(u,"\n")},a.publicKeyImporterBIP32Paths=function(){for(var e=a.props.totalSigners,t=[],n=1;n<=e;n++)t.push(a.publicKeyImporterBIP32Path(n));return t.join("\n")},a.publicKeyImporterBIP32Path=function(e){var t=a.props.publicKeyImporters[e],n="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(n)},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:this.title()}),r.a.createElement(O.a,null,this.body()))}},{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),a=this.publicKeysAreCanonicallySorted();return r.a.createElement("div",null,this.isInConflict()&&r.a.createElement(Qn,null),!a&&r.a.createElement(y.a,{container:!0,justify:"space-between"},r.a.createElement(y.a,{item:!0,md:8},r.a.createElement(J.a,{error:!0},"WARNING: These public keys are not in the standard ",f("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),r.a.createElement(y.a,{item:!0,md:4},r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),r.a.createElement(g.a,{mt:2},r.a.createElement(fa,{multisig:t})),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return r.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}}]),t}(r.a.Component);var Pr={sortPublicKeyImporters:function(){return{type:cr}},setMultisigAddress:function(e){return{type:sr,value:e}}},yr=Object(c.b)(function(e){return Object(M.a)({},e.settings,e.address)},Pr)(gr),Ir=a(853),Sr=a(854),Or=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={error:"",publicKey:""},a.render=function(){var e=a.state,t=e.error,n=e.publicKey;return r.a.createElement(g.a,{mt:2},r.a.createElement(fe.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:n,onChange:a.handleChange,error:a.hasError(),helperText:t}),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===n||a.hasError()},"Add Public Key")))},a.import=function(){(0,a.props.validateAndSetPublicKey)(a.state.publicKey,a.setError)},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,n=Object(G.validatePublicKey)(t);a.setState({publicKey:t,error:n})},a}return Object(L.a)(t,e),t}(r.a.Component),Tr="m/0",wr=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){a.setBIP32PathToDefault()},a.state={extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,n=t.extendedPublicKey,i=t.extendedPublicKeyError,o=t.bip32PathError;return r.a.createElement("div",null,r.a.createElement(g.a,{mt:2},r.a.createElement(fe.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:n,onChange:a.handleExtendedPublicKeyChange,error:a.hasExtendedPublicKeyError(),helperText:i})),r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:10},r.a.createElement(fe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,error:a.hasBIP32PathError(),helperText:o}),r.a.createElement(J.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),r.a.createElement(y.a,{item:!0,md:2},!a.bip32PathIsDefault()&&r.a.createElement(k.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path},"Default"))),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===n||a.hasError()},"Import Public Key"))))},a.import=function(){var e=a.props,t=e.network,n=e.publicKeyImporter,r=e.validateAndSetPublicKey,i=a.state.extendedPublicKey;r(Object(G.deriveChildPublicKey)(i,n.bip32Path,t),function(e){return a.setState({bip32PathError:e})})},a.setBIP32PathToDefault=function(){(0,a.props.validateAndSetBIP32Path)(Tr,function(){},function(){})},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.hasExtendedPublicKeyError=function(){return""!==a.state.extendedPublicKeyError},a.hasError=function(){return a.hasBIP32PathError()||a.hasExtendedPublicKeyError()},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError,{mode:"unhardened"})},a.bip32PathIsDefault=function(){return a.props.publicKeyImporter.bip32Path===Tr},a.resetBIP32Path=function(){a.setBIP32PathToDefault(),a.setBIP32PathError("")},a.handleExtendedPublicKeyChange=function(e){var t=a.props.network,n=e.target.value,r=Object(G.validateExtendedPublicKey)(n,t);a.setState({extendedPublicKey:n,extendedPublicKeyError:r})},a}return Object(L.a)(t,e),t}(r.a.Component),jr=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={publicKeyError:"",walletState:Ma.PENDING},a.componentDidMount=function(){(0,a.props.resetBIP32Path)()},a.interaction=function(){var e=a.props,t=e.network,n=e.publicKeyImporter;return new Ma.HermitExportPublicKey({network:t,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.disableChangeMethod,t=a.state.publicKeyError;return r.a.createElement(Vn.a,null,r.a.createElement(Ga,{startText:"Import Public Key",interaction:a.interaction(),onStart:e,onSuccess:a.import,onClear:a.onClear}),r.a.createElement(J.a,{error:!0},t))},a.setError=function(e){a.setState({publicKeyError:e})},a.import=function(e){var t=a.props,n=t.validateAndSetBIP32Path,r=t.validateAndSetPublicKey;(0,t.enableChangeMethod)();var i=e.pubkey;n(e.bip32_path,function(){r(i,a.setError)},a.setError)},a.onClear=function(){var e=a.props,t=e.reset,n=e.enableChangeMethod;t(!0),a.setError(""),n()},a}return Object(L.a)(t,e),t}(r.a.Component),Cr=function(e){function t(e){var a;return Object(D.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.network,n=e.publicKeyImporter;return Object(Ma.HardwareWalletExportPublicKey)({network:t,walletType:n.method,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,n=t.walletState,i=t.publicKeyError,o=a.interaction();return n===Ma.UNSUPPORTED?r.a.createElement(J.a,{error:!0},o.messageTextFor({walletState:n})):r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0},r.a.createElement(y.a,{item:!0,md:6},r.a.createElement(fe.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:n!==Ma.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),r.a.createElement(y.a,{item:!0,md:6},!a.bip32PathIsDefault()&&r.a.createElement(k.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:n!==Ma.PENDING},"Default"))),r.a.createElement(J.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:a.hasBIP32PathError()||n===Ma.ACTIVE},"Import Public Key")),r.a.createElement($a,{messages:o.messagesFor({walletState:n}),excludeCodes:["bip32"]}),r.a.createElement(J.a,{error:!0},i))},a.import=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.validateAndSetPublicKey,r=t.enableChangeMethod,(0,t.disableChangeMethod)(),a.setState({publicKeyError:"",walletState:Ma.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:i=e.sent,n(i,function(e){a.setState({publicKeyError:e,walletState:Ma.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({publicKeyError:e.t0.message,walletState:Ma.PENDING});case 14:r();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:n,level:Ma.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:n,level:Ma.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.publicKeyImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.state={publicKeyError:"",bip32PathError:"",walletState:a.interaction().isSupported()?Ma.PENDING:Ma.UNSUPPORTED},a}return Object(L.a)(t,e),t}(r.a.Component),xr="xpub",kr="text",Kr=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={disableChangeMethod:!1},a.title=function(){var e=a.props,t=e.number,n=e.totalSigners,i=e.publicKeyImporter,o=e.setName;return r.a.createElement(y.a,{container:!0,justify:"space-between"},r.a.createElement(y.a,{item:!0},r.a.createElement(on,{number:t,name:i.name,setName:o})),r.a.createElement(y.a,{item:!0},r.a.createElement(y.a,{container:!0,justify:"flex-end"},r.a.createElement(k.a,{type:"button",variant:"contained",onClick:a.moveUp,disabled:1===t},r.a.createElement(Ir.a,null)),r.a.createElement("span",null,"\xa0"),r.a.createElement(k.a,{type:"button",variant:"contained",onClick:a.moveDown,disabled:t===n},r.a.createElement(Sr.a,null)))))},a.renderImport=function(){var e=a.props,t=e.publicKeyImporter,n=e.number,i=a.state.disableChangeMethod,o="public-key-".concat(n,"-importer-select-label");return r.a.createElement("div",null,r.a.createElement(X.a,{fullWidth:!0},r.a.createElement(Da.a,{id:o},"Select Method"),r.a.createElement(Ua.a,{labelId:o,id:"public-key-".concat(n,"-importer-select"),disabled:i,value:t.method,onChange:a.handleMethodChange},r.a.createElement(za.a,{value:""},"< Select method >"),r.a.createElement(za.a,{value:Ma.TREZOR},"Trezor"),r.a.createElement(za.a,{value:Ma.LEDGER},"Ledger"),r.a.createElement(za.a,{value:Ma.HERMIT},"Hermit"),r.a.createElement(za.a,{value:xr},"Derive from extended public key"),r.a.createElement(za.a,{value:kr},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.publicKeyImporter,n=e.network,i=e.addressType,o=e.defaultBIP32Path;return t.method===Ma.TREZOR||t.method===Ma.LEDGER?r.a.createElement(Cr,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,addressType:i,defaultBIP32Path:o,network:n}):t.method===Ma.HERMIT?r.a.createElement(jr,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):t.method===xr?r.a.createElement(wr,{network:n,publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path}):t.method===kr?r.a.createElement(Or,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number,r=t.setMethod,i=t.setPublicKey;r(n,e.target.value),i(n,"")},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.finalize=function(){var e=a.props,t=e.number;(0,e.setFinalized)(t,!0)},a.reset=function(e){var t=a.props,n=t.number,r=t.setPublicKey,i=t.setFinalized;r(n,""),i(n,!1),e&&a.resetBIP32Path()},a.moveUp=function(e){var t=a.props,n=t.moveUp,r=t.number;e.preventDefault(),n(r)},a.moveDown=function(e){var t=a.props,n=t.moveDown,r=t.number;e.preventDefault(),n(r)},a.renderBIP32Path=function(){var e=a.props.publicKeyImporter;return e.method!==kr?r.a.createElement(g.a,{mt:4},r.a.createElement("p",null,"The BIP32 path for this public key is:"),r.a.createElement(y.a,{container:!0,justify:"center"},r.a.createElement(Vt,{text:e.bip32Path},r.a.createElement("code",null,e.bip32Path))),r.a.createElement(g.a,{mt:4},r.a.createElement("p",null,"You will need this BIP32 path to sign for this key later.  ",r.a.createElement("strong",null,"Write down this BIP32 path!")))):null},a.validateAndSetBIP32Path=function(e,t,n,r){var i=a.props,o=i.number,l=i.setBIP32Path,c=Object(G.validateBIP32Path)(e,r);l(o,e),c?n(c):(n(""),t())},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.resetBIP32Path)(t)},a.renderPublicKey=function(){var e=a.props.publicKeyImporter;return r.a.createElement("div",null,r.a.createElement("p",null,"The following public key was imported:"),r.a.createElement(y.a,{container:!0,justify:"center"},r.a.createElement(Vt,{text:e.publicKey},r.a.createElement("code",null,e.publicKey))),a.renderBIP32Path(),r.a.createElement(g.a,{mt:2},r.a.createElement(k.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){a.reset(e.method===Ma.HERMIT)}},"Remove Public Key")))},a.validateAndSetPublicKey=function(e,t,n){var r=a.props,i=r.number,o=r.publicKeyImporters,l=r.setPublicKey,c=Object(G.validatePublicKey)(e);l(i,e),c?t&&t(c):e&&Object.values(o).find(function(t,a){return a!==i-1&&t.publicKey===e})?t&&t("This public key has already been imported."):(t&&t(""),a.finalize(),n&&n())},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:this.title()}),r.a.createElement(O.a,null,e.method&&e.method!==kr&&e.conflict&&r.a.createElement(Qn,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),t}(r.a.Component);var Nr={setName:dr,setBIP32Path:pr,resetBIP32Path:mr,setMethod:hr,setPublicKey:Er,setFinalized:br,moveUp:fr,moveDown:vr},Rr=Object(c.b)(function(e,t){return Object(M.a)({},e.settings,e.address,{publicKeyImporter:e.address.publicKeyImporters[t.number]})},Nr)(Kr),_r=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).render=function(){var e=a.props.address;return r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{item:!0,md:8},a.renderPublicKeyImporters(),r.a.createElement(g.a,{mt:2},r.a.createElement(yr,null))),r.a.createElement(y.a,{item:!0,md:4},r.a.createElement(g.a,null,r.a.createElement(pe,null)),r.a.createElement(g.a,{mt:2},r.a.createElement(Ee,null)),r.a.createElement(g.a,{mt:2},r.a.createElement(oe,null)),""!==e&&a.renderClientPicker())))},a.renderClientPicker=function(){var e=a.props.address;return r.a.createElement(g.a,{mt:2},r.a.createElement(Ie,{publicNotes:r.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:r.a.createElement("div",null,r.a.createElement(Sa,{addresses:[e]}))}))},a.renderPublicKeyImporters=function(){for(var e=a.props.totalSigners,t=[],n=1;n<=e;n++)t.push(r.a.createElement(g.a,{key:n,mt:1===n?0:2},r.a.createElement(Rr,{number:n})));return t},a}return Object(L.a)(t,e),t}(r.a.Component);var Br=Object(c.b)(function(e){return Object(M.a)({},{totalSigners:e.settings.totalSigners},e.address)})(_r),Ar="CHOOSE_CONFIRM_OWNERSHIP",Mr="SET_OWNERSHIP_MULTISIG",Dr="RESET_PUBLIC_KEY_IMPORTER",Ur="RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",zr="SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",Lr="SET_PUBLIC_KEY_IMPORTER_METHOD",Fr="SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY";var Hr=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},a.disabled=function(){},a.hasScriptError=function(){return""!==a.state.scriptError},a.hasFetchUTXOsError=function(){return""!==a.state.fetchUTXOsError},a.hasError=function(){return a.hasScriptError()||a.hasFetchUTXOsError()},a.scriptName=function(){switch(a.props.addressType){case G.P2SH:return"redeem";case G.P2SH_P2WSH:case G.P2WSH:return"witness";default:return null}},a.scriptTitle=function(){var e=a.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},a.handleScriptChange=function(e){var t=e.target.value,n="";(""===t&&(n="".concat(a.scriptTitle()," script cannot be blank.")),""===n&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(n="".concat(a.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===n)&&(""!==Object(G.validateHex)(t)&&(n="".concat(a.scriptTitle()," script is not valid hex.")));if(""!==t&&""===n)try{a.generateMultisig(t)}catch(r){console.error(r),n="Failed to parse ".concat(a.scriptName()," script.")}a.setState({scriptHex:t,scriptError:n,fetchUTXOsError:"",fetchedUTXOs:!1})},a.generateMultisig=function(e){var t=a.props,n=t.network,r=t.addressType;return e||(e=a.state.scriptHex),Object(G.generateMultisigFromHex)(n,r,e)},a.renderDetails=function(){var e=a.state.fetchUTXOsError,t=a.props,n=t.chosePerformSpend,i=t.choseConfirmOwnership,o=t.client,l=a.generateMultisig(),c=n||i;return r.a.createElement("div",null,r.a.createElement(fa,{multisig:l}),r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{item:!0},r.a.createElement(k.a,{variant:"contained",color:"primary",size:"large",onClick:a.performSpend,disabled:c},"Spend from this address")),r.a.createElement(y.a,{item:!0},r.a.createElement(k.a,{variant:"contained",size:"large",onClick:a.confirmOwnership,disabled:c},"Confirm ownership"))),r.a.createElement(J.a,{error:!0},e)),"private"===o.type&&r.a.createElement(g.a,{mt:2},r.a.createElement(Sa,{addresses:[l.address],autoImport:!0})))},a.performSpend=Object(Te.a)(Oe.a.mark(function e(){var t,n,r,i,o,l,c,s,u,d,p;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.setRequiredSigners,r=t.setTotalSigners,i=t.setInputs,o=t.setFrozen,l=t.choosePerformSpend,c=a.generateMultisig(),e.next=4,a.fetchUTXOs(c);case 4:(s=e.sent)?(u=s.utxos,d=s.inputsTotalSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),a.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(i(u),n(Object(G.multisigRequiredSigners)(c)),r(Object(G.multisigTotalSigners)(c)),o(!0),l())):a.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}},e)})),a.fetchUTXOs=function(){var e=Object(Te.a)(Oe.a.mark(function e(t){var n,r,i,o;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.network,i=n.client,o=null,e.prev=2,e.next=5,We(t.address,r,i);case 5:o=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 12:if(null===o){e.next=14;break}return e.abrupt("return",{utxos:o.map(function(e){return Object(M.a)({},e,{multisig:t})}),inputsTotalSats:o.map(function(e){return e.amount}).reduce(function(e,t){return e.plus(t)},new je.a(0))});case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a.confirmOwnership=function(){var e=a.props,t=e.chooseConfirmOwnership,n=e.setOwnershipMultisig,r=e.setFrozen;n(a.generateMultisig()),t(),r(!0)},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,a=e.scriptError,n=e.fetchedUTXOs;return r.a.createElement(I.a,null,r.a.createElement(S.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),r.a.createElement(O.a,null,r.a.createElement("form",null,r.a.createElement(fe.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:n&&!this.hasFetchUTXOsError(),helperText:a,error:""!==a})),""===t||this.hasScriptError()?r.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),t}(r.a.Component);var Wr={choosePerformSpend:function(){return{type:ft}},setFrozen:ne,setInputs:Rt,setTotalSigners:function(e){return{type:gt,value:e}},setRequiredSigners:Nt,chooseConfirmOwnership:function(){return{type:Ar}},setOwnershipMultisig:function(e){return{type:Mr,value:e}}},qr=Object(c.b)(function(e){return Object(M.a)({},e.settings,{client:e.client},{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})},Wr)(Hr),Gr=a(373),Xr=a.n(Gr),Yr=a(374),Vr=a.n(Yr),Zr=a(378),Jr=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).titleRef=r.a.createRef(),a.state={disableChangeMethod:!1},a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderImportByMethod=function(){var e=a.props,t=e.network,n=e.publicKeyImporter,i=e.defaultBIP32Path;return n.method===Ma.HERMIT?r.a.createElement(jr,{publicKeyImporter:n,validateAndSetBIP32Path:a.validateAndSetBIP32Path,validateAndSetPublicKey:a.validateAndSetPublicKey,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):n.method===Ma.TREZOR||n.method===Ma.LEDGER?r.a.createElement(Cr,{network:t,publicKeyImporter:n,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:i,validateAndSetPublicKey:a.validateAndSetPublicKey,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){(0,a.props.setMethod)(e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.reset=function(){(0,a.props.reset)()},a.resetBIP32Path=function(){(0,a.props.resetBIP32Path)()},a.validateAndSetBIP32Path=function(e,t,n,r){var i=a.props.setBIP32Path,o=Object(G.validateBIP32Path)(e,r);i(e),o?n(o):(n(""),t())},a.validateAndSetPublicKey=function(e,t,n){var r=a.props.setPublicKey,i=Object(G.validatePublicKey)(e);r(e),i?t&&t(i):(t&&t(""),n&&n())},a.renderConfirmation=function(){var e=a.props,t=e.publicKeys,n=e.publicKeyImporter;if(""===n.publicKey)return null;if(t.includes(n.publicKey)){var i=Object(Zr.a)(j.a)({color:"green"});return r.a.createElement(T.a,null,r.a.createElement(w.a,null,r.a.createElement(i,null,r.a.createElement(Xr.a,null)),r.a.createElement(C.a,null,"The public key exported at BIP32 path ",r.a.createElement("code",null,n.bip32Path)," is present in the provided redeem script.")))}return r.a.createElement(T.a,null,r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(P.a,{color:"error"},r.a.createElement(Vr.a,null))),r.a.createElement(C.a,null,"The public key exported at BIP32 path ",r.a.createElement("code",null,n.bip32Path)," is not present in the provided redeem script.")))},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod;return r.a.createElement(I.a,null,r.a.createElement(S.a,{ref:this.titleRef,title:"Confirm Ownership"}),r.a.createElement(O.a,null,r.a.createElement("form",null,r.a.createElement("p",null,"How will you confirm your ownership of this address?"),r.a.createElement(X.a,{fullWidth:!0},r.a.createElement(Da.a,{id:"public-key-importer-select-label"},"Select Method"),r.a.createElement(Ua.a,{labelId:!0,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},r.a.createElement(za.a,{value:""},"< Select method >"),r.a.createElement(za.a,{value:Ma.TREZOR},"Trezor"),r.a.createElement(za.a,{value:Ma.LEDGER},"Ledger"),r.a.createElement(za.a,{value:Ma.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&r.a.createElement(k.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),t}(r.a.Component);var Qr={setMethod:function(e){return{type:Lr,value:e}},setBIP32Path:function(e){return{type:zr,value:e}},setPublicKey:function(e){return{type:Fr,value:e}},resetBIP32Path:function(){return{type:Ur}},reset:function(){return{type:Dr}}},$r=Object(c.b)(function(e,t){return e.spend.ownership},Qr)(Jr),ei=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return r.a.createElement(g.a,{mt:2},r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{item:!0,md:8},r.a.createElement(g.a,null,r.a.createElement(qr,null)),a.renderBody()),r.a.createElement(y.a,{item:!0,md:4},r.a.createElement(g.a,null,r.a.createElement(Ee,null)),r.a.createElement(g.a,{mt:2},r.a.createElement(oe,null)),r.a.createElement(g.a,{mt:2},r.a.createElement(Ie,null)))))},a.renderBody=function(){var e=a.props,t=e.transaction;return e.ownership.chosen?r.a.createElement(g.a,{mt:2},r.a.createElement($r,null)):r.a.createElement(g.a,null,a.spendable()&&r.a.createElement(g.a,null,r.a.createElement(g.a,{mt:2},r.a.createElement(ua,{inputs:t.inputs,inputsTotalSats:t.inputsTotalSats})),r.a.createElement(g.a,{mt:2},r.a.createElement(Aa,null))),t.finalizedOutputs&&r.a.createElement(g.a,null,a.renderSignatureImporters()),a.signaturesFinalized()&&r.a.createElement(g.a,{mt:2},r.a.createElement(yn,null)))},a.renderSignatureImporters=function(){for(var e=a.props.transaction,t=[],n=1;n<=e.requiredSigners;n++)t.push(r.a.createElement(g.a,{key:n,mt:2},r.a.createElement(vn,{number:n})));return t},a.spendable=function(){return a.props.transaction.inputs.length>0},a.signaturesFinalized=function(){var e=a.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},a.confirmOwnership=function(e){a.setState({addressFinalized:!0,confirmOwnership:e})},a}return Object(L.a)(t,e),t}(r.a.Component);var ti=Object(c.b)(function(e){return e.spend})(ei),ai=a(375),ni=a(855),ri=a(842),ii=Object(ai.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),oi=function(){var e=ii();return r.a.createElement("div",{className:e.root},r.a.createElement(ni.a,{position:"static"},r.a.createElement(ri.a,null,r.a.createElement(P.a,{variant:"h6",className:e.title},"Caravan"),r.a.createElement(k.a,{color:"inherit",href:"#/wallet",target:"_blank"},"Wallet"),r.a.createElement(k.a,{color:"inherit",href:"#/address",target:"_blank"},"Create"),r.a.createElement(k.a,{color:"inherit",href:"#/spend",target:"_blank"},"Interact"),r.a.createElement(k.a,{color:"inherit",href:"#/",target:"_blank"},"Help"))))},li=a(376),ci=a(758),si=function(){return r.a.createElement(g.a,{mt:2},r.a.createElement("hr",null),r.a.createElement(y.a,{container:!0,alignItems:"center"},r.a.createElement(y.a,{item:!0,sm:2},f("https://www.unchained-capital.com",r.a.createElement("img",{src:ci,className:"logo",alt:"Unchained Capital logo",height:"32"}))),r.a.createElement(y.a,{item:!0,sm:6},r.a.createElement("p",null,"Copyright 2019 by Unchained Capital and released under an MIT license.")),r.a.createElement(y.a,{item:!0,sm:1},r.a.createElement("p",null," v",li.a," "))))},ui=a(856),di=a(857),pi=function(e){function t(e){var a;return Object(D.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).state={error:null,errorInfo:null},a}return Object(L.a)(t,e),Object(q.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.errorInfo;return a?r.a.createElement(g.a,{m:4},r.a.createElement(g.a,{m:2},r.a.createElement(P.a,{variant:"h3",component:"h1"},"Something went wrong.")),r.a.createElement(g.a,{m:2},r.a.createElement(P.a,{variant:"body1"},"Let us know what happened on ",r.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank"},"github"),".")),r.a.createElement(g.a,{mx:2,my:3},r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},t&&t.toString(),r.a.createElement("br",null),a.componentStack))):this.props.children}}]),t}(r.a.Component),mi=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ui.a,null),r.a.createElement(di.a,{maxWidth:"lg"},r.a.createElement(oi,null),r.a.createElement(pi,null,r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(b.a,{path:"/wallet",component:lr}),r.a.createElement(b.a,{path:"/address",component:Br}),r.a.createElement(b.a,{path:"/spend",component:ti}),r.a.createElement(b.a,{path:"/",component:A})))),r.a.createElement(si,null)))},hi=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ei(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function bi(e,t){return Object(M.a)({},e,t)}var fi={network:G.MAINNET,totalSigners:3,requiredSigners:2,addressType:G.P2SH,frozen:!1},vi={type:"public",url:"",username:"",password:"",url_error:"",username_error:"",password_error:"",status:"unknown"},gi={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new je.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},Pi={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new je.a(0),spendingSats:new je.a(0),autoSpend:!1};var yi=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case nt:return function(e){var t=Object(M.a)({},e);return Object.values(t.nodes).forEach(function(e){e.spend=!1}),t}(t);case ut:return function(e){var t=Object(M.a)({},e);return Object.values(t.nodes).forEach(function(e){e.spend&&(t.balanceSats=t.balanceSats.minus(e.balanceSats),e.balanceSats=new je.a(0),e.spend=!1,e.utxos=[])}),t}(t);case e:return function(e,t){var a=Object(M.a)({},gi,e.nodes[t.value.bip32Path]||{},t.value),n={};n[a.bip32Path]=a;var r=Object(M.a)({},e,{nodes:Object(M.a)({},e.nodes,n)});"undefined"!==typeof t.value.spend&&(r.spendingSats=t.value.spend?e.spendingSats.plus(a.balanceSats):e.spendingSats.minus(a.balanceSats)),t.value.balanceSats&&(r.balanceSats=e.balanceSats.plus(a.balanceSats));var i=0,o=0,l=Object.keys(r.nodes);l.sort(function(e,t){var a=(e||"").split("/"),n=(t||"").split("/");return parseInt(a[2])-parseInt(n[2])});for(var c=!1,s=0;s<l.length;s++){var u=l[l.length-(s+1)],d=r.nodes[u];d.fetchedUTXOs&&(!d.balanceSats.isEqualTo(0)||d.addressUsed||c?c=!0:i++),""!==d.fetchUTXOsError&&o++}return r.trailingEmptyNodes=i,r.fetchUTXOsErrors=o,r}(t,a);default:return t}}},Ii="text";function Si(e){var t=(new Date).getTime().toString(),a=Object.values(e.extendedPublicKeyImporters).map(function(e){return e.extendedPublicKey}).join("");return"".concat(t,"-").concat(a)}var Oi={name:"",bip32Path:Object(G.multisigBIP32Root)(G.P2SH,G.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",finalized:!1,confliect:!1},Ti={extendedPublicKeyImporters:{1:Object(M.a)({},Oi,{name:"Extended Public Key 1"}),2:Object(M.a)({},Oi,{name:"Extended Public Key 2"}),3:Object(M.a)({},Oi,{name:"Extended Public Key 3"})},defaultBIP32Path:Object(G.multisigBIP32Root)(G.P2SH,G.MAINNET),network:G.MAINNET,addressType:G.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0};function wi(e,t,a){var n={};n[a]=t.value;var r=Object(M.a)({},e,{nodes:{}});return r.extendedPublicKeyImporters[t.number]=bi(e.extendedPublicKeyImporters[t.number],n),Object.values(r.extendedPublicKeyImporters).reduce(function(e,t){return e+t.finalized},0)===Object.keys(r.extendedPublicKeyImporters).length&&(r.configuring=!1),ji(r.extendedPublicKeyImporters[t.number],e),bi(r,{fingerprint:Si(r)})}function ji(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Ci(e,t,a){for(var n=1;n<=Object.values(e.extendedPublicKeyImporters).length;n++){var r=t.extendedPublicKeyImporters[n];r.bip32PathModified||r.finalized||(r.bip32Path=a),ji(r,t)}}var xi="text";function ki(e){var t=(new Date).getTime().toString(),a=Object.values(e.publicKeyImporters).map(function(e){return e.publicKey}).join("");return"".concat(t,"-").concat(a)}var Ki={name:"",bip32Path:Object(G.multisigBIP32Path)(G.P2SH,G.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1},Ni={publicKeyImporters:{1:Object(M.a)({},Ki,{name:"Public Key 1"}),2:Object(M.a)({},Ki,{name:"Public Key 2"}),3:Object(M.a)({},Ki,{name:"Public Key 3"})},defaultBIP32Path:Object(G.multisigBIP32Path)(G.P2SH,G.MAINNET),network:G.MAINNET,addressType:G.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""};function Ri(e,t,a){var n={};n[a]=t.value;var r=Object(M.a)({},e);return r.publicKeyImporters[t.number]=bi(e.publicKeyImporters[t.number],n),_i(r.publicKeyImporters[t.number],e),bi(r,{fingerprint:ki(r)})}function _i(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Bi(e,t,a){for(var n=1;n<=Object.values(e.publicKeyImporters).length;n++){var r=t.publicKeyImporters[n];r.bip32PathModified||r.finalized||(r.bip32Path=a),_i(r,t)}}var Ai={autoSpend:!0,viewAddresses:!1,depositing:!1,spending:!1,walletName:"My Multisig Wallet"};function Mi(e){return bi(e,{spending:!1,depositing:!1,viewAddresses:!1})}function Di(e,t){var a=Mi(e);return a[t]=!0,a}var Ui={chosen:!1,publicKeyImporter:Object(M.a)({},{bip32Path:"",method:"",publicKey:""}),network:G.MAINNET,addressType:G.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(G.multisigBIP32Path)(G.P2SH,G.MAINNET)};function zi(e,t,a){var n={};return n[a]=t.value,Object(M.a)({},e,{publicKeyImporter:Object(M.a)({},e.publicKeyImporter,n)})}var Li={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},Fi={};function Hi(e,t,a){var n={};n[a]=t.value;var r=Object(M.a)({},e);return r[t.number]=bi(e[t.number],n),r}var Wi=a(259);function qi(e,t){var a=e.txid.toLowerCase(),n=t.txid.toLowerCase();return a<n?-1:a>n?1:e.n<t.n?-1:e.n>t.n?1:0}var Gi={address:"",amount:"",amountSats:"",addressError:"",amountError:""},Xi=[Object(M.a)({},Gi)],Yi={chosen:!1,network:G.MAINNET,inputs:[],inputsTotalSats:new je.a(0),outputs:[].concat(Xi),feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:G.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1};function Vi(e){if(e.outputs.find(function(e){return""!==e.addressError||""!==e.amountError})||""!==e.feeError||""!==e.feeRateError||0===e.inputs.length)return Object(M.a)({},e,{balanceError:""});var t=Object(G.bitcoinsToSatoshis)(new je.a(e.fee)),a=e.outputs.map(function(e){return Object(G.bitcoinsToSatoshis)(new je.a(e.amount||0))}).reduce(function(e,t){return e.plus(t)},new je.a(0));if(e.inputsTotalSats.isEqualTo(a.plus(t)))return Object(M.a)({},e,{balanceError:""});var n,r=a.plus(t).minus(e.inputsTotalSats);if(r.isNaN())n="Cannot calculate total.";else{var i=r.isLessThan(0)?"Increase":"Decrease";n="".concat(i," by ").concat(Object(G.satoshisToBitcoins)(r.absoluteValue()).toFixed(8),".")}return Object(M.a)({},e,{balanceError:n})}function Zi(e,t,a){return Object(G.satoshisToBitcoins)(Object(G.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:a,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toString()}var Ji=Object(l.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ar:return bi(e,{chosen:!0});case Q:return bi(e,{network:t.value});case Mr:return function(e,t){var a=t.value,n=Object(G.multisigAddressType)(a),r=Object(G.multisigBIP32Path)(n,e.network);return Object(M.a)({},e,{network:e.network,addressType:n,publicKeys:Object(G.multisigPublicKeys)(a),address:a.address,defaultBIP32Path:r})}(e,t);case zr:var a=zi(e,{value:""},"publicKey");return zi(a,t,"bip32Path");case Lr:return zi(e,t,"method");case Fr:return zi(e,t,"publicKey");case Ur:return zi(e,{value:e.defaultBIP32Path},"bip32Path");case Dr:return Object(M.a)({},e,{publicKeyImporter:Object(M.a)({},e.publicKeyImporter,{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return bi(e,{chosen:!0});case Q:return bi(e,{network:t.value});case te:return bi(e,{addressType:t.value});case vt:return bi(e,{requiredSigners:t.value});case gt:return bi(e,{totalSigners:t.value});case Pt:return Vi(function(e,t){var a=t.value.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new je.a(0));return bi(e,{inputs:t.value.sort(qi),inputsTotalSats:a})}(e,t));case yt:return Vi(function(e,t){var a=e.outputs.concat(Object(M.a)({},Gi));return Object(M.a)({},e,{outputs:a,fee:Zi(e,e.feeRate,a.length)})}(e));case It:return Vi(function(e,t){var a=Object(Wi.a)(e.outputs),n=t.value,r=Object(G.validateAddress)(n,e.network);if(""===r)for(var i=0;i<e.inputs.length;i++)if(n===e.inputs[i].address){r="Output address cannot equal input address.";break}if(""===r)for(var o=0;o<e.outputs.length;o++)if(o!==t.number-1&&e.outputs[o].address===n){r="Duplicate output address.";break}return a[t.number-1].address=n,a[t.number-1].addressError=r,Object(M.a)({},e,{outputs:a})}(e,t));case St:return Vi(function(e,t){var a=Object(Wi.a)(e.outputs),n=t.value,r=e.inputs.length?Object(G.validateOutputAmountBTC)(n,e.inputsTotalSats):"";return e.isWallet&&"Output amount is too large."===r&&(r=""),a[t.number-1].amount=n,a[t.number-1].amountError=r,a[t.number-1].amountSats=r?"":Object(G.bitcoinsToSatoshis)(new je.a(t.value)),Object(M.a)({},e,{outputs:a})}(e,t));case Ot:return Vi(function(e,t){for(var a=[],n=0;n<e.outputs.length;n++)n!==t.number-1&&a.push(e.outputs[n]);return Object(M.a)({},e,{outputs:a,fee:Zi(e,e.feeRate,a.length)})}(e,t));case Tt:return Vi(function(e,t){var a=t.value,n=Object(G.validateFeeRate)(a);return bi(e,{feeRate:a,feeRateError:n,fee:""===n?Zi(e,a,e.outputs.length):"",feeError:""})}(e,t));case wt:return Vi(function(e,t){var a=t.value,n=Object(G.validateFeeBTC)(a,e.inputsTotalSats);return bi(e,{fee:a,feeError:n,feeRate:""===n?Object(G.estimateMultisigTransactionFeeRate)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:e.outputs.length,m:e.requiredSigners,n:e.totalSigners,feesInSatoshis:Object(G.bitcoinsToSatoshis)(new je.a(a))}).toString():"",feeRateError:""})}(e,t));case jt:return function(e,t){var a=Object(G.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs);return Object(M.a)({},e,{finalizedOutputs:t.value,unsignedTransaction:a})}(e,t);case Ct:return bi(e,{outputs:Xi,fee:"",balanceError:""});case xt:return bi(e,{txid:t.value});case Kt:return bi(e,{isWallet:!0});case kt:return bi(e,Yi);default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_SIGNATURES":return Object(M.a)({},Fi);case vt:return function(e,t){for(var a={},n=1;n<=t.value;n++)a[n]=Object(M.a)({},Li,{name:"Signature ".concat(n)});return Object(M.a)({},e,a)}(e,t);case"SET_SIGNATURE_IMPORTER_NAME":return Hi(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return Hi(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return Hi(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return Hi(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return Hi(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return Hi(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return function(e,t){var a=Object(M.a)({},e);return a[t.number]=bi(e[t.number],t.value),a}(e,t);default:return e}}}),Qi=Object(l.c)({deposits:yi(tt),change:yi(at),info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ai,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:return bi(e,{autoSpend:t.value});case ot:return Di(e,"depositing");case lt:return Di(e,"spending");case it:return Di(e,"viewAddresses");case ct:return bi(e,{walletName:t.value});case st:return Mi(e);default:return e}}}),$i=Object(l.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return bi(e,{network:t.value});case $:return bi(e,{totalSigners:t.value});case ee:return bi(e,{requiredSigners:t.value});case te:return bi(e,{addressType:t.value});case ae:return bi(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return bi(e,{type:t.value});case"SET_CLIENT_URL":return bi(e,{url:t.value});case"SET_CLIENT_USERNAME":return bi(e,{username:t.value});case"SET_CLIENT_PASSWORD":return bi(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return bi(e,{url_error:t.value});case"SET_CLIENT_USERNAME_ERROR":return bi(e,{username_error:t.value});case"SET_CLIENT_PASSWORD_ERROR":return bi(e,{password_error:t.value});case"SET_CLIENT_STATUS":return bi(e,{status:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ni,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return function(e,t){var a=t.value,n=e.addressType,r=Object(G.multisigBIP32Path)(n,a),i=Object(M.a)({},e,{network:a,defaultBIP32Path:r});return Bi(e,i,r),i}(e,t);case te:return function(e,t){var a=e.network,n=t.value,r=Object(G.multisigBIP32Path)(n,a),i=Object(M.a)({},e,{addressType:n,defaultBIP32Path:r});return Bi(e,i,r),i}(e,t);case $:return function(e,t){for(var a=t.value,n={},r=1;r<=a;r++)n[r]=e.publicKeyImporters[r]||Object(M.a)({},Ki,{name:"Public Key ".concat(r)});var i=Object(M.a)({},e,{publicKeyImporters:n,stub:t.type});return bi(i,{fingerprint:ki(i)})}(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return Ri(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ri(Ri(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ri(Ri(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return Ri(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return Ri(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return Ri(function(e,t){var a=Object(M.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&a.publicKeyImporters[t.number].method!==xi?(a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.publicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==xi?e+1:e},0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.publicKeyImporters).forEach(function(e){return e.conflict=!1})),a}(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return function(e,t){if(1===t.number)return e;var a=Object(M.a)({},e),n=e.publicKeyImporters[t.number-1],r=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number-1]=r,a.publicKeyImporters[t.number]=n,bi(a,{fingerprint:ki(a)})}(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return function(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var a=Object(M.a)({},e),n=e.publicKeyImporters[t.number+1],r=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number+1]=r,a.publicKeyImporters[t.number]=n,bi(a,{fingerprint:ki(a)})}(e,t);case cr:return function(e,t){for(var a=Object.values(e.publicKeyImporters),n=a.map(function(e){return e.publicKey}).sort().map(function(e){return a.find(function(t){return t.publicKey===e})}),r={},i=1;i<=n.length;i++)r[i]=n[i-1];var o=Object(M.a)({},e,{publicKeyImporters:r});return bi(o,{fingerprint:ki(o)})}(e);case sr:return bi(e,{address:t.value});default:return e}},spend:Ji,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ti,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return function(e,t){var a=e.addressType,n=t.value,r=Object(G.multisigBIP32Root)(a,n),i=Object(M.a)({},e,{network:n,defaultBIP32Path:r});return Ci(e,i,r),i}(e,t);case te:return function(e,t){var a=t.value,n=e.network,r=Object(G.multisigBIP32Root)(a,n),i=Object(M.a)({},e,{addressType:a,defaultBIP32Path:r});return Ci(e,i,r),i}(e,t);case $:return function(e,t){for(var a=t.value,n={},r=1;r<=a;r++)n[r]=e.extendedPublicKeyImporters[r]||Object(M.a)({},Oi,{name:"Extended Public key ".concat(r)});return Object(M.a)({},e,{extendedPublicKeyImporters:n})}(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return wi(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return wi(wi(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return wi(wi(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return wi(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return wi(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return wi(function(e,t){var a=Object(M.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&a.extendedPublicKeyImporters[t.number].method!==Ii?(a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.extendedPublicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==Ii?e+1:e},0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.extendedPublicKeyImporters).forEach(function(e){return e.conflict=!1})),a}(e,t),t,"finalized");case Rn:return Object(M.a)({},e,{configuring:t.value});default:return e}},wallet:Qi}),eo=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,to=Object(l.e)($i,eo(Object(l.a)(u.a,p.a,m.a)));o.a.render(r.a.createElement(c.a,{store:to},r.a.createElement(mi,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/caravan","/service-worker.js");hi?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ei(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ei(e)})}}()}},[[391,1,2]]]);
//# sourceMappingURL=main.2eb80b23.chunk.js.map