(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1006:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.estimateMultisigP2SHTransactionLength=function(e){var t=41*e.numInputs+34*e.numOutputs+30,n=73*e.m*e.numInputs+34*e.n*e.numInputs+4*e.numInputs;return t+n}},1007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.estimateMultisigP2SHP2WSHTransactionLength=function(e){var t=76*e.numInputs+34*e.numOutputs+30,n=72*e.m*e.numInputs+33*e.n*e.numInputs+6*e.numInputs;return Math.ceil(.75*t+.25*(t+n))}},1008:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.estimateMultisigP2WSHTransactionLength=function(e){var t=41*e.numInputs+34*e.numOutputs+30,n=72*e.m*e.numInputs+33*e.n*e.numInputs+6*e.numInputs;return Math.ceil(.75*t+.25*(t+n))}},1009:function(e,t,n){"use strict";n(381),Object.defineProperty(t,"__esModule",{value:!0}),t.blockExplorerURL=l,t.blockExplorerAPIURL=function(e,t){return"".concat(i(t),"/api").concat(e)},t.blockExplorerTransactionURL=function(e,t){return l("/tx/".concat(e),t)},t.blockExplorerAddressURL=function(e,t){return l("/address/".concat(e),t)};var r=n(196),a="https://blockstream.info",o="https://blockstream.info/testnet";function i(e){return e===r.NETWORKS.TESTNET?o:a}function l(e,t){return"".concat(i(t)).concat(e)}},1053:function(e,t,n){"use strict";var r=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.TrezorSignMultisigTransaction=t.TrezorExportExtendedPublicKey=t.TrezorExportPublicKey=t.TrezorExportHDNode=t.TrezorInteraction=void 0,n(243),n(244),n(53),n(298),n(299),n(300),n(1054),n(175),n(176),n(116),n(1057),n(396),n(205),n(301),n(245),n(398);var a,o=n(399),i=n(295);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t,n){return(m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=n(1148).default;E.manifest({email:"foo@bar.com",appUrl:"https://localhost:3000"});var v=function(e){function t(e){var n,r=e.network;return s(this,t),(n=p(this,h(t).call(this,{network:r}))).trezorCoin=I(r),n}return f(t,i.WalletInteraction),d(t,[{key:"messages",value:function(){var e=m(h(t.prototype),"messages",this).call(this);return e[i.PENDING].push({level:i.INFO,text:"Make sure your Trezor hardware wallet is plugged in.",code:"trezor.device.connect"}),e[i.ACTIVE].push({level:i.INFO,text:"Your browser should open a new Trezor Connect window.  If you do not see this window, ensure you have enabled popups for this site.",code:"trezor.popup.generic"}),e}}]),t}();t.TrezorInteraction=v;var g=function(e){function t(e){var n,r=e.network,a=e.bip32Path,o=e.bip32Paths;return s(this,t),(n=p(this,h(t).call(this,{network:r}))).bip32Paths=o||[a],n}return f(t,v),d(t,[{key:"messages",value:function(){for(var e=m(h(t.prototype),"messages",this).call(this),n=0;n<this.bip32Paths.length;n++){var r=(this.bip32Paths[n]||"").split("/");if(r.length<4){e[i.PENDING].push({level:i.ERROR,text:"BIP32 path must be at least depth 3.",code:"trezor.bip32_path.minimum"});break}var a=r[2];if(this.network===o.NETWORKS.MAINNET&&!a.match(/^0'/)){e[i.PENDING].push({level:i.ERROR,text:"Mainnet BIP32 path must have a second component of 0'",code:"trezor.bip32_path.mismatch"});break}if(this.network===o.NETWORKS.TESTNET&&!a.match(/^1'/)){e[i.PENDING].push({level:i.ERROR,text:"Testnet BIP32 path must have a second component of 1'",code:"trezor.bip32_path.mismatch"});break}}return e[i.ACTIVE].push({level:i.INFO,text:"Confirm in the Trezor Connect window that you want to 'Export public key'.  You may be prompted to enter your PIN.",code:"trezor.popup.export_hdnode"}),e}},{key:"run",value:function(){var e;return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.bip32Paths.length>1)){t.next=6;break}return t.next=3,r.awrap(E.getPublicKey({bundle:this.bip32Paths.map(function(e){return{path:e}}),coin:this.trezorCoin}));case 3:e=t.sent,t.next=13;break;case 6:if(1!==this.bip32Paths.length){t.next=12;break}return t.next=9,r.awrap(E.getPublicKey({path:this.bip32Paths[0],coin:this.trezorCoin}));case 9:e=t.sent,t.next=13;break;case 12:throw new Error("You must provide a bip32 path string or an array of bip32 paths");case 13:if(e.success){t.next=15;break}throw new Error(e.payload.error);case 15:return t.abrupt("return",e.payload);case 16:case"end":return t.stop()}},null,this)}}]),t}();t.TrezorExportHDNode=g;var P=function(e){function t(){return s(this,t),p(this,h(t).apply(this,arguments))}return f(t,g),d(t,[{key:"run",value:function(){var e;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(m(h(t.prototype),"run",this).call(this));case 2:if(e=n.sent,!Array.isArray(e)){n.next=5;break}return n.abrupt("return",e.map(function(e){return e.publicKey}));case 5:return n.abrupt("return",e.publicKey);case 6:case"end":return n.stop()}},null,this)}}]),t}();t.TrezorExportPublicKey=P;var y=function(e){function t(){return s(this,t),p(this,h(t).apply(this,arguments))}return f(t,g),d(t,[{key:"run",value:function(){var e;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(m(h(t.prototype),"run",this).call(this));case 2:return e=n.sent,n.abrupt("return",e.xpub);case 4:case"end":return n.stop()}},null,this)}}]),t}();t.TrezorExportExtendedPublicKey=y;var S=function(e){function t(e){var n,r=e.network,a=e.inputs,o=e.outputs,i=e.bip32Paths;return s(this,t),(n=p(this,h(t).call(this,{network:r}))).inputs=a,n.outputs=o,n.bip32Paths=i,n}return f(t,v),d(t,[{key:"messages",value:function(){var e=m(h(t.prototype),"messages",this).call(this);return e[i.ACTIVE].push({level:i.INFO,text:"Confirm in the Trezor Connect window that you want to 'Sign ".concat(this.network," transaction'.  You may be prompted to enter your PIN."),code:"trezor.popup.sign"}),e[i.ACTIVE].push({level:i.INFO,text:"You Trezor device will ask you to confirm each output address above with its corresponding output amount.  Check each address and amount carefully against both the values displayed in this application and your own expectations.",code:"trezor.signing.outputs"}),e[i.ACTIVE].push({level:i.INFO,text:"Finally, your Trezor device will ask you to confirm the overall transaction output amount and fee.  Check both carefully against both the values displayed in this application and your own expectations.",code:"trezor.signing.final"}),e}},{key:"run",value:function(){var e,t,n,a,o=this;return r.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.inputs.map(function(e,t){return w(e,o.bip32Paths[t])}),t=this.outputs.map(function(e){return T(e)}),n={inputs:e,outputs:t,coin:I(this.network)},i.next=5,r.awrap(E.signTransaction(n));case 5:if((a=i.sent).success){i.next=8;break}throw new Error(a.payload.error);case 8:return i.abrupt("return",a.payload.signatures);case 9:case"end":return i.stop()}},null,this)}}]),t}();function I(e){return e===o.NETWORKS.MAINNET?"Bitcoin":"Testnet"}t.TrezorSignMultisigTransaction=S;var O=(c(a={},o.MULTISIG_ADDRESS_TYPES.P2WSH,"SPENDWITNESS"),c(a,o.MULTISIG_ADDRESS_TYPES.P2SH,"SPENDMULTISIG"),c(a,o.MULTISIG_ADDRESS_TYPES.P2SH_P2WSH,"SPENDP2SHWITNESS"),a);function w(e,t){var n=(0,o.multisigRequiredSigners)(e.multisig),r=(0,o.multisigAddressType)(e.multisig);return{script_type:O[r],multisig:{m:n,pubkeys:(0,o.multisigPublicKeys)(e.multisig).map(function(e){return function(e){return{address_n:[],node:{depth:0,child_num:0,fingerprint:0,chain_code:"0".repeat(64),public_key:e}}}(e)}),signatures:Array(n).fill("")},prev_hash:e.txid,prev_index:e.index,address_n:(0,o.bip32PathToSequence)(t),amount:e.amountSats.toString()}}function T(e){return{amount:e.amountSats.toFixed(0),address:e.address,script_type:"PAYTOADDRESS"}}},1066:function(e,t){},1069:function(e,t){},1180:function(e,t,n){"use strict";(function(e){var r=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.exportLedgerPubKey=function(e,t){var n,o;return r.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,r.awrap(t.getWalletPublicKey(e,{verify:!0}));case 3:if(!(n=i.sent).publicKey){i.next=9;break}return o=(0,a.compressPublicKey)(n.publicKey),i.abrupt("return",{success:!0,publicKey:o});case 9:return i.abrupt("return",null);case 10:i.next=15;break;case 12:return i.prev=12,i.t0=i.catch(0),i.abrupt("return",{success:!1,text:i.t0.message});case 15:case"end":return i.stop()}},null,null,[[0,12]])},t.signMultisigSpendLedger=w,t.LedgerSignMultisigTransaction=t.LedgerExportExtendedPublicKey=t.LedgerExportPublicKey=t.LedgerExportHDNode=t.LedgerInteraction=void 0,n(243),n(244),n(53),n(298),n(299),n(300),n(175),n(176),n(116),n(398),n(205),n(396),n(301);var a=n(399),o=n(295);function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t,n){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=n(1181),b=n(616),E=n(1247).default,v=n(1254).default,g=function(e){function t(){return l(this,t),u(this,p(t).apply(this,arguments))}return m(t,o.WalletInteraction),s(t,[{key:"messages",value:function(){var e=d(p(t.prototype),"messages",this).call(this);return e[o.PENDING].push({level:o.INFO,text:"Make sure your Ledger hardware wallet is plugged in.",code:"ledger.device.connect"}),e[o.PENDING].push({level:o.INFO,text:"Make sure you have unlocked your Ledger hardware wallet.",code:"ledger.device.unlocked"}),e[o.PENDING].push({level:o.INFO,text:"Make sure you have opened your Ledger hardware wallet to the Bitcoin app.",code:"ledger.app.bitcoin"}),e[o.ACTIVE].push({level:o.INFO,text:"Communicating with Ledger hardware wallet...",code:"ledger.active"}),e}}]),t}();t.LedgerInteraction=g;var P=function(e){function t(e){var n,r=e.network,a=e.bip32Path,o=e.bip32Paths;return l(this,t),(n=u(this,p(t).call(this,{network:r}))).bip32Paths=o||[a],n}return m(t,g),s(t,[{key:"messages",value:function(){var e=d(p(t.prototype),"messages",this).call(this);return e[o.ACTIVE].push({level:o.WARNING,text:"Your Ledger's screen  may display a 'WARNING!' message.  Click both buttons on your Ledger to proceed to confirming the BIP32 path.",code:"ledger.bip32.warning"}),e[o.ACTIVE].push({level:o.WARNING,text:"Your Ledger will display part of the BIP32 path ".concat(this.bip32Path," and claim it is 'unusual'.  Click both buttons on your Ledger to proceed.  You may need to do this multiple times."),code:"ledger.bip32.instructions"}),e}},{key:"run",value:function(){var e,t,n,a,o,i;return r.async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r.awrap(E.create());case 2:if(e=l.sent,t=new v(e),1!==this.bip32Paths.length){l.next=11;break}return l.next=7,r.awrap(t.getWalletPublicKey(this.bip32Paths[0],{verify:!0}));case 7:return n=l.sent,l.abrupt("return",n);case 11:if(!(this.bip32Paths.length>1)){l.next=25;break}a=[],o=0;case 14:if(!(o<this.bip32Paths.length)){l.next=22;break}return l.next=17,r.awrap(t.getWalletPublicKey(this.bip32Paths[o],{verify:0===o}));case 17:i=l.sent,a.push(i);case 19:o++,l.next=14;break;case 22:return l.abrupt("return",a);case 25:throw new Error("You must provide a bip32 path string or an array of bip32 paths");case 26:case"end":return l.stop()}},null,this)}}]),t}();t.LedgerExportHDNode=P;var y=function(e){function t(){return l(this,t),u(this,p(t).apply(this,arguments))}return m(t,P),s(t,[{key:"run",value:function(){var e,n;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.awrap(d(p(t.prototype),"run",this).call(this));case 2:if(!(e=o.sent).publicKey){o.next=8;break}return n=(0,a.compressPublicKey)(e.publicKey),o.abrupt("return",n);case 8:if(!Array.isArray(e)){o.next=12;break}return o.abrupt("return",e.map(function(e){return(0,a.compressPublicKey)(e.publicKey)}));case 12:throw new{message:"Unable to export public key."};case 13:case"end":return o.stop()}},null,this)}}]),t}();t.LedgerExportPublicKey=y;var S=function(e){function t(){return l(this,t),u(this,p(t).apply(this,arguments))}return m(t,P),s(t,[{key:"run",value:function(){var e,n,a,o,i,l,c;return r.async(function(s){for(;;)switch(s.prev=s.next){case 0:return"undefined"===typeof this.bip32Path&&(this.bip32Path=this.bip32Paths[0]),s.next=3,r.awrap(d(p(t.prototype),"run",this).call(this));case 3:return e=s.sent,s.next=6,r.awrap(E.create());case 6:return n=s.sent,a=this.bip32Path.split("/").slice(1).join("/"),o=this.bip32Path.split("/").slice(1,-1).join("/"),i=new v(n),s.next=12,r.awrap(i.getWalletPublicKey(o,!1));case 12:return l=s.sent,(c=x(l,e,a)).network.bip32.public=O(this.network)?70617039:76067358,s.abrupt("return",c.toBase58());case 16:case"end":return s.stop()}},null,this)}}]),t}();t.LedgerExportExtendedPublicKey=S;var I=function(e){function t(e){var n,r=e.network,a=e.inputs,o=e.outputs,i=e.bip32Paths;return l(this,t),(n=u(this,p(t).call(this,{network:r}))).inputs=a,n.outputs=o,n.bip32Paths=i,n}return m(t,g),s(t,[{key:"messages",value:function(){var e=d(p(t.prototype),"messages",this).call(this);return e}},{key:"run",value:function(){var e,t;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(E.create());case 2:return(e=n.sent).setExchangeTimeout(2e4*this.outputs.length),t=new v(e),n.abrupt("return",w(this.bip32Paths,this.inputs,this.outputs,O(this.network),t));case 6:case"end":return n.stop()}},null,this)}}]),t}();function O(e){return e===a.NETWORKS.TESTNET}function w(e,t,n,o,i){var l,c,s,u,d,p,m,h,b,E,v,g;return r.async(function(P){for(;;)switch(P.prev=P.next){case 0:for((l=new f.TransactionBuilder).setVersion(1),o&&(l.network=f.networks.testnet),c=0;c<n.length;c++)l.addOutput(n[c].address,n[c].amountSats.toNumber());for(s=0;s<t.length;s++)l.addInput(t[s].txid,t[s].index);return u=l.buildIncomplete(),d=u.toHex(),p=(0,a.multisigAddressType)(t[0].multisig),m=p==a.MULTISIG_ADDRESS_TYPES.P2SH_P2WSH||p==a.MULTISIG_ADDRESS_TYPES.P2WSH,P.next=11,r.awrap(i.splitTransaction(d,m));case 11:return h=P.sent,P.next=14,r.awrap(i.serializeTransactionOutputs(h).toString("hex"));case 14:return b=P.sent,E=t.map(function(e){return T(i,e)}),v=e.map(function(e){return e.split("/").slice(1).join("/")}),P.next=19,r.awrap(i.signP2SHTransaction(E,v,b,0,1,m,1));case 19:return g=P.sent,P.abrupt("return",g);case 21:case"end":return P.stop()}})}function T(e,t){var n=(0,a.multisigAddressType)(t.multisig),r=e.splitTransaction(t.transactionHex,!0);return n==a.MULTISIG_ADDRESS_TYPES.P2SH?[r,t.index,(0,a.scriptToHex)((0,a.multisigRedeemScript)(t.multisig))]:[r,t.index,(0,a.scriptToHex)((0,a.multisigWitnessScript)(t.multisig))]}function x(t,n,r){var o=(0,a.compressPublicKey)(t.publicKey),i=(0,a.compressPublicKey)(n.publicKey),l=b.fromPublicKey(e.from(i,"hex"),e.from(n.chainCode,"hex")),c=b.fromPublicKey(e.from(o,"hex"),e.from(t.chainCode,"hex"));l.parentFingerprint=c.fingerprint,l.depth=r.split("/").length-1;var s=(0,a.bip32PathToSequence)(r);return l.index=s.slice(-1)[0],l.path=r,l}t.LedgerSignMultisigTransaction=I}).call(this,n(17).Buffer)},1182:function(e,t){},1185:function(e,t){},1256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HermitSignTransaction=t.HermitExportExtendedPublicKey=t.HermitExportPublicKey=t.HermitExport=t.HermitInteraction=void 0,n(243),n(244),n(298),n(53),n(299),n(300),n(205),n(287),n(288),n(116),n(1257),n(245);var r=l(n(1259)),a=l(n(1261)),o=n(399),i=n(295);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function m(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){return u(this,t),m(this,h(t).apply(this,arguments))}return f(t,i.WalletInteraction),p(t,[{key:"_parseQRCodeData",value:function(e){try{var t=r.default.decode.asBytes(e);return this._decompressAndParseJSON(t)}catch(n){throw new Error("Unable to parse QR code (Base32 decode error).")}}},{key:"_decompressAndParseJSON",value:function(e){try{var t=a.default.inflate(e,{to:"string"});return this._parseJSON(t)}catch(n){throw new Error("Unable to parse QR code (gzip decompress error).")}}},{key:"_parseJSON",value:function(e){try{return JSON.parse(e)}catch(t){throw new Error("Unable to parse QR code (JSON parse error).")}}},{key:"_encodeQRCodeData",value:function(e){try{var t=JSON.stringify(e);return this._compressAndBase32Encode(t)}catch(n){throw console.error(n),new Error("Unable to create QR code (JSON encode error).")}}},{key:"_compressAndBase32Encode",value:function(e){try{var t=a.default.deflate(e,{gzip:!0});return this._base32Encode(t)}catch(n){throw console.error(n),new Error("Unable to create QR code (gzip compress error).")}}},{key:"_base32Encode",value:function(e){try{return r.default.encode(e)}catch(t){throw console.error(t),new Error("Unable to create QR code (Base32 encode error).")}}}]),t}();t.HermitInteraction=E;var v=function(e){function t(){return u(this,t),m(this,h(t).apply(this,arguments))}return f(t,E),p(t,[{key:"messages",value:function(){var e=s(h(t.prototype),"messages",this).call(this);return e[i.ACTIVE].push({level:i.INFO,code:"hermit.scanning",text:"Scan Hermit QR code now."}),e}}]),t}();t.HermitExport=v;var g=function(e){function t(e){var n,r=e.network,a=e.bip32Path;return u(this,t),(n=m(this,h(t).call(this,{network:r}))).bip32Path=a,n}return f(t,v),p(t,[{key:"messages",value:function(){var e=s(h(t.prototype),"messages",this).call(this),n="Run the following Hermit command, replacing the BIP32 path if you need to:",r="export-pub ".concat(this.bip32Path);return e[i.PENDING].push({level:i.INFO,code:"hermit.command",instructions:n,mode:"wallet",command:r,text:"".concat(n," '").concat(r,"'")}),e}},{key:"parse",value:function(e){var t=this._parseQRCodeData(e),n=t.xpub;if(!t.pubkey)throw n?new Error("Make sure you export a plain public key and NOT an extended public key."):new Error("Did not receive a public key.");return t}}]),t}();t.HermitExportPublicKey=g;var P=function(e){function t(e){var n,r=e.network,a=e.bip32Path;return u(this,t),(n=m(this,h(t).call(this,{network:r}))).bip32Path=a,n}return f(t,v),p(t,[{key:"messages",value:function(){var e=s(h(t.prototype),"messages",this).call(this),n="Run the following Hermit command, replacing the BIP32 path if you need to:",r="export-xpub ".concat(this.bip32Path);return e[i.PENDING].push({level:i.INFO,code:"hermit.command",instructions:n,mode:"wallet",command:r,text:"".concat(n," '").concat(r,"'")}),e}},{key:"parse",value:function(e){var t=this._parseQRCodeData(e),n=t.xpub,r=t.pubkey;if(!n)throw r?new Error("Make sure you export an extended public key and NOT a plain public key."):new Error("Did not receive an extended public key.");return t}}]),t}();t.HermitExportExtendedPublicKey=P;var y=function(e){function t(e){var n,r=e.network,a=e.inputs,o=e.outputs,i=e.bip32Paths;return u(this,t),(n=m(this,h(t).call(this,{network:r}))).inputs=a,n.outputs=o,n.bip32Paths=i,n.supported=!0,n.inputAddressType="",n}return f(t,v),p(t,[{key:"isSupported",value:function(){return this.inputsAreSupported()&&this.outputsAreSupported()}},{key:"outputsAreSupported",value:function(){if(this.outputs&&this.outputs.length)for(var e=0;e<this.outputs.length;e++){if(this.outputs[e].address.match(/^(tb|bc)/))return!1}return!0}},{key:"inputsAreSupported",value:function(){if(this.inputs&&this.inputs.length)for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=(0,o.multisigAddressType)(t.multisig);if(n!==o.MULTISIG_ADDRESS_TYPES.P2SH)return this.inputAddressType=n,!1}return!0}},{key:"messages",value:function(){var e=s(h(t.prototype),"messages",this).call(this);if(this.inputsAreSupported()||e[i.UNSUPPORTED].push({level:i.ERROR,code:"hermit.unsupported.inputaddress",text:"Unsupported input address type ".concat(this.inputAddressType,", must be P2SH.")}),this.outputsAreSupported()||e[i.UNSUPPORTED].push({level:i.ERROR,code:"hermit.unsupported.outputaddress",text:"Unsupported output address type. bech32 addresses are unsupported."}),!this.inputsAreSupported()||!this.outputsAreSupported())return e;var n="Scan this QR code into Hermit by running the following command:";e[i.PENDING].push({level:i.INFO,code:"hermit.command",instructions:n,mode:"wallet",command:"sign-bitcoin",text:"".concat(n," '").concat("sign-bitcoin","'")});var r=this.signatureRequestData(),a=this._encodeQRCodeData(r);return e[i.PENDING].push({level:i.INFO,code:"hermit.signature_request",data:r,encodedData:a,text:"Signature Request"}),e}},{key:"signatureRequestData",value:function(){for(var e={},t=0;t<this.inputs.length;t++){var n=this.inputs[t],r=this.bip32Paths[t],a=(0,o.scriptToHex)((0,o.multisigRedeemScript)(n.multisig));e[a]||(e[a]=[a,r]),e[a].push({txid:n.txid,index:n.index,amount:n.amountSats.toNumber()})}return{inputs:Object.values(e),outputs:this.outputs.map(function(e){return{address:e.address,amount:e.amountSats.toNumber()}})}}},{key:"parse",value:function(e){return this._parseQRCodeData(e).signatures}}]),t}();t.HermitSignTransaction=y},1289:function(e,t){},1292:function(e,t){},1314:function(e,t,n){e.exports=n.p+"static/media/logo.66481e66.png"},1316:function(e,t,n){"use strict";n.r(t);n(670);var r=n(0),a=n.n(r),o=n(30),i=n.n(o),l=n(129),c=n(16),s=n(640),u=n.n(s),d=n(641),p=n.n(d),m=n(642),h=n(1415),f=n(1426),b=n(1427),E=n(8),v=n(23),g=n.n(v);function P(e,t){return a.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)}function y(e,t){var n=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,t);else{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}function S(e,t){for(var n=[],r=new g.a(0),a=function(a){var o=e[a];if(o.utxos.forEach(function(e){n.push(Object(E.a)({},e,{multisig:o.multisig,bip32Path:o.bip32Path}))}),(r=r.plus(o.balanceSats)).isGreaterThanOrEqualTo(t))return"break"},o=0;o<e.length;o++){if("break"===a(o))break}return n}var I=n(1414),O=n(130),w=n(1368),T=n(1362),x=n(1366),j=n(1367),k=n(1369),C=n(1318),_=n(1370),N=n(1372),R=n(1375),K=n(1376),A=n(1371),B=n(1373),M=n(1374),D=n(1377),U=function(){return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Disclaimer"}),a.a.createElement(j.a,null,a.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},H=function(){return a.a.createElement("div",null,a.a.createElement(I.a,{mt:4,mb:2},a.a.createElement(O.a,{variant:"h2"},"Welcome to Caravan!")),a.a.createElement(w.a,{container:!0,spacing:3},a.a.createElement(w.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},a.a.createElement(w.a,{item:!0},a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Stateless Multisig Coordinator"}),a.a.createElement(j.a,null,a.a.createElement("p",null,"Caravan is making bitcoin ",a.a.createElement("strong",null,"multisig")," custody easier and safer through transparency and standards."),a.a.createElement("p",null,"Caravan is a ",a.a.createElement("strong",null,"coordination")," software.  It connects to a source of consensus and your keys to build and interact with multisig bitcoin addresses."),a.a.createElement("p",null,"Caravan is also ",a.a.createElement("strong",null,"stateless"),".  It does not itself store any data.  You must safekeep the addresses (and redeem scripts & BIP32 paths) you create.")))),a.a.createElement(w.a,{item:!0},a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Keys"}),a.a.createElement(j.a,null,a.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),a.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind.  Caravan, being stateless, cannot store your private key but it can talk to hardware devices or software applications which do."),a.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),a.a.createElement(w.a,{item:!0},a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Consensus"}),a.a.createElement(j.a,null,a.a.createElement("p",null,"In order to look up address balances and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),a.a.createElement("p",null,"Running a full bitcoin node is the best way to determine the current state of the bitcoin network.  Caravan can be easily configured to use your own bitcoin node for consensus information and broadcasting transactions."),a.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at ",a.a.createElement("code",null,"blockstream.info"),"."))))),a.a.createElement(w.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},a.a.createElement(w.a,{item:!0},a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Learn More"}),a.a.createElement(j.a,null,a.a.createElement(k.a,null,a.a.createElement(C.a,null,a.a.createElement(_.a,null,a.a.createElement(A.a,null)),a.a.createElement(N.a,null,P("https://www.unchained-capital.com/blog/the-caravan-arrives/","Blog Post"))),a.a.createElement(C.a,null,a.a.createElement(_.a,null,a.a.createElement(B.a,null)),a.a.createElement(N.a,null,P("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),a.a.createElement(C.a,null,a.a.createElement(_.a,null,a.a.createElement(M.a,null)),a.a.createElement(N.a,null,P("https://github.com/unchained-capital/caravan","Source Code"))))))),a.a.createElement(w.a,{item:!0},a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Supported Devices"}),a.a.createElement(j.a,null,"Caravan has been tested with the following hardware wallets:",a.a.createElement("ul",null,a.a.createElement("li",null,P("https://shop.trezor.io/product/trezor-one-white","Trezor One")),a.a.createElement("li",null,P("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S"))),"And web browsers:",a.a.createElement("ul",null,a.a.createElement("li",null,P("https://www.google.com/chrome/","Chrome")),a.a.createElement("li",null,P("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),a.a.createElement(R.a,null,a.a.createElement(K.a,{href:"https://github.com/unchained-capital/caravan/issues"},a.a.createElement(D.a,null)," \xa0 Report Issue")))))),a.a.createElement(I.a,{mt:2},a.a.createElement(U,null)))},L=n(10),W=n(12),z=n(11),F=n(13),G=n(657),q=n(1420),Y=n(1408),X=n(21),V=n(4),Q=n(1319),Z=n(1378),J=n(1379),$=n(1419),ee=n(1321),te="SET_NETWORK",ne="SET_TOTAL_SIGNERS",re="SET_REQUIRED_SIGNERS",ae="SET_ADDRESS_TYPE",oe="SET_FROZEN";function ie(e){return{type:oe,value:e}}var le=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(a)))).handleNetworkChange=function(e){(0,n.props.setNetwork)(e.target.value)},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.frozen;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Network"}),a.a.createElement(j.a,null,a.a.createElement(Q.a,{component:"fieldset"},a.a.createElement(Z.a,null,a.a.createElement(J.a,{id:"mainnet",control:a.a.createElement($.a,{color:"primary"}),name:"network",value:"mainnet",label:a.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===V.MAINNET,disabled:n}),a.a.createElement(J.a,{id:"testnet",control:a.a.createElement($.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===V.TESTNET,disabled:n})),a.a.createElement(ee.a,null,a.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),t}(a.a.Component);var ce={setNetwork:function(e){return{type:te,value:e}}},se=Object(c.b)(function(e){return{network:e.settings.network,frozen:e.settings.frozen}},ce)(le),ue=n(1380),de=n(1381),pe=(n(383),7),me=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).renderIncrementRequiredSigners=function(){var e=n.props,t=e.requiredSigners,r=e.totalSigners,o=e.frozen,i=t===r||o;return a.a.createElement(G.a,{color:"primary",onClick:n.handleIncrementRequiredSigners,disabled:i},a.a.createElement(ue.a,null))},n.renderDecrementRequiredSigners=function(){var e=n.props,t=e.requiredSigners,r=e.frozen,o=1===t||r;return a.a.createElement(G.a,{color:"secondary",onClick:n.handleDecrementRequiredSigners,disabled:o},a.a.createElement(de.a,null))},n.renderIncrementTotalSigners=function(){var e=n.props,t=e.totalSigners,r=e.frozen,o=t===pe||r;return a.a.createElement(G.a,{color:"primary",onClick:n.handleIncrementTotalSigners,disabled:o},a.a.createElement(ue.a,null))},n.renderDecrementTotalSigners=function(){var e=n.props,t=e.requiredSigners,r=e.totalSigners,o=e.frozen,i=r===t||2===r||o;return a.a.createElement(G.a,{color:"secondary",onClick:n.handleDecrementTotalSigners,disabled:i},a.a.createElement(de.a,null))},n.handleIncrementRequiredSigners=function(e){var t=n.props,r=t.requiredSigners;(0,t.setRequiredSigners)(r+1),e.preventDefault()},n.handleDecrementRequiredSigners=function(e){var t=n.props,r=t.requiredSigners;(0,t.setRequiredSigners)(r-1),e.preventDefault()},n.handleIncrementTotalSigners=function(e){var t=n.props,r=t.totalSigners;(0,t.setTotalSigners)(r+1),e.preventDefault()},n.handleDecrementTotalSigners=function(e){var t=n.props,r=t.totalSigners;(0,t.setTotalSigners)(r-1),e.preventDefault()},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,n=e.totalSigners;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Quorum"}),a.a.createElement(j.a,null,a.a.createElement(I.a,null,a.a.createElement(w.a,{container:!0,justify:"center"},a.a.createElement(w.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),a.a.createElement(w.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},a.a.createElement(w.a,{item:!0},this.renderIncrementRequiredSigners()),a.a.createElement(w.a,{item:!0},a.a.createElement(O.a,{variant:"h2"},t)),a.a.createElement(w.a,{item:!0},a.a.createElement("small",null,a.a.createElement("p",null,"Required"))),a.a.createElement(w.a,{item:!0},this.renderDecrementRequiredSigners())),a.a.createElement(w.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},a.a.createElement(w.a,{item:!0},a.a.createElement(O.a,{variant:"h6"},"of"))),a.a.createElement(w.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},a.a.createElement(w.a,{item:!0},this.renderIncrementTotalSigners()),a.a.createElement(w.a,{item:!0},a.a.createElement(O.a,{variant:"h2"},n)),a.a.createElement(w.a,{item:!0},a.a.createElement("small",null,a.a.createElement("p",null,"Total"))),a.a.createElement(w.a,{item:!0},this.renderDecrementTotalSigners())),a.a.createElement(w.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),t}(a.a.Component);var he={setTotalSigners:function(e){return{type:ne,value:e}},setRequiredSigners:function(e){return{type:re,value:e}}},fe=Object(c.b)(function(e){return e.settings},he)(me),be=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(a)))).handleTypeChange=function(e){(0,n.props.setType)(e.target.value)},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addressType,n=e.frozen;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Address Type"}),a.a.createElement(j.a,null,a.a.createElement(Q.a,{component:"fieldset"},a.a.createElement(Z.a,null,a.a.createElement(J.a,{id:V.P2SH,control:a.a.createElement($.a,{color:"primary"}),name:"type",value:V.P2SH,label:V.P2SH,onChange:this.handleTypeChange,checked:t===V.P2SH,disabled:n}),a.a.createElement(J.a,{id:V.P2SH_P2WSH,control:a.a.createElement($.a,{color:"primary"}),name:"type",value:V.P2SH_P2WSH,label:V.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===V.P2SH_P2WSH,disabled:n}),a.a.createElement(J.a,{id:V.P2WSH,control:a.a.createElement($.a,{color:"primary"}),name:"type",value:V.P2WSH,label:V.P2WSH,onChange:this.handleTypeChange,checked:t===V.P2WSH,disabled:n})),a.a.createElement(ee.a,null,a.a.createElement("small",null,"Choose '",V.P2WSH,"' for best practices, '",V.P2SH,"' for greatest compatibility.")))))}}]),t}(a.a.Component);var Ee={setType:function(e){return{type:ae,value:e}}},ve=Object(c.b)(function(e){return e.settings},Ee)(be),ge=n(1382),Pe=n(1383);function ye(e){return function(t){return{type:e,value:t}}}function Se(e){return function(t,n){return{type:e,number:t,value:n}}}function Ie(e){var t,n={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var a=r[t],o=e[a];n[a]=Se(o)}return n}var Oe=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={url_edited:!1},n.handleTypeChange=function(e){var t=n.props,r=t.setType,a=t.network,o=t.setUrl,i=e.target.checked?"private":"public";"private"!==i||n.state.url_edited||o("http://localhost:".concat("mainnet"===a?8332:18332)),r(i)},n.handleUrlChange=function(e){var t=n.props,r=t.setUrl,a=t.setUrlError,o=e.target.value,i=n.validateUrl(o);n.state.url_edited||i||n.setState({url_edited:!0}),r(o),a(i)},n.handleUsernameChange=function(e){var t=n.props,r=t.setUsername,a=t.setUsernameError,o=e.target.value,i=n.validateUsername(o);r(o),a(i)},n.handlePasswordChange=function(e){var t=n.props,r=t.setPassword,a=t.setPasswordError,o=e.target.value,i=n.validatePassword(o);r(o),a(i)},n.toggle=function(){var e=n.props.client,t=e.type.charAt(0).toUpperCase()+e.type.slice(1);return a.a.createElement(J.a,{control:a.a.createElement(ge.a,{color:"primary",checked:"private"===e.type,onChange:n.handleTypeChange,value:"private"}),label:t})},n.title=function(){return a.a.createElement(w.a,{container:!0,justify:"space-between"},a.a.createElement(w.a,{item:!0},"Consensus"),a.a.createElement(w.a,{item:!0},n.toggle()))},n.disabled=function(){return!1},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}},{key:"validatePassword",value:function(e){return""}},{key:"validateUsername",value:function(e){return""}},{key:"render",value:function(){var e=this.props,t=e.client,n=e.url_error,r=e.username_error,o=e.password_error;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:this.title()}),a.a.createElement(j.a,null,"public"===t.type?a.a.createElement("div",null,a.a.createElement("p",null,"'Public' uses the ",a.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",a.a.createElement("code",null,"bitcoind")," node."),"undefined"!==typeof this.props.publicNotes&&this.props.publicNotes):a.a.createElement("div",null,a.a.createElement("p",null,"A ",a.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),a.a.createElement("p",null,a.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",P("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),a.a.createElement("form",null,a.a.createElement(w.a,{container:!0,direction:"column"},a.a.createElement(w.a,{item:!0},a.a.createElement(Pe.a,{fullWidth:!0,label:"URL",value:t.url,onChange:this.handleUrlChange,disabled:this.disabled(),error:""!==n,helperText:n})),a.a.createElement(w.a,{item:!0}),a.a.createElement(w.a,{item:!0},a.a.createElement(Pe.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:t.username,onChange:this.handleUsernameChange,disabled:this.disabled(),error:r,helperText:r})),a.a.createElement(w.a,{item:!0},a.a.createElement(Pe.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:t.password,onChange:this.handlePasswordChange,disabled:this.disabled(),error:o,helperText:o})))),"undefined"!==typeof this.props.privateNotes&&this.props.privateNotes)))}}]),t}(a.a.Component);var we=Object(c.b)(function(e){return{network:e.settings.network,client:e.client,url_error:e.client.url_error,url:e.client.url}},function(e){var t,n={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var a=r[t],o=e[a];n[a]=ye(o)}return n}({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR",setStatus:"SET_CLIENT_STATUS"}))(Oe),Te=n(14),xe=n.n(Te),je=n(24),ke=n(155),Ce=n.n(ke);function _e(){return(_e=Object(je.a)(xe.a.mark(function e(t,n){var r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce.a.get(Object(V.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),n));case 3:return r=e.sent,a=r.data,e.next=7,Promise.all(a.map(function(){var e=Object(je.a)(xe.a.mark(function e(t){var r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.a.get(Object(V.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),n));case 2:return r=e.sent,a=r.data,o=new g.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(V.satoshisToBitcoins)(o).toFixed(8),amountSats:o,transactionHex:a});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Ne(){return(Ne=Object(je.a)(xe.a.mark(function e(t,n){var r,a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce.a.get(Object(V.blockExplorerAPIURL)("/address/".concat(t),n));case 3:return r=e.sent,a=r.data,e.abrupt("return",{used:a.chain_stats.funded_txo_count>0||a.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Re(){return(Re=Object(je.a)(xe.a.mark(function e(t){var n,r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce.a.get(Object(V.blockExplorerAPIURL)("/fee-estimates",t));case 3:return n=e.sent,r=n.data,e.abrupt("return",Math.ceil(r[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Ke(){return(Ke=Object(je.a)(xe.a.mark(function e(t,n){var r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce.a.post(Object(V.blockExplorerAPIURL)("/tx",n),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Ae(e,t,n){return Be.apply(this,arguments)}function Be(){return(Be=Object(je.a)(xe.a.mark(function e(t,n,r){var a,o=arguments;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:[],e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(o,i){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ce()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:n,data:{jsonrpc:"2.0",id:0,method:"".concat(r),params:a}}).then(function(e){return o(e.data)}).catch(i);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Me(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function De(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function Ue(){return(Ue=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,a=t.address,o=t.addresses,e.abrupt("return",new Promise(function(){var e=Object(je.a)(xe.a.mark(function e(t){var i,l,c,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=o||[a],e.next=4,Ae(n,r,"listunspent",[0,9999999,i]);case 4:return l=e.sent,c=[],l.result.forEach(function(e){c.push(Ae(n,r,"getrawtransaction",[e.txid]))}),e.next=9,Promise.all(c);case 9:s=e.sent,t(l.result.map(function(e,t){var n=new g.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:n.toFixed(8),amountSats:Object(V.bitcoinsToSatoshis)(n),transactionHex:s[t].result}})),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function He(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,a=t.address,e.prev=1,e.next=4,Ae(n,r,"getreceivedbyaddress",[a]);case 4:if("undefined"!==typeof(o=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from "+n);case 7:return e.abrupt("return",{used:o.result>0});case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function We(){return(We=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o,i,l;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,a=t.numBlocks,o=void 0===a?2:a,e.next=3,Ae(n,r,"estimatesmartfee",[o]);case 3:return i=e.sent,l=i.result.feerate,e.abrupt("return",Math.ceil(1e5*l));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ze(){return(ze=Object(je.a)(xe.a.mark(function e(t){var n,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,a=t.hex,e.prev=1,e.next=4,Ae(n,r,"sendrawtransaction",[a]);case 4:return o=e.sent,e.abrupt("return",o.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var Fe="public";function Ge(e,t,n){return n.type===Fe?function(e,t){return _e.apply(this,arguments)}(e,t):function(e){return Ue.apply(this,arguments)}(Object(E.a)({},De(n),{address:e}))}function qe(e,t,n){return n.type===Fe?function(e,t){return Ne.apply(this,arguments)}(e,t):He(Object(E.a)({},De(n),{address:e}))}function Ye(e,t){return t.type===Fe?function(e){return Re.apply(this,arguments)}(e):function(e){return We.apply(this,arguments)}(Object(E.a)({},De(t),{numBlocks:1}))}function Xe(e,t,n){return n.type===Fe?function(e,t){return Ke.apply(this,arguments)}(e,t):function(e){return ze.apply(this,arguments)}(Object(E.a)({},De(n),{hex:e}))}var Ve=n(1386),Qe=n(1387),Ze=n(1388),Je=n(1389),$e=n(1390),et=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return a.a.createElement(I.a,null,a.a.createElement(Ve.a,null,a.a.createElement(Qe.a,null,a.a.createElement(Ze.a,null,a.a.createElement(Je.a,null,"Name"),a.a.createElement(Je.a,null,"BIP32 Path"),a.a.createElement(Je.a,null,"Extended Public Key"))),a.a.createElement($e.a,null,n.renderConfirmationInfo())))},n.renderConfirmationInfo=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).map(function(e,t){return a.a.createElement(Ze.a,{key:t},a.a.createElement(Je.a,null,e.name),a.a.createElement(Je.a,null,"text"===e.method?"N/A":e.bip32Path),a.a.createElement(Je.a,null,e.extendedPublicKey))})},n}return Object(F.a)(t,e),t}(a.a.Component);var tt=Object(c.b)(function(e){return{extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}},{})(et),nt="UPDATE_DEPOSIT_NODE",rt="UPDATE_CHANGE_NODE",at="RESET_NODES_SPEND",ot="UPDATE_AUTO_SPEND",it="UPDATE_WALLET_NAME",lt="UPDATE_WALLET_MODE",ct="RESET_WALLET_VIEW",st="SPEND_NODES",ut={VIEW:0,DEPOSIT:1,SPEND:2};function dt(e){return{type:nt,value:Object(E.a)({},e,{change:!1})}}function pt(e){return{type:rt,value:Object(E.a)({},e,{change:!0})}}function mt(e){return{type:ot,value:e}}function ht(){return{type:ct}}var ft="CHOOSE_PERFORM_SPEND",bt="SET_REQUIRED_SIGNERS",Et="SET_TOTAL_SIGNERS",vt="SET_INPUTS",gt="ADD_OUTPUT",Pt="SET_OUTPUT_ADDRESS",yt="SET_OUTPUT_AMOUNT",St="DELETE_OUTPUT",It="SET_FEE_RATE",Ot="SET_FEE",wt="FINALIZE_OUTPUTS",Tt="RESET_OUTPUTS",xt="SET_TXID",jt="RESET_TRANSACTION",kt="SET_IS_WALLET",Ct="SET_CHANGE_OUTPUT_INDEX";function _t(e){return{type:bt,value:e}}function Nt(e){return{type:vt,value:e}}function Rt(){return{type:gt}}function Kt(e,t){return{type:Pt,number:e,value:t}}function At(e,t){return{type:yt,number:e,value:t}}function Bt(e){return{type:It,value:e}}function Mt(e){return{type:wt,value:e}}var Dt=n(1416),Ut=n(1407),Ht=n(318),Lt=n.n(Ht),Wt=n(643),zt=n.n(Wt),Ft=n(1391),Gt=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={copied:!1,timer:null},n.componentWillUnmount=function(){var e=n.state.timer;e&&clearTimeout(e)},n.render=function(){var e=n.props,t=e.newline,r=e.text,o=e.children;return a.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},a.a.createElement(zt.a,{text:r,onCopy:n.onCopy,options:{format:"text/plain"}},a.a.createElement("span",{className:"copyable"},o||r,t&&a.a.createElement("br",null),n.badge())))},n.badge=function(){return n.state.copied?a.a.createElement(Ft.a,{fontSize:"small"}):null},n.onCopy=function(){var e=setTimeout(function(){n.setState({copied:!1,timer:null})},1e3);n.setState({copied:!0,timer:e})},n}return Object(F.a)(t,e),t}(a.a.Component);Gt.defaultProps={newline:!1,icon:!0};var qt,Yt=Gt,Xt=n(1422),Vt=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={address:"",bip32Path:"",amount:0,amountError:"",showReceived:!1},n.getDepositAddress=function(){var e=n.props,t=e.deposits,r=e.network,a=e.client,o=e.updateDepositNode,i=Object.values(t.nodes);n.setState({showReceived:!1});for(var l=0;l<i.length;l++){var c=i[l];if(c.balanceSats.isEqualTo(0)&&!c.addressUsed){n.setState({address:c.multisig.address,bip32Path:c.bip32Path});break}}n.state.address,qt=setInterval(Object(je.a)(xe.a.mark(function e(){var t,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ge(n.state.address,r,a);case 3:(t=e.sent).length&&(clearInterval(qt),i=t.reduce(function(e,t){return e.plus(t.amountSats)},new g.a(0)),o({change:!1,bip32Path:n.state.bip32Path,utxos:t,balanceSats:i,fetchedUTXOs:!0,fetchUTXOsError:""}),n.setState({showReceived:!0})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),2e3)},n.renderReceived=function(){var e=n.state.showReceived,t=n.props.resetWalletView;if(e)return a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{variant:"contained",color:"primary",onClick:n.getDepositAddress},"Make another deposit"),a.a.createElement(I.a,{ml:2,component:"span"},a.a.createElement(K.a,{variant:"contained",onClick:t},"Return")))},n.handleAmountChange=function(e){var t=e.target.value,r="";t.length&&!t.match(/^[0-9.]+$/)&&(r="Amount must be numeric");var a=t.split(".");a.length>2?r="Amount must be numeric":2===a.length&&a[1].length>8&&(r="Amount must have maximum precision of 8 decimal places"),n.setState({amount:e.target.value,amountError:r})},n.qrString=function(){var e=n.state,t=e.address,r=e.amount;return"bitcoin:".concat(t).concat(r?"?amount="+r:"")},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"componentDidMount",value:function(){this.getDepositAddress()}},{key:"componentWillUnmount",value:function(){clearInterval(qt)}},{key:"render",value:function(){var e=this.state,t=e.amount,n=e.amountError,r=e.address,o=e.showReceived;return a.a.createElement("div",null,a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Deposit"}),a.a.createElement(j.a,null,a.a.createElement(Yt,{text:this.qrString(),newline:!0},a.a.createElement("p",null,a.a.createElement("code",null,r)),a.a.createElement(Lt.a,{size:300,value:this.qrString(),level:"L"}),a.a.createElement("p",null,"Scan QR code or click to copy address to clipboard.")),a.a.createElement(Pe.a,{fullWidth:!0,label:"Amount BTC",name:"depositAmount",onChange:this.handleAmountChange,value:t,error:""!==n,helperText:n}),this.renderReceived())),a.a.createElement(Xt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:3e3,ContentProps:{"aria-describedby":"message-id"},message:a.a.createElement("span",{id:"message-id"},"Deposit received")}))}}]),t}(a.a.Component);var Qt={updateDepositNode:dt,resetWalletView:ht},Zt=Object(c.b)(function(e){return Object(E.a)({},e.wallet,e.settings,{client:e.client})},Qt)(Vt),Jt=n(1424),$t=n(1418),en=n(1421),tn=n(1394),nn=n(1395),rn=n(1393),an=n(1392),on=(n(384),n(154)),ln=n.n(on),cn=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).renderInputs=function(){var e=n.props,t=e.inputs,r=e.network;return t.map(function(e,t){var n="".concat(ln.a.utxoTxid).concat(e.confirmed?"":" "+ln.a.unconfirmed),o=e.confirmed?"confirmed":"unconfirmed";return a.a.createElement(Ze.a,{hover:!0,key:e.txid},a.a.createElement(Je.a,null,t+1),a.a.createElement(Je.a,{className:n},a.a.createElement(Yt,{text:e.txid},a.a.createElement("code",{title:o},e.txid))),a.a.createElement(Je.a,null,a.a.createElement(Yt,{text:e.index.toString()})),a.a.createElement(Je.a,null,a.a.createElement(Yt,{text:Object(V.satoshisToBitcoins)(e.amountSats).toString()})),a.a.createElement(Je.a,null,P(Object(V.blockExplorerTransactionURL)(e.txid,r),a.a.createElement(an.a,null))))})},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inputs,n=e.inputsTotalSats;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Available Inputs (".concat(t.length,")")}),a.a.createElement(j.a,null,a.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),a.a.createElement(Ve.a,null,a.a.createElement(Qe.a,null,a.a.createElement(Ze.a,{hover:!0},a.a.createElement(Je.a,null,"Number"),a.a.createElement(Je.a,null,"TXID"),a.a.createElement(Je.a,null,"Index"),a.a.createElement(Je.a,null,"Amount (BTC)"),a.a.createElement(Je.a,null,"View"))),a.a.createElement($e.a,null,this.renderInputs()),a.a.createElement(rn.a,null,a.a.createElement(Ze.a,{hover:!0},a.a.createElement(Je.a,{colSpan:3},"TOTAL:"),a.a.createElement(Je.a,{colSpan:2},Object(V.satoshisToBitcoins)(n).toString()))))))}}]),t}(a.a.Component);var sn=Object(c.b)(function(e){return Object(E.a)({},e.settings)})(cn),un=n(644),dn=n.n(un),pn=n(645),mn=n.n(pn),hn=n(1425),fn=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).renderScript=function(e,t){var n=Object(V.scriptToHex)(t),r=Object(V.scriptToOps)(t);return a.a.createElement(I.a,{mt:2},a.a.createElement(O.a,{variant:"h6"},e),a.a.createElement(w.a,{container:!0,spacing:2},a.a.createElement(w.a,{item:!0,sm:6},a.a.createElement(Yt,{text:n},a.a.createElement("code",null,n))),a.a.createElement(w.a,{item:!0,sm:6},a.a.createElement(Yt,{text:r},a.a.createElement("code",null,r)))))},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.multisig,r=n.address,o=Object(V.multisigRedeemScript)(n),i=Object(V.multisigWitnessScript)(n);return a.a.createElement(I.a,{mt:2},a.a.createElement(O.a,{variant:"h6"},"Address"),a.a.createElement(O.a,{align:"center",variant:"h5"},a.a.createElement(w.a,{container:!0,direction:"column",spacing:2},a.a.createElement(w.a,{item:!0},a.a.createElement(Yt,{text:r},a.a.createElement("code",null,r)),"\xa0",P(Object(V.blockExplorerAddressURL)(r,t),a.a.createElement(an.a,null))),a.a.createElement(w.a,{item:!0,justify:"center",container:!0,spacing:3},a.a.createElement(w.a,{item:!0},a.a.createElement(hn.a,{label:"BTC"})),a.a.createElement(w.a,{item:!0},a.a.createElement(hn.a,{label:Object(V.networkLabel)(t)})),a.a.createElement(w.a,{item:!0},a.a.createElement(hn.a,{label:"".concat(Object(V.multisigRequiredSigners)(n),"-of-").concat(Object(V.multisigTotalSigners)(n))})),a.a.createElement(w.a,{item:!0},a.a.createElement(hn.a,{label:Object(V.multisigAddressType)(n)}))))),this.renderScript("Script",n),o&&this.renderScript("Redeem Script",o),i&&this.renderScript("Witness Script",i))}}]),t}(a.a.Component);var bn=Object(c.b)(function(e){return e.settings},{})(fn),En=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.generate()},n.render=function(){var e=n.props,t=e.bip32Path,r=e.spend,o=e.fetchedUTXOs,i=e.balanceSats,l=e.fetchUTXOsError,c=e.multisig,s=e.utxos,u=e.walletMode,d=e.addressKnown,p=u===ut.SPEND;return a.a.createElement(Ze.a,{key:t},p&&a.a.createElement(Je.a,null,a.a.createElement($t.a,{id:t,name:"spend",onChange:n.handleSpend,checked:r,disabled:!o||i.isEqualTo(0)})),a.a.createElement(Je.a,null,a.a.createElement("code",null,t)),a.a.createElement(Je.a,null,s.length),a.a.createElement(Je.a,null,o&&d?Object(V.satoshisToBitcoins)(i).toFixed():"",""!==l&&a.a.createElement(ee.a,{className:"danger"},l)),a.a.createElement(Je.a,null,c?n.renderAddress():"..."))},n.addressContent=function(){var e=n.props,t=e.multisig,r=e.network,o=e.addressUsed,i=e.balanceSats;return a.a.createElement("div",null,a.a.createElement(Yt,{text:t.address},a.a.createElement("code",{className:o&&i.isEqualTo(0)?ln.a.spent:""},t.address)),"\xa0",P(Object(V.blockExplorerAddressURL)(t.address,r),a.a.createElement(dn.a,{onClick:function(e){return e.stopPropagation()}})))},n.renderAddress=function(){var e=n.props,t=e.bip32Path,r=e.utxos,o=e.balanceSats,i=e.multisig;return a.a.createElement(en.a,null,a.a.createElement(tn.a,{expandIcon:a.a.createElement(mn.a,null),"aria-controls":"panel1a-content",id:"address-header"+t},n.addressContent()),a.a.createElement(nn.a,null,a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:12},a.a.createElement(bn,{multisig:i})),o.isGreaterThan(0)&&a.a.createElement(w.a,{item:!0,md:12},a.a.createElement(sn,{inputs:r,inputsTotalSats:o})))))},n.generate=function(){var e=n.props,t=e.present,r=e.change,a=e.bip32Path,o=e.addNode;t||o(r,a)},n.handleSpend=function(e){var t=n.props,r=t.change,a=t.bip32Path,o=t.updateNode,i=t.inputs,l=t.utxos,c=t.multisig,s=t.setInputs,u=t.updateAutoSpend,d=t.setFeeRate,p=t.feeRate;s(e.target.checked?i.concat(l.map(function(e){return Object(E.a)({},e,{multisig:c,bip32Path:a})})):i.filter(function(e){return 0===l.filter(function(t){return t.txid===e.txid&&t.index===e.index}).length})),o(r,{spend:e.target.checked,bip32Path:a}),u(!1),d(p)},n}return Object(F.a)(t,e),t}(a.a.Component);var vn,gn={setInputs:Nt,setFeeRate:Bt,updateAutoSpend:mt},Pn=Object(c.b)(function(e,t){var n="1"===(t.bip32Path||"").split("/")[1],r=e.wallet[n?"change":"deposits"];return Object(E.a)({},e.settings,{change:n},r.nodes[t.bip32Path],e.spend.transaction,{walletMode:e.wallet.info.walletMode})},gn)(En),yn=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(a)))).state={imported:!1,importError:"",rescan:!1,addressesError:"",addressPresent:!1},n.componentDidMount=function(){n.props.autoImport&&(vn=setInterval(n.checkAddress,5e3))},n.componentWillUnmount=function(){clearInterval(vn)},n.handleRescan=function(e){n.setState({rescan:e.target.checked})},n.checkAddress=Object(je.a)(xe.a.mark(function e(){var t,r,a,o,i,l;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.client,a=t.addresses,o=t.autoImport,i=a[0],e.prev=2,e.next=5,He(Object(E.a)({},De(r),{address:i}));case 5:"undefined"!==typeof e.sent.used&&(n.setState({addressPresent:!0,addressesError:""}),clearInterval(vn)),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),l=e.t0.response&&e.t0.response.status||"unknown",o&&Me(e.t0)&&!n.state.rescan&&n.import(),n.setState({addressesError:401===l?e.t0.response.statusText:500===l?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured"}),console.log(l,e.t0.response);case 15:case"end":return e.stop()}},e,null,[[2,9]])})),n.import=function(){var e=n.props,t=e.addresses,r=e.client,a=e.importCallback,o=n.state.rescan;(function(e){var t=e.url,n=e.auth,r=e.addresses,a=e.label,o=e.rescan,i=r.map(function(e){return{scriptPubKey:{address:e},label:a,timestamp:0}});return o?(Ae(t,n,"importmulti",[i,{rescan:o}]),new Promise(function(e){return e({result:[]})})):Ae(t,n,"importmulti",[i,{rescan:o}])})(Object(E.a)({},De(r),{addresses:t,label:"",rescan:o})).then(function(e){var t=e.result.reduce(function(e,t){return t.error&&t.error.message||e},"");n.setState({importError:t,imported:""===t}),"undefined"!==typeof a&&a(e.result)}).catch(function(e){n.setState({importError:"Unable to import, check your settings and try again",imported:!1})})},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.autoImport&&e.addresses.length&&e.addresses[0]!==this.props.addresses[0]&&(clearInterval(vn),vn=setInterval(this.checkAddress,5e3))}},{key:"render",value:function(){var e=this.state,t=e.imported,n=e.importError,r=e.rescan,o=e.addressPresent,i=e.addressesError,l=this.props,c=l.autoImport,s=l.addresses;return a.a.createElement(I.a,null,t&&r&&a.a.createElement(ee.a,null,this.pluralOrSingularAddress()," imported, rescan of your node may take some time."),t&&!r&&a.a.createElement(ee.a,null,this.pluralOrSingularAddress()," imported."),o&&a.a.createElement("div",null,a.a.createElement(ee.a,null,"Address ",t?"imported to":"found in"," your wallet!"),a.a.createElement(ee.a,null,"You can properly determine your addresses current balance."),a.a.createElement(ee.a,null,'Your node may need to do a rescan to determine if an address has been previously used. If you are sure you have done so, or you are sure of the address\'s history, you may proceed.  If you are unsure, you may select "rescan" and import.')),!o&&c&&a.a.createElement(ee.a,null,"Checking node for presence of ",this.pluralOrSingularAddress()),!o&&!c&&a.a.createElement(ee.a,null,"To get accurate information from your node your ",this.pluralOrSingularAddress(),"will need to be imported to your node.  Importing will give you accurate balance information however to know if an address hase been used previously, a rescan needs to take place."),a.a.createElement(ee.a,{error:!0},i),a.a.createElement("p",null,a.a.createElement(I.a,{component:"span",ml:2},a.a.createElement(K.a,{variant:"contained",disabled:!r&&(o||0===s.length),onClick:this.import},"Import")),a.a.createElement(I.a,{component:"span",ml:2},a.a.createElement(J.a,{control:a.a.createElement(ge.a,{checked:r,onChange:this.handleRescan,color:"secondary"}),label:"Rescan"}))),a.a.createElement(ee.a,{error:!0},n))}},{key:"pluralOrSingularAddress",value:function(){var e=this.props.addresses;return"address".concat(e.length>1?"es":"")}}]),t}(a.a.Component);var Sn=Object(c.b)(function(e){return{client:e.client}},{})(yn),In=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={page:0,nodesPerPage:10,change:!1,spend:!1},n.addresses=[],n.getUnknownAddressNodes=function(){var e=n.props,t=e.changeNodes,r=e.depositNodes;return Object.values(r).concat(Object.values(t)).filter(function(e){return!e.addressKnown})},n.addressesImported=function(){var e=Object(je.a)(xe.a.mark(function e(t){var r,a,o,i,l,c;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props,a=r.updateNode,o=r.client,i=r.network,l=[],c=n.getUnknownAddressNodes(),t.forEach(function(e,t){e.success&&l.push(c[t])}),l.forEach(function(){var e=Object(je.a)(xe.a.mark(function e(t){var n,r,l,c;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(t.multisig.address,i,o);case 2:return n=e.sent,e.next=5,qe(t.multisig.address,i,o);case 5:r=e.sent,n&&(c=n.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new g.a(0)),l={balanceSats:c,utxos:n,fetchedUTXOs:!0,fetchUTXOsError:""}),a(t.change,Object(E.a)({bip32Path:t.bip32Path,addressKnown:!0},l,{addressStatus:r}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.getNodeSet=function(){var e=n.props,t=e.walletMode,r=e.changeNodes,a=e.depositNodes,o=n.state.change?r:a;return t===ut.SPEND?Object.values(o).filter(function(e){return e.balanceSats.isGreaterThan(0)}).reduce(function(e,t){return e[t.bip32Path]=t,e},{}):o},n.renderNodes=function(){for(var e=n.state,t=e.page,r=e.nodesPerPage,o=e.change,i=e.spend,l=n.props,c=l.addNode,s=l.updateNode,u=t*r,d=[],p=n.getNodeSet(),m=0;m<r;m++){var h=u+m;if(h>Object.keys(p).length-1)break;var f=Object.values(p)[h].bip32Path,b=a.a.createElement(Pn,{key:f,bip32Path:f,addNode:c,updateNode:s,change:o,spend:i});d.push(b)}return d},n.handlePageChange=function(e,t){var r=t;n.setState({page:r})},n.handleChangeRowsPerPage=function(e){n.setState({nodesPerPage:e.target.value,page:0})},n.bip32Path=function(e){var t=n.state.change;return"m/".concat(t?"1":"0","/").concat(e)},n.pageCount=function(){var e=n.state.nodesPerPage;return Math.ceil(n.rowCount()/e)},n.rowCount=function(){var e=n.getNodeSet();return Object.keys(e).length},n.generateAnotherPage=Object(je.a)(xe.a.mark(function e(){var t,r,a,o,i,l,c,s,u,d,p;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props,r=t.addNode,a=t.depositNodes,o=t.changeNodes,i=n.state,l=i.change,c=i.nodesPerPage,s=i.page,u=Object.keys(l?o:a).length,d=0;case 4:if(!(d<c+(c-u%c))){e.next=11;break}return p=n.bip32Path(u+d),e.next=8,r(l,p);case 8:d++,e.next=4;break;case 11:u%c===0&&n.setState({page:s+1});case 12:case"end":return e.stop()}},e)})),n.toggleChange=function(){var e=n.state.change;n.setState({change:!e,page:0})},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.state,t=e.page,n=e.nodesPerPage,r=e.change,o=this.props,i=o.walletMode,l=o.canLoad,c=o.client,s=i===ut.SPEND,u=!s&&"private"===c.type;return u&&(this.addresses=this.getUnknownAddressNodes().map(function(e){return e.multisig.address})),a.a.createElement(w.a,{item:!0,md:12},u&&a.a.createElement(Sn,{addresses:this.addresses,importCallback:this.addressesImported}),a.a.createElement(Ve.a,{style:{tableLayout:"fixed"}},a.a.createElement(Qe.a,null,a.a.createElement(Ze.a,null,s&&a.a.createElement(Je.a,{width:62},"Spend?"),a.a.createElement(Je.a,{width:106},"BIP32 Path"),a.a.createElement(Je.a,{width:68},"UTXOs"),a.a.createElement(Je.a,{width:82},"Balance"),a.a.createElement(Je.a,null,"Address"))),a.a.createElement($e.a,null,this.renderNodes())),a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:6},a.a.createElement(Jt.a,{component:"div",count:this.rowCount(),rowsPerPage:n,page:t,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage})),a.a.createElement(w.a,{item:!0,md:2},l&&t===this.pageCount()-1&&a.a.createElement(K.a,{type:"button",variant:"contained",color:"secondary",onClick:this.generateAnotherPage},"More")),a.a.createElement(w.a,{item:!0,md:4},a.a.createElement(K.a,{type:"button",variant:"contained",color:"primary",onClick:this.toggleChange},r?"View Deposits":"View Change"))))}}]),t}(a.a.Component);var On=Object(c.b)(function(e){return Object(E.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,walletMode:e.wallet.info.walletMode,client:e.client},e.settings)},{})(In),wn=n(433),Tn=n(1398),xn=n(1423),jn=n(1400),kn=n(647),Cn=n.n(kn),_n=n(1399),Nn=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).addChangeAddress=function(){var e=n.props,t=e.changeNode,r=e.number,a=e.setAddress,o=e.setChangeOutput;a(r,t.multisig.address),o(r),n.handleBalance()},n.renderChangeAdornment=function(){var e=n.props,t=e.changeNode,r=e.number,o=e.changeOutputIndex,i=e.address;if(null!==t){var l,c=!1;if(0===o&&""===i)l="Set to wallet change address";else{if(r!==o)return{};l="Your change will go here.",c=!0}return{endAdornment:a.a.createElement(Tn.a,{position:"end"},a.a.createElement(xn.a,{placement:"top",title:l},a.a.createElement("small",null,a.a.createElement(G.a,{onClick:n.addChangeAddress,disabled:c},a.a.createElement(Cn.a,null)))))}}return{}},n.handleAddressChange=function(e){var t=n.props,r=t.number;(0,t.setAddress)(r,e.target.value)},n.hasAddressError=function(){return""!==n.props.addressError},n.handleAmountChange=function(e){var t=n.props,r=t.number;(0,t.setAmount)(r,e.target.value)},n.hasAmountError=function(){return""!==n.props.amountError},n.isNotBalanceable=function(){var e=n.props,t=e.number,r=e.outputs,a=e.feeError,o=e.amountError,i=e.amount,l=e.inputsTotalSats;if(""!==a)return!0;for(var c=0;c<r.length;c++)if(c!==t-1&&(""!==r[c].amountError||""===r[c].amount))return!0;var s=n.autoBalancedAmount();return""!==Object(V.validateOutputAmountBTC)(s,l)||""===o&&s===new g.a(i)},n.isBalanceable=function(){return!n.isNotBalanceable()},n.hasBalanceError=function(){return""!==n.props.balanceError},n.autoBalancedAmount=function(){var e=n.props,t=e.number,r=e.fee,a=e.inputsTotalSats,o=e.outputs.filter(function(e,n){return n!==t-1}).map(function(e){return Object(V.bitcoinsToSatoshis)(new g.a(e.amount))}).reduce(function(e,t){return e.plus(t)},new g.a(0)),i=Object(V.bitcoinsToSatoshis)(new g.a(r));return Object(V.satoshisToBitcoins)(a.minus(o.plus(i)))},n.balanceAction=function(){var e=n.props,t=e.balanceError,r=e.changeOutputIndex,a=e.number;return!n.hasBalanceError()||n.isNotBalanceable()?null:(r===a&&n.handleBalance(),t.split(" ")[0])},n.handleBalance=function(){var e=n.props,t=e.number;(0,e.setAmount)(t,n.autoBalancedAmount().toString())},n.hasError=function(){return n.hasAddressError()||n.hasAmountError()},n.handleDelete=function(){var e=n.props,t=e.number;(0,e.remove)(t)},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=e.outputs,n=e.finalizedOutputs,r=e.address,o=e.amount,i=e.addressError,l=e.amountError,c=e.changeOutputIndex,s=e.number;return a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,xs:7},a.a.createElement(Pe.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:ln.a.outputsFormInput,disabled:n||c===s,onChange:this.handleAddressChange,value:r,error:this.hasAddressError(),helperText:i,InputProps:this.renderChangeAdornment()})),a.a.createElement(w.a,{item:!0,xs:3},a.a.createElement(Pe.a,{fullWidth:!0,placeholder:"Amount (BTC)",className:ln.a.outputsFormInput,name:"amount",disabled:n||c===s,onChange:this.handleAmountChange,value:o,error:this.hasAmountError(),helperText:l})),!n&&this.hasBalanceError()&&this.isBalanceable()&&a.a.createElement(w.a,{item:!0,xs:1},a.a.createElement(xn.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},a.a.createElement("small",null,a.a.createElement(G.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?a.a.createElement(ue.a,null):a.a.createElement(de.a,null))))),!n&&t.length>1&&a.a.createElement(w.a,{item:!0,xs:1},a.a.createElement(xn.a,{title:"Remove Output",placement:"top"},a.a.createElement(G.a,{onClick:this.handleDelete},a.a.createElement(_n.a,null)))))}}]),t}(a.a.Component);var Rn={setAddress:Kt,setAmount:At,remove:function(e){return{type:St,number:e}},setChangeOutput:function(e){return{type:Ct,value:e}}},Kn=Object(c.b)(function(e,t){return Object(E.a)({},e.spend.transaction,e.spend.transaction.outputs[t.number-1],{changeNode:e.wallet.change.nextNode})},Rn)(Nn),An=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).titleRef=a.a.createRef(),n.state={feeRateFetchError:""},n.componentDidMount=function(){n.initialOutputState(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){var e=n.props.signatureImporters;0===Object.keys(e).reduce(function(t,n){return t+e[n].finalized},0)&&n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderOutputs=function(){var e=n.props.outputs;return Object(wn.map)(e).map(function(e,t){return a.a.createElement(w.a,{container:!0,key:t},a.a.createElement(Kn,{number:t+1}))})},n.inputsTotal=function(){var e=n.props.inputsTotalSats;return Object(V.satoshisToBitcoins)(e)},n.outputsAndFeeTotal=function(){var e=n.props,t=e.outputs,r=e.fee;return e.inputs.length?t.map(function(e){return new g.a(e.amount||0)}).reduce(function(e,t){return e.plus(t)},new g.a(0)).plus(new g.a(r)):""},n.hasFeeRateFetchError=function(){return""!==n.state.feeRateFetchError},n.hasFeeRateError=function(){return""!==n.props.feeRateError},n.hasFeeError=function(){return""!==n.props.feeError},n.hasBalanceError=function(){return""!==n.props.balanceError},n.hasError=function(){return n.hasFeeRateFetchError()||n.hasFeeRateError()||n.hasFeeError()||n.hasBalanceError()},n.handleAddOutput=function(){(0,n.props.addOutput)()},n.handleFeeRateChange=function(e){var t=n.props,r=t.setFeeRate;t.inputs.length&&r(e.target.value)},n.handleFeeChange=function(e){(0,n.props.setFee)(e.target.value)},n.handleFinalize=function(){(0,n.props.finalizeOutputs)(!0)},n.handleReset=function(){(0,n.props.resetOutputs)(),n.initialOutputState()},n.getFeeEstimate=Object(je.a)(xe.a.mark(function e(){var t,r,a,o,i,l;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.client,a=t.network,o=t.setFeeRate,i=1,l="",e.prev=3,e.next=6,Ye(a,r);case 6:i=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),l="There was an error fetching the fee rate.";case 13:return e.prev=13,o(i.toString()),n.setState({feeRateFetchError:l}),e.finish(13);case 17:case"end":return e.stop()}},e,null,[[3,9,13,17]])})),n.gatherSignaturesDisabled=function(){var e=n.props,t=e.finalizedOutputs,r=e.outputs;if(0===e.inputs.length)return!0;if(t||n.hasError())return!0;for(var a=0;a<r.length;a++){var o=r[a];if(""===o.address||""===o.amount||""!==o.addressError||""!==o.amountError)return!0}return!1},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"initialOutputState",value:function(){var e=Object(je.a)(xe.a.mark(function e(){var t,n,r,a,o,i,l,c,s;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.inputs,r=t.outputs,e.next=3,this.getFeeEstimate();case 3:a=this.props,o=a.inputsTotalSats,i=a.fee,l=a.setOutputAmount,c=Object(V.bitcoinsToSatoshis)(new g.a(i)),s=Object(V.satoshisToBitcoins)(o.minus(c)),n.length&&""===r[0].amount&&l(1,s.toFixed(8));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,n=e.fee,r=e.finalizedOutputs,o=e.feeRateError,i=e.feeError,l=e.balanceError,c=this.state.feeRateFetchError;return a.a.createElement(T.a,null,a.a.createElement(x.a,{ref:this.titleRef,title:"Define Outputs"}),a.a.createElement(j.a,null,a.a.createElement(I.a,null,a.a.createElement(w.a,null,this.renderOutputs()),a.a.createElement(w.a,{item:!0,container:!0,spacing:1},a.a.createElement(w.a,{item:!0,xs:4},a.a.createElement(K.a,{variant:"contained",disabled:r,onClick:this.handleAddOutput},"Add output")),a.a.createElement(w.a,{item:!0,xs:3},a.a.createElement(Pe.a,{fullWidth:!0,label:"Fee Rate (Sats/byte)",value:t,placeholder:"Sats/byte",name:"fee_rate",disabled:r,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:c||o,InputProps:{endAdornment:a.a.createElement(Tn.a,{position:"end"},a.a.createElement(xn.a,{placement:"top",title:"Estimate best rate"},a.a.createElement("small",null,a.a.createElement(G.a,{onClick:this.getFeeEstimate,disabled:r},a.a.createElement(jn.a,null)))))}})),a.a.createElement(w.a,{item:!0,xs:3},a.a.createElement(Pe.a,{fullWidth:!0,label:"Estimated Fees (BTC)",placeholder:"BTC",name:"fee_total",disabled:r,value:n,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:i})),a.a.createElement(w.a,{item:!0,xs:2})),a.a.createElement(w.a,{item:!0,container:!0,spacing:1},a.a.createElement(w.a,{item:!0,xs:4}),a.a.createElement(w.a,{item:!0,xs:3},a.a.createElement(Pe.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toString(),disabled:r,InputProps:{readOnly:!0}})),a.a.createElement(w.a,{item:!0,xs:3},a.a.createElement(Pe.a,{fullWidth:!0,label:"Outputs & Fee Total",value:this.outputsAndFeeTotal().toString(),error:this.hasBalanceError(),disabled:r,helperText:l,InputProps:{readOnly:!0}})),a.a.createElement(w.a,{item:!0,xs:2})),a.a.createElement(w.a,{item:!0},a.a.createElement(w.a,{container:!0,spacing:3},a.a.createElement(w.a,{item:!0},a.a.createElement(K.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),a.a.createElement(w.a,{item:!0},a.a.createElement(K.a,{variant:"contained",color:"secondary",disabled:r,onClick:this.handleReset},"Reset Outputs")))))))}}]),t}(a.a.Component);var Bn={addOutput:Rt,setOutputAmount:At,setFeeRate:Bt,setFee:function(e){return{type:Ot,value:e}},finalizeOutputs:Mt,resetOutputs:function(){return{type:Tt}}},Mn=Object(c.b)(function(e){return Object(E.a)({},{network:e.settings.network,client:e.client},e.spend.transaction,e.client,{signatureImporters:e.spend.signatureImporters})},Bn)(An),Dn=n(9),Un=n(1326),Hn=n(1325),Ln=n(1396),Wn=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={signatureJSON:"",error:""},n.render=function(){var e=n.state,t=e.signatureJSON,r=e.error;return a.a.createElement(I.a,{mt:2},a.a.createElement(Pe.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:n.handleChange,error:n.hasError(),helperText:r}),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{variant:"contained",color:"primary",size:"large",onClick:n.finalize,disabled:""===t},"Add Signature")))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,r="";try{JSON.parse(t)}catch(a){r="Invalid JSON."}n.setState({signatureJSON:t,error:r})},n.finalize=function(){var e=n.props.validateAndSetSignature,t=n.state.signatureJSON;e(JSON.parse(t),n.setError)},n}return Object(F.a)(t,e),t}(a.a.Component),zn=n(648),Fn=n.n(zn),Gn=300,qn=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={walletState:Dn.PENDING,error:""},n.render=function(){var e=n.state,t=e.walletState,r=e.error,o=n.props,i=o.interaction,l=o.width,c=o.startText;if(t===Dn.PENDING){var s=i.messageFor({walletState:t,code:"hermit.command"});return a.a.createElement("div",null,a.a.createElement("p",null,s.instructions),a.a.createElement(w.a,{container:!0,justify:"center",className:"mb-2"},a.a.createElement(Yt,{text:s.command},a.a.createElement("code",null,a.a.createElement("strong",null,s.mode,">")," ",s.command))),a.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:n.handleStart},c)))}return t===Dn.ACTIVE?a.a.createElement(w.a,{container:!0,direction:"column"},a.a.createElement(w.a,{item:!0},a.a.createElement(Fn.a,{delay:Gn,onError:n.handleError,onScan:n.handleScan,style:{width:l},facingMode:"user"})),a.a.createElement(w.a,{item:!0},a.a.createElement(K.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Cancel"))):"error"===t||"success"===t?a.a.createElement("div",null,a.a.createElement(ee.a,{error:!0},r),a.a.createElement(K.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Reset")):null},n.handleStart=function(){var e=n.props.onStart;n.setState({walletState:Dn.ACTIVE,error:""}),e&&e()},n.handleError=function(e){var t=n.props.onClear;n.setState({walletState:"error",error:e.message}),t&&t()},n.handleScan=function(e){var t=n.props,r=t.onSuccess,a=t.interaction;if(e)try{r(a.parse(e)),n.setState({walletState:"success"})}catch(o){n.handleError(o)}},n.handleStop=function(){var e=n.props.onClear;n.setState({walletState:Dn.PENDING,error:""}),e&&e()},n}return Object(F.a)(t,e),t}(r.Component);qn.defaultProps={width:"256px",startText:"Scan"};var Yn=qn,Xn=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={errorMessage:""},n.render=function(){var e=n.props,t=e.width,r=e.string;return a.a.createElement(Yt,{text:r,newline:!0},a.a.createElement(Lt.a,{size:t,value:r,level:"L"}))},n}return Object(F.a)(t,e),t}(a.a.Component);Xn.defaultProps={string:"",width:120};var Vn=Xn,Qn=n(1401),Zn=n(1402),Jn=n(1403),$n=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return a.a.createElement("small",null,a.a.createElement(k.a,null,n.filteredMessages().map(function(e,t){return n.renderMessage(e,t)})))},n.renderMessage=function(e,t){return a.a.createElement(C.a,{key:t},a.a.createElement(_.a,null,n.messageIcon(e)),a.a.createElement(N.a,null,e.text))},n.filteredMessages=function(){var e=n.props,t=e.messages,r=e.excludeCodes;return t.filter(function(e){for(var t=0;t<r.length;t++){var n=r[t];if((e.code||"").includes(n))return!1}return!0})},n.messageIcon=function(e){switch(e.level){case Dn.INFO:return a.a.createElement(Qn.a,null);case Dn.WARNING:return a.a.createElement(Zn.a,null);case Dn.ERROR:return a.a.createElement(Jn.a,null);default:return null}},n.messageColrName=function(e){switch(e.level){case Dn.INFO:return"primary.main";case Dn.WARNING:return"text.secondary";case Dn.ERROR:return"error.main";default:return""}},n}return Object(F.a)(t,e),t}(a.a.Component);$n.defaultProps={messages:[],excludeCodes:[]};var er=$n,tr=function(e){function t(e){var n;return Object(L.a)(this,t),(n=Object(W.a)(this,Object(z.a)(t).call(this,e))).interaction=function(){var e=n.props,t=e.signatureImporter,r=e.network,a=e.inputs,o=e.outputs,i=a.map(function(e){return t.bip32Path});return new Dn.HermitSignTransaction({network:r,inputs:a,outputs:o,bip32Paths:i})},n.render=function(){var e=n.props,t=e.signatureImporter,r=e.disableChangeMethod,o=e.resetBIP32Path,i=n.state,l=i.bip32PathError,c=i.signatureError,s=i.walletState,u=n.interaction();return s===Dn.UNSUPPORTED?a.a.createElement(er,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}):a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:10},a.a.createElement(Pe.a,{name:"bip32Path",value:t.bip32Path,onChange:n.handleBIP32PathChange,disabled:s!==Dn.PENDING,error:n.hasBIP32PathError(),helperText:l})),a.a.createElement(w.a,{item:!0,md:2},!n.bip32PathIsDefault()&&a.a.createElement(K.a,{type:"button",variant:"contained",size:"small",onClick:o,disabled:s!==Dn.PENDING},"Default"))),a.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0,justify:"center"},a.a.createElement(w.a,{item:!0},a.a.createElement(Vn,{width:400,string:u.messageFor({code:"hermit.signature_request"}).encodedData}))),a.a.createElement(Yn,{startText:"Scan Signature QR Code",interaction:u,onStart:r,onSuccess:n.import,onClear:n.clear}),a.a.createElement(er,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}),a.a.createElement(ee.a,{error:!0},c)))},n.import=function(e){console.log("IMPORTED SIGNATURE:",e);var t=n.props,r=t.validateAndSetSignature,a=t.enableChangeMethod;n.setState({signatureError:""}),a(),r(e,function(e){n.setState({signatureError:e})})},n.clear=function(){var e=n.props,t=e.resetBIP32Path,r=e.enableChangeMethod;t(),n.setState({signatureError:""}),r()},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},function(e){n.setState({bip32PathError:e})})},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.state={bip32PathError:"",bip32PathFinalized:!1,signatureError:"",walletState:n.interaction(!0).isSupported()?Dn.PENDING:Dn.UNSUPPORTED},n}return Object(F.a)(t,e),t}(a.a.Component),nr=function(e){function t(e){var n;return Object(L.a)(this,t),(n=Object(W.a)(this,Object(z.a)(t).call(this,e))).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(e){var t,r,a=!e&&n.state.verified,o=n.props,i=o.signatureImporter,l=o.network,c=o.inputs,s=o.outputs,u=i.method;if(a){var d=c.map(function(e){return"undefined"===typeof e.bip32Path?i.bip32Path:"".concat(i.bip32Path).concat(e.bip32Path.slice(1))});return Object(Dn.HardwareWalletSignMultisigTransaction)({network:l,walletType:u,inputs:c,outputs:s,bip32Paths:d})}return t=i.bip32Path,"undefined"!==typeof c[0].bip32Path&&(r=c.map(function(e){return"".concat(i.bip32Path).concat(e.bip32Path.slice(1))})),Object(Dn.HardwareWalletExportPublicKey)({network:l,walletType:u,bip32Path:t,bip32Paths:r})},n.render=function(){var e=n.props.signatureImporter,t=n.state,r=t.verified,o=t.walletState,i=n.interaction();return o===Dn.UNSUPPORTED?a.a.createElement(ee.a,{error:!0},i.messageTextFor({walletState:o})):a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:10},a.a.createElement(Pe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:o!==Dn.PENDING||r,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),a.a.createElement(w.a,{item:!0,md:2},!n.bip32PathIsDefault()&&a.a.createElement(K.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:r||o!==Dn.PENDING},"Default"))),a.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),a.a.createElement(I.a,{mt:2},n.renderAction()),n.renderDeviceConfirmInfo(),a.a.createElement(er,{messages:i.messagesFor({walletState:o}),excludeCodes:["bip32"]}))},n.renderDeviceConfirmInfo=function(){var e=n.props,t=e.fee,r=e.inputsTotalSats,o=n.state,i=o.verified,l=o.walletState;return i&&l===Dn.ACTIVE?a.a.createElement(I.a,null,a.a.createElement("p",null,"Your device will ask you to verify the following information:"),a.a.createElement(Ve.a,null,a.a.createElement(Qe.a,null,a.a.createElement(Ze.a,{hover:!0},a.a.createElement(Je.a,null),a.a.createElement(Je.a,null,"Amount (BTC)"))),a.a.createElement($e.a,null,n.renderTargets(),a.a.createElement(Ze.a,{hover:!0},a.a.createElement(Je.a,null,"Fee"),a.a.createElement(Je.a,null,t)),a.a.createElement(Ze.a,{hover:!0},a.a.createElement(Je.a,null,"Total"),a.a.createElement(Je.a,null,Object(V.satoshisToBitcoins)(r).toString()))))):""},n.renderTargets=function(){return n.props.outputs.map(function(e,t){return a.a.createElement(Ze.a,{hover:!0,key:t},a.a.createElement(Je.a,null,"Address ",a.a.createElement("code",null,e.address)),a.a.createElement(Je.a,null,e.amount))})},n.renderAction=function(){var e=n.state,t=e.verified,r=e.verifyError,o=e.signatureError,i=e.walletState;return t?a.a.createElement(w.a,{container:!0,alignItems:"center"},a.a.createElement(w.a,{item:!0,md:3},a.a.createElement(K.a,{variant:"contained",size:"large",color:"primary",onClick:n.sign,disabled:i!==Dn.PENDING},"Sign")),a.a.createElement(w.a,{item:!0,md:9},a.a.createElement(ee.a,{error:!0},o))):a.a.createElement(w.a,{container:!0,alignItems:"center"},a.a.createElement(w.a,{item:!0,md:3},a.a.createElement(K.a,{variant:"contained",size:"large",onClick:n.verify,color:"primary",disabled:i!==Dn.PENDING||n.hasBIP32PathError()},"Verify")),a.a.createElement(w.a,{item:!0,md:9},a.a.createElement(ee.a,{error:!0},r)))},n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t||n.interaction().hasMessagesFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:n.interaction().messageTextFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.verify=Object(je.a)(xe.a.mark(function e(){var t,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.disableChangeMethod,a=t.enableChangeMethod,r(),n.setState({verifyError:"",walletState:Dn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:o=e.sent,n.verifyPublicKey(o),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({verifyError:e.t0.message,walletState:Dn.PENDING}),a();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),n.verifyPublicKey=function(e){for(var t=n.props,r=t.inputs,o=t.signatureImporters,i=t.enableChangeMethod,l="",c="string"===typeof e?[e]:e,s=0;s<r.length;s++){for(var u=r[s],d=void 0,p=0;p<c.length&&!((d=Object(V.multisigPublicKeys)(u.multisig).indexOf(c[p]))>-1);p++);if(d<0){l=a.a.createElement("span",null,a.a.createElement(Jn.a,null),"\xa0 This device does not contain the correct key.  Are you sure the BIP32 path is correct?");break}for(var m=1;m<Object(V.multisigRequiredSigners)(u.multisig);m++){for(var h=o[m],f=0;f<h.publicKeys.length;f++){if(h.publicKeys[f]===e){l=a.a.createElement("span",null,a.a.createElement(Jn.a,null),"A signature from this key was already imported.");break}}if(""!==l)break}if(""!==l)break}n.setState({verified:""===l,verifyError:l,walletState:Dn.PENDING}),i()},n.sign=Object(je.a)(xe.a.mark(function e(){var t,r,a,o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.disableChangeMethod,a=t.validateAndSetSignature,o=t.enableChangeMethod,r(),n.setState({signatureError:"",walletState:Dn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:i=e.sent,a(i,function(e){var t={signatureError:e};""!==e&&(t.walletState=Dn.PENDING),n.setState(t)}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({signatureError:e.t0.message,walletState:Dn.PENDING});case 14:o();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),n.state={verified:!1,verifyError:"",signatureError:"",bip32PathError:"",walletState:n.interaction(!0).isSupported()?Dn.PENDING:Dn.UNSUPPORTED},n}return Object(F.a)(t,e),t}(a.a.Component),rr=n(1404),ar=n(1405),or=n(1406),ir=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={editing:!1,newName:"",error:""},n.componentDidMount=function(){var e=n.props.name;n.setState({newName:e})},n.render=function(){var e=n.props.name,t=n.state,r=t.editing,o=t.newName,i=t.error;return r?a.a.createElement(w.a,{container:!0,alignItems:"center"},a.a.createElement(w.a,{item:!0},a.a.createElement(Pe.a,{label:"Name",value:o,onChange:n.handleChange,error:n.hasError(),helperText:i})),a.a.createElement(w.a,{item:!0},a.a.createElement(G.a,{size:"small",onClick:n.submit,disabled:n.hasError()},a.a.createElement(rr.a,null))),a.a.createElement(w.a,{item:!0},a.a.createElement(G.a,{color:"secondary",size:"small",onClick:n.cancel},a.a.createElement(ar.a,null)))):a.a.createElement("span",null,a.a.createElement(G.a,{size:"small",onClick:n.startEditing},a.a.createElement(or.a,null)),"\xa0",e)},n.hasError=function(){return""!==n.state.error},n.startEditing=function(e){var t=n.props.name;e.preventDefault(),n.setState({editing:!0,newName:t})},n.handleChange=function(e){var t=e.target.value,r="";null!==t&&void 0!==t&&""!==t||(r="Name cannot be blank."),n.setState({newName:t,error:r})},n.submit=function(){var e=n.props;(0,e.setName)(e.number,n.state.newName),n.setState({editing:!1})},n.cancel=function(){var e=n.props.name;n.setState({error:"",newName:e,editing:!1})},n}return Object(F.a)(t,e),t}(a.a.Component),lr=Ie({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),cr=lr.setSignatureImporterName,sr=lr.setSignatureImporterMethod,ur=lr.setSignatureImporterBIP32Path,dr=lr.setSignatureImporterPublicKeys,pr=lr.setSignatureImporterSignature,mr=lr.setSignatureImporterFinalized,hr=lr.setSignatureImporterComplete,fr="text",br=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).titleRef=a.a.createRef(),n.state={disableChangeMethod:!1,showUnsignedTransaction:!1},n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){n.props.number===n.getCurrent()&&n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.title=function(){var e=n.props,t=e.number,r=e.signatureImporter,o=e.setName;return a.a.createElement(ir,{number:t,name:r.name,setName:o})},n.renderImport=function(){var e=n.props,t=e.signatureImporter,r=e.number,o=r>n.getCurrent(),i=n.state.disableChangeMethod,l="signature-".concat(r,"-importer-select-label");return o?a.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):a.a.createElement("form",null,a.a.createElement(Q.a,{fullWidth:!0},a.a.createElement(Un.a,{id:l},"Select Method"),a.a.createElement(Hn.a,{labelId:l,id:"signature-".concat(r,"-importer-select"),disabled:i,value:t.method,onChange:n.handleMethodChange},a.a.createElement(Ln.a,{value:""},"< Select method >"),a.a.createElement(Ln.a,{value:Dn.TREZOR},"Trezor"),a.a.createElement(Ln.a,{value:Dn.LEDGER},"Ledger"),a.a.createElement(Ln.a,{value:Dn.HERMIT},"Hermit"),a.a.createElement(Ln.a,{value:fr},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.network,r=e.signatureImporter,o=e.signatureImporters,i=e.inputs,l=e.inputsTotalSats,c=e.outputs,s=e.fee;return r.method===fr?a.a.createElement(Wn,{signatureImporter:r,validateAndSetSignature:n.validateAndSetSignature}):r.method===Dn.HERMIT?a.a.createElement(tr,{network:t,signatureImporter:r,inputs:i,outputs:c,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):r.method===Dn.TREZOR||r.method===Dn.LEDGER?a.a.createElement(nr,{network:t,signatureImporter:r,signatureImporters:o,inputs:i,outputs:c,inputsTotalSats:l,fee:s,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number;(0,t.setMethod)(r,e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.renderUnsignedTransaction=function(){var e=n.state.showUnsignedTransaction,t=n.props.unsignedTransaction;if(e){var r=t.toHex();return a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement(Yt,{text:r},a.a.createElement("code",null,r))),a.a.createElement("small",null,a.a.createElement(K.a,{size:"small",onClick:n.handleHideUnsignedTransaction},"Hide Unsigned Transaction")))}return a.a.createElement("small",null,a.a.createElement(K.a,{size:"small",onClick:n.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},n.handleShowUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!0})},n.handleHideUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!1})},n.reset=function(){var e=n.props,t=e.number,r=e.setSignature,a=e.setPublicKeys,o=e.setFinalized;r(t,""),a(t,[]),o(t,!1)},n.defaultBIP32Path=function(){var e=n.props,t=e.addressType,r=e.network;return e.isWallet?Object(V.multisigBIP32Root)(t,r):Object(V.multisigBIP32Path)(t,r)},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.setBIP32Path)(t,n.defaultBIP32Path())},n.validateAndSetBIP32Path=function(e,t,r,a){var o=n.props,i=o.number,l=o.setBIP32Path,c=Object(V.validateBIP32Path)(e,a);l(i,e),c?r(c):(r(""),t())},n.renderSignature=function(){var e=n.props,t=e.signatureImporter,r=e.txid,o=JSON.stringify(t.signature);return a.a.createElement("div",null,a.a.createElement("p",null,"The following signature was imported:"),a.a.createElement(I.a,null,a.a.createElement(Yt,{text:o},a.a.createElement("small",null,a.a.createElement("code",null,o)))),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{variant:"contained",color:"secondary",disabled:""!==r,size:"small",onClick:n.reset},"Remove Signature")))},n.validateAndSetSignature=function(e,t){var r=n.props,a=r.number,o=r.inputs,i=r.signatureImporters,l=r.unsignedTransaction,c=r.setComplete;if(Array.isArray(e))if(e.length<o.length)t("Not enough signatures (must be exactly one for each input).");else if(e.length>o.length)t("Too many signatures (must be exactly one for each input).");else{for(var s=[],u=Object.values(i).filter(function(e){return e.finalized}),d=0;d<e.length;d+=1){var p=o[d],m=d+1,h=e[d];if(""!==Object(V.validateHex)(h))return void t("Signature for input ".concat(m," is not valid hex."));var f=void 0;try{f=Object(V.validateMultisigSignature)(l,d,p,h)}catch(v){return void t("Signature for input ".concat(m," is invalid."))}if(!f)return void t("Signature for input ".concat(m," is invalid."));for(var b=0;b<u.length;b++){var E=u[b];if(E.signature[d]===h||E.publicKeys[d]===f)return void t("Signature for input ".concat(m," is a duplicate of a previously provided signature."))}s.push(f)}c(a,{signature:e,publicKeys:s,finalized:!0})}else t("Signature is not an array of strings.")},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props.signatureImporter;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:this.title(),ref:this.titleRef}),a.a.createElement(j.a,null,e.finalized?this.renderSignature():this.renderImport(),a.a.createElement(I.a,{mt:2},this.renderUnsignedTransaction())))}},{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce(function(t,n){return t+(e[n].finalized?1:0)},1)}}]),t}(a.a.Component);var Er={setName:cr,setMethod:sr,setBIP32Path:ur,setPublicKeys:dr,setSignature:pr,setFinalized:mr,setComplete:hr},vr=Object(c.b)(function(e,t){return Object(E.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid},e.spend.transaction)},Er)(br),gr=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(a)))).state={error:"",broadcasting:!1,txid:""},n.buildSignedTransaction=function(){var e=n.props,t=e.unsignedTransaction,r=e.inputs,a=e.signatureImporters,o=[];return r.forEach(function(e,t){var n={};Object.values(a).forEach(function(e){var r=e.publicKeys[t],a=e.signature[t];n[r]=a}),o.push(n)}),Object(V.signedMultisigTransaction)(t,r,o)},n.handleBroadcast=Object(je.a)(xe.a.mark(function e(){var t,r,a,o,i,l,c;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.client,a=t.network,o=t.setTxid,i=n.buildSignedTransaction(),l="",c="",n.setState({broadcasting:!0}),e.prev=5,e.next=8,Xe(i.toHex(),a,r);case 8:c=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),l="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,n.setState({txid:c,error:l,broadcasting:!1}),o(c),e.finish(15);case 19:case"end":return e.stop()}},e,null,[[5,11,15,19]])})),n.transactionURL=function(){var e=n.props.network,t=n.state.txid;return Object(V.blockExplorerTransactionURL)(t,e)},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,n=e.broadcasting,r=e.txid,o=this.buildSignedTransaction(),i=o.toHex();return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Broadcast"}),a.a.createElement(j.a,null,a.a.createElement("form",null,o&&a.a.createElement(I.a,{mt:4},a.a.createElement(O.a,{variant:"h6"},"Signed Transaction"),a.a.createElement(Yt,{text:i},a.a.createElement("small",null,a.a.createElement("code",null,i)))),""===r?a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{variant:"contained",color:"primary",disabled:!o||n,onClick:this.handleBroadcast},"Broadcast Transaction"),a.a.createElement(ee.a,{error:!0},t),a.a.createElement("small",null,a.a.createElement(ee.a,null,"Warning: Broadcasting this transaction cannot be undone."))):a.a.createElement(I.a,{mt:2},a.a.createElement(O.a,{variant:"h5"},a.a.createElement(Yt,{text:r},a.a.createElement("code",null,r)),"\xa0",P(this.transactionURL(),a.a.createElement(an.a,null))),a.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),t}(a.a.Component);var Pr={setTxid:function(e){return{type:xt,value:e}}},yr=Object(c.b)(function(e){return Object(E.a)({network:e.settings.network,client:e.client},e.client,{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,unsignedTransaction:e.spend.transaction.unsignedTransaction})},Pr)(gr),Sr=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={selection:0},n.render=function(){var e=n.state.selection;return a.a.createElement("div",null,n.renderKeySelectorMenu(),e>0&&n.renderSignatureImporter())},n.renderSignatureImporter=function(){var e=n.props.number;return a.a.createElement(I.a,{mt:2},a.a.createElement(vr,{number:e}))},n.renderKeySelectorMenu=function(){var e=n.props.number,t=n.state.selection,r="keySelector".concat(e);return a.a.createElement("form",null,a.a.createElement(Q.a,{fullWidth:!0},a.a.createElement(Un.a,{id:r},"Select Key"),a.a.createElement(Hn.a,{labelId:r,id:"signature-".concat(e,"-key-select"),value:t,onChange:n.handleKeyChange},a.a.createElement(Ln.a,{value:""},"< Select Extended Public Key >"),n.renderKeySelectorMenuItems())))},n.renderKeySelectorMenuItems=function(){for(var e=n.props,t=e.extendedPublicKeyImporters,r=e.totalSigners,o=[],i=1;i<=r;i++){var l=t[i];o.push(a.a.createElement(Ln.a,{value:i,key:i},l.name))}return o},n.handleKeyChange=function(e){var t=n.props,r=t.extendedPublicKeyImporters,a=t.setBIP32Path,o=t.setMethod,i=t.number,l=r[e.target.value],c=l.method;n.setState({selection:e.target.value}),"trezor"!==c&&"ledger"!==c||(o(i,c),setTimeout(function(){a(i,l.bip32Path)},0))},n}return Object(F.a)(t,e),t}(a.a.Component);var Ir={setBIP32Path:ur,setMethod:sr},Or=Object(c.b)(function(e){return Object(E.a)({},e.quorum,{totalSigners:e.spend.transaction.totalSigners})},Ir)(Sr),wr=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={spent:!1},n.render=function(){return a.a.createElement(I.a,null,a.a.createElement(K.a,{variant:"contained",color:"secondary",onClick:n.handleCancel},"Cancel"),n.renderKeySelectors(),n.signaturesFinalized()&&a.a.createElement(I.a,{mt:2},a.a.createElement(yr,null)),(n.transactionFinalized()||n.state.spent)&&a.a.createElement(K.a,{variant:"contained",color:"primary",onClick:n.handleReturn},"Return"))},n.renderKeySelectors=function(){for(var e=n.props.requiredSigners,t=[],r=1;r<=e;r++)t.push(a.a.createElement(I.a,{key:r,mt:2},a.a.createElement(Or,{number:r})));return t},n.renderSignatureImporters=function(){for(var e=n.props.transaction,t=[],r=1;r<=e.requiredSigners;r++)t.push(a.a.createElement(I.a,{key:r,mt:2},a.a.createElement(vr,{number:r})));return t},n.signaturesFinalized=function(){var e=n.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},n.transactionFinalized=function(){var e=n.props,t=e.transaction,r=e.spendNodes,a=e.changeNode,o=e.updateChangeNode;if(""!==t.txid&&!n.state.spent){n.setState({spent:!0});for(var i=a.multisig.address,l=0;l<t.outputs.length;l++)if(i===t.outputs[l].address){o({bip32Path:a.bip32Path,balanceSats:t.outputs[l].amountSats});break}return r(),!0}return!1},n.handleReturn=function(){var e=n.props,t=e.resetTransaction,r=e.resetWalletView;t(),r()},n.handleCancel=function(){var e=n.props,t=e.finalizeOutputs,r=e.requiredSigners;(0,e.setRequiredSigners)(r),t(!1)},n}return Object(F.a)(t,e),t}(a.a.Component);var Tr,xr={finalizeOutputs:Mt,setRequiredSigners:_t,spendNodes:function(){return{type:st}},resetTransaction:function(){return{type:jt}},resetWalletView:ht,updateChangeNode:pt},jr=Object(c.b)(function(e){return Object(E.a)({},e.wallet,e.spend,e.quorum,{requiredSigners:e.spend.transaction.requiredSigners,totalSigners:e.spend.transaction.totalSigners,changeNode:e.wallet.change.nextNode})},xr)(wr),kr=n(185),Cr=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={outputsAmount:new g.a(0),feeAmount:new g.a(0)},n.renderSpend=function(){var e=n.props,t=e.addNode,r=e.updateNode,o=e.autoSpend;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Spend"}),a.a.createElement(j.a,null,a.a.createElement(w.a,{item:!0,md:12},a.a.createElement(w.a,{component:"label",container:!0,alignItems:"center",spacing:1},a.a.createElement(w.a,{item:!0},"Manual"),a.a.createElement(w.a,{item:!0},a.a.createElement(ge.a,{checked:o,onChange:n.handleSpendMode})),a.a.createElement(w.a,{item:!0},"Auto"))),a.a.createElement(On,{addNode:t,updateNode:r})))},n.handleSpendMode=function(e){var t=n.props.updateAutoSpend;e.target.checked,t(e.target.checked)},n.selectCoins=function(){var e=n.props,t=e.outputs,r=e.setInputs,a=e.fee,o=e.depositNodes,i=e.changeNodes,l=e.feeRate,c=e.updateChangeNode,s=e.updateDepositNode,u=e.resetNodesSpend,d=e.setFeeRate,p=e.coinSelection,m=t.reduce(function(e,t){return e.plus(t.amountSats)},new g.a(0));if(!m.isNaN()){var h=Object(kr.bitcoinsToSatoshis)(new g.a(a));if(!m.isEqualTo(n.state.outputsAmount)||!h.isEqualTo(n.state.feeAmount)){var f=m.plus(h),b=Object.values(o).concat(Object.values(i)).filter(function(e){return e.balanceSats.isGreaterThan(0)});u();var E=p(b,f);E.forEach(function(e){(e.change?c:s)({bip32Path:e.bip32Path,spend:!0})}),n.setState({outputsAmount:m,feeAmount:h}),r(E),d(l)}}},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.autoSpend&&(Tr&&clearTimeout(Tr),Tr=setTimeout(this.selectCoins,1e3))}},{key:"componentWillUnmount",value:function(){Tr&&clearTimeout(Tr)}},{key:"render",value:function(){var e=this.props.finalizedOutputs;return a.a.createElement(I.a,null,a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:12},a.a.createElement(Mn,null)),a.a.createElement(w.a,{item:!0,md:12},a.a.createElement(I.a,{mt:2},e?a.a.createElement(jr,null):this.renderSpend()))))}}]),t}(a.a.Component);var _r={updateAutoSpend:mt,setInputs:Nt,updateChangeNode:pt,updateDepositNode:dt,setAddress:Kt,resetNodesSpend:function(){return{type:at}},setFeeRate:Bt,addOutput:Rt},Nr=Object(c.b)(function(e){return Object(E.a)({},e.spend.transaction,{changeNodes:e.wallet.change.nodes,changeNode:e.wallet.change.nextNode,depositNodes:e.wallet.deposits.nodes,autoSpend:e.wallet.info.autoSpend})},_r)(Cr),Rr=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=n.props,t=e.addNode,r=e.updateNode;return a.a.createElement(On,{addNode:t,updateNode:r,canLoad:!0})},n}return Object(F.a)(t,e),t}(a.a.Component);var Kr=Object(c.b)(function(e){return Object(E.a)({},e.wallet)},{})(Rr),Ar=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).scrollRef=a.a.createRef(),n.componentDidMount=function(){n.scrollRef.current.scrollIntoView({behavior:"smooth"})},n.render=function(){return a.a.createElement("div",null,a.a.createElement("h3",null,"Balance: ",n.totalBalance()),a.a.createElement(Dt.a,{ref:n.scrollRef,value:n.props.walletMode,onChange:n.handleModeChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},a.a.createElement(Ut.a,{label:"Addresses",value:ut.VIEW}),a.a.createElement(Ut.a,{label:"Receive",value:ut.DEPOSIT}),a.a.createElement(Ut.a,{label:"Send",value:ut.SPEND})),a.a.createElement(I.a,{mt:2},n.renderModeComponent()))},n.renderModeComponent=function(){var e=n.props,t=e.walletMode,r=e.addNode,o=e.updateNode;return t===ut.DEPOSIT?a.a.createElement(Zt,null):t===ut.SPEND?a.a.createElement(Nr,{addNode:r,updateNode:o,coinSelection:S}):t===ut.VIEW?a.a.createElement(Kr,{addNode:r,updateNode:o}):""},n.handleModeChange=function(e,t){var r=n.props,a=r.setMode,o=r.requiredSigners,i=r.setRequiredSigners;t===ut.SPEND&&i(o),a(t)},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"totalBalance",value:function(){var e=this.props,t=e.deposits,n=e.change;return Object(V.satoshisToBitcoins)(t.balanceSats.plus(n.balanceSats)).toFixed()}}]),t}(a.a.Component);var Br={setMode:function(e){return{type:lt,value:e}},setRequiredSigners:_t},Mr=Object(c.b)(function(e){return Object(E.a)({},e.wallet,e.wallet.info,{requiredSigners:e.spend.transaction.requiredSigners})},Br)(Ar),Dr="SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",Ur=Ie({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"}),Hr=Ur.setExtendedPublicKeyImporterName,Lr=Ur.setExtendedPublicKeyImporterBIP32Path,Wr=Ur.resetExtendedPublicKeyImporterBIP32Path,zr=Ur.setExtendedPublicKeyImporterMethod,Fr=Ur.setExtendedPublicKeyImporterExtendedPublicKey,Gr=Ur.setExtendedPublicKeyImporterFinalized;var qr=20,Yr=5,Xr=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={generating:!1},n.title=function(){var e=n.props,t=e.totalSigners,r=e.requiredSigners,o=e.addressType;return a.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",r,"-of-",t," ",o," Multisig Wallet",a.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(n.extendedPublicKeyCount(),"/").concat(t)))},n.extendedPublicKeyCount=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},n.downloadWalletDetails=function(e){e.preventDefault(),y(n.walletDetailsText(),n.walletDetailsFilename())},n.walletDetailsText=function(){var e=n.props,t=e.addressType,r=e.network,a=e.totalSigners,o=e.requiredSigners,i=e.walletName;return"Wallet: ".concat(i,"\n\nType: ").concat(t,"\n\nNetwork: ").concat(r,"\n\nQuorum: ").concat(o,"-of-").concat(a,"\n\nBIP32 Paths:\n").concat(n.extendedPublicKeyImporterBIP32Paths(),"\n")},n.extendedPublicKeyImporterBIP32Paths=function(){for(var e=n.props.totalSigners,t=[],r=1;r<=e;r++)t.push(n.extendedPublicKeyImporterBIP32Path(r));return t.join("\n")},n.extendedPublicKeyImporterBIP32Path=function(e){var t=n.props.extendedPublicKeyImporters[e],r="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(r)},n.walletDetailsFilename=function(){var e=n.props,t=e.totalSigners,r=e.requiredSigners,a=e.addressType,o=e.walletName;return"bitcoin-".concat(r,"-of-").concat(t,"-").concat(a,"-").concat(o,".txt")},n.toggleImporters=function(){var e=n.props;(0,e.setImportersVisible)(!e.configuring)},n.generate=function(){(0,n.props.freeze)(!0),n.setState({generating:!0}),n.addNode(!1,"m/0/0",!0),n.addNode(!0,"m/1/0",!0)},n.updateNode=function(e,t){var r=n.props,a=r.updateChangeNode,o=r.updateDepositNode;(e?a:o)(t)},n.addNode=function(){var e=Object(je.a)(xe.a.mark(function e(t,r,a){var o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.generateMultisig(t,r,a);case 2:o=e.sent,n.updateNode(t,Object(E.a)({bip32Path:r},o));case 4:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.generateMultisig=function(){var e=Object(je.a)(xe.a.mark(function e(t,r,a){var o,i,l,c,s,u,d,p,m,h,f,b;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=n.props,i=o.extendedPublicKeyImporters,l=o.totalSigners,c=o.network,s=o.addressType,u=o.requiredSigners,d=[],p=1;p<=l;p++)m=i[p],h=Object(V.deriveChildPublicKey)(m.extendedPublicKey,r,c),d.push(h);return d.sort(),f=V.generateMultisigFromPublicKeys.apply(void 0,[c,s,u].concat(d)),e.next=7,n.fetchUTXOs(t,f,a);case 7:return b=e.sent,e.abrupt("return",Object(E.a)({multisig:f},b));case 9:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.fetchUTXOs=function(){var e=Object(je.a)(xe.a.mark(function e(t,r,a){var o,i,l,c,s,u,d;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.props,i=o.network,l=o.client,u={},e.prev=2,e.next=5,Ge(r.address,i,l);case 5:return c=e.sent,e.next=8,qe(r.address,i,l);case 8:s=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0,e.t0.response),"private"===l.type&&Me(e.t0)?(s={used:!1},u={utxos:[],balanceSats:g()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}):u={fetchUTXOsError:e.t0.toString()};case 15:return c&&(d=c.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new g.a(0)),u=Object(E.a)({},u,{balanceSats:d,utxos:c,fetchedUTXOs:!0,fetchUTXOsError:""})),s&&(u=Object(E.a)({},u,{addressUsed:s.used})),a&&setTimeout(function(){return n.generateNextNodeIfNecessary(t)}),e.abrupt("return",u);case 19:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,n,r){return e.apply(this,arguments)}}(),n.generateNextNodeIfNecessary=function(e){var t=n.props,r=t.change,a=t.deposits,o=(e?r:a).trailingEmptyNodes,i=(e?r:a).fetchUTXOsErrors,l=Object.keys((e?r:a).nodes);if(!(o>=qr||i>=Yr)){l.sort(function(e,t){var n=(e||"").split("/"),r=(t||"").split("/");return parseInt(n[2])-parseInt(r[2])});var c=(l[l.length-1]||"").split("/"),s=parseInt(c[2]),u="m/".concat(c[1],"/").concat(s+1);setTimeout(function(){return n.addNode(e,u,!0)})}},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,this.body())}},{key:"componentDidMount",value:function(){(0,this.props.setIsWallet)()}},{key:"body",value:function(){var e=this.props,t=e.totalSigners,n=e.configuring,r=this.state.generating;return this.extendedPublicKeyCount()===t?r?a.a.createElement("div",null,a.a.createElement(Mr,{addNode:this.addNode,updateNode:this.updateNode})):a.a.createElement(T.a,null,a.a.createElement(x.a,{title:this.title()}),a.a.createElement(j.a,null,a.a.createElement(K.a,{type:"button",variant:"contained",color:"secondary",onClick:this.toggleImporters},n?"Hide Key Selection":"Edit Details"),a.a.createElement(tt,null),a.a.createElement("p",null,"You have imported all ",t," extended public keys.  You will need to save this information."),a.a.createElement(K.a,{variant:"contained",color:"primary",onClick:this.downloadWalletDetails},"Download Wallet Details"),a.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),a.a.createElement(K.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate},"Confirm"))):a.a.createElement("p",null,"Once you have imported all ".concat(t," extended public keys, "),"your wallet will be generated here.")}}]),t}(a.a.Component);var Vr={freeze:ie,updateDepositNode:dt,updateChangeNode:pt,updateAutoSpned:mt,setImportersVisible:function(e){return{type:Dr,value:e}},setIsWallet:function(){return{type:kt}}},Qr=Object(c.b)(function(e){return Object(E.a)({},e.settings,{client:e.client},e.quorum,e.wallet,e.wallet.info)},Vr)(Xr),Zr="m/0",Jr=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.setBIP32PathToDefault()},n.state={error:"",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state,r=t.error,o=t.extendedPublicKey,i=t.extendedPublicKeyError,l=t.bip32PathError;return a.a.createElement("div",null,a.a.createElement(I.a,{mt:2},a.a.createElement(Pe.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:o,onChange:n.handleExtendedPublicKeyChange,error:n.hasExtendedPublicKeyError(),helperText:i})),a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:10},a.a.createElement(Pe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:n.handleBIP32PathChange,error:n.hasBIP32PathError(),helperText:l}),a.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),a.a.createElement(w.a,{item:!0,md:2},!n.bip32PathIsDefault()&&a.a.createElement(K.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path},"Default"))),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===o||n.hasError()},"Import Extended Public Key"))),a.a.createElement(ee.a,{className:"text-danger"},r))},n.import=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter,a=e.validateAndSetExtendedPublicKey,o=n.state.extendedPublicKey;a(Object(V.deriveChildExtendedPublicKey)(o,r.bip32Path,t),function(e){n.setState({error:e})})},n.setBIP32PathToDefault=function(){(0,n.props.validateAndSetBIP32Path)(Zr,function(){},function(){})},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.hasExtendedPublicKeyError=function(){return""!==n.state.extendedPublicKeyError},n.hasError=function(){return n.hasBIP32PathError()||n.hasExtendedPublicKeyError()},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError,{mode:"unhardened"})},n.bip32PathIsDefault=function(){return n.props.extendedPublicKeyImporter.bip32Path===Zr},n.resetBIP32Path=function(){n.setBIP32PathToDefault(),n.setBIP32PathError("")},n.handleExtendedPublicKeyChange=function(e){var t=n.props,r=t.network,a=t.extendedPublicKeyImporters,o=e.target.value,i=Object(V.validateExtendedPublicKey)(o,r);""===i&&Object.values(a).find(function(e){return e.extendedPublicKey===o})&&(i="This extended public key has already been imported."),n.setState({extendedPublicKey:o,extendedPublicKeyError:i})},n}return Object(F.a)(t,e),t}(a.a.Component),$r=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={error:""},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state.error;return a.a.createElement(I.a,{mt:2},a.a.createElement(Pe.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:n.handleChange,error:n.hasError(),helperText:t}))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){(0,n.props.validateAndSetExtendedPublicKey)(e.target.value,n.setError)},n}return Object(F.a)(t,e),t}(a.a.Component),ea=n(1320),ta=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={extendedPublicKeyError:"",walletState:Dn.PENDING},n.componentDidMount=function(){(0,n.props.resetBIP32Path)()},n.interaction=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter;return new Dn.HermitExportExtendedPublicKey({network:t,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.disableChangeMethod,t=n.state.extendedPublicKeyError;return a.a.createElement(ea.a,null,a.a.createElement(Yn,{startText:"Import Extended Public Key",interaction:n.interaction(),onStart:e,onSuccess:n.import,onClear:n.onClear}),a.a.createElement(ee.a,{className:"text-danger"},t))},n.setError=function(e){n.setState({error:e})},n.import=function(e){var t=n.props,r=t.validateAndSetBIP32Path,a=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var o=e.xpub;r(e.bip32_path,function(){a(o,n.setError)},n.setError)},n.onClear=function(){var e=n.props,t=e.reset,r=e.enableChangeMethod;t(!0),n.setError(""),r()},n}return Object(F.a)(t,e),t}(a.a.Component),na=function(e){function t(e){var n;return Object(L.a)(this,t),(n=Object(W.a)(this,Object(z.a)(t).call(this,e))).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter;return Object(Dn.HardwareWalletExportExtendedPublicKey)({network:t,walletType:r.method,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state,r=t.walletState,o=t.extendedPublicKeyError,i=n.interaction();return r===Dn.UNSUPPORTED?a.a.createElement(ee.a,{className:"text-danger"},i.messageTextFor({walletState:r})):a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:6},a.a.createElement(Pe.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:r!==Dn.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),a.a.createElement(w.a,{item:!0,md:6},!n.bip32PathIsDefault()&&a.a.createElement(K.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:r!==Dn.PENDING},"Default"))),a.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||r===Dn.ACTIVE},"Import Extended Public Key")),a.a.createElement(er,{messages:i.messagesFor({walletState:r}),excludeCodes:["bip32"]}),a.a.createElement(ee.a,{className:"text-danger"},o))},n.import=Object(je.a)(xe.a.mark(function e(){var t,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.validateAndSetExtendedPublicKey,a=t.enableChangeMethod,(0,t.disableChangeMethod)(),n.setState({extendedPublicKeyError:"",walletState:Dn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:o=e.sent,r(o,function(e){n.setState({extendedPublicKeyError:e,walletState:Dn.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({extendedPublicKeyError:e.t0.message,walletState:Dn.PENDING});case 14:a();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t||n.interaction().hasMessagesFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:n.interaction().messageTextFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.state={extendedPublicKeyError:"",bip32PathError:"",walletState:n.interaction().isSupported()?Dn.PENDING:Dn.UNSUPPORTED},n}return Object(F.a)(t,e),t}(a.a.Component),ra=function(e){return a.a.createElement("small",null,a.a.createElement(k.a,null,a.a.createElement(C.a,{color:"error.main"},a.a.createElement(_.a,null,a.a.createElement(O.a,{color:"error"},a.a.createElement(Zn.a,null))),a.a.createElement(N.a,null,a.a.createElement(O.a,{color:"error"},e.message)))))},aa="xpub",oa="text",ia=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={disableChangeMethod:!1},n.title=function(){var e=n.props,t=e.number,r=e.extendedPublicKeyImporter,o=e.setName;return a.a.createElement(ir,{number:t,name:r.name,setName:o})},n.renderImport=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.number,o=n.state.disableChangeMethod,i="xpub-".concat(r,"-importer-select-label");return a.a.createElement("div",null,a.a.createElement(Q.a,{fullWidth:!0},a.a.createElement(Un.a,{id:i},"Select Method"),a.a.createElement(Hn.a,{labelId:i,id:"public-key-".concat(r,"-importer-select"),disabled:o,value:t.method,onChange:n.handleMethodChange},a.a.createElement(Ln.a,{value:""},"< Select method >"),a.a.createElement(Ln.a,{value:Dn.TREZOR},"Trezor"),a.a.createElement(Ln.a,{value:Dn.LEDGER},"Ledger"),a.a.createElement(Ln.a,{value:Dn.HERMIT},"Hermit"),a.a.createElement(Ln.a,{value:aa},"Derive from extended public key"),a.a.createElement(Ln.a,{value:oa},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.extendedPublicKeyImporters,r=e.extendedPublicKeyImporter,o=e.network,i=e.addressType,l=e.defaultBIP32Path;return r.method===Dn.TREZOR||r.method===Dn.LEDGER?a.a.createElement(na,{extendedPublicKeyImporter:r,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:i,defaultBIP32Path:l,network:o}):r.method===Dn.HERMIT?a.a.createElement(ta,{extendedPublicKeyImporter:r,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,resetBIP32Path:n.resetBIP32Path,reset:n.reset}):r.method===aa?a.a.createElement(Jr,{extendedPublicKeyImporter:r,extendedPublicKeyImporters:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,network:o,validateAndSetBIP32Path:n.validateAndSetBIP32Path}):r.method===oa?a.a.createElement($r,{extendedPublicKeyImporter:r,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number,a=t.setMethod,o=t.setExtendedPublicKey;a(r,e.target.value),o(r,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,r=t.number,a=t.setExtendedPublicKey,o=t.setFinalized;a(r,""),o(r,!1),e&&n.resetBIP32Path()},n.moveUp=function(e){var t=n.props,r=t.moveUp,a=t.number;e.preventDefault(),r(a)},n.moveDown=function(e){var t=n.props,r=t.moveDown,a=t.number;e.preventDefault(),r(a)},n.renderBIP32Path=function(){var e=n.props.extendedPublicKeyImporter;return e.method===oa?a.a.createElement("div",{className:"mt-4"},a.a.createElement("p",null,"Make sure you ",a.a.createElement("strong",null,"record the corresponding BIP32 path."))):a.a.createElement("div",{className:"mt-4"},a.a.createElement("p",null,"The BIP32 path for this extended public key is:"),a.a.createElement("div",{className:"text-center"},a.a.createElement(Yt,{text:e.bip32Path},a.a.createElement("code",null,e.bip32Path))),a.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later.  ",a.a.createElement("strong",null,"Write down this BIP32 path!")))},n.validateAndSetBIP32Path=function(e,t,r,a){var o=n.props,i=o.number,l=o.setBIP32Path,c=Object(V.validateBIP32Path)(e,a);l(i,e),c?r(c):(r(""),t())},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.resetBIP32Path)(t)},n.renderExtendedPublicKey=function(){var e=n.props.extendedPublicKeyImporter;return a.a.createElement("div",null,a.a.createElement("p",null,"The following extended public key was imported:"),a.a.createElement("div",{className:"text-center"},a.a.createElement(Yt,{text:e.extendedPublicKey},a.a.createElement("small",null,a.a.createElement("code",null,e.extendedPublicKey)))),n.renderBIP32Path(),a.a.createElement(K.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(e.method===Dn.HERMIT)}},"Remove Extended Public Key"))},n.validateAndSetExtendedPublicKey=function(e,t,r){var a=n.props,o=a.number,i=a.network,l=a.extendedPublicKeyImporters,c=a.setExtendedPublicKey,s=Object(V.validateExtendedPublicKey)(e,i);c(o,e),s?t(s):e&&Object.values(l).find(function(t,n){return n!==o-1&&t.extendedPublicKey===e})?t("This extended public key has already been imported."):(t(""),n.finalize(),r&&r())},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,n=e.finalizedNetwork,r=e.network,o=t.method&&t.method!==oa&&t.conflict,i="";return o&&(i=n!==r?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),a.a.createElement(T.a,null,a.a.createElement(x.a,{title:this.title()}),a.a.createElement(j.a,null,o&&a.a.createElement(ra,{message:i}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),t}(a.a.Component);var la={setName:Hr,resetBIP32Path:Wr,setBIP32Path:Lr,setMethod:zr,setExtendedPublicKey:Fr,setFinalized:Gr},ca=Object(c.b)(function(e,t){return Object(E.a)({},e.settings,e.quorum,{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})},la)(ia),sa=n(1274),ua=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={showSettings:!1},n.render=function(){var e=n.props,t=e.configuring,r=e.walletName,o=e.setName,i=e.deposits;return a.a.createElement("div",null,a.a.createElement("h1",null,!Object.values(i.nodes).length&&a.a.createElement(ir,{number:0,name:r,setName:o}),Object.values(i.nodes).length>0&&a.a.createElement("span",null,r)),a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0,spacing:3},a.a.createElement(w.a,{item:!0,md:t?8:12},n.renderExtendedPublicKeyImporters(),a.a.createElement(I.a,{mt:2},a.a.createElement(Qr,null))),n.renderSettings())))},n.renderSettings=function(){return n.props.configuring?a.a.createElement(w.a,{item:!0,md:4},a.a.createElement(I.a,null,a.a.createElement(fe,null)),a.a.createElement(I.a,{mt:2},a.a.createElement(ve,null)),a.a.createElement(I.a,{mt:2},a.a.createElement(se,null)),a.a.createElement(I.a,{mt:2},a.a.createElement(we,null))):a.a.createElement("div",null,a.a.createElement(I.a,{position:"fixed",right:10},a.a.createElement(G.a,{onClick:n.toggleDrawer},a.a.createElement(Y.a,null))),a.a.createElement(q.a,{md:4,anchor:"right",open:n.state.showSettings,onClose:n.toggleDrawer},a.a.createElement(I.a,{width:400},a.a.createElement(I.a,{mt:2},a.a.createElement(we,null)))))},n.toggleDrawer=function(){n.setState({showSettings:!n.state.showSettings})},n.renderExtendedPublicKeyImporters=function(){for(var e=n.props,t=e.totalSigners,r=e.configuring,o=[],i=1;i<=t;i++)o.push(a.a.createElement(I.a,{key:i,mt:1===i?0:2,display:r?"block":"none"},a.a.createElement(ca,{key:i,number:i})));return o},n}return Object(F.a)(t,e),t}(a.a.Component);ua.defaultProps={bip32:sa};var da={setName:function(e,t){return{type:it,value:t}}},pa=Object(c.b)(function(e){return Object(E.a)({},{totalSigners:e.settings.totalSigners},e.quorum,{walletName:e.wallet.info.walletName},e.wallet)},da)(ua),ma="SORT_PUBLIC_KEY_IMPORTERS",ha="UPDATE_MULTISIG_ADDRESS";var fa=Ie({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),ba=fa.setPublicKeyImporterName,Ea=fa.setPublicKeyImporterBIP32Path,va=fa.resetPublicKeyImporterBIP32Path,ga=fa.setPublicKeyImporterMethod,Pa=fa.setPublicKeyImporterPublicKey,ya=fa.setPublicKeyImporterFinalized,Sa=fa.movePublicKeyImporterUp,Ia=fa.movePublicKeyImporterDown,Oa=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).title=function(){var e=n.props,t=e.totalSigners,r=e.requiredSigners,o=e.addressType;return a.a.createElement(w.a,{container:!0,justify:"space-between"},a.a.createElement(w.a,{item:!0},r,"-of-",t," Multisig ",o," Address"),a.a.createElement(w.a,{item:!0},a.a.createElement("small",null,"Public Keys: ".concat(n.publicKeyCount(),"/").concat(t))))},n.isInConflict=function(){var e=n.props.publicKeyImporters;return Object.values(e).some(function(e){return e.conflict})},n.publicKeyCount=function(){var e=n.props.publicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},n.publicKeysAreCanonicallySorted=function(){var e=n.props.publicKeyImporters,t=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}),r=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}).sort();return t.filter(function(e,t){return e===r[t]}).length===t.length},n.canonicallySortPublicKeys=function(){(0,n.props.sortPublicKeyImporters)()},n.generateMultisig=function(){for(var e=n.props,t=e.network,r=e.publicKeyImporters,a=e.totalSigners,o=e.requiredSigners,i=e.addressType,l=e.setMultisigAddress,c=[],s=1;s<=a;s++)c.push(r[s].publicKey);var u=V.generateMultisigFromPublicKeys.apply(void 0,[t,i,o].concat(c));return l(u.address),u},n.downloadAddressDetails=function(e){e.preventDefault();var t=n.generateMultisig();y(n.addressDetailsText(t),n.addressDetailsFilename(t))},n.addressDetailsFilename=function(e){var t=n.props,r=t.totalSigners,a=t.requiredSigners,o=t.addressType;return"bitcoin-".concat(a,"-of-").concat(r,"-").concat(o,"-").concat(e.address,".txt")},n.addressDetailsText=function(e){var t=n.props,r=t.addressType,a=t.network,o=t.totalSigners,i=t.requiredSigners,l=Object(V.multisigRedeemScript)(e),c=Object(V.multisigWitnessScript)(e),s=l?"Redeem Script: ".concat(Object(V.scriptToHex)(l)):"",u=c?"Witness Script: ".concat(Object(V.scriptToHex)(c)):"",d=l&&c?"\n\n":"";return"Address: ".concat(e.address,"\n\nType: ").concat(r,"\n\nNetwork: ").concat(a,"\n\nQuorum: ").concat(i,"-of-").concat(o,"\n\nBIP32 Paths:\n").concat(n.publicKeyImporterBIP32Paths(),"\n\n").concat(s).concat(d).concat(u,"\n")},n.publicKeyImporterBIP32Paths=function(){for(var e=n.props.totalSigners,t=[],r=1;r<=e;r++)t.push(n.publicKeyImporterBIP32Path(r));return t.join("\n")},n.publicKeyImporterBIP32Path=function(e){var t=n.props.publicKeyImporters[e],r="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(r)},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:this.title()}),a.a.createElement(j.a,null,this.body()))}},{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),n=this.publicKeysAreCanonicallySorted();return a.a.createElement("div",null,this.isInConflict()&&a.a.createElement(ra,null),!n&&a.a.createElement(w.a,{container:!0,justify:"space-between"},a.a.createElement(w.a,{item:!0,md:8},a.a.createElement(ee.a,{error:!0},"WARNING: These public keys are not in the standard ",P("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),a.a.createElement(w.a,{item:!0,md:4},a.a.createElement(K.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),a.a.createElement(I.a,{mt:2},a.a.createElement(bn,{multisig:t})),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return a.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}}]),t}(a.a.Component);var wa={sortPublicKeyImporters:function(){return{type:ma}},setMultisigAddress:function(e){return{type:ha,value:e}}},Ta=Object(c.b)(function(e){return Object(E.a)({},e.settings,e.address)},wa)(Oa),xa=n(1409),ja=n(1410),ka=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={error:"",publicKey:""},n.render=function(){var e=n.state,t=e.error,r=e.publicKey;return a.a.createElement(I.a,{mt:2},a.a.createElement(Pe.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:r,onChange:n.handleChange,error:n.hasError(),helperText:t}),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===r||n.hasError()},"Add Public Key")))},n.import=function(){(0,n.props.validateAndSetPublicKey)(n.state.publicKey,n.setError)},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,r=Object(V.validatePublicKey)(t);n.setState({publicKey:t,error:r})},n}return Object(F.a)(t,e),t}(a.a.Component),Ca="m/0",_a=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.setBIP32PathToDefault()},n.state={extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},n.render=function(){var e=n.props.publicKeyImporter,t=n.state,r=t.extendedPublicKey,o=t.extendedPublicKeyError,i=t.bip32PathError;return a.a.createElement("div",null,a.a.createElement(I.a,{mt:2},a.a.createElement(Pe.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:r,onChange:n.handleExtendedPublicKeyChange,error:n.hasExtendedPublicKeyError(),helperText:o})),a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:10},a.a.createElement(Pe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:n.handleBIP32PathChange,error:n.hasBIP32PathError(),helperText:i}),a.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),a.a.createElement(w.a,{item:!0,md:2},!n.bip32PathIsDefault()&&a.a.createElement(K.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path},"Default"))),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===r||n.hasError()},"Import Public Key"))))},n.import=function(){var e=n.props,t=e.network,r=e.publicKeyImporter,a=e.validateAndSetPublicKey,o=n.state.extendedPublicKey;a(Object(V.deriveChildPublicKey)(o,r.bip32Path,t),function(e){return n.setState({bip32PathError:e})})},n.setBIP32PathToDefault=function(){(0,n.props.validateAndSetBIP32Path)(Ca,function(){},function(){})},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.hasExtendedPublicKeyError=function(){return""!==n.state.extendedPublicKeyError},n.hasError=function(){return n.hasBIP32PathError()||n.hasExtendedPublicKeyError()},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError,{mode:"unhardened"})},n.bip32PathIsDefault=function(){return n.props.publicKeyImporter.bip32Path===Ca},n.resetBIP32Path=function(){n.setBIP32PathToDefault(),n.setBIP32PathError("")},n.handleExtendedPublicKeyChange=function(e){var t=n.props.network,r=e.target.value,a=Object(V.validateExtendedPublicKey)(r,t);n.setState({extendedPublicKey:r,extendedPublicKeyError:a})},n}return Object(F.a)(t,e),t}(a.a.Component),Na=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={publicKeyError:"",walletState:Dn.PENDING},n.componentDidMount=function(){(0,n.props.resetBIP32Path)()},n.interaction=function(){var e=n.props,t=e.network,r=e.publicKeyImporter;return new Dn.HermitExportPublicKey({network:t,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.disableChangeMethod,t=n.state.publicKeyError;return a.a.createElement(ea.a,null,a.a.createElement(Yn,{startText:"Import Public Key",interaction:n.interaction(),onStart:e,onSuccess:n.import,onClear:n.onClear}),a.a.createElement(ee.a,{error:!0},t))},n.setError=function(e){n.setState({publicKeyError:e})},n.import=function(e){var t=n.props,r=t.validateAndSetBIP32Path,a=t.validateAndSetPublicKey;(0,t.enableChangeMethod)();var o=e.pubkey;r(e.bip32_path,function(){a(o,n.setError)},n.setError)},n.onClear=function(){var e=n.props,t=e.reset,r=e.enableChangeMethod;t(!0),n.setError(""),r()},n}return Object(F.a)(t,e),t}(a.a.Component),Ra=function(e){function t(e){var n;return Object(L.a)(this,t),(n=Object(W.a)(this,Object(z.a)(t).call(this,e))).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.network,r=e.publicKeyImporter;return Object(Dn.HardwareWalletExportPublicKey)({network:t,walletType:r.method,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.publicKeyImporter,t=n.state,r=t.walletState,o=t.publicKeyError,i=n.interaction();return r===Dn.UNSUPPORTED?a.a.createElement(ee.a,{error:!0},i.messageTextFor({walletState:r})):a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0},a.a.createElement(w.a,{item:!0,md:6},a.a.createElement(Pe.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:r!==Dn.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),a.a.createElement(w.a,{item:!0,md:6},!n.bip32PathIsDefault()&&a.a.createElement(K.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:r!==Dn.PENDING},"Default"))),a.a.createElement(ee.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||r===Dn.ACTIVE},"Import Public Key")),a.a.createElement(er,{messages:i.messagesFor({walletState:r}),excludeCodes:["bip32"]}),a.a.createElement(ee.a,{error:!0},o))},n.import=Object(je.a)(xe.a.mark(function e(){var t,r,a,o;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.validateAndSetPublicKey,a=t.enableChangeMethod,(0,t.disableChangeMethod)(),n.setState({publicKeyError:"",walletState:Dn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:o=e.sent,r(o,function(e){n.setState({publicKeyError:e,walletState:Dn.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({publicKeyError:e.t0.message,walletState:Dn.PENDING});case 14:a();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t||n.interaction().hasMessagesFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:n.interaction().messageTextFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.publicKeyImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.state={publicKeyError:"",bip32PathError:"",walletState:n.interaction().isSupported()?Dn.PENDING:Dn.UNSUPPORTED},n}return Object(F.a)(t,e),t}(a.a.Component),Ka="xpub",Aa="text",Ba=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={disableChangeMethod:!1},n.title=function(){var e=n.props,t=e.number,r=e.totalSigners,o=e.publicKeyImporter,i=e.setName;return a.a.createElement(w.a,{container:!0,justify:"space-between"},a.a.createElement(w.a,{item:!0},a.a.createElement(ir,{number:t,name:o.name,setName:i})),a.a.createElement(w.a,{item:!0},a.a.createElement(w.a,{container:!0,justify:"flex-end"},a.a.createElement(K.a,{type:"button",variant:"contained",onClick:n.moveUp,disabled:1===t},a.a.createElement(xa.a,null)),a.a.createElement("span",null,"\xa0"),a.a.createElement(K.a,{type:"button",variant:"contained",onClick:n.moveDown,disabled:t===r},a.a.createElement(ja.a,null)))))},n.renderImport=function(){var e=n.props,t=e.publicKeyImporter,r=e.number,o=n.state.disableChangeMethod,i="public-key-".concat(r,"-importer-select-label");return a.a.createElement("div",null,a.a.createElement(Q.a,{fullWidth:!0},a.a.createElement(Un.a,{id:i},"Select Method"),a.a.createElement(Hn.a,{labelId:i,id:"public-key-".concat(r,"-importer-select"),disabled:o,value:t.method,onChange:n.handleMethodChange},a.a.createElement(Ln.a,{value:""},"< Select method >"),a.a.createElement(Ln.a,{value:Dn.TREZOR},"Trezor"),a.a.createElement(Ln.a,{value:Dn.LEDGER},"Ledger"),a.a.createElement(Ln.a,{value:Dn.HERMIT},"Hermit"),a.a.createElement(Ln.a,{value:Ka},"Derive from extended public key"),a.a.createElement(Ln.a,{value:Aa},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.publicKeyImporter,r=e.network,o=e.addressType,i=e.defaultBIP32Path;return t.method===Dn.TREZOR||t.method===Dn.LEDGER?a.a.createElement(Ra,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:o,defaultBIP32Path:i,network:r}):t.method===Dn.HERMIT?a.a.createElement(Na,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,reset:n.reset}):t.method===Ka?a.a.createElement(_a,{network:r,publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path}):t.method===Aa?a.a.createElement(ka,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number,a=t.setMethod,o=t.setPublicKey;a(r,e.target.value),o(r,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,r=t.number,a=t.setPublicKey,o=t.setFinalized;a(r,""),o(r,!1),e&&n.resetBIP32Path()},n.moveUp=function(e){var t=n.props,r=t.moveUp,a=t.number;e.preventDefault(),r(a)},n.moveDown=function(e){var t=n.props,r=t.moveDown,a=t.number;e.preventDefault(),r(a)},n.renderBIP32Path=function(){var e=n.props.publicKeyImporter;return e.method!==Aa?a.a.createElement(I.a,{mt:4},a.a.createElement("p",null,"The BIP32 path for this public key is:"),a.a.createElement(w.a,{container:!0,justify:"center"},a.a.createElement(Yt,{text:e.bip32Path},a.a.createElement("code",null,e.bip32Path))),a.a.createElement(I.a,{mt:4},a.a.createElement("p",null,"You will need this BIP32 path to sign for this key later.  ",a.a.createElement("strong",null,"Write down this BIP32 path!")))):null},n.validateAndSetBIP32Path=function(e,t,r,a){var o=n.props,i=o.number,l=o.setBIP32Path,c=Object(V.validateBIP32Path)(e,a);l(i,e),c?r(c):(r(""),t())},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.resetBIP32Path)(t)},n.renderPublicKey=function(){var e=n.props.publicKeyImporter;return a.a.createElement("div",null,a.a.createElement("p",null,"The following public key was imported:"),a.a.createElement(w.a,{container:!0,justify:"center"},a.a.createElement(Yt,{text:e.publicKey},a.a.createElement("code",null,e.publicKey))),n.renderBIP32Path(),a.a.createElement(I.a,{mt:2},a.a.createElement(K.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(e.method===Dn.HERMIT)}},"Remove Public Key")))},n.validateAndSetPublicKey=function(e,t,r){var a=n.props,o=a.number,i=a.publicKeyImporters,l=a.setPublicKey,c=Object(V.validatePublicKey)(e);l(o,e),c?t&&t(c):e&&Object.values(i).find(function(t,n){return n!==o-1&&t.publicKey===e})?t&&t("This public key has already been imported."):(t&&t(""),n.finalize(),r&&r())},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:this.title()}),a.a.createElement(j.a,null,e.method&&e.method!==Aa&&e.conflict&&a.a.createElement(ra,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),t}(a.a.Component);var Ma={setName:ba,setBIP32Path:Ea,resetBIP32Path:va,setMethod:ga,setPublicKey:Pa,setFinalized:ya,moveUp:Sa,moveDown:Ia},Da=Object(c.b)(function(e,t){return Object(E.a)({},e.settings,e.address,{publicKeyImporter:e.address.publicKeyImporters[t.number]})},Ma)(Ba),Ua=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=n.props.address;return a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0,spacing:3},a.a.createElement(w.a,{item:!0,md:8},n.renderPublicKeyImporters(),a.a.createElement(I.a,{mt:2},a.a.createElement(Ta,null))),a.a.createElement(w.a,{item:!0,md:4},a.a.createElement(I.a,null,a.a.createElement(fe,null)),a.a.createElement(I.a,{mt:2},a.a.createElement(ve,null)),a.a.createElement(I.a,{mt:2},a.a.createElement(se,null)),""!==e&&n.renderClientPicker())))},n.renderClientPicker=function(){var e=n.props.address;return a.a.createElement(I.a,{mt:2},a.a.createElement(we,{publicNotes:a.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:a.a.createElement("div",null,a.a.createElement(Sn,{addresses:[e]}))}))},n.renderPublicKeyImporters=function(){for(var e=n.props.totalSigners,t=[],r=1;r<=e;r++)t.push(a.a.createElement(I.a,{key:r,mt:1===r?0:2},a.a.createElement(Da,{number:r})));return t},n}return Object(F.a)(t,e),t}(a.a.Component);var Ha=Object(c.b)(function(e){return Object(E.a)({},{totalSigners:e.settings.totalSigners},e.address)})(Ua),La="CHOOSE_CONFIRM_OWNERSHIP",Wa="SET_OWNERSHIP_MULTISIG",za="RESET_PUBLIC_KEY_IMPORTER",Fa="RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",Ga="SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",qa="SET_PUBLIC_KEY_IMPORTER_METHOD",Ya="SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY";var Xa=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},n.disabled=function(){},n.hasScriptError=function(){return""!==n.state.scriptError},n.hasFetchUTXOsError=function(){return""!==n.state.fetchUTXOsError},n.hasError=function(){return n.hasScriptError()||n.hasFetchUTXOsError()},n.scriptName=function(){switch(n.props.addressType){case V.P2SH:return"redeem";case V.P2SH_P2WSH:case V.P2WSH:return"witness";default:return null}},n.scriptTitle=function(){var e=n.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},n.handleScriptChange=function(e){var t=e.target.value,r="";(""===t&&(r="".concat(n.scriptTitle()," script cannot be blank.")),""===r&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(r="".concat(n.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===r)&&(""!==Object(V.validateHex)(t)&&(r="".concat(n.scriptTitle()," script is not valid hex.")));if(""!==t&&""===r)try{n.generateMultisig(t)}catch(a){console.error(a),r="Failed to parse ".concat(n.scriptName()," script.")}n.setState({scriptHex:t,scriptError:r,fetchUTXOsError:"",fetchedUTXOs:!1})},n.generateMultisig=function(e){var t=n.props,r=t.network,a=t.addressType;return e||(e=n.state.scriptHex),Object(V.generateMultisigFromHex)(r,a,e)},n.renderDetails=function(){var e=n.state.fetchUTXOsError,t=n.props,r=t.chosePerformSpend,o=t.choseConfirmOwnership,i=t.client,l=n.generateMultisig(),c=r||o;return a.a.createElement("div",null,a.a.createElement(bn,{multisig:l}),a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0,spacing:3},a.a.createElement(w.a,{item:!0},a.a.createElement(K.a,{variant:"contained",color:"primary",size:"large",onClick:n.performSpend,disabled:c},"Spend from this address")),a.a.createElement(w.a,{item:!0},a.a.createElement(K.a,{variant:"contained",size:"large",onClick:n.confirmOwnership,disabled:c},"Confirm ownership"))),a.a.createElement(ee.a,{error:!0},e)),"private"===i.type&&a.a.createElement(I.a,{mt:2},a.a.createElement(Sn,{addresses:[l.address],autoImport:!0})))},n.performSpend=Object(je.a)(xe.a.mark(function e(){var t,r,a,o,i,l,c,s,u,d,p;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.setRequiredSigners,a=t.setTotalSigners,o=t.setInputs,i=t.setFrozen,l=t.choosePerformSpend,c=n.generateMultisig(),e.next=4,n.fetchUTXOs(c);case 4:(s=e.sent)?(u=s.utxos,d=s.inputsTotalSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),n.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(o(u),r(Object(V.multisigRequiredSigners)(c)),a(Object(V.multisigTotalSigners)(c)),i(!0),l())):n.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}},e)})),n.fetchUTXOs=function(){var e=Object(je.a)(xe.a.mark(function e(t){var r,a,o,i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.network,o=r.client,i=null,e.prev=2,e.next=5,Ge(t.address,a,o);case 5:i=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 12:if(null===i){e.next=14;break}return e.abrupt("return",{utxos:i.map(function(e){return Object(E.a)({},e,{multisig:t})}),inputsTotalSats:i.map(function(e){return e.amount}).reduce(function(e,t){return e.plus(t)},new g.a(0))});case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),n.confirmOwnership=function(){var e=n.props,t=e.chooseConfirmOwnership,r=e.setOwnershipMultisig,a=e.setFrozen;r(n.generateMultisig()),t(),a(!0)},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,n=e.scriptError,r=e.fetchedUTXOs;return a.a.createElement(T.a,null,a.a.createElement(x.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),a.a.createElement(j.a,null,a.a.createElement("form",null,a.a.createElement(Pe.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:r&&!this.hasFetchUTXOsError(),helperText:n,error:""!==n})),""===t||this.hasScriptError()?a.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),t}(a.a.Component);var Va={choosePerformSpend:function(){return{type:ft}},setFrozen:ie,setInputs:Nt,setTotalSigners:function(e){return{type:Et,value:e}},setRequiredSigners:_t,chooseConfirmOwnership:function(){return{type:La}},setOwnershipMultisig:function(e){return{type:Wa,value:e}}},Qa=Object(c.b)(function(e){return Object(E.a)({},e.settings,{client:e.client},{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})},Va)(Xa),Za=n(650),Ja=n.n(Za),$a=n(651),eo=n.n($a),to=n(655),no=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).titleRef=a.a.createRef(),n.state={disableChangeMethod:!1},n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderImportByMethod=function(){var e=n.props,t=e.network,r=e.publicKeyImporter,o=e.defaultBIP32Path;return r.method===Dn.HERMIT?a.a.createElement(Na,{publicKeyImporter:r,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetPublicKey:n.validateAndSetPublicKey,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,reset:n.reset}):r.method===Dn.TREZOR||r.method===Dn.LEDGER?a.a.createElement(Ra,{network:t,publicKeyImporter:r,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:o,validateAndSetPublicKey:n.validateAndSetPublicKey,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):null},n.handleMethodChange=function(e){(0,n.props.setMethod)(e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.reset=function(){(0,n.props.reset)()},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.validateAndSetBIP32Path=function(e,t,r,a){var o=n.props.setBIP32Path,i=Object(V.validateBIP32Path)(e,a);o(e),i?r(i):(r(""),t())},n.validateAndSetPublicKey=function(e,t,r){var a=n.props.setPublicKey,o=Object(V.validatePublicKey)(e);a(e),o?t&&t(o):(t&&t(""),r&&r())},n.renderConfirmation=function(){var e=n.props,t=e.publicKeys,r=e.publicKeyImporter;if(""===r.publicKey)return null;if(t.includes(r.publicKey)){var o=Object(to.a)(_.a)({color:"green"});return a.a.createElement(k.a,null,a.a.createElement(C.a,null,a.a.createElement(o,null,a.a.createElement(Ja.a,null)),a.a.createElement(N.a,null,"The public key exported at BIP32 path ",a.a.createElement("code",null,r.bip32Path)," is present in the provided redeem script.")))}return a.a.createElement(k.a,null,a.a.createElement(C.a,null,a.a.createElement(_.a,null,a.a.createElement(O.a,{color:"error"},a.a.createElement(eo.a,null))),a.a.createElement(N.a,null,"The public key exported at BIP32 path ",a.a.createElement("code",null,r.bip32Path)," is not present in the provided redeem script.")))},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod;return a.a.createElement(T.a,null,a.a.createElement(x.a,{ref:this.titleRef,title:"Confirm Ownership"}),a.a.createElement(j.a,null,a.a.createElement("form",null,a.a.createElement("p",null,"How will you confirm your ownership of this address?"),a.a.createElement(Q.a,{fullWidth:!0},a.a.createElement(Un.a,{id:"public-key-importer-select-label"},"Select Method"),a.a.createElement(Hn.a,{labelId:!0,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},a.a.createElement(Ln.a,{value:""},"< Select method >"),a.a.createElement(Ln.a,{value:Dn.TREZOR},"Trezor"),a.a.createElement(Ln.a,{value:Dn.LEDGER},"Ledger"),a.a.createElement(Ln.a,{value:Dn.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&a.a.createElement(K.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),t}(a.a.Component);var ro={setMethod:function(e){return{type:qa,value:e}},setBIP32Path:function(e){return{type:Ga,value:e}},setPublicKey:function(e){return{type:Ya,value:e}},resetBIP32Path:function(){return{type:Fa}},reset:function(){return{type:za}}},ao=Object(c.b)(function(e,t){return e.spend.ownership},ro)(no),oo=function(e){function t(){var e,n;Object(L.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return a.a.createElement(I.a,{mt:2},a.a.createElement(w.a,{container:!0,spacing:3},a.a.createElement(w.a,{item:!0,md:8},a.a.createElement(I.a,null,a.a.createElement(Qa,null)),n.renderBody()),a.a.createElement(w.a,{item:!0,md:4},a.a.createElement(I.a,null,a.a.createElement(ve,null)),a.a.createElement(I.a,{mt:2},a.a.createElement(se,null)),a.a.createElement(I.a,{mt:2},a.a.createElement(we,null)))))},n.renderBody=function(){var e=n.props,t=e.transaction;return e.ownership.chosen?a.a.createElement(I.a,{mt:2},a.a.createElement(ao,null)):a.a.createElement(I.a,null,n.spendable()&&a.a.createElement(I.a,null,a.a.createElement(I.a,{mt:2},a.a.createElement(sn,{inputs:t.inputs,inputsTotalSats:t.inputsTotalSats})),a.a.createElement(I.a,{mt:2},a.a.createElement(Mn,null))),t.finalizedOutputs&&a.a.createElement(I.a,null,n.renderSignatureImporters()),n.signaturesFinalized()&&a.a.createElement(I.a,{mt:2},a.a.createElement(yr,null)))},n.renderSignatureImporters=function(){for(var e=n.props.transaction,t=[],r=1;r<=e.requiredSigners;r++)t.push(a.a.createElement(I.a,{key:r,mt:2},a.a.createElement(vr,{number:r})));return t},n.spendable=function(){return n.props.transaction.inputs.length>0},n.signaturesFinalized=function(){var e=n.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},n.confirmOwnership=function(e){n.setState({addressFinalized:!0,confirmOwnership:e})},n}return Object(F.a)(t,e),t}(a.a.Component);var io=Object(c.b)(function(e){return e.spend})(oo),lo=n(652),co=n(1411),so=n(1397),uo=Object(lo.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),po=function(){var e=uo();return a.a.createElement("div",{className:e.root},a.a.createElement(co.a,{position:"static"},a.a.createElement(so.a,null,a.a.createElement(O.a,{variant:"h6",className:e.title},"Caravan"),a.a.createElement(K.a,{color:"inherit",href:"#/wallet",target:"_blank"},"Wallet"),a.a.createElement(K.a,{color:"inherit",href:"#/address",target:"_blank"},"Create"),a.a.createElement(K.a,{color:"inherit",href:"#/spend",target:"_blank"},"Interact"),a.a.createElement(K.a,{color:"inherit",href:"#/",target:"_blank"},"Help"))))},mo=n(653),ho=n(1314),fo=function(){return a.a.createElement(I.a,{mt:2},a.a.createElement("hr",null),a.a.createElement(w.a,{container:!0,alignItems:"center"},a.a.createElement(w.a,{item:!0,sm:2},P("https://www.unchained-capital.com",a.a.createElement("img",{src:ho,className:"logo",alt:"Unchained Capital logo",height:"32"}))),a.a.createElement(w.a,{item:!0,sm:6},a.a.createElement("p",null,"Copyright 2019 by Unchained Capital and released under an MIT license.")),a.a.createElement(w.a,{item:!0,sm:1},a.a.createElement("p",null," v",mo.a," "))))},bo=n(1412),Eo=n(1413),vo=function(e){function t(e){var n;return Object(L.a)(this,t),(n=Object(W.a)(this,Object(z.a)(t).call(this,e))).state={error:null,errorInfo:null},n}return Object(F.a)(t,e),Object(X.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.errorInfo;return n?a.a.createElement(I.a,{m:4},a.a.createElement(I.a,{m:2},a.a.createElement(O.a,{variant:"h3",component:"h1"},"Something went wrong.")),a.a.createElement(I.a,{m:2},a.a.createElement(O.a,{variant:"body1"},"Let us know what happened on ",a.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank"},"github"),".")),a.a.createElement(I.a,{mx:2,my:3},a.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},t&&t.toString(),a.a.createElement("br",null),n.componentStack))):this.props.children}}]),t}(a.a.Component),go=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(bo.a,null),a.a.createElement(Eo.a,{maxWidth:"lg"},a.a.createElement(po,null),a.a.createElement(vo,null,a.a.createElement(h.a,null,a.a.createElement(f.a,null,a.a.createElement(b.a,{path:"/wallet",component:pa}),a.a.createElement(b.a,{path:"/address",component:Ha}),a.a.createElement(b.a,{path:"/spend",component:io}),a.a.createElement(b.a,{path:"/",component:H})))),a.a.createElement(fo,null)))},Po=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function yo(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function So(e,t){return Object(E.a)({},e,t)}var Io={network:V.MAINNET,totalSigners:3,requiredSigners:2,addressType:V.P2SH,frozen:!1},Oo={type:"public",url:"",username:"",password:"",url_error:"",username_error:"",password_error:"",status:"unknown"},wo={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new g.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},To={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new g.a(0),spendingSats:new g.a(0),autoSpend:!1,nextNode:null};function xo(e,t){var n=Object(E.a)({},wo,e.nodes[t.value.bip32Path]||{},t.value),r={};r[n.bip32Path]=n;var a=Object(E.a)({},e,{nodes:Object(E.a)({},e.nodes,r)});"undefined"!==typeof t.value.spend&&(a.spendingSats=t.value.spend?e.spendingSats.plus(n.balanceSats):e.spendingSats.minus(n.balanceSats)),t.value.balanceSats&&(a.balanceSats=e.balanceSats.plus(n.balanceSats));var o=0,i=0,l=Object.keys(a.nodes);l.sort(function(e,t){var n=(e||"").split("/"),r=(t||"").split("/");return parseInt(n[2])-parseInt(r[2])});for(var c=!1,s=0;s<l.length;s++){var u=l[l.length-(s+1)],d=a.nodes[u];d.fetchedUTXOs&&(!d.balanceSats.isEqualTo(0)||d.addressUsed||c?c=!0:o++),""!==d.fetchUTXOsError&&i++}return a.trailingEmptyNodes=o,a.fetchUTXOsErrors=i,a.nextNode=function(e){for(var t=Object.values(e.nodes),n=0;n<t.length;n++){var r=t[n];if(r.balanceSats.isEqualTo(0)&&!r.addressUsed)return r}return null}(a),a}var jo=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case at:return function(e){var t=Object(E.a)({},e);return Object.values(t.nodes).forEach(function(e){e.spend=!1}),t}(t);case st:return function(e){var t=Object(E.a)({},e);return Object.values(t.nodes).forEach(function(e){e.spend&&(t.balanceSats=t.balanceSats.minus(e.balanceSats),e.balanceSats=new g.a(0),e.spend=!1,e.utxos=[])}),t}(t);case e:return xo(t,n);default:return t}}},ko="text";function Co(e){var t=(new Date).getTime().toString(),n=Object.values(e.extendedPublicKeyImporters).map(function(e){return e.extendedPublicKey}).join("");return"".concat(t,"-").concat(n)}var _o={name:"",bip32Path:Object(V.multisigBIP32Root)(V.P2SH,V.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",finalized:!1,confliect:!1},No={extendedPublicKeyImporters:{1:Object(E.a)({},_o,{name:"Extended Public Key 1"}),2:Object(E.a)({},_o,{name:"Extended Public Key 2"}),3:Object(E.a)({},_o,{name:"Extended Public Key 3"})},defaultBIP32Path:Object(V.multisigBIP32Root)(V.P2SH,V.MAINNET),network:V.MAINNET,addressType:V.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0};function Ro(e,t,n){var r={};r[n]=t.value;var a=Object(E.a)({},e,{nodes:{}});return a.extendedPublicKeyImporters[t.number]=So(e.extendedPublicKeyImporters[t.number],r),Object.values(a.extendedPublicKeyImporters).reduce(function(e,t){return e+t.finalized},0)===Object.keys(a.extendedPublicKeyImporters).length&&(a.configuring=!1),Ko(a.extendedPublicKeyImporters[t.number],e),So(a,{fingerprint:Co(a)})}function Ko(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Ao(e,t,n){for(var r=1;r<=Object.values(e.extendedPublicKeyImporters).length;r++){var a=t.extendedPublicKeyImporters[r];a.bip32PathModified||a.finalized||(a.bip32Path=n),Ko(a,t)}}var Bo="text";function Mo(e){var t=(new Date).getTime().toString(),n=Object.values(e.publicKeyImporters).map(function(e){return e.publicKey}).join("");return"".concat(t,"-").concat(n)}var Do={name:"",bip32Path:Object(V.multisigBIP32Path)(V.P2SH,V.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1},Uo={publicKeyImporters:{1:Object(E.a)({},Do,{name:"Public Key 1"}),2:Object(E.a)({},Do,{name:"Public Key 2"}),3:Object(E.a)({},Do,{name:"Public Key 3"})},defaultBIP32Path:Object(V.multisigBIP32Path)(V.P2SH,V.MAINNET),network:V.MAINNET,addressType:V.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""};function Ho(e,t,n){var r={};r[n]=t.value;var a=Object(E.a)({},e);return a.publicKeyImporters[t.number]=So(e.publicKeyImporters[t.number],r),Lo(a.publicKeyImporters[t.number],e),So(a,{fingerprint:Mo(a)})}function Lo(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Wo(e,t,n){for(var r=1;r<=Object.values(e.publicKeyImporters).length;r++){var a=t.publicKeyImporters[r];a.bip32PathModified||a.finalized||(a.bip32Path=n),Lo(a,t)}}var zo={autoSpend:!0,walletMode:ut.VIEW,walletName:"My Multisig Wallet"};var Fo={chosen:!1,publicKeyImporter:Object(E.a)({},{bip32Path:"",method:"",publicKey:""}),network:V.MAINNET,addressType:V.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(V.multisigBIP32Path)(V.P2SH,V.MAINNET)};function Go(e,t,n){var r={};return r[n]=t.value,Object(E.a)({},e,{publicKeyImporter:Object(E.a)({},e.publicKeyImporter,r)})}var qo={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},Yo={};function Xo(e,t,n){var r={};r[n]=t.value;var a=Object(E.a)({},e);return a[t.number]=So(e[t.number],r),a}var Vo=n(437);function Qo(e,t){var n=e.txid.toLowerCase(),r=t.txid.toLowerCase();return n<r?-1:n>r?1:e.n<t.n?-1:e.n>t.n?1:0}var Zo={address:"",amount:"",amountSats:"",addressError:"",amountError:""},Jo=[Object(E.a)({},Zo)],$o={chosen:!1,network:V.MAINNET,inputs:[],inputsTotalSats:new g.a(0),outputs:[].concat(Jo),changeOutputIndex:0,feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:V.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1};function ei(e){if(e.outputs.find(function(e){return""!==e.addressError||""!==e.amountError})||""!==e.feeError||""!==e.feeRateError||0===e.inputs.length)return Object(E.a)({},e,{balanceError:""});var t=Object(V.bitcoinsToSatoshis)(new g.a(e.fee)),n=e.outputs.map(function(e){return Object(V.bitcoinsToSatoshis)(new g.a(e.amount||0))}).reduce(function(e,t){return e.plus(t)},new g.a(0));if(e.inputsTotalSats.isEqualTo(n.plus(t)))return Object(E.a)({},e,{balanceError:""});var r,a=n.plus(t).minus(e.inputsTotalSats);if(a.isNaN())r="Cannot calculate total.";else{var o=a.isLessThan(0)?"Increase":"Decrease";r="".concat(o," by ").concat(Object(V.satoshisToBitcoins)(a.absoluteValue()).toFixed(8),".")}return Object(E.a)({},e,{balanceError:r})}function ti(e,t,n){return Object(V.satoshisToBitcoins)(Object(V.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:n,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toString()}var ni=Object(l.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case La:return So(e,{chosen:!0});case te:return So(e,{network:t.value});case Wa:return function(e,t){var n=t.value,r=Object(V.multisigAddressType)(n),a=Object(V.multisigBIP32Path)(r,e.network);return Object(E.a)({},e,{network:e.network,addressType:r,publicKeys:Object(V.multisigPublicKeys)(n),address:n.address,defaultBIP32Path:a})}(e,t);case Ga:var n=Go(e,{value:""},"publicKey");return Go(n,t,"bip32Path");case qa:return Go(e,t,"method");case Ya:return Go(e,t,"publicKey");case Fa:return Go(e,{value:e.defaultBIP32Path},"bip32Path");case za:return Object(E.a)({},e,{publicKeyImporter:Object(E.a)({},e.publicKeyImporter,{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return So(e,{chosen:!0});case te:return So(e,{network:t.value});case ae:return So(e,{addressType:t.value});case bt:return So(e,{requiredSigners:t.value});case Et:return So(e,{totalSigners:t.value});case vt:return ei(function(e,t){var n=t.value.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new g.a(0));return So(e,{inputs:t.value.sort(Qo),inputsTotalSats:n})}(e,t));case gt:return ei(function(e,t){var n=e.outputs.concat(Object(E.a)({},Zo));return Object(E.a)({},e,{outputs:n,fee:ti(e,e.feeRate,n.length)})}(e));case Ct:return So(e,{changeOutputIndex:t.value});case Pt:return ei(function(e,t){var n=Object(Vo.a)(e.outputs),r=t.value,a=Object(V.validateAddress)(r,e.network);if(""===a)for(var o=0;o<e.inputs.length;o++)if(r===e.inputs[o].address){a="Output address cannot equal input address.";break}if(""===a)for(var i=0;i<e.outputs.length;i++)if(i!==t.number-1&&e.outputs[i].address===r){a="Duplicate output address.";break}return n[t.number-1].address=r,n[t.number-1].addressError=a,Object(E.a)({},e,{outputs:n})}(e,t));case yt:return ei(function(e,t){var n=Object(Vo.a)(e.outputs),r=t.value,a=e.inputs.length?Object(V.validateOutputAmountBTC)(r,e.inputsTotalSats):"";return e.isWallet&&"Output amount is too large."===a&&(a=""),n[t.number-1].amount=r,n[t.number-1].amountError=a,n[t.number-1].amountSats=a?"":Object(V.bitcoinsToSatoshis)(new g.a(t.value)),Object(E.a)({},e,{outputs:n})}(e,t));case St:return ei(function(e,t){for(var n=[],r=0;r<e.outputs.length;r++)r!==t.number-1?n.push(e.outputs[r]):t.number===e.changeOutputIndex&&(e.changeOutputIndex=0);return Object(E.a)({},e,{outputs:n,fee:ti(e,e.feeRate,n.length)})}(e,t));case It:return ei(function(e,t){var n=t.value,r=Object(V.validateFeeRate)(n);return So(e,{feeRate:n,feeRateError:r,fee:""===r?ti(e,n,e.outputs.length):"",feeError:""})}(e,t));case Ot:return ei(function(e,t){var n=t.value,r=Object(V.validateFeeBTC)(n,e.inputsTotalSats);return So(e,{fee:n,feeError:r,feeRate:""===r?Object(V.estimateMultisigTransactionFeeRate)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:e.outputs.length,m:e.requiredSigners,n:e.totalSigners,feesInSatoshis:Object(V.bitcoinsToSatoshis)(new g.a(n))}).toString():"",feeRateError:""})}(e,t));case wt:return function(e,t){var n=Object(V.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs);return Object(E.a)({},e,{finalizedOutputs:t.value,unsignedTransaction:n})}(e,t);case Tt:return So(e,{outputs:Jo,fee:"",balanceError:"",changeOutputIndex:0});case xt:return So(e,{txid:t.value});case kt:return So(e,{isWallet:!0});case jt:return So(e,$o);default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_SIGNATURES":return Object(E.a)({},Yo);case bt:return function(e,t){for(var n={},r=1;r<=t.value;r++)n[r]=Object(E.a)({},qo,{name:"Signature ".concat(r)});return Object(E.a)({},e,n)}(e,t);case"SET_SIGNATURE_IMPORTER_NAME":return Xo(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return Xo(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return Xo(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return Xo(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return Xo(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return Xo(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return function(e,t){var n=Object(E.a)({},e);return n[t.number]=So(e[t.number],t.value),n}(e,t);default:return e}}}),ri=Object(l.c)({deposits:jo(nt),change:jo(rt),info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:return So(e,{autoSpend:t.value});case lt:return So(e,{walletMode:t.value});case it:return So(e,{walletName:t.value});case ct:return function(e){return So(e,{walletMode:ut.VIEW})}(e);default:return e}}}),ai=Object(l.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Io,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return So(e,{network:t.value});case ne:return So(e,{totalSigners:t.value});case re:return So(e,{requiredSigners:t.value});case ae:return So(e,{addressType:t.value});case oe:return So(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return So(e,{type:t.value});case"SET_CLIENT_URL":return So(e,{url:t.value});case"SET_CLIENT_USERNAME":return So(e,{username:t.value});case"SET_CLIENT_PASSWORD":return So(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return So(e,{url_error:t.value});case"SET_CLIENT_USERNAME_ERROR":return So(e,{username_error:t.value});case"SET_CLIENT_PASSWORD_ERROR":return So(e,{password_error:t.value});case"SET_CLIENT_STATUS":return So(e,{status:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return function(e,t){var n=t.value,r=e.addressType,a=Object(V.multisigBIP32Path)(r,n),o=Object(E.a)({},e,{network:n,defaultBIP32Path:a});return Wo(e,o,a),o}(e,t);case ae:return function(e,t){var n=e.network,r=t.value,a=Object(V.multisigBIP32Path)(r,n),o=Object(E.a)({},e,{addressType:r,defaultBIP32Path:a});return Wo(e,o,a),o}(e,t);case ne:return function(e,t){for(var n=t.value,r={},a=1;a<=n;a++)r[a]=e.publicKeyImporters[a]||Object(E.a)({},Do,{name:"Public Key ".concat(a)});var o=Object(E.a)({},e,{publicKeyImporters:r,stub:t.type});return So(o,{fingerprint:Mo(o)})}(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return Ho(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ho(Ho(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ho(Ho(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return Ho(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return Ho(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return Ho(function(e,t){var n=Object(E.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&n.publicKeyImporters[t.number].method!==Bo?(n.finalizedNetwork=e.network,n.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.publicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==Bo?e+1:e},0)&&(n.finalizedNetwork="",n.finalizedAddressType="",Object.values(n.publicKeyImporters).forEach(function(e){return e.conflict=!1})),n}(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return function(e,t){if(1===t.number)return e;var n=Object(E.a)({},e),r=e.publicKeyImporters[t.number-1],a=e.publicKeyImporters[t.number];return n.publicKeyImporters[t.number-1]=a,n.publicKeyImporters[t.number]=r,So(n,{fingerprint:Mo(n)})}(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return function(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var n=Object(E.a)({},e),r=e.publicKeyImporters[t.number+1],a=e.publicKeyImporters[t.number];return n.publicKeyImporters[t.number+1]=a,n.publicKeyImporters[t.number]=r,So(n,{fingerprint:Mo(n)})}(e,t);case ma:return function(e,t){for(var n=Object.values(e.publicKeyImporters),r=n.map(function(e){return e.publicKey}).sort().map(function(e){return n.find(function(t){return t.publicKey===e})}),a={},o=1;o<=r.length;o++)a[o]=r[o-1];var i=Object(E.a)({},e,{publicKeyImporters:a});return So(i,{fingerprint:Mo(i)})}(e);case ha:return So(e,{address:t.value});default:return e}},spend:ni,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:No,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return function(e,t){var n=e.addressType,r=t.value,a=Object(V.multisigBIP32Root)(n,r),o=Object(E.a)({},e,{network:r,defaultBIP32Path:a});return Ao(e,o,a),o}(e,t);case ae:return function(e,t){var n=t.value,r=e.network,a=Object(V.multisigBIP32Root)(n,r),o=Object(E.a)({},e,{addressType:n,defaultBIP32Path:a});return Ao(e,o,a),o}(e,t);case ne:return function(e,t){for(var n=t.value,r={},a=1;a<=n;a++)r[a]=e.extendedPublicKeyImporters[a]||Object(E.a)({},_o,{name:"Extended Public key ".concat(a)});return Object(E.a)({},e,{extendedPublicKeyImporters:r})}(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return Ro(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ro(Ro(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ro(Ro(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return Ro(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return Ro(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return Ro(function(e,t){var n=Object(E.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&n.extendedPublicKeyImporters[t.number].method!==ko?(n.finalizedNetwork=e.network,n.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.extendedPublicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==ko?e+1:e},0)&&(n.finalizedNetwork="",n.finalizedAddressType="",Object.values(n.extendedPublicKeyImporters).forEach(function(e){return e.conflict=!1})),n}(e,t),t,"finalized");case Dr:return Object(E.a)({},e,{configuring:t.value});default:return e}},wallet:ri}),oi=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ii=Object(l.e)(ai,oi(Object(l.a)(u.a,p.a,m.a)));i.a.render(a.a.createElement(c.a,{store:ii},a.a.createElement(go,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/caravan","/service-worker.js");Po?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):yo(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):yo(e)})}}()},154:function(e,t,n){e.exports={feeMagicBtn:"styles_feeMagicBtn__3R6H-",utxoTxid:"styles_utxoTxid__1oJ63",outputsFormInput:"styles_outputsFormInput__2eCJm",unconfirmed:"styles_unconfirmed__1u5jD",spent:"styles_spent__1ho2q"}},185:function(e,t,n){"use strict";n(349),n(356),n(280),n(231),n(232),n(233),Object.defineProperty(t,"__esModule",{value:!0}),t.toHexString=function(e){return Array.prototype.map.call(e,function(e){return("0"+(255&e).toString(16)).slice(-2)}).join("")},t.validateHex=function(e){if(e.length%2)return"invalid hex - odd-length string";if(!/^[0-9A-Fa-f]*$/.test(e))return"invalid hex - invalid characters";return""},t.satoshisToBitcoins=function(e){return new a.default(e).shiftedBy(-8)},t.bitcoinsToSatoshis=function(e){return new a.default(e).shiftedBy(8)};var r,a=(r=n(361))&&r.__esModule?r:{default:r}},196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.networkData=function(e){switch(e){case a.MAINNET:return r.networks.bitcoin;case a.TESTNET:default:return r.networks.testnet}},t.networkLabel=function(e){switch(e){case a.MAINNET:return"Mainnet";case a.TESTNET:default:return"Testnet"}},t.NETWORKS=t.TESTNET=t.MAINNET=void 0;var r=n(284);t.MAINNET="mainnet";t.TESTNET="testnet";var a={MAINNET:"mainnet",TESTNET:"testnet"};t.NETWORKS=a},295:function(e,t,n){"use strict";var r=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedInteraction=t.WalletInteraction=t.ERROR=t.WARNING=t.INFO=t.ACTIVE=t.PENDING=t.UNSUPPORTED=void 0,n(243),n(244),n(298),n(299),n(300),n(53),n(301),n(1048),n(1049);var a,o=(a=n(1052))&&a.__esModule?a:{default:a};function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}t.UNSUPPORTED="unsupported";t.PENDING="pending";t.ACTIVE="active";t.INFO="info";t.WARNING="warning";t.ERROR="error";var h=function(){function e(t){var n=t.network;d(this,e),this.network=n,this.environment=o.default.getParser(window.navigator.userAgent),this.failureText="",this.failureCode=""}return m(e,[{key:"isSupported",value:function(){return!0}},{key:"messages",value:function(){var e={pending:[],active:[],unsupported:[]};return e}},{key:"hasMessages",value:function(){return this.messages().length>0}},{key:"messagesFor",value:function(e){var t,n=e.walletState,r=e.level,a=e.code,o=e.text,i=this.messages();t=n?i[n]:i.unsupported.concat(i.pending).concat(i.active);for(var l=[],c=0;c<t.length;c++){var s=t[c];r&&s.level!==r||(a&&!(s.code||"").includes(a)||o&&!(s.text||"").includes(o)||l.push(s))}return l}},{key:"hasMessagesFor",value:function(e){var t=e.walletState,n=e.level,r=e.code,a=e.text;return this.messagesFor({walletState:t,level:n,code:r,text:a}).length>0}},{key:"messageFor",value:function(e){var t=e.walletState,n=e.level,r=e.code,a=e.text,o=this.messagesFor({walletState:t,level:n,code:r,text:a});return o.length>0?o[0]:null}},{key:"messageTextFor",value:function(e){var t=e.walletState,n=e.level,r=e.code,a=e.text,o=this.messageFor({walletState:t,level:n,code:r,text:a});return o?o.text:null}},{key:"run",value:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}})}}]),e}();t.WalletInteraction=h;var f=function(e){function t(e){var n,r=e.network,a=e.failureText,o=e.failureCode;return d(this,t),(n=l(this,s(t).call(this,{network:r}))).failureText=a,n.failureCode=o,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,h),m(t,[{key:"messages",value:function(){var e=c(s(t.prototype),"messages",this).call(this);e.pending.push({level:"error",code:this.failureCode,text:this.failureText})}},{key:"isSupported",value:function(){return!1}}]),t}();t.UnsupportedInteraction=f},383:function(e,t,n){},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(185);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(888);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var o=n(978);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(196);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var l=n(526);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=n(979);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var s=n(983);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var u=n(984);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var d=n(1009);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})})},526:function(e,t,n){"use strict";n(231),n(232),n(233),Object.defineProperty(t,"__esModule",{value:!0}),t.scriptToOps=function(e){return r.script.toASM(e.output)},t.scriptToHex=function(e){return e.output.toString("hex")};var r=n(284)},653:function(e){e.exports={a:"0.1.5"}},669:function(e,t,n){e.exports=n(1316)},888:function(e,t,n){"use strict";n(349),n(356),n(280),n(889),n(231),n(890),n(895),n(232),n(496),n(364),n(233),n(365),n(897),Object.defineProperty(t,"__esModule",{value:!0}),t.bip32PathToSequence=function(e){return e.split("/").splice(1).map(function(e){return"'"===e.substr(-1)?parseInt(e.slice(0,-1),10)+i:parseInt(e,10)})},t.bip32SequenceToPath=function(e){return"m/"+e.map(function(e){return e>=i?"".concat(e-i,"'"):e.toString()}).join("/")},t.validateBIP32Path=function(e,t){if(null===e||void 0===e||""===e)return"BIP32 path cannot be blank.";if(!e.match(l))return"BIP32 path is invalid.";if(t&&"hardened"===t.mode&&!e.match(c))return"BIP32 path must be fully-hardened.";if(t&&"unhardened"===t.mode&&!e.match(s))return"BIP32 path cannot include hardened segments.";return function(e){for(var t=0;t<e.length;t++){var n=e[t],r=p(n);if(""!==r)return r}return""}(e.toLowerCase().split("/").slice(1))},t.deriveChildPublicKey=function e(t,n,i){if("m/"===n.slice(0,2))return e(t,n.slice(2),i);var l=o.fromBase58(t,(0,a.networkData)(i));var c=l.derivePath(n);return(0,r.toHexString)(c.publicKey)},t.deriveChildExtendedPublicKey=function e(t,n,r){if("m/"===n.slice(0,2))return e(t,n.slice(2),r);var i=o.fromBase58(t,(0,a.networkData)(r));var l=i.derivePath(n);return l.toBase58()},t.HARDENING_OFFSET=void 0;var r=n(185),a=n(196),o=n(380),i=Math.pow(2,31);t.HARDENING_OFFSET=i;var l=/^(m\/)?(\d+'?\/)*\d+'?$/,c=/^(m\/)?(\d+'\/)*\d+'$/,s=/^(m\/)?(\d+\/)*\d+$/,u=Math.pow(2,31)-1,d=Math.pow(2,32)-1;function p(e){if(null===e||void 0===e||""===e)return"BIP32 path segment cannot be blank.";var t,n;"'"===e.substr(e.length-1)?(t=e.substr(0,e.length-1),n=!0):(t=e,n=!1);var r,a="Invalid BIP32 path segment.";try{r=parseInt(t,10)}catch(o){return a}return Number.isNaN(r)||r.toString().length!==t.length?a:r<0?a:r>(n?u:d)?"BIP32 index is too high.":""}},9:function(e,t,n){"use strict";n(287),n(288),n(116),n(554),n(555),n(53),Object.defineProperty(t,"__esModule",{value:!0});var r={TREZOR:!0,LEDGER:!0,HERMIT:!0,HardwareWalletExportPublicKey:!0,HardwareWalletExportExtendedPublicKey:!0,HardwareWalletSignMultisigTransaction:!0};t.HardwareWalletExportPublicKey=function(e){var t=e.walletType,n=e.network,r=e.bip32Path,l=e.bip32Paths;switch(t){case c:return new o.TrezorExportPublicKey({network:n,bip32Path:r,bip32Paths:l});case s:return new i.LedgerExportPublicKey({network:n,bip32Path:r,bip32Paths:l});default:return new a.UnsupportedInteraction({network:n,failureCode:"unsupported",failureText:"This wallet is not supported when exporting public keys."})}},t.HardwareWalletExportExtendedPublicKey=function(e){var t=e.walletType,n=e.network,r=e.bip32Path;switch(t){case c:return new o.TrezorExportExtendedPublicKey({network:n,bip32Path:r});case s:return new i.LedgerExportExtendedPublicKey({network:n,bip32Path:r});default:return new a.UnsupportedInteraction({network:n,failureCode:"unsupported",failureText:"This wallet is not supported when exporting extended public keys."})}},t.HardwareWalletSignMultisigTransaction=function(e){var t=e.walletType,n=e.network,r=e.inputs,l=e.outputs,u=e.bip32Paths;switch(t){case c:return new o.TrezorSignMultisigTransaction({network:n,inputs:r,outputs:l,bip32Paths:u});case s:return new i.LedgerSignMultisigTransaction({network:n,inputs:r,outputs:l,bip32Paths:u});default:return new a.UnsupportedInteraction({network:n,failureCode:"unsupported",failureText:"This wallet is not supported when signing multisig transactions."})}},t.HERMIT=t.LEDGER=t.TREZOR=void 0;var a=n(295);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var o=n(1053);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=n(1180);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var l=n(1256);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var c="trezor";t.TREZOR=c;var s="ledger";t.LEDGER=s;t.HERMIT="hermit"},902:function(e,t){},905:function(e,t){},925:function(e,t){},927:function(e,t){},978:function(e,t,n){"use strict";(function(e){n(381),n(280),n(231),n(232),n(233),Object.defineProperty(t,"__esModule",{value:!0}),t.validateExtendedPublicKey=function(e,t){if(null===e||void 0===e||""===e)return"Extended public key cannot be blank.";var n="'xpub'";t===a.NETWORKS.TESTNET&&(n+=" or 'tpub'");var r="Extended public key must begin with ".concat(n,".");if(e.length<111)return"Extended public key length is too short.";var o=e.slice(0,4);if("xpub"!==o&&(t!==a.NETWORKS.TESTNET||"tpub"!==o))return r;try{i.fromBase58(e,(0,a.networkData)(t))}catch(l){return"Invalid extended public key: ".concat(l)}return""},t.validatePublicKey=function(t){if(null===t||void 0===t||""===t)return"Public key cannot be blank.";var n=(0,r.validateHex)(t);if(""!==n)return n;try{o.ECPair.fromPublicKey(e.from(t,"hex"))}catch(a){return"Invalid public key ".concat(a,".")}return""},t.compressPublicKey=function(t){var n=e.from(t,"hex"),r=0!==(1&n[64])?3:2,a=e.alloc(1);return a[0]=r,e.concat([a,n.slice(1,33)]).toString("hex")};var r=n(185),a=n(196),o=n(284),i=n(380)}).call(this,n(17).Buffer)},979:function(e,t,n){"use strict";n(364),n(365),n(980),Object.defineProperty(t,"__esModule",{value:!0}),t.validateAddress=function(e,t){if(!e||""===e.trim())return"Address cannot be blank.";var n=t===o.NETWORKS.TESTNET?l:i,r=e.match(s),d=n+(r?u:c);if(!e.match(d))return t===o.NETWORKS.TESTNET?"Address must start with one of 'tb1', 'm', 'n', or '2' followed by letters or digits.":"Address must start with either of 'bc1', '1' or '3' followed by letters or digits.";var p=(0,a.default)(e);if(!p)return"Address is invalid.";if(t===o.NETWORKS.TESTNET&&!p.testnet)return"This is a ".concat(o.NETWORKS.MAINNET," address.");if(t===o.NETWORKS.MAINNET&&p.testnet)return"This is a ".concat(o.NETWORKS.TESTNET," address.");return""};var r,a=(r=n(982))&&r.__esModule?r:{default:r},o=n(196);var i="^(bc1|[13])",l="^(tb1|bcrt1|[mn2])",c="[A-HJ-NP-Za-km-z1-9]+$",s=/^(tb|bc)/,u="[ac-hj-np-z02-9]+$"},983:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateFeeRate=function(e){var t;try{t=new a.default(e)}catch(n){return"Invalid fee rate."}if(t.isLessThanOrEqualTo(i))return"Fee rate must be positive.";if(t.isGreaterThan(l))return"Fee rate is too high.";return""},t.validateFeeBTC=function(e,t){var n;try{n=new a.default(e)}catch(r){return"Invalid fee."}if(n.isLessThan(i))return"Fee cannot be negative.";if(n.isGreaterThan((0,o.satoshisToBitcoins)(t)))return"Fee is too high.";if(n.isGreaterThan(c))return"Fee is too high.";return""},t.validateOutputAmountBTC=function(e,t){var n;try{n=new a.default(e)}catch(r){return"Invalid output amount."}if(n.isLessThanOrEqualTo(i))return"Output amount must be positive.";if(n.isLessThanOrEqualTo((0,o.satoshisToBitcoins)(s)))return"Output amount is too small.";if((0,o.bitcoinsToSatoshis)(n).dp())return"Invalid output amount.";if("undefined"!==typeof t&&n.isGreaterThan((0,o.satoshisToBitcoins)(t)))return"Output amount is too large.";return""};var r,a=(r=n(361))&&r.__esModule?r:{default:r},o=n(185);var i=(0,a.default)(0),l=new a.default(1e3),c=new a.default(.025),s=(0,a.default)(546)},984:function(e,t,n){"use strict";(function(e){n(985),n(987),n(988),n(381),n(989),n(990),n(996),n(529),n(349),n(356),n(280),n(231),n(1e3),n(232),n(496),n(364),n(233),n(1003),n(365),n(1004),Object.defineProperty(t,"__esModule",{value:!0}),t.multisigBIP32Root=f,t.multisigBIP32Path=function(e,t,n){var r=f(e,t);if(r)return r+"/".concat(n||"0");return null},t.multisigAddressType=b,t.multisigRequiredSigners=function(e){return b(e)===h.P2SH_P2WSH?e.redeem.redeem.m:e.redeem.m},t.multisigTotalSigners=E,t.multisigRedeemScript=v,t.multisigWitnessScript=g,t.multisigPublicKeys=P,t.multisigAddress=function(e){return e.address},t.generateMultisigFromPublicKeys=function(t,n,r){for(var o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];var c=p.payments.p2ms({m:r,pubkeys:i.map(function(t){return e.from(t,"hex")}),network:(0,a.networkData)(t)});return y(n,c)},t.generateMultisigFromHex=function(t,n,r){var o=p.payments.p2ms({output:e.from(r,"hex"),network:(0,a.networkData)(t)});return y(n,o)},t.estimateMultisigTransactionFeeRate=function(e){return new r.default(e.feesInSatoshis).dividedBy(S(e)).toFixed(0)},t.estimateMultisigTransactionFee=function(e){return new r.default(e.feesPerByteInSatoshis).multipliedBy(S(e))},t.unsignedMultisigTransaction=function(e,t,n){var r=new p.TransactionBuilder;r.setVersion(1),r.network=(0,a.networkData)(e);for(var o=0;o<t.length;o+=1){var i=t[o];r.addInput(i.txid,i.index)}for(var l=0;l<n.length;l+=1){var c=n[l];r.addOutput(c.address,c.amountSats.toNumber())}return r.buildIncomplete()},t.validateMultisigSignature=function(t,n,r,a){for(var o=function(e,t,n){return b(n.multisig)===h.P2WSH||b(n.multisig)===h.P2SH_P2WSH?e.hashForWitnessV0(t,g(n.multisig).output,n.amountSats.toNumber(),p.Transaction.SIGHASH_ALL):e.hashForSignature(t,v(n.multisig).output,p.Transaction.SIGHASH_ALL)}(t,n,r),i=function(t){var n=new e(t,"hex"),r=s.default.decode(n),a=r.r,o=r.s,i=a;a.byteLength>32&&(i=a.slice(1));var l=new e(64);return l.set(new e(i),0),l.set(new e(o),32),l}(I(a)),l=P(r.multisig),c=0;c<E(r.multisig);c++){var u=l[c],d=e.from(u,"hex"),m=p.ECPair.fromPublicKey(d);if(m.verify(o,i))return u}return!1},t.signedMultisigTransaction=function(t,n,r){for(var a=p.Transaction.fromHex(t.toHex()),o=function(t){var o,i=n[t],l=P(i.multisig),c=l.map(function(e){return r[t][e]}).filter(function(e){return e?I(e):e});if(b(i.multisig)===h.P2WSH){var s=O(i.multisig,c);a.setWitness(t,s)}else if(b(i.multisig)===h.P2SH_P2WSH){var u=O(i.multisig,c);a.setWitness(t,u);var d=v(i.multisig);a.ins[t].script=e.from([d.output.length].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(o=d.output)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()))}else{var m=function(t,n){var r=n.map(function(e){return"".concat(I(e),"01")}).join(" "),a="OP_0 ".concat(r),o=p.script.fromASM(a),i=p.payments.p2ms({network:t.network,output:e.from(v(t).output,"hex"),input:o});return y(b(t),i)}(i.multisig,c);a.ins[t].script=m.input}},i=0;i<n.length;i++)o(i);return a},t.MULTISIG_ADDRESS_TYPES=t.P2WSH=t.P2SH_P2WSH=t.P2SH=void 0;var r=d(n(361)),a=n(196),o=n(1006),i=n(1007),l=n(1008),c=n(185),s=d(n(366)),u=n(526);function d(e){return e&&e.__esModule?e:{default:e}}var p=n(284),m="P2SH";t.P2SH=m;t.P2SH_P2WSH="P2SH-P2WSH";t.P2WSH="P2WSH";var h={P2SH:m,P2SH_P2WSH:"P2SH-P2WSH",P2WSH:"P2WSH"};function f(e,t){var n=t===a.NETWORKS.MAINNET?"0'":"1'";switch(e){case h.P2SH:return"m/45'/".concat(n,"/0'");case h.P2SH_P2WSH:return"m/48'/".concat(n,"/0'/1'");case h.P2WSH:return"m/48'/".concat(n,"/0'/2'");default:return null}}function b(e){return e.redeem.redeem?h.P2SH_P2WSH:e.address.match(/^(tb|bc)/)?h.P2WSH:h.P2SH}function E(e){return b(e)===h.P2SH_P2WSH?e.redeem.redeem.n:e.redeem.n}function v(e){switch(b(e)){case h.P2SH:case h.P2SH_P2WSH:return e.redeem;case h.P2WSH:default:return null}}function g(e){switch(b(e)){case h.P2SH:return null;case h.P2SH_P2WSH:return e.redeem.redeem;case h.P2WSH:return e.redeem;default:return null}}function P(e){return(b(e)===m?v(e):g(e)).pubkeys.map(c.toHexString)}function y(e,t){switch(e){case h.P2SH:return p.payments.p2sh({redeem:t});case h.P2SH_P2WSH:return p.payments.p2sh({redeem:p.payments.p2wsh({redeem:t})});case h.P2WSH:return p.payments.p2wsh({redeem:t});default:return null}}function S(e){switch(e.addressType){case h.P2SH:return(0,o.estimateMultisigP2SHTransactionLength)(e);case h.P2SH_P2WSH:return(0,i.estimateMultisigP2SHP2WSHTransactionLength)(e);case h.P2WSH:return(0,l.estimateMultisigP2WSHTransactionLength)(e);default:return null}}function I(e){return parseInt(e.slice(2,4),16)==(e.length-4)/2?e:e.slice(0,-2)}function O(t,n){var r=[""].concat(n.map(function(e){return I(e)+"01"})),a=g(t);return r.push((0,u.scriptToHex)(a)),r.map(function(t){return e.from(t,"hex")})}t.MULTISIG_ADDRESS_TYPES=h}).call(this,n(17).Buffer)}},[[669,1,2]]]);
//# sourceMappingURL=main.be094f2c.chunk.js.map