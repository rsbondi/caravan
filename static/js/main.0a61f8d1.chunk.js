(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1029:function(e,t,n){"use strict";(function(e){var r=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.exportLedgerPubKey=function(e,t){var n,i;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.awrap(t.getWalletPublicKey(e,{verify:!0}));case 3:if(!(n=o.sent).publicKey){o.next=9;break}return i=(0,a.compressPublicKey)(n.publicKey),o.abrupt("return",{success:!0,publicKey:i});case 9:return o.abrupt("return",null);case 10:o.next=15;break;case 12:return o.prev=12,o.t0=o.catch(0),o.abrupt("return",{success:!1,text:o.t0.message});case 15:case"end":return o.stop()}},null,null,[[0,12]])},t.signMultisigSpendLedger=w,t.LedgerSignMultisigTransaction=t.LedgerExportExtendedPublicKey=t.LedgerExportPublicKey=t.LedgerExportHDNode=t.LedgerInteraction=void 0,n(261),n(262),n(215),n(264),n(265),n(266),n(512),n(513),n(259),n(519),n(362),n(514),n(267);var a=n(3),i=n(260);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t,n){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=n(1030),b=n(549),E=n(1096).default,v=n(1103).default,g=function(e){function t(){return s(this,t),u(this,p(t).apply(this,arguments))}return m(t,i.WalletInteraction),l(t,[{key:"messages",value:function(){var e=d(p(t.prototype),"messages",this).call(this);return e[i.PENDING].push({level:i.INFO,text:"Make sure your Ledger hardware wallet is plugged in.",code:"ledger.device.connect"}),e[i.PENDING].push({level:i.INFO,text:"Make sure you have unlocked your Ledger hardware wallet.",code:"ledger.device.unlocked"}),e[i.PENDING].push({level:i.INFO,text:"Make sure you have opened your Ledger hardware wallet to the Bitcoin app.",code:"ledger.app.bitcoin"}),e[i.ACTIVE].push({level:i.INFO,text:"Communicating with Ledger hardware wallet...",code:"ledger.active"}),e}}]),t}();t.LedgerInteraction=g;var P=function(e){function t(e){var n,r=e.network,a=e.bip32Path,i=e.bip32Paths;return s(this,t),(n=u(this,p(t).call(this,{network:r}))).bip32Paths=i||[a],n}return m(t,g),l(t,[{key:"messages",value:function(){var e=d(p(t.prototype),"messages",this).call(this);return e[i.ACTIVE].push({level:i.WARNING,text:"Your Ledger's screen  may display a 'WARNING!' message.  Click both buttons on your Ledger to proceed to confirming the BIP32 path.",code:"ledger.bip32.warning"}),e[i.ACTIVE].push({level:i.WARNING,text:"Your Ledger will display part of the BIP32 path ".concat(this.bip32Path," and claim it is 'unusual'.  Click both buttons on your Ledger to proceed.  You may need to do this multiple times."),code:"ledger.bip32.instructions"}),e}},{key:"run",value:function(){var e,t,n,a,i,o;return r.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.awrap(E.create());case 2:if(e=s.sent,t=new v(e),1!==this.bip32Paths.length){s.next=11;break}return s.next=7,r.awrap(t.getWalletPublicKey(this.bip32Paths[0],{verify:!0}));case 7:return n=s.sent,s.abrupt("return",n);case 11:if(!(this.bip32Paths.length>1)){s.next=25;break}a=[],i=0;case 14:if(!(i<this.bip32Paths.length)){s.next=22;break}return s.next=17,r.awrap(t.getWalletPublicKey(this.bip32Paths[i],{verify:0===i}));case 17:o=s.sent,a.push(o);case 19:i++,s.next=14;break;case 22:return s.abrupt("return",a);case 25:throw new Error("You must provide a bip32 path string or an array of bip32 paths");case 26:case"end":return s.stop()}},null,this)}}]),t}();t.LedgerExportHDNode=P;var y=function(e){function t(){return s(this,t),u(this,p(t).apply(this,arguments))}return m(t,P),l(t,[{key:"run",value:function(){var e,n;return r.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.awrap(d(p(t.prototype),"run",this).call(this));case 2:if(!(e=i.sent).publicKey){i.next=8;break}return n=(0,a.compressPublicKey)(e.publicKey),i.abrupt("return",n);case 8:if(!Array.isArray(e)){i.next=12;break}return i.abrupt("return",e.map(function(e){return(0,a.compressPublicKey)(e.publicKey)}));case 12:throw new{message:"Unable to export public key."};case 13:case"end":return i.stop()}},null,this)}}]),t}();t.LedgerExportPublicKey=y;var S=function(e){function t(){return s(this,t),u(this,p(t).apply(this,arguments))}return m(t,P),l(t,[{key:"run",value:function(){var e,n,a,i,o,s,c;return r.async(function(l){for(;;)switch(l.prev=l.next){case 0:return"undefined"===typeof this.bip32Path&&(this.bip32Path=this.bip32Paths[0]),l.next=3,r.awrap(d(p(t.prototype),"run",this).call(this));case 3:return e=l.sent,l.next=6,r.awrap(E.create());case 6:return n=l.sent,a=this.bip32Path.split("/").slice(1).join("/"),i=this.bip32Path.split("/").slice(1,-1).join("/"),o=new v(n),l.next=12,r.awrap(o.getWalletPublicKey(i,!1));case 12:return s=l.sent,(c=x(s,e,a)).network.bip32.public=O(this.network)?70617039:76067358,l.abrupt("return",c.toBase58());case 16:case"end":return l.stop()}},null,this)}}]),t}();t.LedgerExportExtendedPublicKey=S;var I=function(e){function t(e){var n,r=e.network,a=e.inputs,i=e.outputs,o=e.bip32Paths;return s(this,t),(n=u(this,p(t).call(this,{network:r}))).inputs=a,n.outputs=i,n.bip32Paths=o,n}return m(t,g),l(t,[{key:"messages",value:function(){var e=d(p(t.prototype),"messages",this).call(this);return e}},{key:"run",value:function(){var e,t;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(E.create());case 2:return(e=n.sent).setExchangeTimeout(2e4*this.outputs.length),t=new v(e),n.abrupt("return",w(this.bip32Paths,this.inputs,this.outputs,O(this.network),t));case 6:case"end":return n.stop()}},null,this)}}]),t}();function O(e){return e===a.NETWORKS.TESTNET}function w(e,t,n,i,o){var s,c,l,u,d,p,m,h,b,E,v,g;return r.async(function(P){for(;;)switch(P.prev=P.next){case 0:for((s=new f.TransactionBuilder).setVersion(1),i&&(s.network=f.networks.testnet),c=0;c<n.length;c++)s.addOutput(n[c].address,n[c].amountSats.toNumber());for(l=0;l<t.length;l++)s.addInput(t[l].txid,t[l].index);return u=s.buildIncomplete(),d=u.toHex(),p=(0,a.multisigAddressType)(t[0].multisig),m=p==a.MULTISIG_ADDRESS_TYPES.P2SH_P2WSH||p==a.MULTISIG_ADDRESS_TYPES.P2WSH,P.next=11,r.awrap(o.splitTransaction(d,m));case 11:return h=P.sent,P.next=14,r.awrap(o.serializeTransactionOutputs(h).toString("hex"));case 14:return b=P.sent,E=t.map(function(e){return T(o,e)}),v=e.map(function(e){return e.split("/").slice(1).join("/")}),P.next=19,r.awrap(o.signP2SHTransaction(E,v,b,0,1,m,1));case 19:return g=P.sent,P.abrupt("return",g);case 21:case"end":return P.stop()}})}function T(e,t){var n=(0,a.multisigAddressType)(t.multisig),r=e.splitTransaction(t.transactionHex,!0);return n==a.MULTISIG_ADDRESS_TYPES.P2SH?[r,t.index,(0,a.scriptToHex)((0,a.multisigRedeemScript)(t.multisig))]:[r,t.index,(0,a.scriptToHex)((0,a.multisigWitnessScript)(t.multisig))]}function x(t,n,r){var i=(0,a.compressPublicKey)(t.publicKey),o=(0,a.compressPublicKey)(n.publicKey),s=b.fromPublicKey(e.from(o,"hex"),e.from(n.chainCode,"hex")),c=b.fromPublicKey(e.from(i,"hex"),e.from(t.chainCode,"hex"));s.parentFingerprint=c.fingerprint,s.depth=r.split("/").length-1;var l=(0,a.bip32PathToSequence)(r);return s.index=l.slice(-1)[0],s.path=r,s}t.LedgerSignMultisigTransaction=I}).call(this,n(21).Buffer)},1031:function(e,t){},1034:function(e,t){},1105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HermitSignTransaction=t.HermitExportExtendedPublicKey=t.HermitExportPublicKey=t.HermitExport=t.HermitInteraction=void 0,n(261),n(262),n(264),n(215),n(265),n(266),n(362),n(495),n(350),n(259),n(1106),n(515);var r=s(n(1108)),a=s(n(1110)),i=n(3),o=n(260);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function m(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){return u(this,t),m(this,h(t).apply(this,arguments))}return f(t,o.WalletInteraction),p(t,[{key:"_parseQRCodeData",value:function(e){try{var t=r.default.decode.asBytes(e);return this._decompressAndParseJSON(t)}catch(n){throw new Error("Unable to parse QR code (Base32 decode error).")}}},{key:"_decompressAndParseJSON",value:function(e){try{var t=a.default.inflate(e,{to:"string"});return this._parseJSON(t)}catch(n){throw new Error("Unable to parse QR code (gzip decompress error).")}}},{key:"_parseJSON",value:function(e){try{return JSON.parse(e)}catch(t){throw new Error("Unable to parse QR code (JSON parse error).")}}},{key:"_encodeQRCodeData",value:function(e){try{var t=JSON.stringify(e);return this._compressAndBase32Encode(t)}catch(n){throw console.error(n),new Error("Unable to create QR code (JSON encode error).")}}},{key:"_compressAndBase32Encode",value:function(e){try{var t=a.default.deflate(e,{gzip:!0});return this._base32Encode(t)}catch(n){throw console.error(n),new Error("Unable to create QR code (gzip compress error).")}}},{key:"_base32Encode",value:function(e){try{return r.default.encode(e)}catch(t){throw console.error(t),new Error("Unable to create QR code (Base32 encode error).")}}}]),t}();t.HermitInteraction=E;var v=function(e){function t(){return u(this,t),m(this,h(t).apply(this,arguments))}return f(t,E),p(t,[{key:"messages",value:function(){var e=l(h(t.prototype),"messages",this).call(this);return e[o.ACTIVE].push({level:o.INFO,code:"hermit.scanning",text:"Scan Hermit QR code now."}),e}}]),t}();t.HermitExport=v;var g=function(e){function t(e){var n,r=e.network,a=e.bip32Path;return u(this,t),(n=m(this,h(t).call(this,{network:r}))).bip32Path=a,n}return f(t,v),p(t,[{key:"messages",value:function(){var e=l(h(t.prototype),"messages",this).call(this),n="Run the following Hermit command, replacing the BIP32 path if you need to:",r="export-pub ".concat(this.bip32Path);return e[o.PENDING].push({level:o.INFO,code:"hermit.command",instructions:n,mode:"wallet",command:r,text:"".concat(n," '").concat(r,"'")}),e}},{key:"parse",value:function(e){var t=this._parseQRCodeData(e),n=t.xpub;if(!t.pubkey)throw n?new Error("Make sure you export a plain public key and NOT an extended public key."):new Error("Did not receive a public key.");return t}}]),t}();t.HermitExportPublicKey=g;var P=function(e){function t(e){var n,r=e.network,a=e.bip32Path;return u(this,t),(n=m(this,h(t).call(this,{network:r}))).bip32Path=a,n}return f(t,v),p(t,[{key:"messages",value:function(){var e=l(h(t.prototype),"messages",this).call(this),n="Run the following Hermit command, replacing the BIP32 path if you need to:",r="export-xpub ".concat(this.bip32Path);return e[o.PENDING].push({level:o.INFO,code:"hermit.command",instructions:n,mode:"wallet",command:r,text:"".concat(n," '").concat(r,"'")}),e}},{key:"parse",value:function(e){var t=this._parseQRCodeData(e),n=t.xpub,r=t.pubkey;if(!n)throw r?new Error("Make sure you export an extended public key and NOT a plain public key."):new Error("Did not receive an extended public key.");return t}}]),t}();t.HermitExportExtendedPublicKey=P;var y=function(e){function t(e){var n,r=e.network,a=e.inputs,i=e.outputs,o=e.bip32Paths;return u(this,t),(n=m(this,h(t).call(this,{network:r}))).inputs=a,n.outputs=i,n.bip32Paths=o,n.supported=!0,n.inputAddressType="",n}return f(t,v),p(t,[{key:"isSupported",value:function(){return this.inputsAreSupported()&&this.outputsAreSupported()}},{key:"outputsAreSupported",value:function(){if(this.outputs&&this.outputs.length)for(var e=0;e<this.outputs.length;e++){if(this.outputs[e].address.match(/^(tb|bc)/))return!1}return!0}},{key:"inputsAreSupported",value:function(){if(this.inputs&&this.inputs.length)for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=(0,i.multisigAddressType)(t.multisig);if(n!==i.MULTISIG_ADDRESS_TYPES.P2SH)return this.inputAddressType=n,!1}return!0}},{key:"messages",value:function(){var e=l(h(t.prototype),"messages",this).call(this);if(this.inputsAreSupported()||e[o.UNSUPPORTED].push({level:o.ERROR,code:"hermit.unsupported.inputaddress",text:"Unsupported input address type ".concat(this.inputAddressType,", must be P2SH.")}),this.outputsAreSupported()||e[o.UNSUPPORTED].push({level:o.ERROR,code:"hermit.unsupported.outputaddress",text:"Unsupported output address type. bech32 addresses are unsupported."}),!this.inputsAreSupported()||!this.outputsAreSupported())return e;var n="Scan this QR code into Hermit by running the following command:";e[o.PENDING].push({level:o.INFO,code:"hermit.command",instructions:n,mode:"wallet",command:"sign-bitcoin",text:"".concat(n," '").concat("sign-bitcoin","'")});var r=this.signatureRequestData(),a=this._encodeQRCodeData(r);return e[o.PENDING].push({level:o.INFO,code:"hermit.signature_request",data:r,encodedData:a,text:"Signature Request"}),e}},{key:"signatureRequestData",value:function(){for(var e={},t=0;t<this.inputs.length;t++){var n=this.inputs[t],r=this.bip32Paths[t],a=(0,i.scriptToHex)((0,i.multisigRedeemScript)(n.multisig));e[a]||(e[a]=[a,r]),e[a].push({txid:n.txid,index:n.index,amount:n.amountSats.toNumber()})}return{inputs:Object.values(e),outputs:this.outputs.map(function(e){return{address:e.address,amount:e.amountSats.toNumber()}})}}},{key:"parse",value:function(e){return this._parseQRCodeData(e).signatures}}]),t}();t.HermitSignTransaction=y},1138:function(e,t){},1141:function(e,t){},1163:function(e,t,n){e.exports=n.p+"static/media/logo.66481e66.png"},1165:function(e,t,n){"use strict";n.r(t);n(601);var r=n(0),a=n.n(r),i=n(30),o=n.n(i),s=n(112),c=n(16),l=n(573),u=n.n(l),d=n(574),p=n.n(d),m=n(575),h=n(1264),f=n(1273),b=n(1274);function E(e,t){return a.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)}function v(e,t){var n=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,t);else{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}var g=n(1263),P=n(113),y=n(1218),S=n(1212),I=n(1216),O=n(1217),w=n(1219),T=n(1167),x=n(1220),j=n(1222),k=n(1225),C=n(1226),_=n(1221),N=n(1223),R=n(1224),K=n(1227),A=function(){return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Disclaimer"}),a.a.createElement(O.a,null,a.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},B=function(){return a.a.createElement("div",null,a.a.createElement(g.a,{mt:4,mb:2},a.a.createElement(P.a,{variant:"h2"},"Welcome to Caravan!")),a.a.createElement(y.a,{container:!0,spacing:3},a.a.createElement(y.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},a.a.createElement(y.a,{item:!0},a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Stateless Multisig Coordinator"}),a.a.createElement(O.a,null,a.a.createElement("p",null,"Caravan is making bitcoin ",a.a.createElement("strong",null,"multisig")," custody easier and safer through transparency and standards."),a.a.createElement("p",null,"Caravan is a ",a.a.createElement("strong",null,"coordination")," software.  It connects to a source of consensus and your keys to build and interact with multisig bitcoin addresses."),a.a.createElement("p",null,"Caravan is also ",a.a.createElement("strong",null,"stateless"),".  It does not itself store any data.  You must safekeep the addresses (and redeem scripts & BIP32 paths) you create.")))),a.a.createElement(y.a,{item:!0},a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Keys"}),a.a.createElement(O.a,null,a.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),a.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind.  Caravan, being stateless, cannot store your private key but it can talk to hardware devices or software applications which do."),a.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),a.a.createElement(y.a,{item:!0},a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Consensus"}),a.a.createElement(O.a,null,a.a.createElement("p",null,"In order to look up address balances and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),a.a.createElement("p",null,"Running a full bitcoin node is the best way to determine the current state of the bitcoin network.  Caravan can be easily configured to use your own bitcoin node for consensus information and broadcasting transactions."),a.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at ",a.a.createElement("code",null,"blockstream.info"),"."))))),a.a.createElement(y.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},a.a.createElement(y.a,{item:!0},a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Learn More"}),a.a.createElement(O.a,null,a.a.createElement(w.a,null,a.a.createElement(T.a,null,a.a.createElement(x.a,null,a.a.createElement(_.a,null)),a.a.createElement(j.a,null,E("https://www.unchained-capital.com/blog/the-caravan-arrives/","Blog Post"))),a.a.createElement(T.a,null,a.a.createElement(x.a,null,a.a.createElement(N.a,null)),a.a.createElement(j.a,null,E("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),a.a.createElement(T.a,null,a.a.createElement(x.a,null,a.a.createElement(R.a,null)),a.a.createElement(j.a,null,E("https://github.com/unchained-capital/caravan","Source Code"))))))),a.a.createElement(y.a,{item:!0},a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Supported Devices"}),a.a.createElement(O.a,null,"Caravan has been tested with the following hardware wallets:",a.a.createElement("ul",null,a.a.createElement("li",null,E("https://shop.trezor.io/product/trezor-one-white","Trezor One")),a.a.createElement("li",null,E("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S"))),"And web browsers:",a.a.createElement("ul",null,a.a.createElement("li",null,E("https://www.google.com/chrome/","Chrome")),a.a.createElement("li",null,E("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),a.a.createElement(k.a,null,a.a.createElement(C.a,{href:"https://github.com/unchained-capital/caravan/issues"},a.a.createElement(K.a,null)," \xa0 Report Issue")))))),a.a.createElement(g.a,{mt:2},a.a.createElement(A,null)))},M=n(8),D=n(10),U=n(12),H=n(11),L=n(13),z=n(589),W=n(1268),F=n(1257),G=n(19),q=n(3),Y=n(1168),X=n(1228),V=n(1229),Q=n(1266),Z=n(1170),J="SET_NETWORK",$="SET_TOTAL_SIGNERS",ee="SET_REQUIRED_SIGNERS",te="SET_ADDRESS_TYPE",ne="SET_FROZEN";function re(e){return{type:ne,value:e}}var ae=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(a)))).handleNetworkChange=function(e){(0,n.props.setNetwork)(e.target.value)},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.frozen;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Network"}),a.a.createElement(O.a,null,a.a.createElement(Y.a,{component:"fieldset"},a.a.createElement(X.a,null,a.a.createElement(V.a,{id:"mainnet",control:a.a.createElement(Q.a,{color:"primary"}),name:"network",value:"mainnet",label:a.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===q.MAINNET,disabled:n}),a.a.createElement(V.a,{id:"testnet",control:a.a.createElement(Q.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===q.TESTNET,disabled:n})),a.a.createElement(Z.a,null,a.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),t}(a.a.Component);var ie={setNetwork:function(e){return{type:J,value:e}}},oe=Object(c.b)(function(e){return{network:e.settings.network,frozen:e.settings.frozen}},ie)(ae),se=n(1230),ce=n(1231),le=(n(347),7),ue=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).renderIncrementRequiredSigners=function(){var e=n.props,t=e.requiredSigners,r=e.totalSigners,i=e.frozen,o=t===r||i;return a.a.createElement(z.a,{color:"primary",onClick:n.handleIncrementRequiredSigners,disabled:o},a.a.createElement(se.a,null))},n.renderDecrementRequiredSigners=function(){var e=n.props,t=e.requiredSigners,r=e.frozen,i=1===t||r;return a.a.createElement(z.a,{color:"secondary",onClick:n.handleDecrementRequiredSigners,disabled:i},a.a.createElement(ce.a,null))},n.renderIncrementTotalSigners=function(){var e=n.props,t=e.totalSigners,r=e.frozen,i=t===le||r;return a.a.createElement(z.a,{color:"primary",onClick:n.handleIncrementTotalSigners,disabled:i},a.a.createElement(se.a,null))},n.renderDecrementTotalSigners=function(){var e=n.props,t=e.requiredSigners,r=e.totalSigners,i=e.frozen,o=r===t||2===r||i;return a.a.createElement(z.a,{color:"secondary",onClick:n.handleDecrementTotalSigners,disabled:o},a.a.createElement(ce.a,null))},n.handleIncrementRequiredSigners=function(e){var t=n.props,r=t.requiredSigners;(0,t.setRequiredSigners)(r+1),e.preventDefault()},n.handleDecrementRequiredSigners=function(e){var t=n.props,r=t.requiredSigners;(0,t.setRequiredSigners)(r-1),e.preventDefault()},n.handleIncrementTotalSigners=function(e){var t=n.props,r=t.totalSigners;(0,t.setTotalSigners)(r+1),e.preventDefault()},n.handleDecrementTotalSigners=function(e){var t=n.props,r=t.totalSigners;(0,t.setTotalSigners)(r-1),e.preventDefault()},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,n=e.totalSigners;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Quorum"}),a.a.createElement(O.a,null,a.a.createElement(g.a,null,a.a.createElement(y.a,{container:!0,justify:"center"},a.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),a.a.createElement(y.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},a.a.createElement(y.a,{item:!0},this.renderIncrementRequiredSigners()),a.a.createElement(y.a,{item:!0},a.a.createElement(P.a,{variant:"h2"},t)),a.a.createElement(y.a,{item:!0},a.a.createElement("small",null,a.a.createElement("p",null,"Required"))),a.a.createElement(y.a,{item:!0},this.renderDecrementRequiredSigners())),a.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},a.a.createElement(y.a,{item:!0},a.a.createElement(P.a,{variant:"h6"},"of"))),a.a.createElement(y.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},a.a.createElement(y.a,{item:!0},this.renderIncrementTotalSigners()),a.a.createElement(y.a,{item:!0},a.a.createElement(P.a,{variant:"h2"},n)),a.a.createElement(y.a,{item:!0},a.a.createElement("small",null,a.a.createElement("p",null,"Total"))),a.a.createElement(y.a,{item:!0},this.renderDecrementTotalSigners())),a.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),t}(a.a.Component);var de={setTotalSigners:function(e){return{type:$,value:e}},setRequiredSigners:function(e){return{type:ee,value:e}}},pe=Object(c.b)(function(e){return e.settings},de)(ue),me=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(a)))).handleTypeChange=function(e){(0,n.props.setType)(e.target.value)},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addressType,n=e.frozen;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Address Type"}),a.a.createElement(O.a,null,a.a.createElement(Y.a,{component:"fieldset"},a.a.createElement(X.a,null,a.a.createElement(V.a,{id:q.P2SH,control:a.a.createElement(Q.a,{color:"primary"}),name:"type",value:q.P2SH,label:q.P2SH,onChange:this.handleTypeChange,checked:t===q.P2SH,disabled:n}),a.a.createElement(V.a,{id:q.P2SH_P2WSH,control:a.a.createElement(Q.a,{color:"primary"}),name:"type",value:q.P2SH_P2WSH,label:q.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===q.P2SH_P2WSH,disabled:n}),a.a.createElement(V.a,{id:q.P2WSH,control:a.a.createElement(Q.a,{color:"primary"}),name:"type",value:q.P2WSH,label:q.P2WSH,onChange:this.handleTypeChange,checked:t===q.P2WSH,disabled:n})),a.a.createElement(Z.a,null,a.a.createElement("small",null,"Choose '",q.P2WSH,"' for best practices, '",q.P2SH,"' for greatest compatibility.")))))}}]),t}(a.a.Component);var he={setType:function(e){return{type:te,value:e}}},fe=Object(c.b)(function(e){return e.settings},he)(me),be=n(1232),Ee=n(1233);function ve(e){return function(t){return{type:e,value:t}}}function ge(e){return function(t,n){return{type:e,number:t,value:n}}}function Pe(e){var t,n={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var a=r[t],i=e[a];n[a]=ge(i)}return n}var ye=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={url_edited:!1},n.handleTypeChange=function(e){var t=n.props,r=t.setType,a=t.network,i=t.setUrl,o=e.target.checked?"private":"public";"private"!==o||n.state.url_edited||i("http://localhost:".concat("mainnet"===a?8332:18332)),r(o)},n.handleUrlChange=function(e){var t=n.props,r=t.setUrl,a=t.setUrlError,i=e.target.value,o=n.validateUrl(i);n.state.url_edited||o||n.setState({url_edited:!0}),r(i),a(o)},n.handleUsernameChange=function(e){var t=n.props,r=t.setUsername,a=t.setUsernameError,i=e.target.value,o=n.validateUsername(i);r(i),a(o)},n.handlePasswordChange=function(e){var t=n.props,r=t.setPassword,a=t.setPasswordError,i=e.target.value,o=n.validatePassword(i);r(i),a(o)},n.toggle=function(){var e=n.props.client,t=e.type.charAt(0).toUpperCase()+e.type.slice(1);return a.a.createElement(V.a,{control:a.a.createElement(be.a,{color:"primary",checked:"private"===e.type,onChange:n.handleTypeChange,value:"private"}),label:t})},n.title=function(){return a.a.createElement(y.a,{container:!0,justify:"space-between"},a.a.createElement(y.a,{item:!0},"Consensus"),a.a.createElement(y.a,{item:!0},n.toggle()))},n.disabled=function(){return!1},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}},{key:"validatePassword",value:function(e){return""}},{key:"validateUsername",value:function(e){return""}},{key:"render",value:function(){var e=this.props,t=e.client,n=e.url_error,r=e.username_error,i=e.password_error;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:this.title()}),a.a.createElement(O.a,null,"public"===t.type?a.a.createElement("div",null,a.a.createElement("p",null,"'Public' uses the ",a.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",a.a.createElement("code",null,"bitcoind")," node."),"undefined"!==typeof this.props.publicNotes&&this.props.publicNotes):a.a.createElement("div",null,a.a.createElement("p",null,"A ",a.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),a.a.createElement("p",null,a.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",E("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),a.a.createElement("form",null,a.a.createElement(y.a,{container:!0,direction:"column"},a.a.createElement(y.a,{item:!0},a.a.createElement(Ee.a,{fullWidth:!0,label:"URL",value:t.url,onChange:this.handleUrlChange,disabled:this.disabled(),error:""!==n,helperText:n})),a.a.createElement(y.a,{item:!0}),a.a.createElement(y.a,{item:!0},a.a.createElement(Ee.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:t.username,onChange:this.handleUsernameChange,disabled:this.disabled(),error:r,helperText:r})),a.a.createElement(y.a,{item:!0},a.a.createElement(Ee.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:t.password,onChange:this.handlePasswordChange,disabled:this.disabled(),error:i,helperText:i})))),"undefined"!==typeof this.props.privateNotes&&this.props.privateNotes)))}}]),t}(a.a.Component);var Se=Object(c.b)(function(e){return{network:e.settings.network,client:e.client,url_error:e.client.url_error,url:e.client.url}},function(e){var t,n={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var a=r[t],i=e[a];n[a]=ve(i)}return n}({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR",setStatus:"SET_CLIENT_STATUS"}))(ye),Ie=n(14),Oe=n.n(Ie),we=n(23),Te=n(22),xe=n.n(Te),je=n(139),ke=n.n(je);function Ce(){return(Ce=Object(we.a)(Oe.a.mark(function e(t,n){var r,a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.a.get(Object(q.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),n));case 3:return r=e.sent,a=r.data,e.next=7,Promise.all(a.map(function(){var e=Object(we.a)(Oe.a.mark(function e(t){var r,a,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.a.get(Object(q.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),n));case 2:return r=e.sent,a=r.data,i=new xe.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(q.satoshisToBitcoins)(i).toFixed(8),amountSats:i,transactionHex:a});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function _e(){return(_e=Object(we.a)(Oe.a.mark(function e(t,n){var r,a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.a.get(Object(q.blockExplorerAPIURL)("/address/".concat(t),n));case 3:return r=e.sent,a=r.data,e.abrupt("return",{used:a.chain_stats.funded_txo_count>0||a.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Ne(){return(Ne=Object(we.a)(Oe.a.mark(function e(t){var n,r;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.a.get(Object(q.blockExplorerAPIURL)("/fee-estimates",t));case 3:return n=e.sent,r=n.data,e.abrupt("return",Math.ceil(r[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Re(){return(Re=Object(we.a)(Oe.a.mark(function e(t,n){var r;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.a.post(Object(q.blockExplorerAPIURL)("/tx",n),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Ke(e,t,n){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(we.a)(Oe.a.mark(function e(t,n,r){var a,i=arguments;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:[],e.abrupt("return",new Promise(function(){var e=Object(we.a)(Oe.a.mark(function e(i,o){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ke()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:n,data:{jsonrpc:"2.0",id:0,method:"".concat(r),params:a}}).then(function(e){return i(e.data)}).catch(o);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Be(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function Me(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function De(){return(De=Object(we.a)(Oe.a.mark(function e(t){var n,r,a,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,a=t.address,i=t.addresses,e.abrupt("return",new Promise(function(){var e=Object(we.a)(Oe.a.mark(function e(t){var o,s,c,l;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=i||[a],e.next=4,Ke(n,r,"listunspent",[0,9999999,o]);case 4:return s=e.sent,c=[],s.result.forEach(function(e){c.push(Ke(n,r,"getrawtransaction",[e.txid]))}),e.next=9,Promise.all(c);case 9:l=e.sent,t(s.result.map(function(e,t){var n=new xe.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:n.toFixed(8),amountSats:Object(q.bitcoinsToSatoshis)(n),transactionHex:l[t].result}})),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ue(e){return He.apply(this,arguments)}function He(){return(He=Object(we.a)(Oe.a.mark(function e(t){var n,r,a,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,a=t.address,e.prev=1,e.next=4,Ke(n,r,"getreceivedbyaddress",[a]);case 4:if("undefined"!==typeof(i=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from "+n);case 7:return e.abrupt("return",{used:i.result>0});case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Le(){return(Le=Object(we.a)(Oe.a.mark(function e(t){var n,r,a,i,o,s;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,a=t.numBlocks,i=void 0===a?2:a,e.next=3,Ke(n,r,"estimatesmartfee",[i]);case 3:return o=e.sent,s=o.result.feerate,e.abrupt("return",Math.ceil(1e5*s));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ze(){return(ze=Object(we.a)(Oe.a.mark(function e(t){var n,r,a,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,a=t.hex,e.prev=1,e.next=4,Ke(n,r,"sendrawtransaction",[a]);case 4:return i=e.sent,e.abrupt("return",i.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var We="public";function Fe(e,t,n){return n.type===We?function(e,t){return Ce.apply(this,arguments)}(e,t):function(e){return De.apply(this,arguments)}(Object(M.a)({},Me(n),{address:e}))}function Ge(e,t,n){return n.type===We?function(e,t){return _e.apply(this,arguments)}(e,t):Ue(Object(M.a)({},Me(n),{address:e}))}function qe(e,t){return t.type===We?function(e){return Ne.apply(this,arguments)}(e):function(e){return Le.apply(this,arguments)}(Object(M.a)({},Me(t),{numBlocks:1}))}function Ye(e,t,n){return n.type===We?function(e,t){return Re.apply(this,arguments)}(e,t):function(e){return ze.apply(this,arguments)}(Object(M.a)({},Me(n),{hex:e}))}var Xe=n(1236),Ve=n(1237),Qe=n(1238),Ze=n(1239),Je=n(1240),$e=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return a.a.createElement(g.a,null,a.a.createElement(Xe.a,null,a.a.createElement(Ve.a,null,a.a.createElement(Qe.a,null,a.a.createElement(Ze.a,null,"Name"),a.a.createElement(Ze.a,null,"BIP32 Path"),a.a.createElement(Ze.a,null,"Extended Public Key"))),a.a.createElement(Je.a,null,n.renderConfirmationInfo())))},n.renderConfirmationInfo=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).map(function(e,t){return a.a.createElement(Qe.a,{key:t},a.a.createElement(Ze.a,null,e.name),a.a.createElement(Ze.a,null,"text"===e.method?"N/A":e.bip32Path),a.a.createElement(Ze.a,null,e.extendedPublicKey))})},n}return Object(L.a)(t,e),t}(a.a.Component);var et=Object(c.b)(function(e){return{extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}},{})($e),tt="UPDATE_DEPOSIT_NODE",nt="UPDATE_CHANGE_NODE",rt="RESET_NODES_SPEND",at="UPDATE_AUTO_SPEND",it="UPDATE_VIEW_ADDRESSES",ot="UPDATE_DEPOSITING",st="UPDATE_SPENDING",ct="UPDATE_WALLET_NAME",lt="RESET_WALLET_VIEW",ut="SPEND_NODES";function dt(e){return{type:tt,value:Object(M.a)({},e,{change:!1})}}function pt(e){return{type:nt,value:Object(M.a)({},e,{change:!0})}}function mt(e){return{type:at,value:e}}function ht(){return{type:ot}}function ft(){return{type:st}}function bt(){return{type:lt}}var Et="CHOOSE_PERFORM_SPEND",vt="SET_REQUIRED_SIGNERS",gt="SET_TOTAL_SIGNERS",Pt="SET_INPUTS",yt="ADD_OUTPUT",St="SET_OUTPUT_ADDRESS",It="SET_OUTPUT_AMOUNT",Ot="DELETE_OUTPUT",wt="SET_FEE_RATE",Tt="SET_FEE",xt="FINALIZE_OUTPUTS",jt="RESET_OUTPUTS",kt="SET_TXID",Ct="RESET_TRANSACTION",_t="SET_IS_WALLET";function Nt(e){return{type:vt,value:e}}function Rt(e){return{type:Pt,value:e}}function Kt(){return{type:yt}}function At(e,t){return{type:St,number:e,value:t}}function Bt(e,t){return{type:It,number:e,value:t}}function Mt(e){return{type:wt,value:e}}function Dt(e){return{type:xt,value:e}}var Ut=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).scrollRef=a.a.createRef(),n.componentDidMount=function(){n.scrollRef.current.scrollIntoView({behavior:"smooth"})},n.render=function(){return a.a.createElement(y.a,{container:!0,justify:"center",ref:n.scrollRef},a.a.createElement(y.a,{item:!0,md:8},a.a.createElement("h3",null,"Balance: ",n.totalBalance())),a.a.createElement(y.a,{item:!0,md:4},a.a.createElement(g.a,{component:"span"},a.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:n.setDeposit},"Deposit")),a.a.createElement(g.a,{component:"span",ml:2},a.a.createElement(C.a,{variant:"contained",color:"primary",onClick:n.setSpend},"Spend")),a.a.createElement(g.a,{component:"span",ml:2},a.a.createElement(C.a,{variant:"contained",onClick:n.setView},"View Addresses"))))},n.setDeposit=function(){(0,n.props.setDepositing)()},n.setSpend=function(){var e=n.props,t=e.setSpending,r=e.requiredSigners;(0,e.setRequiredSigners)(r),t()},n.setView=function(){n.props.setViewing()},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"totalBalance",value:function(){var e=this.props,t=e.deposits,n=e.change;return Object(q.satoshisToBitcoins)(t.balanceSats.plus(n.balanceSats)).toFixed()}}]),t}(a.a.Component);var Ht={setDepositing:ht,setSpending:ft,setViewing:function(){return{type:it}},setRequiredSigners:Nt},Lt=Object(c.b)(function(e){return Object(M.a)({},e.wallet,{requiredSigners:e.spend.transaction.requiredSigners})},Ht)(Ut),zt=n(281),Wt=n.n(zt),Ft=n(576),Gt=n.n(Ft),qt=n(1241),Yt=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={copied:!1,timer:null},n.componentWillUnmount=function(){var e=n.state.timer;e&&clearTimeout(e)},n.render=function(){var e=n.props,t=e.newline,r=e.text,i=e.children;return a.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},a.a.createElement(Gt.a,{text:r,onCopy:n.onCopy,options:{format:"text/plain"}},a.a.createElement("span",{className:"copyable"},i||r,t&&a.a.createElement("br",null),n.badge())))},n.badge=function(){return n.state.copied?a.a.createElement(qt.a,{fontSize:"small"}):null},n.onCopy=function(){var e=setTimeout(function(){n.setState({copied:!1,timer:null})},1e3);n.setState({copied:!0,timer:e})},n}return Object(L.a)(t,e),t}(a.a.Component);Yt.defaultProps={newline:!1,icon:!0};var Xt,Vt=Yt,Qt=n(1270),Zt=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(a)))).state={address:"",bip32Path:"",amount:0,amountError:"",showReceived:!1},n.handleAmountChange=function(e){var t=e.target.value,r="";t.length&&!t.match(/^[0-9.]+$/)&&(r="Amount must be numeric");var a=t.split(".");a.length>2?r="Amount must be numeric":2===a.length&&a[1].length>8&&(r="Amount must have maximum precision of 8 decimal places"),n.setState({amount:e.target.value,amountError:r})},n.qrString=function(){var e=n.state,t=e.address,r=e.amount;return"bitcoin:".concat(t).concat(r?"?amount="+r:"")},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"componentDidMount",value:function(){for(var e=this,t=this.props,n=t.deposits,r=t.network,a=t.client,i=t.updateDepositNode,o=t.resetWalletView,s=Object.values(n.nodes),c=0;c<s.length;c++){var l=s[c];if(l.balanceSats.isEqualTo(0)&&!l.addressUsed){this.setState({address:l.multisig.address,bip32Path:l.bip32Path});break}}this.state.address,Xt=setInterval(Object(we.a)(Oe.a.mark(function t(){var n,s;return Oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fe(e.state.address,r,a);case 3:(n=t.sent).length&&(clearInterval(Xt),s=n.reduce(function(e,t){return e.plus(t.amountSats)},new xe.a(0)),i({change:!1,bip32Path:e.state.bip32Path,utxos:n,balanceSats:s,fetchedUTXOs:!0,fetchUTXOsError:""}),e.setState({showReceived:!0}),setTimeout(o,5e3)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])})),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(Xt)}},{key:"render",value:function(){var e=this,t=this.state,n=t.amount,r=t.amountError,i=t.address,o=t.showReceived;return a.a.createElement("div",null,a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Deposit"}),a.a.createElement(O.a,null,a.a.createElement(Ee.a,{fullWidth:!0,label:"Amount",name:"depositAmount",onChange:this.handleAmountChange,value:n,error:""!==r,helperText:r}),a.a.createElement(Vt,{text:this.qrString(),newline:!0},a.a.createElement("p",null,a.a.createElement("code",null,i)),a.a.createElement(Wt.a,{size:300,value:this.qrString(),level:"L"}),a.a.createElement("p",null,"Scan QR code or click to copy address to clipboard.")))),a.a.createElement(Qt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:3e3,onClose:function(){return e.setState({showReceived:!1})},ContentProps:{"aria-describedby":"message-id"},message:a.a.createElement("span",{id:"message-id"},"Deposit received")}))}}]),t}(a.a.Component);var Jt={updateDepositNode:dt,resetWalletView:bt},$t=Object(c.b)(function(e){return Object(M.a)({},e.wallet,e.settings,{client:e.client})},Jt)(Zt),en=n(1267),tn=n(1269),nn=n(1271),rn=n(1244),an=n(1245),on=n(1243),sn=n(1242),cn=(n(348),n(138)),ln=n.n(cn),un=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).renderInputs=function(){var e=n.props,t=e.inputs,r=e.network;return t.map(function(e,t){var n="".concat(ln.a.utxoTxid).concat(e.confirmed?"":" "+ln.a.unconfirmed),i=e.confirmed?"confirmed":"unconfirmed";return a.a.createElement(Qe.a,{hover:!0,key:e.txid},a.a.createElement(Ze.a,null,t+1),a.a.createElement(Ze.a,{className:n},a.a.createElement(Vt,{text:e.txid},a.a.createElement("code",{title:i},e.txid))),a.a.createElement(Ze.a,null,a.a.createElement(Vt,{text:e.index.toString()})),a.a.createElement(Ze.a,null,a.a.createElement(Vt,{text:Object(q.satoshisToBitcoins)(e.amountSats).toString()})),a.a.createElement(Ze.a,null,E(Object(q.blockExplorerTransactionURL)(e.txid,r),a.a.createElement(sn.a,null))))})},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inputs,n=e.inputsTotalSats;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Available Inputs (".concat(t.length,")")}),a.a.createElement(O.a,null,a.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),a.a.createElement(Xe.a,null,a.a.createElement(Ve.a,null,a.a.createElement(Qe.a,{hover:!0},a.a.createElement(Ze.a,null,"Number"),a.a.createElement(Ze.a,null,"TXID"),a.a.createElement(Ze.a,null,"Index"),a.a.createElement(Ze.a,null,"Amount (BTC)"),a.a.createElement(Ze.a,null,"View"))),a.a.createElement(Je.a,null,this.renderInputs()),a.a.createElement(on.a,null,a.a.createElement(Qe.a,{hover:!0},a.a.createElement(Ze.a,{colSpan:3},"TOTAL:"),a.a.createElement(Ze.a,{colSpan:2},Object(q.satoshisToBitcoins)(n).toString()))))))}}]),t}(a.a.Component);var dn=Object(c.b)(function(e){return Object(M.a)({},e.settings)})(un),pn=n(577),mn=n.n(pn),hn=n(578),fn=n.n(hn),bn=n(1272),En=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).renderScript=function(e,t){var n=Object(q.scriptToHex)(t),r=Object(q.scriptToOps)(t);return a.a.createElement(g.a,{mt:2},a.a.createElement(P.a,{variant:"h6"},e),a.a.createElement(y.a,{container:!0,spacing:2},a.a.createElement(y.a,{item:!0,sm:6},a.a.createElement(Vt,{text:n},a.a.createElement("code",null,n))),a.a.createElement(y.a,{item:!0,sm:6},a.a.createElement(Vt,{text:r},a.a.createElement("code",null,r)))))},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.multisig,r=n.address,i=Object(q.multisigRedeemScript)(n),o=Object(q.multisigWitnessScript)(n);return a.a.createElement(g.a,{mt:2},a.a.createElement(P.a,{variant:"h6"},"Address"),a.a.createElement(P.a,{align:"center",variant:"h5"},a.a.createElement(y.a,{container:!0,direction:"column",spacing:2},a.a.createElement(y.a,{item:!0},a.a.createElement(Vt,{text:r},a.a.createElement("code",null,r)),"\xa0",E(Object(q.blockExplorerAddressURL)(r,t),a.a.createElement(sn.a,null))),a.a.createElement(y.a,{item:!0,justify:"center",container:!0,spacing:3},a.a.createElement(y.a,{item:!0},a.a.createElement(bn.a,{label:"BTC"})),a.a.createElement(y.a,{item:!0},a.a.createElement(bn.a,{label:Object(q.networkLabel)(t)})),a.a.createElement(y.a,{item:!0},a.a.createElement(bn.a,{label:"".concat(Object(q.multisigRequiredSigners)(n),"-of-").concat(Object(q.multisigTotalSigners)(n))})),a.a.createElement(y.a,{item:!0},a.a.createElement(bn.a,{label:Object(q.multisigAddressType)(n)}))))),this.renderScript("Script",n),i&&this.renderScript("Redeem Script",i),o&&this.renderScript("Witness Script",o))}}]),t}(a.a.Component);var vn=Object(c.b)(function(e){return e.settings},{})(En),gn=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){n.generate()},n.render=function(){var e=n.props,t=e.bip32Path,r=e.spend,i=e.fetchedUTXOs,o=e.balanceSats,s=e.fetchUTXOsError,c=e.multisig,l=e.utxos,u=e.spending,d=e.addressKnown;return a.a.createElement(Qe.a,{key:t},u&&a.a.createElement(Ze.a,null,a.a.createElement(tn.a,{id:t,name:"spend",onChange:n.handleSpend,checked:r,disabled:!i||o.isEqualTo(0)})),a.a.createElement(Ze.a,null,a.a.createElement("code",null,t)),a.a.createElement(Ze.a,null,l.length),a.a.createElement(Ze.a,null,i&&d?Object(q.satoshisToBitcoins)(o).toFixed():"",""!==s&&a.a.createElement(Z.a,{className:"danger"},s)),a.a.createElement(Ze.a,null,c?n.renderAddress():"..."))},n.addressContent=function(){var e=n.props,t=e.multisig,r=e.network,i=e.addressUsed,o=e.balanceSats;return a.a.createElement("div",null,a.a.createElement(Vt,{text:t.address},a.a.createElement("code",{className:i&&o.isEqualTo(0)?ln.a.spent:""},t.address)),"\xa0",E(Object(q.blockExplorerAddressURL)(t.address,r),a.a.createElement(mn.a,{onClick:function(e){return e.stopPropagation()}})))},n.renderAddress=function(){var e=n.props,t=e.bip32Path,r=e.utxos,i=e.balanceSats,o=e.multisig;return a.a.createElement(nn.a,null,a.a.createElement(rn.a,{expandIcon:a.a.createElement(fn.a,null),"aria-controls":"panel1a-content",id:"address-header"+t},n.addressContent()),a.a.createElement(an.a,null,a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:12},a.a.createElement(vn,{multisig:o})),i.isGreaterThan(0)&&a.a.createElement(y.a,{item:!0,md:12},a.a.createElement(dn,{inputs:r,inputsTotalSats:i})))))},n.generate=function(){var e=n.props,t=e.present,r=e.change,a=e.bip32Path,i=e.addNode;t||i(r,a)},n.handleSpend=function(e){var t=n.props,r=t.change,a=t.bip32Path,i=t.updateNode,o=t.inputs,s=t.utxos,c=t.multisig,l=t.setInputs,u=t.updateAutoSpend,d=t.setFeeRate,p=t.feeRate;l(e.target.checked?o.concat(s.map(function(e){return Object(M.a)({},e,{multisig:c,bip32Path:a})})):o.filter(function(e){return 0===s.filter(function(t){return t.txid===e.txid&&t.index===e.index}).length})),i(r,{spend:e.target.checked,bip32Path:a}),u(!1),d(p)},n}return Object(L.a)(t,e),t}(a.a.Component);var Pn,yn={setInputs:Rt,setFeeRate:Mt,updateAutoSpend:mt},Sn=Object(c.b)(function(e,t){var n="1"===(t.bip32Path||"").split("/")[1],r=e.wallet[n?"change":"deposits"];return Object(M.a)({},e.settings,{change:n},r.nodes[t.bip32Path],e.spend.transaction,{spending:e.wallet.info.spending})},yn)(gn),In=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(a)))).state={imported:!1,importError:"",rescan:!1,addressesError:"",addressPresent:!1},n.componentDidMount=function(){n.props.autoImport&&(Pn=setInterval(n.checkAddress,5e3))},n.componentWillUnmount=function(){clearInterval(Pn)},n.handleRescan=function(e){n.setState({rescan:e.target.checked})},n.checkAddress=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i,o,s;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.client,a=t.addresses,i=t.autoImport,o=a[0],e.prev=2,e.next=5,Ue(Object(M.a)({},Me(r),{address:o}));case 5:"undefined"!==typeof e.sent.used&&(n.setState({addressPresent:!0,addressesError:""}),clearInterval(Pn)),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),s=e.t0.response&&e.t0.response.status||"unknown",i&&Be(e.t0)&&!n.state.rescan&&n.import(),n.setState({addressesError:401===s?e.t0.response.statusText:500===s?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured"}),console.log(s,e.t0.response);case 15:case"end":return e.stop()}},e,null,[[2,9]])})),n.import=function(){var e=n.props,t=e.addresses,r=e.client,a=e.importCallback,i=n.state.rescan;(function(e){var t=e.url,n=e.auth,r=e.addresses,a=e.label,i=e.rescan,o=r.map(function(e){return{scriptPubKey:{address:e},label:a,timestamp:0}});return i?(Ke(t,n,"importmulti",[o,{rescan:i}]),new Promise(function(e){return e({result:[]})})):Ke(t,n,"importmulti",[o,{rescan:i}])})(Object(M.a)({},Me(r),{addresses:t,label:"",rescan:i})).then(function(e){var t=e.result.reduce(function(e,t){return t.error&&t.error.message||e},"");n.setState({importError:t,imported:""===t}),"undefined"!==typeof a&&a(e.result)}).catch(function(e){n.setState({importError:"Unable to import, check your settings and try again",imported:!1})})},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.autoImport&&e.addresses.length&&e.addresses[0]!==this.props.addresses[0]&&(clearInterval(Pn),Pn=setInterval(this.checkAddress,5e3))}},{key:"render",value:function(){var e=this.state,t=e.imported,n=e.importError,r=e.rescan,i=e.addressPresent,o=e.addressesError,s=this.props,c=s.autoImport,l=s.addresses;return a.a.createElement(g.a,null,t&&r&&a.a.createElement(Z.a,null,this.pluralOrSingularAddress()," imported, rescan of your node may take some time."),t&&!r&&a.a.createElement(Z.a,null,this.pluralOrSingularAddress()," imported."),i&&a.a.createElement("div",null,a.a.createElement(Z.a,null,"Address ",t?"imported to":"found in"," your wallet!"),a.a.createElement(Z.a,null,"You can properly determine your addresses current balance."),a.a.createElement(Z.a,null,'Your node may need to do a rescan to determine if an address has been previously used. If you are sure you have done so, or you are sure of the address\'s history, you may proceed.  If you are unsure, you may select "rescan" and import.')),!i&&c&&a.a.createElement(Z.a,null,"Checking node for presence of ",this.pluralOrSingularAddress()),!i&&!c&&a.a.createElement(Z.a,null,"To get accurate information from your node your ",this.pluralOrSingularAddress(),"will need to be imported to your node.  Importing will give you accurate balance information however to know if an address hase been used previously, a rescan needs to take place."),a.a.createElement(Z.a,{error:!0},o),a.a.createElement("p",null,a.a.createElement(g.a,{component:"span",ml:2},a.a.createElement(C.a,{variant:"contained",disabled:!r&&(i||0===l.length),onClick:this.import},"Import")),a.a.createElement(g.a,{component:"span",ml:2},a.a.createElement(V.a,{control:a.a.createElement(be.a,{checked:r,onChange:this.handleRescan,color:"secondary"}),label:"Rescan"}))),a.a.createElement(Z.a,{error:!0},n))}},{key:"pluralOrSingularAddress",value:function(){var e=this.props.addresses;return"address".concat(e.length>1?"es":"")}}]),t}(a.a.Component);var On=Object(c.b)(function(e){return{client:e.client}},{})(In),wn=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={page:0,nodesPerPage:10,change:!1,spend:!1},n.addresses=[],n.getUnknownAddressNodes=function(){var e=n.props,t=e.changeNodes,r=e.depositNodes;return Object.values(r).concat(Object.values(t)).filter(function(e){return!e.addressKnown})},n.addressesImported=function(){var e=Object(we.a)(Oe.a.mark(function e(t){var r,a,i,o,s,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props,a=r.updateNode,i=r.client,o=r.network,s=[],c=n.getUnknownAddressNodes(),t.forEach(function(e,t){e.success&&s.push(c[t])}),s.forEach(function(){var e=Object(we.a)(Oe.a.mark(function e(t){var n,r,s,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t.multisig.address,o,i);case 2:return n=e.sent,e.next=5,Ge(t.multisig.address,o,i);case 5:r=e.sent,n&&(c=n.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new xe.a(0)),s={balanceSats:c,utxos:n,fetchedUTXOs:!0,fetchUTXOsError:""}),a(t.change,Object(M.a)({bip32Path:t.bip32Path,addressKnown:!0},s,{addressStatus:r}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.getNodeSet=function(){var e=n.props,t=e.spending,r=e.changeNodes,a=e.depositNodes,i=n.state.change?r:a;return t?Object.values(i).filter(function(e){return e.balanceSats.isGreaterThan(0)}).reduce(function(e,t){return e[t.bip32Path]=t,e},{}):i},n.renderNodes=function(){for(var e=n.state,t=e.page,r=e.nodesPerPage,i=e.change,o=e.spend,s=n.props,c=s.addNode,l=s.updateNode,u=t*r,d=[],p=n.getNodeSet(),m=0;m<r;m++){var h=u+m;if(h>Object.keys(p).length-1)break;var f=Object.values(p)[h].bip32Path,b=a.a.createElement(Sn,{key:f,bip32Path:f,addNode:c,updateNode:l,change:i,spend:o});d.push(b)}return d},n.handlePageChange=function(e,t){var r=t;n.setState({page:r})},n.handleChangeRowsPerPage=function(e){n.setState({nodesPerPage:e.target.value,page:0})},n.bip32Path=function(e){var t=n.state.change;return"m/".concat(t?"1":"0","/").concat(e)},n.pageCount=function(){var e=n.state.nodesPerPage;return Math.ceil(n.rowCount()/e)},n.rowCount=function(){var e=n.getNodeSet();return Object.keys(e).length},n.generateAnotherPage=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i,o,s,c,l,u,d,p;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props,r=t.addNode,a=t.depositNodes,i=t.changeNodes,o=n.state,s=o.change,c=o.nodesPerPage,l=o.page,u=Object.keys(s?i:a).length,d=0;case 4:if(!(d<c+(c-u%c))){e.next=11;break}return p=n.bip32Path(u+d),e.next=8,r(s,p);case 8:d++,e.next=4;break;case 11:u%c===0&&n.setState({page:l+1});case 12:case"end":return e.stop()}},e)})),n.toggleChange=function(){var e=n.state.change;n.setState({change:!e,page:0})},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.state,t=e.page,n=e.nodesPerPage,r=e.change,i=this.props,o=i.spending,s=i.canLoad,c=i.client,l=!o&&"private"===c.type;return l&&(this.addresses=this.getUnknownAddressNodes().map(function(e){return e.multisig.address})),a.a.createElement(y.a,{item:!0,md:12},l&&a.a.createElement(On,{addresses:this.addresses,importCallback:this.addressesImported}),a.a.createElement(Xe.a,{style:{tableLayout:"fixed"}},a.a.createElement(Ve.a,null,a.a.createElement(Qe.a,null,o&&a.a.createElement(Ze.a,{width:62},"Spend?"),a.a.createElement(Ze.a,{width:106},"BIP32 Path"),a.a.createElement(Ze.a,{width:68},"UTXOs"),a.a.createElement(Ze.a,{width:82},"Balance"),a.a.createElement(Ze.a,null,"Address"))),a.a.createElement(Je.a,null,this.renderNodes())),a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:6},a.a.createElement(en.a,{component:"div",count:this.rowCount(),rowsPerPage:n,page:t,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage})),a.a.createElement(y.a,{item:!0,md:2},s&&t===this.pageCount()-1&&a.a.createElement(C.a,{type:"button",variant:"contained",color:"secondary",onClick:this.generateAnotherPage},"More")),a.a.createElement(y.a,{item:!0,md:4},a.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",onClick:this.toggleChange},r?"View Deposits":"View Change"))))}}]),t}(a.a.Component);var Tn=Object(c.b)(function(e){return Object(M.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,spending:e.wallet.info.spending,client:e.client},e.settings)},{})(wn),xn=n(384),jn=n(1249),kn=n(1275),Cn=n(1250),_n=n(1248),Nn=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(a)))).handleAddressChange=function(e){var t=n.props,r=t.number;(0,t.setAddress)(r,e.target.value)},n.hasAddressError=function(){return""!==n.props.addressError},n.handleAmountChange=function(e){var t=n.props,r=t.number;(0,t.setAmount)(r,e.target.value)},n.hasAmountError=function(){return""!==n.props.amountError},n.isNotBalanceable=function(){var e=n.props,t=e.number,r=e.outputs,a=e.feeError,i=e.amountError,o=e.amount,s=e.inputsTotalSats;if(""!==a)return!0;for(var c=0;c<r.length;c++)if(c!==t-1&&(""!==r[c].amountError||""===r[c].amount))return!0;var l=n.autoBalancedAmount();return""!==Object(q.validateOutputAmountBTC)(l,s)||""===i&&l===new xe.a(o)},n.isBalanceable=function(){return!n.isNotBalanceable()},n.hasBalanceError=function(){return""!==n.props.balanceError},n.autoBalancedAmount=function(){var e=n.props,t=e.number,r=e.fee,a=e.inputsTotalSats,i=e.outputs.filter(function(e,n){return n!==t-1}).map(function(e){return Object(q.bitcoinsToSatoshis)(new xe.a(e.amount))}).reduce(function(e,t){return e.plus(t)},new xe.a(0)),o=Object(q.bitcoinsToSatoshis)(new xe.a(r));return Object(q.satoshisToBitcoins)(a.minus(i.plus(o)))},n.balanceAction=function(){var e=n.props.balanceError;return!n.hasBalanceError()||n.isNotBalanceable()?null:e.split(" ")[0]},n.handleBalance=function(){var e=n.props,t=e.number;(0,e.setAmount)(t,n.autoBalancedAmount().toString())},n.hasError=function(){return n.hasAddressError()||n.hasAmountError()},n.handleDelete=function(){var e=n.props,t=e.number;(0,e.remove)(t)},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.outputs,n=e.finalizedOutputs,r=e.address,i=e.amount,o=e.addressError,s=e.amountError;return a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,xs:7},a.a.createElement(Ee.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:ln.a.outputsFormInput,disabled:n,onChange:this.handleAddressChange,value:r,error:this.hasAddressError(),helperText:o})),a.a.createElement(y.a,{item:!0,xs:3},a.a.createElement(Ee.a,{fullWidth:!0,placeholder:"Amount (BTC)",className:ln.a.outputsFormInput,name:"amount",disabled:n,onChange:this.handleAmountChange,value:i,error:this.hasAmountError(),helperText:s})),!n&&this.hasBalanceError()&&this.isBalanceable()&&a.a.createElement(y.a,{item:!0,xs:1},a.a.createElement(kn.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},a.a.createElement("small",null,a.a.createElement(z.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?a.a.createElement(se.a,null):a.a.createElement(ce.a,null))))),!n&&t.length>1&&a.a.createElement(y.a,{item:!0,xs:1},a.a.createElement(kn.a,{title:"Remove Output",placement:"top"},a.a.createElement(z.a,{onClick:this.handleDelete},a.a.createElement(_n.a,null)))))}}]),t}(a.a.Component);var Rn={setAddress:At,setAmount:Bt,remove:function(e){return{type:Ot,number:e}}},Kn=Object(c.b)(function(e,t){return Object(M.a)({},e.spend.transaction,e.spend.transaction.outputs[t.number-1])},Rn)(Nn),An=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).titleRef=a.a.createRef(),n.state={feeRateFetchError:""},n.componentDidMount=function(){n.initialOutputState(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){var e=n.props.signatureImporters;0===Object.keys(e).reduce(function(t,n){return t+e[n].finalized},0)&&n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderOutputs=function(){var e=n.props.outputs;return Object(xn.map)(e).map(function(e,t){return a.a.createElement(y.a,{container:!0,key:t},a.a.createElement(Kn,{number:t+1}))})},n.inputsTotal=function(){var e=n.props.inputsTotalSats;return Object(q.satoshisToBitcoins)(e)},n.outputsAndFeeTotal=function(){var e=n.props,t=e.outputs,r=e.fee;return e.inputs.length?t.map(function(e){return new xe.a(e.amount||0)}).reduce(function(e,t){return e.plus(t)},new xe.a(0)).plus(new xe.a(r)):""},n.hasFeeRateFetchError=function(){return""!==n.state.feeRateFetchError},n.hasFeeRateError=function(){return""!==n.props.feeRateError},n.hasFeeError=function(){return""!==n.props.feeError},n.hasBalanceError=function(){return""!==n.props.balanceError},n.hasError=function(){return n.hasFeeRateFetchError()||n.hasFeeRateError()||n.hasFeeError()||n.hasBalanceError()},n.handleAddOutput=function(){(0,n.props.addOutput)()},n.handleFeeRateChange=function(e){var t=n.props,r=t.setFeeRate;t.inputs.length&&r(e.target.value)},n.handleFeeChange=function(e){(0,n.props.setFee)(e.target.value)},n.handleFinalize=function(){(0,n.props.finalizeOutputs)(!0)},n.handleReset=function(){(0,n.props.resetOutputs)(),n.initialOutputState()},n.getFeeEstimate=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i,o,s;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.client,a=t.network,i=t.setFeeRate,o=1,s="",e.prev=3,e.next=6,qe(a,r);case 6:o=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),s="There was an error fetching the fee rate.";case 13:return e.prev=13,i(o.toString()),n.setState({feeRateFetchError:s}),e.finish(13);case 17:case"end":return e.stop()}},e,null,[[3,9,13,17]])})),n.gatherSignaturesDisabled=function(){var e=n.props,t=e.finalizedOutputs,r=e.outputs;if(0===e.inputs.length)return!0;if(t||n.hasError())return!0;for(var a=0;a<r.length;a++){var i=r[a];if(""===i.address||""===i.amount||""!==i.addressError||""!==i.amountError)return!0}return!1},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"initialOutputState",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,n,r,a,i,o,s,c,l;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.inputs,r=t.outputs,e.next=3,this.getFeeEstimate();case 3:a=this.props,i=a.inputsTotalSats,o=a.fee,s=a.setOutputAmount,c=Object(q.bitcoinsToSatoshis)(new xe.a(o)),l=Object(q.satoshisToBitcoins)(i.minus(c)),n.length&&""===r[0].amount&&s(1,l.toFixed(8));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,n=e.fee,r=e.finalizedOutputs,i=e.feeRateError,o=e.feeError,s=e.balanceError,c=e.addChange,l=this.state.feeRateFetchError;return a.a.createElement(S.a,null,a.a.createElement(I.a,{ref:this.titleRef,title:"Define Outputs"}),a.a.createElement(O.a,null,a.a.createElement(g.a,null,a.a.createElement(y.a,null,this.renderOutputs()),a.a.createElement(y.a,{item:!0,container:!0,spacing:1},a.a.createElement(y.a,{item:!0,xs:4},a.a.createElement(C.a,{variant:"contained",disabled:r,onClick:this.handleAddOutput},"Add output"),"undefined"!=typeof c&&a.a.createElement(g.a,{component:"span",ml:2},a.a.createElement(C.a,{variant:"contained",disabled:r,onClick:c},"Add change"))),a.a.createElement(y.a,{item:!0,xs:3},a.a.createElement(Ee.a,{fullWidth:!0,label:"Fee Rate (Sats/byte)",value:t,placeholder:"Sats/byte",name:"fee_rate",disabled:r,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:l||i,InputProps:{endAdornment:a.a.createElement(jn.a,{position:"end"},a.a.createElement(kn.a,{placement:"top",title:"Estimate best rate"},a.a.createElement("small",null,a.a.createElement(z.a,{onClick:this.getFeeEstimate,disabled:r},a.a.createElement(Cn.a,null)))))}})),a.a.createElement(y.a,{item:!0,xs:3},a.a.createElement(Ee.a,{fullWidth:!0,label:"Estimated Fees (BTC)",placeholder:"BTC",name:"fee_total",disabled:r,value:n,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:o})),a.a.createElement(y.a,{item:!0,xs:2})),a.a.createElement(y.a,{item:!0,container:!0,spacing:1},a.a.createElement(y.a,{item:!0,xs:4}),a.a.createElement(y.a,{item:!0,xs:3},a.a.createElement(Ee.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toString(),disabled:r,InputProps:{readOnly:!0}})),a.a.createElement(y.a,{item:!0,xs:3},a.a.createElement(Ee.a,{fullWidth:!0,label:"Outputs & Fee Total",value:this.outputsAndFeeTotal().toString(),error:this.hasBalanceError(),disabled:r,helperText:s,InputProps:{readOnly:!0}})),a.a.createElement(y.a,{item:!0,xs:2})),a.a.createElement(y.a,{item:!0},a.a.createElement(y.a,{container:!0,spacing:3},a.a.createElement(y.a,{item:!0},a.a.createElement(C.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),a.a.createElement(y.a,{item:!0},a.a.createElement(C.a,{variant:"contained",color:"secondary",disabled:r,onClick:this.handleReset},"Reset Outputs")))))))}}]),t}(a.a.Component);var Bn={addOutput:Kt,setOutputAmount:Bt,setFeeRate:Mt,setFee:function(e){return{type:Tt,value:e}},finalizeOutputs:Dt,resetOutputs:function(){return{type:jt}}},Mn=Object(c.b)(function(e){return Object(M.a)({},{network:e.settings.network,client:e.client},e.spend.transaction,e.client,{signatureImporters:e.spend.signatureImporters})},Bn)(An),Dn=n(9),Un=n(1175),Hn=n(1174),Ln=n(1246),zn=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={signatureJSON:"",error:""},n.render=function(){var e=n.state,t=e.signatureJSON,r=e.error;return a.a.createElement(g.a,{mt:2},a.a.createElement(Ee.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:n.handleChange,error:n.hasError(),helperText:r}),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{variant:"contained",color:"primary",size:"large",onClick:n.finalize,disabled:""===t},"Add Signature")))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,r="";try{JSON.parse(t)}catch(a){r="Invalid JSON."}n.setState({signatureJSON:t,error:r})},n.finalize=function(){var e=n.props.validateAndSetSignature,t=n.state.signatureJSON;e(JSON.parse(t),n.setError)},n}return Object(L.a)(t,e),t}(a.a.Component),Wn=n(580),Fn=n.n(Wn),Gn=300,qn=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={walletState:Dn.PENDING,error:""},n.render=function(){var e=n.state,t=e.walletState,r=e.error,i=n.props,o=i.interaction,s=i.width,c=i.startText;if(t===Dn.PENDING){var l=o.messageFor({walletState:t,code:"hermit.command"});return a.a.createElement("div",null,a.a.createElement("p",null,l.instructions),a.a.createElement(y.a,{container:!0,justify:"center",className:"mb-2"},a.a.createElement(Vt,{text:l.command},a.a.createElement("code",null,a.a.createElement("strong",null,l.mode,">")," ",l.command))),a.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:n.handleStart},c)))}return t===Dn.ACTIVE?a.a.createElement(y.a,{container:!0,direction:"column"},a.a.createElement(y.a,{item:!0},a.a.createElement(Fn.a,{delay:Gn,onError:n.handleError,onScan:n.handleScan,style:{width:s},facingMode:"user"})),a.a.createElement(y.a,{item:!0},a.a.createElement(C.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Cancel"))):"error"===t||"success"===t?a.a.createElement("div",null,a.a.createElement(Z.a,{error:!0},r),a.a.createElement(C.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Reset")):null},n.handleStart=function(){var e=n.props.onStart;n.setState({walletState:Dn.ACTIVE,error:""}),e&&e()},n.handleError=function(e){var t=n.props.onClear;n.setState({walletState:"error",error:e.message}),t&&t()},n.handleScan=function(e){var t=n.props,r=t.onSuccess,a=t.interaction;if(e)try{r(a.parse(e)),n.setState({walletState:"success"})}catch(i){n.handleError(i)}},n.handleStop=function(){var e=n.props.onClear;n.setState({walletState:Dn.PENDING,error:""}),e&&e()},n}return Object(L.a)(t,e),t}(r.Component);qn.defaultProps={width:"256px",startText:"Scan"};var Yn=qn,Xn=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={errorMessage:""},n.render=function(){var e=n.props,t=e.width,r=e.string;return a.a.createElement(Vt,{text:r,newline:!0},a.a.createElement(Wt.a,{size:t,value:r,level:"L"}))},n}return Object(L.a)(t,e),t}(a.a.Component);Xn.defaultProps={string:"",width:120};var Vn=Xn,Qn=n(1251),Zn=n(1252),Jn=n(1253),$n=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return a.a.createElement("small",null,a.a.createElement(w.a,null,n.filteredMessages().map(function(e,t){return n.renderMessage(e,t)})))},n.renderMessage=function(e,t){return a.a.createElement(T.a,{key:t},a.a.createElement(x.a,null,n.messageIcon(e)),a.a.createElement(j.a,null,e.text))},n.filteredMessages=function(){var e=n.props,t=e.messages,r=e.excludeCodes;return t.filter(function(e){for(var t=0;t<r.length;t++){var n=r[t];if((e.code||"").includes(n))return!1}return!0})},n.messageIcon=function(e){switch(e.level){case Dn.INFO:return a.a.createElement(Qn.a,null);case Dn.WARNING:return a.a.createElement(Zn.a,null);case Dn.ERROR:return a.a.createElement(Jn.a,null);default:return null}},n.messageColrName=function(e){switch(e.level){case Dn.INFO:return"primary.main";case Dn.WARNING:return"text.secondary";case Dn.ERROR:return"error.main";default:return""}},n}return Object(L.a)(t,e),t}(a.a.Component);$n.defaultProps={messages:[],excludeCodes:[]};var er=$n,tr=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(U.a)(this,Object(H.a)(t).call(this,e))).interaction=function(){var e=n.props,t=e.signatureImporter,r=e.network,a=e.inputs,i=e.outputs,o=a.map(function(e){return t.bip32Path});return new Dn.HermitSignTransaction({network:r,inputs:a,outputs:i,bip32Paths:o})},n.render=function(){var e=n.props,t=e.signatureImporter,r=e.disableChangeMethod,i=e.resetBIP32Path,o=n.state,s=o.bip32PathError,c=o.signatureError,l=o.walletState,u=n.interaction();return l===Dn.UNSUPPORTED?a.a.createElement(er,{messages:u.messagesFor({walletState:l}),excludeCodes:["hermit.signature_request","hermit.command"]}):a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:10},a.a.createElement(Ee.a,{name:"bip32Path",value:t.bip32Path,onChange:n.handleBIP32PathChange,disabled:l!==Dn.PENDING,error:n.hasBIP32PathError(),helperText:s})),a.a.createElement(y.a,{item:!0,md:2},!n.bip32PathIsDefault()&&a.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:i,disabled:l!==Dn.PENDING},"Default"))),a.a.createElement(Z.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0,justify:"center"},a.a.createElement(y.a,{item:!0},a.a.createElement(Vn,{width:400,string:u.messageFor({code:"hermit.signature_request"}).encodedData}))),a.a.createElement(Yn,{startText:"Scan Signature QR Code",interaction:u,onStart:r,onSuccess:n.import,onClear:n.clear}),a.a.createElement(er,{messages:u.messagesFor({walletState:l}),excludeCodes:["hermit.signature_request","hermit.command"]}),a.a.createElement(Z.a,{error:!0},c)))},n.import=function(e){console.log("IMPORTED SIGNATURE:",e);var t=n.props,r=t.validateAndSetSignature,a=t.enableChangeMethod;n.setState({signatureError:""}),a(),r(e,function(e){n.setState({signatureError:e})})},n.clear=function(){var e=n.props,t=e.resetBIP32Path,r=e.enableChangeMethod;t(),n.setState({signatureError:""}),r()},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},function(e){n.setState({bip32PathError:e})})},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.state={bip32PathError:"",bip32PathFinalized:!1,signatureError:"",walletState:n.interaction(!0).isSupported()?Dn.PENDING:Dn.UNSUPPORTED},n}return Object(L.a)(t,e),t}(a.a.Component),nr=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(U.a)(this,Object(H.a)(t).call(this,e))).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(e){var t,r,a=!e&&n.state.verified,i=n.props,o=i.signatureImporter,s=i.network,c=i.inputs,l=i.outputs,u=o.method;if(a){var d=c.map(function(e){return"undefined"===typeof e.bip32Path?o.bip32Path:"".concat(o.bip32Path).concat(e.bip32Path.slice(1))});return Object(Dn.HardwareWalletSignMultisigTransaction)({network:s,walletType:u,inputs:c,outputs:l,bip32Paths:d})}return t=o.bip32Path,"undefined"!==typeof c[0].bip32Path&&(r=c.map(function(e){return"".concat(o.bip32Path).concat(e.bip32Path.slice(1))})),Object(Dn.HardwareWalletExportPublicKey)({network:s,walletType:u,bip32Path:t,bip32Paths:r})},n.render=function(){var e=n.props.signatureImporter,t=n.state,r=t.verified,i=t.walletState,o=n.interaction();return i===Dn.UNSUPPORTED?a.a.createElement(Z.a,{error:!0},o.messageTextFor({walletState:i})):a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:10},a.a.createElement(Ee.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:i!==Dn.PENDING||r,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),a.a.createElement(y.a,{item:!0,md:2},!n.bip32PathIsDefault()&&a.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:r||i!==Dn.PENDING},"Default"))),a.a.createElement(Z.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),a.a.createElement(g.a,{mt:2},n.renderAction()),n.renderDeviceConfirmInfo(),a.a.createElement(er,{messages:o.messagesFor({walletState:i}),excludeCodes:["bip32"]}))},n.renderDeviceConfirmInfo=function(){var e=n.props,t=e.fee,r=e.inputsTotalSats,i=n.state,o=i.verified,s=i.walletState;return o&&s===Dn.ACTIVE?a.a.createElement(g.a,null,a.a.createElement("p",null,"Your device will ask you to verify the following information:"),a.a.createElement(Xe.a,null,a.a.createElement(Ve.a,null,a.a.createElement(Qe.a,{hover:!0},a.a.createElement(Ze.a,null),a.a.createElement(Ze.a,null,"Amount (BTC)"))),a.a.createElement(Je.a,null,n.renderTargets(),a.a.createElement(Qe.a,{hover:!0},a.a.createElement(Ze.a,null,"Fee"),a.a.createElement(Ze.a,null,t)),a.a.createElement(Qe.a,{hover:!0},a.a.createElement(Ze.a,null,"Total"),a.a.createElement(Ze.a,null,Object(q.satoshisToBitcoins)(r).toString()))))):""},n.renderTargets=function(){return n.props.outputs.map(function(e,t){return a.a.createElement(Qe.a,{hover:!0,key:t},a.a.createElement(Ze.a,null,"Address ",a.a.createElement("code",null,e.address)),a.a.createElement(Ze.a,null,e.amount))})},n.renderAction=function(){var e=n.state,t=e.verified,r=e.verifyError,i=e.signatureError,o=e.walletState;return t?a.a.createElement(y.a,{container:!0,alignItems:"center"},a.a.createElement(y.a,{item:!0,md:3},a.a.createElement(C.a,{variant:"contained",size:"large",color:"primary",onClick:n.sign,disabled:o!==Dn.PENDING},"Sign")),a.a.createElement(y.a,{item:!0,md:9},a.a.createElement(Z.a,{error:!0},i))):a.a.createElement(y.a,{container:!0,alignItems:"center"},a.a.createElement(y.a,{item:!0,md:3},a.a.createElement(C.a,{variant:"contained",size:"large",onClick:n.verify,color:"primary",disabled:o!==Dn.PENDING||n.hasBIP32PathError()},"Verify")),a.a.createElement(y.a,{item:!0,md:9},a.a.createElement(Z.a,{error:!0},r)))},n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t||n.interaction().hasMessagesFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:n.interaction().messageTextFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.verify=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.disableChangeMethod,a=t.enableChangeMethod,r(),n.setState({verifyError:"",walletState:Dn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:i=e.sent,n.verifyPublicKey(i),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({verifyError:e.t0.message,walletState:Dn.PENDING}),a();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),n.verifyPublicKey=function(e){for(var t=n.props,r=t.inputs,i=t.signatureImporters,o=t.enableChangeMethod,s="",c="string"===typeof e?[e]:e,l=0;l<r.length;l++){for(var u=r[l],d=void 0,p=0;p<c.length&&!((d=Object(q.multisigPublicKeys)(u.multisig).indexOf(c[p]))>-1);p++);if(d<0){s=a.a.createElement("span",null,a.a.createElement(Jn.a,null),"\xa0 This device does not contain the correct key.  Are you sure the BIP32 path is correct?");break}for(var m=1;m<Object(q.multisigRequiredSigners)(u.multisig);m++){for(var h=i[m],f=0;f<h.publicKeys.length;f++){if(h.publicKeys[f]===e){s=a.a.createElement("span",null,a.a.createElement(Jn.a,null),"A signature from this key was already imported.");break}}if(""!==s)break}if(""!==s)break}n.setState({verified:""===s,verifyError:s,walletState:Dn.PENDING}),o()},n.sign=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i,o;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.disableChangeMethod,a=t.validateAndSetSignature,i=t.enableChangeMethod,r(),n.setState({signatureError:"",walletState:Dn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:o=e.sent,a(o,function(e){var t={signatureError:e};""!==e&&(t.walletState=Dn.PENDING),n.setState(t)}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({signatureError:e.t0.message,walletState:Dn.PENDING});case 14:i();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),n.state={verified:!1,verifyError:"",signatureError:"",bip32PathError:"",walletState:n.interaction(!0).isSupported()?Dn.PENDING:Dn.UNSUPPORTED},n}return Object(L.a)(t,e),t}(a.a.Component),rr=n(1254),ar=n(1255),ir=n(1256),or=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={editing:!1,newName:"",error:""},n.componentDidMount=function(){var e=n.props.name;n.setState({newName:e})},n.render=function(){var e=n.props.name,t=n.state,r=t.editing,i=t.newName,o=t.error;return r?a.a.createElement(y.a,{container:!0,alignItems:"center"},a.a.createElement(y.a,{item:!0},a.a.createElement(Ee.a,{label:"Name",value:i,onChange:n.handleChange,error:n.hasError(),helperText:o})),a.a.createElement(y.a,{item:!0},a.a.createElement(z.a,{size:"small",onClick:n.submit,disabled:n.hasError()},a.a.createElement(rr.a,null))),a.a.createElement(y.a,{item:!0},a.a.createElement(z.a,{color:"secondary",size:"small",onClick:n.cancel},a.a.createElement(ar.a,null)))):a.a.createElement("span",null,a.a.createElement(z.a,{size:"small",onClick:n.startEditing},a.a.createElement(ir.a,null)),"\xa0",e)},n.hasError=function(){return""!==n.state.error},n.startEditing=function(e){var t=n.props.name;e.preventDefault(),n.setState({editing:!0,newName:t})},n.handleChange=function(e){var t=e.target.value,r="";null!==t&&void 0!==t&&""!==t||(r="Name cannot be blank."),n.setState({newName:t,error:r})},n.submit=function(){var e=n.props;(0,e.setName)(e.number,n.state.newName),n.setState({editing:!1})},n.cancel=function(){var e=n.props.name;n.setState({error:"",newName:e,editing:!1})},n}return Object(L.a)(t,e),t}(a.a.Component),sr=Pe({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),cr=sr.setSignatureImporterName,lr=sr.setSignatureImporterMethod,ur=sr.setSignatureImporterBIP32Path,dr=sr.setSignatureImporterPublicKeys,pr=sr.setSignatureImporterSignature,mr=sr.setSignatureImporterFinalized,hr=sr.setSignatureImporterComplete,fr="text",br=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).titleRef=a.a.createRef(),n.state={disableChangeMethod:!1,showUnsignedTransaction:!1},n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){n.props.number===n.getCurrent()&&n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.title=function(){var e=n.props,t=e.number,r=e.signatureImporter,i=e.setName;return a.a.createElement(or,{number:t,name:r.name,setName:i})},n.renderImport=function(){var e=n.props,t=e.signatureImporter,r=e.number,i=r>n.getCurrent(),o=n.state.disableChangeMethod,s="signature-".concat(r,"-importer-select-label");return i?a.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):a.a.createElement("form",null,a.a.createElement(Y.a,{fullWidth:!0},a.a.createElement(Un.a,{id:s},"Select Method"),a.a.createElement(Hn.a,{labelId:s,id:"signature-".concat(r,"-importer-select"),disabled:o,value:t.method,onChange:n.handleMethodChange},a.a.createElement(Ln.a,{value:""},"< Select method >"),a.a.createElement(Ln.a,{value:Dn.TREZOR},"Trezor"),a.a.createElement(Ln.a,{value:Dn.LEDGER},"Ledger"),a.a.createElement(Ln.a,{value:Dn.HERMIT},"Hermit"),a.a.createElement(Ln.a,{value:fr},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.network,r=e.signatureImporter,i=e.signatureImporters,o=e.inputs,s=e.inputsTotalSats,c=e.outputs,l=e.fee;return r.method===fr?a.a.createElement(zn,{signatureImporter:r,validateAndSetSignature:n.validateAndSetSignature}):r.method===Dn.HERMIT?a.a.createElement(tr,{network:t,signatureImporter:r,inputs:o,outputs:c,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):r.method===Dn.TREZOR||r.method===Dn.LEDGER?a.a.createElement(nr,{network:t,signatureImporter:r,signatureImporters:i,inputs:o,outputs:c,inputsTotalSats:s,fee:l,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number;(0,t.setMethod)(r,e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.renderUnsignedTransaction=function(){var e=n.state.showUnsignedTransaction,t=n.props.unsignedTransaction;if(e){var r=t.toHex();return a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement(Vt,{text:r},a.a.createElement("code",null,r))),a.a.createElement("small",null,a.a.createElement(C.a,{size:"small",onClick:n.handleHideUnsignedTransaction},"Hide Unsigned Transaction")))}return a.a.createElement("small",null,a.a.createElement(C.a,{size:"small",onClick:n.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},n.handleShowUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!0})},n.handleHideUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!1})},n.reset=function(){var e=n.props,t=e.number,r=e.setSignature,a=e.setPublicKeys,i=e.setFinalized;r(t,""),a(t,[]),i(t,!1)},n.defaultBIP32Path=function(){var e=n.props,t=e.addressType,r=e.network;return e.isWallet?Object(q.multisigBIP32Root)(t,r):Object(q.multisigBIP32Path)(t,r)},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.setBIP32Path)(t,n.defaultBIP32Path())},n.validateAndSetBIP32Path=function(e,t,r,a){var i=n.props,o=i.number,s=i.setBIP32Path,c=Object(q.validateBIP32Path)(e,a);s(o,e),c?r(c):(r(""),t())},n.renderSignature=function(){var e=n.props,t=e.signatureImporter,r=e.txid,i=JSON.stringify(t.signature);return a.a.createElement("div",null,a.a.createElement("p",null,"The following signature was imported:"),a.a.createElement(g.a,null,a.a.createElement(Vt,{text:i},a.a.createElement("small",null,a.a.createElement("code",null,i)))),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{variant:"contained",color:"secondary",disabled:""!==r,size:"small",onClick:n.reset},"Remove Signature")))},n.validateAndSetSignature=function(e,t){var r=n.props,a=r.number,i=r.inputs,o=r.signatureImporters,s=r.unsignedTransaction,c=r.setComplete;if(Array.isArray(e))if(e.length<i.length)t("Not enough signatures (must be exactly one for each input).");else if(e.length>i.length)t("Too many signatures (must be exactly one for each input).");else{for(var l=[],u=Object.values(o).filter(function(e){return e.finalized}),d=0;d<e.length;d+=1){var p=i[d],m=d+1,h=e[d];if(""!==Object(q.validateHex)(h))return void t("Signature for input ".concat(m," is not valid hex."));var f=void 0;try{f=Object(q.validateMultisigSignature)(s,d,p,h)}catch(v){return void t("Signature for input ".concat(m," is invalid."))}if(!f)return void t("Signature for input ".concat(m," is invalid."));for(var b=0;b<u.length;b++){var E=u[b];if(E.signature[d]===h||E.publicKeys[d]===f)return void t("Signature for input ".concat(m," is a duplicate of a previously provided signature."))}l.push(f)}c(a,{signature:e,publicKeys:l,finalized:!0})}else t("Signature is not an array of strings.")},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.signatureImporter;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:this.title(),ref:this.titleRef}),a.a.createElement(O.a,null,e.finalized?this.renderSignature():this.renderImport(),a.a.createElement(g.a,{mt:2},this.renderUnsignedTransaction())))}},{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce(function(t,n){return t+(e[n].finalized?1:0)},1)}}]),t}(a.a.Component);var Er={setName:cr,setMethod:lr,setBIP32Path:ur,setPublicKeys:dr,setSignature:pr,setFinalized:mr,setComplete:hr},vr=Object(c.b)(function(e,t){return Object(M.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid},e.spend.transaction)},Er)(br),gr=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(a)))).state={error:"",broadcasting:!1,txid:""},n.buildSignedTransaction=function(){var e=n.props,t=e.unsignedTransaction,r=e.inputs,a=e.signatureImporters,i=[];return r.forEach(function(e,t){var n={};Object.values(a).forEach(function(e){var r=e.publicKeys[t],a=e.signature[t];n[r]=a}),i.push(n)}),Object(q.signedMultisigTransaction)(t,r,i)},n.handleBroadcast=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i,o,s,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.client,a=t.network,i=t.setTxid,o=n.buildSignedTransaction(),s="",c="",n.setState({broadcasting:!0}),e.prev=5,e.next=8,Ye(o.toHex(),a,r);case 8:c=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),s="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,n.setState({txid:c,error:s,broadcasting:!1}),i(c),e.finish(15);case 19:case"end":return e.stop()}},e,null,[[5,11,15,19]])})),n.transactionURL=function(){var e=n.props.network,t=n.state.txid;return Object(q.blockExplorerTransactionURL)(t,e)},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,n=e.broadcasting,r=e.txid,i=this.buildSignedTransaction(),o=i.toHex();return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Broadcast"}),a.a.createElement(O.a,null,a.a.createElement("form",null,i&&a.a.createElement(g.a,{mt:4},a.a.createElement(P.a,{variant:"h6"},"Signed Transaction"),a.a.createElement(Vt,{text:o},a.a.createElement("small",null,a.a.createElement("code",null,o)))),""===r?a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{variant:"contained",color:"primary",disabled:!i||n,onClick:this.handleBroadcast},"Broadcast Transaction"),a.a.createElement(Z.a,{error:!0},t),a.a.createElement("small",null,a.a.createElement(Z.a,null,"Warning: Broadcasting this transaction cannot be undone."))):a.a.createElement(g.a,{mt:2},a.a.createElement(P.a,{variant:"h5"},a.a.createElement(Vt,{text:r},a.a.createElement("code",null,r)),"\xa0",E(this.transactionURL(),a.a.createElement(sn.a,null))),a.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),t}(a.a.Component);var Pr={setTxid:function(e){return{type:kt,value:e}}},yr=Object(c.b)(function(e){return Object(M.a)({network:e.settings.network,client:e.client},e.client,{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,unsignedTransaction:e.spend.transaction.unsignedTransaction})},Pr)(gr),Sr=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={spent:!1},n.render=function(){return a.a.createElement(g.a,null,a.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:n.handleCancel},"Cancel"),n.renderSignatureImporters(),n.signaturesFinalized()&&a.a.createElement(g.a,{mt:2},a.a.createElement(yr,null)),(n.transactionFinalized()||n.state.spent)&&a.a.createElement(C.a,{variant:"contained",color:"primary",onClick:n.handleReturn},"Return"))},n.renderSignatureImporters=function(){for(var e=n.props.transaction,t=[],r=1;r<=e.requiredSigners;r++)t.push(a.a.createElement(g.a,{key:r,mt:2},a.a.createElement(vr,{number:r})));return t},n.signaturesFinalized=function(){var e=n.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},n.transactionFinalized=function(){var e=n.props,t=e.transaction,r=e.spendNodes,a=e.getChangeNode,i=e.updateChangeNode;if(""!==t.txid&&!n.state.spent){n.setState({spent:!0});for(var o=a(),s=o.multisig.address,c=0;c<t.outputs.length;c++)if(s===t.outputs[c].address){i({bip32Path:o.bip32Path,balanceSats:t.outputs[c].amountSats});break}return r(),!0}return!1},n.handleReturn=function(){var e=n.props,t=e.resetTransaction,r=e.resetWalletView;t(),r()},n.handleCancel=function(){var e=n.props,t=e.finalizeOutputs,r=e.requiredSigners;(0,e.setRequiredSigners)(r),t(!1)},n}return Object(L.a)(t,e),t}(a.a.Component);var Ir,Or={finalizeOutputs:Dt,setRequiredSigners:Nt,spendNodes:function(){return{type:ut}},resetTransaction:function(){return{type:Ct}},resetWalletView:bt,updateChangeNode:pt},wr=Object(c.b)(function(e){return Object(M.a)({},e.wallet,e.spend,{requiredSigners:e.spend.transaction.requiredSigners})},Or)(Sr),Tr=n(163),xr=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={outputsAmount:new xe.a(0),feeAmount:new xe.a(0)},n.getChangeNode=function(){for(var e=n.props.changeNodes,t=Object.values(e),r=0;r<t.length;r++){var a=t[r];if(a.balanceSats.isEqualTo(0)&&!a.addressUsed)return a}},n.handleAddChange=function(){var e=n.props,t=e.outputs,r=e.setAddress,a=e.addOutput,i=n.getChangeNode(),o=t.length+1;a(),r(o,i.multisig.address)},n.renderSpend=function(){var e=n.props,t=e.addNode,r=e.updateNode,i=e.autoSpend;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Spend"}),a.a.createElement(O.a,null,a.a.createElement(y.a,{item:!0,md:12},a.a.createElement(y.a,{component:"label",container:!0,alignItems:"center",spacing:1},a.a.createElement(y.a,{item:!0},"Manual"),a.a.createElement(y.a,{item:!0},a.a.createElement(be.a,{checked:i,onChange:n.handleSpendMode})),a.a.createElement(y.a,{item:!0},"Auto"))),a.a.createElement(Tn,{addNode:t,updateNode:r})))},n.handleSpendMode=function(e){var t=n.props.updateAutoSpend;e.target.checked,t(e.target.checked)},n.selectCoins=function(){var e=n.props,t=e.outputs,r=e.setInputs,a=e.fee,i=e.depositNodes,o=e.changeNodes,s=e.feeRate,c=e.updateChangeNode,l=e.updateDepositNode,u=e.resetNodesSpend,d=e.setFeeRate,p=t.reduce(function(e,t){return e.plus(t.amountSats)},new xe.a(0));if(!p.isNaN()){var m=Object(Tr.bitcoinsToSatoshis)(new xe.a(a));if(!p.isEqualTo(n.state.outputsAmount)||!m.isEqualTo(n.state.feeAmount)){var h=p.plus(m),f=Object.values(i).concat(Object.values(o)).filter(function(e){return e.balanceSats.isGreaterThan(0)}),b=[],E=new xe.a(0);u();for(var v=function(e){var t=f[e];if(t.utxos.forEach(function(e){b.push(Object(M.a)({},e,{multisig:t.multisig,bip32Path:t.bip32Path}))}),E=E.plus(t.balanceSats),(t.change?c:l)({bip32Path:t.bip32Path,spend:!0}),E.isGreaterThanOrEqualTo(h))return"break"},g=0;g<f.length;g++){if("break"===v(g))break}n.setState({outputsAmount:p,feeAmount:m}),r(b),d(s)}}},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.autoSpend&&(Ir&&clearTimeout(Ir),Ir=setTimeout(this.selectCoins,1e3))}},{key:"componentWillUnmount",value:function(){Ir&&clearTimeout(Ir)}},{key:"render",value:function(){var e=this.props.finalizedOutputs;return a.a.createElement(g.a,null,a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:12},a.a.createElement(Mn,{addChange:this.handleAddChange})),a.a.createElement(y.a,{item:!0,md:12},a.a.createElement(g.a,{mt:2},e?a.a.createElement(wr,{getChangeNode:this.getChangeNode}):this.renderSpend()))))}}]),t}(a.a.Component);var jr={updateAutoSpend:mt,setInputs:Rt,updateChangeNode:pt,updateDepositNode:dt,setAddress:At,resetNodesSpend:function(){return{type:rt}},setFeeRate:Mt,addOutput:Kt},kr=Object(c.b)(function(e){return Object(M.a)({},e.spend.transaction,{changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,autoSpend:e.wallet.info.autoSpend})},jr)(xr),Cr=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).render=function(){var e=n.props,t=e.addNode,r=e.updateNode;return a.a.createElement(Tn,{addNode:t,updateNode:r,canLoad:!0})},n}return Object(L.a)(t,e),t}(a.a.Component);var _r={setDepositing:ht,setSpending:ft},Nr=Object(c.b)(function(e){return Object(M.a)({},e.wallet)},_r)(Cr),Rr="SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",Kr=Pe({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"}),Ar=Kr.setExtendedPublicKeyImporterName,Br=Kr.setExtendedPublicKeyImporterBIP32Path,Mr=Kr.resetExtendedPublicKeyImporterBIP32Path,Dr=Kr.setExtendedPublicKeyImporterMethod,Ur=Kr.setExtendedPublicKeyImporterExtendedPublicKey,Hr=Kr.setExtendedPublicKeyImporterFinalized;var Lr=20,zr=5,Wr=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={generating:!1},n.title=function(){var e=n.props,t=e.totalSigners,r=e.requiredSigners;return a.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",r,"-of-",t," P2SH Multisig Wallet",a.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(n.extendedPublicKeyCount(),"/").concat(t)))},n.extendedPublicKeyCount=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},n.renderModeComponent=function(){var e=n.props,t=e.depositing,r=e.spending,i=e.viewAddresses;return t?a.a.createElement($t,null):r?a.a.createElement(kr,{addNode:n.addNode,updateNode:n.updateNode}):i?a.a.createElement(Nr,{addNode:n.addNode,updateNode:n.updateNode}):""},n.downloadWalletDetails=function(e){e.preventDefault(),v(n.walletDetailsText(),n.walletDetailsFilename())},n.walletDetailsText=function(){var e=n.props,t=e.addressType,r=e.network,a=e.totalSigners,i=e.requiredSigners,o=e.walletName;return"Wallet: ".concat(o,"\n\nType: ").concat(t,"\n\nNetwork: ").concat(r,"\n\nQuorum: ").concat(i,"-of-").concat(a,"\n\nBIP32 Paths:\n").concat(n.extendedPublicKeyImporterBIP32Paths(),"\n")},n.extendedPublicKeyImporterBIP32Paths=function(){for(var e=n.props.totalSigners,t=[],r=1;r<=e;r++)t.push(n.extendedPublicKeyImporterBIP32Path(r));return t.join("\n")},n.extendedPublicKeyImporterBIP32Path=function(e){var t=n.props.extendedPublicKeyImporters[e],r="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(r)},n.walletDetailsFilename=function(){var e=n.props,t=e.totalSigners,r=e.requiredSigners,a=e.addressType,i=e.walletName;return"bitcoin-".concat(r,"-of-").concat(t,"-").concat(a,"-").concat(i,".txt")},n.toggleImporters=function(){var e=n.props;(0,e.setImportersVisible)(!e.configuring)},n.generate=function(){(0,n.props.freeze)(!0),n.setState({generating:!0}),n.addNode(!1,"m/0/0",!0),n.addNode(!0,"m/1/0",!0)},n.updateNode=function(e,t){var r=n.props,a=r.updateChangeNode,i=r.updateDepositNode;(e?a:i)(t)},n.addNode=function(){var e=Object(we.a)(Oe.a.mark(function e(t,r,a){var i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.generateMultisig(t,r,a);case 2:i=e.sent,n.updateNode(t,Object(M.a)({bip32Path:r},i));case 4:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.generateMultisig=function(){var e=Object(we.a)(Oe.a.mark(function e(t,r,a){var i,o,s,c,l,u,d,p,m,h,f,b;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=n.props,o=i.extendedPublicKeyImporters,s=i.totalSigners,c=i.network,l=i.addressType,u=i.requiredSigners,d=[],p=1;p<=s;p++)m=o[p],h=Object(q.deriveChildPublicKey)(m.extendedPublicKey,r,c),d.push(h);return d.sort(),f=q.generateMultisigFromPublicKeys.apply(void 0,[c,l,u].concat(d)),e.next=7,n.fetchUTXOs(t,f,a);case 7:return b=e.sent,e.abrupt("return",Object(M.a)({multisig:f},b));case 9:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.fetchUTXOs=function(){var e=Object(we.a)(Oe.a.mark(function e(t,r,a){var i,o,s,c,l,u,d;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.props,o=i.network,s=i.client,u={},e.prev=2,e.next=5,Fe(r.address,o,s);case 5:return c=e.sent,e.next=8,Ge(r.address,o,s);case 8:l=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0,e.t0.response),"private"===s.type&&Be(e.t0)?(l={used:!1},u={utxos:[],balanceSats:xe()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}):u={fetchUTXOsError:e.t0.toString()};case 15:return c&&(d=c.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new xe.a(0)),u=Object(M.a)({},u,{balanceSats:d,utxos:c,fetchedUTXOs:!0,fetchUTXOsError:""})),l&&(u=Object(M.a)({},u,{addressUsed:l.used})),a&&setTimeout(function(){return n.generateNextNodeIfNecessary(t)}),e.abrupt("return",u);case 19:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,n,r){return e.apply(this,arguments)}}(),n.generateNextNodeIfNecessary=function(e){var t=n.props,r=t.change,a=t.deposits,i=(e?r:a).trailingEmptyNodes,o=(e?r:a).fetchUTXOsErrors,s=Object.keys((e?r:a).nodes);if(!(i>=Lr||o>=zr)){s.sort(function(e,t){var n=(e||"").split("/"),r=(t||"").split("/");return parseInt(n[2])-parseInt(r[2])});var c=(s[s.length-1]||"").split("/"),l=parseInt(c[2]),u="m/".concat(c[1],"/").concat(l+1);setTimeout(function(){return n.addNode(e,u,!0)})}},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(S.a,null,a.a.createElement(I.a,{title:this.title()}),a.a.createElement(O.a,null,this.body())),a.a.createElement(g.a,{mt:2},this.renderModeComponent()))}},{key:"componentDidMount",value:function(){(0,this.props.setIsWallet)()}},{key:"body",value:function(){var e=this.props,t=e.totalSigners,n=e.configuring,r=this.state.generating;return this.extendedPublicKeyCount()===t?r?a.a.createElement("div",null,a.a.createElement(Lt,null)):a.a.createElement("div",null,a.a.createElement(C.a,{type:"button",variant:"contained",color:"secondary",onClick:this.toggleImporters},n?"Hide Key Selection":"Edit Details"),a.a.createElement(et,null),a.a.createElement("p",null,"You have imported all ",t," extended public keys.  You will need to save this information."),a.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.downloadWalletDetails},"Download Wallet Details"),a.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),a.a.createElement(C.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate},"Confirm")):a.a.createElement("p",null,"Once you have imported all ".concat(t," extended public keys, "),"your wallet will be generated here.")}}]),t}(a.a.Component);var Fr={freeze:re,updateDepositNode:dt,updateChangeNode:pt,updateAutoSpned:mt,setImportersVisible:function(e){return{type:Rr,value:e}},setIsWallet:function(){return{type:_t}}},Gr=Object(c.b)(function(e){return Object(M.a)({},e.settings,{client:e.client},e.quorum,e.wallet,e.wallet.info)},Fr)(Wr),qr="m/0",Yr=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){n.setBIP32PathToDefault()},n.state={error:"",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state,r=t.error,i=t.extendedPublicKey,o=t.extendedPublicKeyError,s=t.bip32PathError;return a.a.createElement("div",null,a.a.createElement(g.a,{mt:2},a.a.createElement(Ee.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:i,onChange:n.handleExtendedPublicKeyChange,error:n.hasExtendedPublicKeyError(),helperText:o})),a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:10},a.a.createElement(Ee.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:n.handleBIP32PathChange,error:n.hasBIP32PathError(),helperText:s}),a.a.createElement(Z.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),a.a.createElement(y.a,{item:!0,md:2},!n.bip32PathIsDefault()&&a.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path},"Default"))),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===i||n.hasError()},"Import Extended Public Key"))),a.a.createElement(Z.a,{className:"text-danger"},r))},n.import=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter,a=e.validateAndSetExtendedPublicKey,i=n.state.extendedPublicKey;a(Object(q.deriveChildExtendedPublicKey)(i,r.bip32Path,t),function(e){n.setState({error:e})})},n.setBIP32PathToDefault=function(){(0,n.props.validateAndSetBIP32Path)(qr,function(){},function(){})},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.hasExtendedPublicKeyError=function(){return""!==n.state.extendedPublicKeyError},n.hasError=function(){return n.hasBIP32PathError()||n.hasExtendedPublicKeyError()},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError,{mode:"unhardened"})},n.bip32PathIsDefault=function(){return n.props.extendedPublicKeyImporter.bip32Path===qr},n.resetBIP32Path=function(){n.setBIP32PathToDefault(),n.setBIP32PathError("")},n.handleExtendedPublicKeyChange=function(e){var t=n.props,r=t.network,a=t.extendedPublicKeyImporters,i=e.target.value,o=Object(q.validateExtendedPublicKey)(i,r);""===o&&Object.values(a).find(function(e){return e.extendedPublicKey===i})&&(o="This extended public key has already been imported."),n.setState({extendedPublicKey:i,extendedPublicKeyError:o})},n}return Object(L.a)(t,e),t}(a.a.Component),Xr=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={error:""},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state.error;return a.a.createElement(g.a,{mt:2},a.a.createElement(Ee.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:n.handleChange,error:n.hasError(),helperText:t}))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){(0,n.props.validateAndSetExtendedPublicKey)(e.target.value,n.setError)},n}return Object(L.a)(t,e),t}(a.a.Component),Vr=n(1169),Qr=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={extendedPublicKeyError:"",walletState:Dn.PENDING},n.componentDidMount=function(){(0,n.props.resetBIP32Path)()},n.interaction=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter;return new Dn.HermitExportExtendedPublicKey({network:t,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.disableChangeMethod,t=n.state.extendedPublicKeyError;return a.a.createElement(Vr.a,null,a.a.createElement(Yn,{startText:"Import Extended Public Key",interaction:n.interaction(),onStart:e,onSuccess:n.import,onClear:n.onClear}),a.a.createElement(Z.a,{className:"text-danger"},t))},n.setError=function(e){n.setState({error:e})},n.import=function(e){var t=n.props,r=t.validateAndSetBIP32Path,a=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var i=e.xpub;r(e.bip32_path,function(){a(i,n.setError)},n.setError)},n.onClear=function(){var e=n.props,t=e.reset,r=e.enableChangeMethod;t(!0),n.setError(""),r()},n}return Object(L.a)(t,e),t}(a.a.Component),Zr=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(U.a)(this,Object(H.a)(t).call(this,e))).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter;return Object(Dn.HardwareWalletExportExtendedPublicKey)({network:t,walletType:r.method,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state,r=t.walletState,i=t.extendedPublicKeyError,o=n.interaction();return r===Dn.UNSUPPORTED?a.a.createElement(Z.a,{className:"text-danger"},o.messageTextFor({walletState:r})):a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:6},a.a.createElement(Ee.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:r!==Dn.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),a.a.createElement(y.a,{item:!0,md:6},!n.bip32PathIsDefault()&&a.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:r!==Dn.PENDING},"Default"))),a.a.createElement(Z.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||r===Dn.ACTIVE},"Import Extended Public Key")),a.a.createElement(er,{messages:o.messagesFor({walletState:r}),excludeCodes:["bip32"]}),a.a.createElement(Z.a,{className:"text-danger"},i))},n.import=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.validateAndSetExtendedPublicKey,a=t.enableChangeMethod,(0,t.disableChangeMethod)(),n.setState({extendedPublicKeyError:"",walletState:Dn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:i=e.sent,r(i,function(e){n.setState({extendedPublicKeyError:e,walletState:Dn.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({extendedPublicKeyError:e.t0.message,walletState:Dn.PENDING});case 14:a();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t||n.interaction().hasMessagesFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:n.interaction().messageTextFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.state={extendedPublicKeyError:"",bip32PathError:"",walletState:n.interaction().isSupported()?Dn.PENDING:Dn.UNSUPPORTED},n}return Object(L.a)(t,e),t}(a.a.Component),Jr=function(e){return a.a.createElement("small",null,a.a.createElement(w.a,null,a.a.createElement(T.a,{color:"error.main"},a.a.createElement(x.a,null,a.a.createElement(P.a,{color:"error"},a.a.createElement(Zn.a,null))),a.a.createElement(j.a,null,a.a.createElement(P.a,{color:"error"},e.message)))))},$r="xpub",ea="text",ta=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={disableChangeMethod:!1},n.title=function(){var e=n.props,t=e.number,r=e.extendedPublicKeyImporter,i=e.setName;return a.a.createElement(or,{number:t,name:r.name,setName:i})},n.renderImport=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.number,i=n.state.disableChangeMethod,o="xpub-".concat(r,"-importer-select-label");return a.a.createElement("div",null,a.a.createElement(Y.a,{fullWidth:!0},a.a.createElement(Un.a,{id:o},"Select Method"),a.a.createElement(Hn.a,{labelId:o,id:"public-key-".concat(r,"-importer-select"),disabled:i,value:t.method,onChange:n.handleMethodChange},a.a.createElement(Ln.a,{value:""},"< Select method >"),a.a.createElement(Ln.a,{value:Dn.TREZOR},"Trezor"),a.a.createElement(Ln.a,{value:Dn.LEDGER},"Ledger"),a.a.createElement(Ln.a,{value:Dn.HERMIT},"Hermit"),a.a.createElement(Ln.a,{value:$r},"Derive from extended public key"),a.a.createElement(Ln.a,{value:ea},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.extendedPublicKeyImporters,r=e.extendedPublicKeyImporter,i=e.network,o=e.addressType,s=e.defaultBIP32Path;return r.method===Dn.TREZOR||r.method===Dn.LEDGER?a.a.createElement(Zr,{extendedPublicKeyImporter:r,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:o,defaultBIP32Path:s,network:i}):r.method===Dn.HERMIT?a.a.createElement(Qr,{extendedPublicKeyImporter:r,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,resetBIP32Path:n.resetBIP32Path,reset:n.reset}):r.method===$r?a.a.createElement(Yr,{extendedPublicKeyImporter:r,extendedPublicKeyImporters:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,network:i,validateAndSetBIP32Path:n.validateAndSetBIP32Path}):r.method===ea?a.a.createElement(Xr,{extendedPublicKeyImporter:r,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number,a=t.setMethod,i=t.setExtendedPublicKey;a(r,e.target.value),i(r,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,r=t.number,a=t.setExtendedPublicKey,i=t.setFinalized;a(r,""),i(r,!1),e&&n.resetBIP32Path()},n.moveUp=function(e){var t=n.props,r=t.moveUp,a=t.number;e.preventDefault(),r(a)},n.moveDown=function(e){var t=n.props,r=t.moveDown,a=t.number;e.preventDefault(),r(a)},n.renderBIP32Path=function(){var e=n.props.extendedPublicKeyImporter;return e.method===ea?a.a.createElement("div",{className:"mt-4"},a.a.createElement("p",null,"Make sure you ",a.a.createElement("strong",null,"record the corresponding BIP32 path."))):a.a.createElement("div",{className:"mt-4"},a.a.createElement("p",null,"The BIP32 path for this extended public key is:"),a.a.createElement("div",{className:"text-center"},a.a.createElement(Vt,{text:e.bip32Path},a.a.createElement("code",null,e.bip32Path))),a.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later.  ",a.a.createElement("strong",null,"Write down this BIP32 path!")))},n.validateAndSetBIP32Path=function(e,t,r,a){var i=n.props,o=i.number,s=i.setBIP32Path,c=Object(q.validateBIP32Path)(e,a);s(o,e),c?r(c):(r(""),t())},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.resetBIP32Path)(t)},n.renderExtendedPublicKey=function(){var e=n.props.extendedPublicKeyImporter;return a.a.createElement("div",null,a.a.createElement("p",null,"The following extended public key was imported:"),a.a.createElement("div",{className:"text-center"},a.a.createElement(Vt,{text:e.extendedPublicKey},a.a.createElement("small",null,a.a.createElement("code",null,e.extendedPublicKey)))),n.renderBIP32Path(),a.a.createElement(C.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(e.method===Dn.HERMIT)}},"Remove Extended Public Key"))},n.validateAndSetExtendedPublicKey=function(e,t,r){var a=n.props,i=a.number,o=a.network,s=a.extendedPublicKeyImporters,c=a.setExtendedPublicKey,l=Object(q.validateExtendedPublicKey)(e,o);c(i,e),l?t(l):e&&Object.values(s).find(function(t,n){return n!==i-1&&t.extendedPublicKey===e})?t("This extended public key has already been imported."):(t(""),n.finalize(),r&&r())},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,n=e.finalizedNetwork,r=e.network,i=t.method&&t.method!==ea&&t.conflict,o="";return i&&(o=n!==r?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),a.a.createElement(S.a,null,a.a.createElement(I.a,{title:this.title()}),a.a.createElement(O.a,null,i&&a.a.createElement(Jr,{message:o}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),t}(a.a.Component);var na={setName:Ar,resetBIP32Path:Mr,setBIP32Path:Br,setMethod:Dr,setExtendedPublicKey:Ur,setFinalized:Hr},ra=Object(c.b)(function(e,t){return Object(M.a)({},e.settings,e.quorum,{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})},na)(ta),aa=n(1123),ia=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={showSettings:!1},n.render=function(){var e=n.props,t=e.configuring,r=e.walletName,i=e.setName,o=e.deposits;return a.a.createElement("div",null,a.a.createElement("h1",null,!Object.values(o.nodes).length&&a.a.createElement(or,{number:0,name:r,setName:i}),Object.values(o.nodes).length>0&&a.a.createElement("span",null,r)),a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0,spacing:3},a.a.createElement(y.a,{item:!0,md:t?8:12},n.renderExtendedPublicKeyImporters(),a.a.createElement(g.a,{mt:2},a.a.createElement(Gr,null))),n.renderSettings())))},n.renderSettings=function(){return n.props.configuring?a.a.createElement(y.a,{item:!0,md:4},a.a.createElement(g.a,null,a.a.createElement(pe,null)),a.a.createElement(g.a,{mt:2},a.a.createElement(fe,null)),a.a.createElement(g.a,{mt:2},a.a.createElement(oe,null)),a.a.createElement(g.a,{mt:2},a.a.createElement(Se,null))):a.a.createElement("div",null,a.a.createElement(g.a,{position:"fixed",right:10},a.a.createElement(z.a,{onClick:n.toggleDrawer},a.a.createElement(F.a,null))),a.a.createElement(W.a,{md:4,anchor:"right",open:n.state.showSettings,onClose:n.toggleDrawer},a.a.createElement(g.a,{width:400},a.a.createElement(g.a,{mt:2},a.a.createElement(Se,null)))))},n.toggleDrawer=function(){n.setState({showSettings:!n.state.showSettings})},n.renderExtendedPublicKeyImporters=function(){for(var e=n.props,t=e.totalSigners,r=e.configuring,i=[],o=1;o<=t;o++)i.push(a.a.createElement(g.a,{key:o,mt:1===o?0:2,display:r?"block":"none"},a.a.createElement(ra,{key:o,number:o})));return i},n}return Object(L.a)(t,e),t}(a.a.Component);ia.defaultProps={bip32:aa};var oa={setName:function(e,t){return{type:ct,value:t}}},sa=Object(c.b)(function(e){return Object(M.a)({},{totalSigners:e.settings.totalSigners},e.quorum,{walletName:e.wallet.info.walletName},e.wallet)},oa)(ia),ca="SORT_PUBLIC_KEY_IMPORTERS",la="UPDATE_MULTISIG_ADDRESS";var ua=Pe({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),da=ua.setPublicKeyImporterName,pa=ua.setPublicKeyImporterBIP32Path,ma=ua.resetPublicKeyImporterBIP32Path,ha=ua.setPublicKeyImporterMethod,fa=ua.setPublicKeyImporterPublicKey,ba=ua.setPublicKeyImporterFinalized,Ea=ua.movePublicKeyImporterUp,va=ua.movePublicKeyImporterDown,ga=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).title=function(){var e=n.props,t=e.totalSigners,r=e.requiredSigners,i=e.addressType;return a.a.createElement(y.a,{container:!0,justify:"space-between"},a.a.createElement(y.a,{item:!0},r,"-of-",t," Multisig ",i," Address"),a.a.createElement(y.a,{item:!0},a.a.createElement("small",null,"Public Keys: ".concat(n.publicKeyCount(),"/").concat(t))))},n.isInConflict=function(){var e=n.props.publicKeyImporters;return Object.values(e).some(function(e){return e.conflict})},n.publicKeyCount=function(){var e=n.props.publicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},n.publicKeysAreCanonicallySorted=function(){var e=n.props.publicKeyImporters,t=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}),r=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}).sort();return t.filter(function(e,t){return e===r[t]}).length===t.length},n.canonicallySortPublicKeys=function(){(0,n.props.sortPublicKeyImporters)()},n.generateMultisig=function(){for(var e=n.props,t=e.network,r=e.publicKeyImporters,a=e.totalSigners,i=e.requiredSigners,o=e.addressType,s=e.setMultisigAddress,c=[],l=1;l<=a;l++)c.push(r[l].publicKey);var u=q.generateMultisigFromPublicKeys.apply(void 0,[t,o,i].concat(c));return s(u.address),u},n.downloadAddressDetails=function(e){e.preventDefault();var t=n.generateMultisig();v(n.addressDetailsText(t),n.addressDetailsFilename(t))},n.addressDetailsFilename=function(e){var t=n.props,r=t.totalSigners,a=t.requiredSigners,i=t.addressType;return"bitcoin-".concat(a,"-of-").concat(r,"-").concat(i,"-").concat(e.address,".txt")},n.addressDetailsText=function(e){var t=n.props,r=t.addressType,a=t.network,i=t.totalSigners,o=t.requiredSigners,s=Object(q.multisigRedeemScript)(e),c=Object(q.multisigWitnessScript)(e),l=s?"Redeem Script: ".concat(Object(q.scriptToHex)(s)):"",u=c?"Witness Script: ".concat(Object(q.scriptToHex)(c)):"",d=s&&c?"\n\n":"";return"Address: ".concat(e.address,"\n\nType: ").concat(r,"\n\nNetwork: ").concat(a,"\n\nQuorum: ").concat(o,"-of-").concat(i,"\n\nBIP32 Paths:\n").concat(n.publicKeyImporterBIP32Paths(),"\n\n").concat(l).concat(d).concat(u,"\n")},n.publicKeyImporterBIP32Paths=function(){for(var e=n.props.totalSigners,t=[],r=1;r<=e;r++)t.push(n.publicKeyImporterBIP32Path(r));return t.join("\n")},n.publicKeyImporterBIP32Path=function(e){var t=n.props.publicKeyImporters[e],r="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(r)},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:this.title()}),a.a.createElement(O.a,null,this.body()))}},{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),n=this.publicKeysAreCanonicallySorted();return a.a.createElement("div",null,this.isInConflict()&&a.a.createElement(Jr,null),!n&&a.a.createElement(y.a,{container:!0,justify:"space-between"},a.a.createElement(y.a,{item:!0,md:8},a.a.createElement(Z.a,{error:!0},"WARNING: These public keys are not in the standard ",E("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),a.a.createElement(y.a,{item:!0,md:4},a.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),a.a.createElement(g.a,{mt:2},a.a.createElement(vn,{multisig:t})),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return a.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}}]),t}(a.a.Component);var Pa={sortPublicKeyImporters:function(){return{type:ca}},setMultisigAddress:function(e){return{type:la,value:e}}},ya=Object(c.b)(function(e){return Object(M.a)({},e.settings,e.address)},Pa)(ga),Sa=n(1258),Ia=n(1259),Oa=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={error:"",publicKey:""},n.render=function(){var e=n.state,t=e.error,r=e.publicKey;return a.a.createElement(g.a,{mt:2},a.a.createElement(Ee.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:r,onChange:n.handleChange,error:n.hasError(),helperText:t}),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===r||n.hasError()},"Add Public Key")))},n.import=function(){(0,n.props.validateAndSetPublicKey)(n.state.publicKey,n.setError)},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,r=Object(q.validatePublicKey)(t);n.setState({publicKey:t,error:r})},n}return Object(L.a)(t,e),t}(a.a.Component),wa="m/0",Ta=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){n.setBIP32PathToDefault()},n.state={extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},n.render=function(){var e=n.props.publicKeyImporter,t=n.state,r=t.extendedPublicKey,i=t.extendedPublicKeyError,o=t.bip32PathError;return a.a.createElement("div",null,a.a.createElement(g.a,{mt:2},a.a.createElement(Ee.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:r,onChange:n.handleExtendedPublicKeyChange,error:n.hasExtendedPublicKeyError(),helperText:i})),a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:10},a.a.createElement(Ee.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:n.handleBIP32PathChange,error:n.hasBIP32PathError(),helperText:o}),a.a.createElement(Z.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),a.a.createElement(y.a,{item:!0,md:2},!n.bip32PathIsDefault()&&a.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path},"Default"))),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===r||n.hasError()},"Import Public Key"))))},n.import=function(){var e=n.props,t=e.network,r=e.publicKeyImporter,a=e.validateAndSetPublicKey,i=n.state.extendedPublicKey;a(Object(q.deriveChildPublicKey)(i,r.bip32Path,t),function(e){return n.setState({bip32PathError:e})})},n.setBIP32PathToDefault=function(){(0,n.props.validateAndSetBIP32Path)(wa,function(){},function(){})},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.hasExtendedPublicKeyError=function(){return""!==n.state.extendedPublicKeyError},n.hasError=function(){return n.hasBIP32PathError()||n.hasExtendedPublicKeyError()},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError,{mode:"unhardened"})},n.bip32PathIsDefault=function(){return n.props.publicKeyImporter.bip32Path===wa},n.resetBIP32Path=function(){n.setBIP32PathToDefault(),n.setBIP32PathError("")},n.handleExtendedPublicKeyChange=function(e){var t=n.props.network,r=e.target.value,a=Object(q.validateExtendedPublicKey)(r,t);n.setState({extendedPublicKey:r,extendedPublicKeyError:a})},n}return Object(L.a)(t,e),t}(a.a.Component),xa=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={publicKeyError:"",walletState:Dn.PENDING},n.componentDidMount=function(){(0,n.props.resetBIP32Path)()},n.interaction=function(){var e=n.props,t=e.network,r=e.publicKeyImporter;return new Dn.HermitExportPublicKey({network:t,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.disableChangeMethod,t=n.state.publicKeyError;return a.a.createElement(Vr.a,null,a.a.createElement(Yn,{startText:"Import Public Key",interaction:n.interaction(),onStart:e,onSuccess:n.import,onClear:n.onClear}),a.a.createElement(Z.a,{error:!0},t))},n.setError=function(e){n.setState({publicKeyError:e})},n.import=function(e){var t=n.props,r=t.validateAndSetBIP32Path,a=t.validateAndSetPublicKey;(0,t.enableChangeMethod)();var i=e.pubkey;r(e.bip32_path,function(){a(i,n.setError)},n.setError)},n.onClear=function(){var e=n.props,t=e.reset,r=e.enableChangeMethod;t(!0),n.setError(""),r()},n}return Object(L.a)(t,e),t}(a.a.Component),ja=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(U.a)(this,Object(H.a)(t).call(this,e))).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.network,r=e.publicKeyImporter;return Object(Dn.HardwareWalletExportPublicKey)({network:t,walletType:r.method,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.publicKeyImporter,t=n.state,r=t.walletState,i=t.publicKeyError,o=n.interaction();return r===Dn.UNSUPPORTED?a.a.createElement(Z.a,{error:!0},o.messageTextFor({walletState:r})):a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0},a.a.createElement(y.a,{item:!0,md:6},a.a.createElement(Ee.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:r!==Dn.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),a.a.createElement(y.a,{item:!0,md:6},!n.bip32PathIsDefault()&&a.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:r!==Dn.PENDING},"Default"))),a.a.createElement(Z.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||r===Dn.ACTIVE},"Import Public Key")),a.a.createElement(er,{messages:o.messagesFor({walletState:r}),excludeCodes:["bip32"]}),a.a.createElement(Z.a,{error:!0},i))},n.import=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.validateAndSetPublicKey,a=t.enableChangeMethod,(0,t.disableChangeMethod)(),n.setState({publicKeyError:"",walletState:Dn.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:i=e.sent,r(i,function(e){n.setState({publicKeyError:e,walletState:Dn.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({publicKeyError:e.t0.message,walletState:Dn.PENDING});case 14:a();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t||n.interaction().hasMessagesFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:n.interaction().messageTextFor({walletState:r,level:Dn.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,function(){},n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.publicKeyImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.state={publicKeyError:"",bip32PathError:"",walletState:n.interaction().isSupported()?Dn.PENDING:Dn.UNSUPPORTED},n}return Object(L.a)(t,e),t}(a.a.Component),ka="xpub",Ca="text",_a=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={disableChangeMethod:!1},n.title=function(){var e=n.props,t=e.number,r=e.totalSigners,i=e.publicKeyImporter,o=e.setName;return a.a.createElement(y.a,{container:!0,justify:"space-between"},a.a.createElement(y.a,{item:!0},a.a.createElement(or,{number:t,name:i.name,setName:o})),a.a.createElement(y.a,{item:!0},a.a.createElement(y.a,{container:!0,justify:"flex-end"},a.a.createElement(C.a,{type:"button",variant:"contained",onClick:n.moveUp,disabled:1===t},a.a.createElement(Sa.a,null)),a.a.createElement("span",null,"\xa0"),a.a.createElement(C.a,{type:"button",variant:"contained",onClick:n.moveDown,disabled:t===r},a.a.createElement(Ia.a,null)))))},n.renderImport=function(){var e=n.props,t=e.publicKeyImporter,r=e.number,i=n.state.disableChangeMethod,o="public-key-".concat(r,"-importer-select-label");return a.a.createElement("div",null,a.a.createElement(Y.a,{fullWidth:!0},a.a.createElement(Un.a,{id:o},"Select Method"),a.a.createElement(Hn.a,{labelId:o,id:"public-key-".concat(r,"-importer-select"),disabled:i,value:t.method,onChange:n.handleMethodChange},a.a.createElement(Ln.a,{value:""},"< Select method >"),a.a.createElement(Ln.a,{value:Dn.TREZOR},"Trezor"),a.a.createElement(Ln.a,{value:Dn.LEDGER},"Ledger"),a.a.createElement(Ln.a,{value:Dn.HERMIT},"Hermit"),a.a.createElement(Ln.a,{value:ka},"Derive from extended public key"),a.a.createElement(Ln.a,{value:Ca},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.publicKeyImporter,r=e.network,i=e.addressType,o=e.defaultBIP32Path;return t.method===Dn.TREZOR||t.method===Dn.LEDGER?a.a.createElement(ja,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:i,defaultBIP32Path:o,network:r}):t.method===Dn.HERMIT?a.a.createElement(xa,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,reset:n.reset}):t.method===ka?a.a.createElement(Ta,{network:r,publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path}):t.method===Ca?a.a.createElement(Oa,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number,a=t.setMethod,i=t.setPublicKey;a(r,e.target.value),i(r,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,r=t.number,a=t.setPublicKey,i=t.setFinalized;a(r,""),i(r,!1),e&&n.resetBIP32Path()},n.moveUp=function(e){var t=n.props,r=t.moveUp,a=t.number;e.preventDefault(),r(a)},n.moveDown=function(e){var t=n.props,r=t.moveDown,a=t.number;e.preventDefault(),r(a)},n.renderBIP32Path=function(){var e=n.props.publicKeyImporter;return e.method!==Ca?a.a.createElement(g.a,{mt:4},a.a.createElement("p",null,"The BIP32 path for this public key is:"),a.a.createElement(y.a,{container:!0,justify:"center"},a.a.createElement(Vt,{text:e.bip32Path},a.a.createElement("code",null,e.bip32Path))),a.a.createElement(g.a,{mt:4},a.a.createElement("p",null,"You will need this BIP32 path to sign for this key later.  ",a.a.createElement("strong",null,"Write down this BIP32 path!")))):null},n.validateAndSetBIP32Path=function(e,t,r,a){var i=n.props,o=i.number,s=i.setBIP32Path,c=Object(q.validateBIP32Path)(e,a);s(o,e),c?r(c):(r(""),t())},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.resetBIP32Path)(t)},n.renderPublicKey=function(){var e=n.props.publicKeyImporter;return a.a.createElement("div",null,a.a.createElement("p",null,"The following public key was imported:"),a.a.createElement(y.a,{container:!0,justify:"center"},a.a.createElement(Vt,{text:e.publicKey},a.a.createElement("code",null,e.publicKey))),n.renderBIP32Path(),a.a.createElement(g.a,{mt:2},a.a.createElement(C.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(e.method===Dn.HERMIT)}},"Remove Public Key")))},n.validateAndSetPublicKey=function(e,t,r){var a=n.props,i=a.number,o=a.publicKeyImporters,s=a.setPublicKey,c=Object(q.validatePublicKey)(e);s(i,e),c?t&&t(c):e&&Object.values(o).find(function(t,n){return n!==i-1&&t.publicKey===e})?t&&t("This public key has already been imported."):(t&&t(""),n.finalize(),r&&r())},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:this.title()}),a.a.createElement(O.a,null,e.method&&e.method!==Ca&&e.conflict&&a.a.createElement(Jr,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),t}(a.a.Component);var Na={setName:da,setBIP32Path:pa,resetBIP32Path:ma,setMethod:ha,setPublicKey:fa,setFinalized:ba,moveUp:Ea,moveDown:va},Ra=Object(c.b)(function(e,t){return Object(M.a)({},e.settings,e.address,{publicKeyImporter:e.address.publicKeyImporters[t.number]})},Na)(_a),Ka=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).render=function(){var e=n.props.address;return a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0,spacing:3},a.a.createElement(y.a,{item:!0,md:8},n.renderPublicKeyImporters(),a.a.createElement(g.a,{mt:2},a.a.createElement(ya,null))),a.a.createElement(y.a,{item:!0,md:4},a.a.createElement(g.a,null,a.a.createElement(pe,null)),a.a.createElement(g.a,{mt:2},a.a.createElement(fe,null)),a.a.createElement(g.a,{mt:2},a.a.createElement(oe,null)),""!==e&&n.renderClientPicker())))},n.renderClientPicker=function(){var e=n.props.address;return a.a.createElement(g.a,{mt:2},a.a.createElement(Se,{publicNotes:a.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:a.a.createElement("div",null,a.a.createElement(On,{addresses:[e]}))}))},n.renderPublicKeyImporters=function(){for(var e=n.props.totalSigners,t=[],r=1;r<=e;r++)t.push(a.a.createElement(g.a,{key:r,mt:1===r?0:2},a.a.createElement(Ra,{number:r})));return t},n}return Object(L.a)(t,e),t}(a.a.Component);var Aa=Object(c.b)(function(e){return Object(M.a)({},{totalSigners:e.settings.totalSigners},e.address)})(Ka),Ba="CHOOSE_CONFIRM_OWNERSHIP",Ma="SET_OWNERSHIP_MULTISIG",Da="RESET_PUBLIC_KEY_IMPORTER",Ua="RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",Ha="SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",La="SET_PUBLIC_KEY_IMPORTER_METHOD",za="SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY";var Wa=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},n.disabled=function(){},n.hasScriptError=function(){return""!==n.state.scriptError},n.hasFetchUTXOsError=function(){return""!==n.state.fetchUTXOsError},n.hasError=function(){return n.hasScriptError()||n.hasFetchUTXOsError()},n.scriptName=function(){switch(n.props.addressType){case q.P2SH:return"redeem";case q.P2SH_P2WSH:case q.P2WSH:return"witness";default:return null}},n.scriptTitle=function(){var e=n.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},n.handleScriptChange=function(e){var t=e.target.value,r="";(""===t&&(r="".concat(n.scriptTitle()," script cannot be blank.")),""===r&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(r="".concat(n.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===r)&&(""!==Object(q.validateHex)(t)&&(r="".concat(n.scriptTitle()," script is not valid hex.")));if(""!==t&&""===r)try{n.generateMultisig(t)}catch(a){console.error(a),r="Failed to parse ".concat(n.scriptName()," script.")}n.setState({scriptHex:t,scriptError:r,fetchUTXOsError:"",fetchedUTXOs:!1})},n.generateMultisig=function(e){var t=n.props,r=t.network,a=t.addressType;return e||(e=n.state.scriptHex),Object(q.generateMultisigFromHex)(r,a,e)},n.renderDetails=function(){var e=n.state.fetchUTXOsError,t=n.props,r=t.chosePerformSpend,i=t.choseConfirmOwnership,o=t.client,s=n.generateMultisig(),c=r||i;return a.a.createElement("div",null,a.a.createElement(vn,{multisig:s}),a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0,spacing:3},a.a.createElement(y.a,{item:!0},a.a.createElement(C.a,{variant:"contained",color:"primary",size:"large",onClick:n.performSpend,disabled:c},"Spend from this address")),a.a.createElement(y.a,{item:!0},a.a.createElement(C.a,{variant:"contained",size:"large",onClick:n.confirmOwnership,disabled:c},"Confirm ownership"))),a.a.createElement(Z.a,{error:!0},e)),"private"===o.type&&a.a.createElement(g.a,{mt:2},a.a.createElement(On,{addresses:[s.address],autoImport:!0})))},n.performSpend=Object(we.a)(Oe.a.mark(function e(){var t,r,a,i,o,s,c,l,u,d,p;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.setRequiredSigners,a=t.setTotalSigners,i=t.setInputs,o=t.setFrozen,s=t.choosePerformSpend,c=n.generateMultisig(),e.next=4,n.fetchUTXOs(c);case 4:(l=e.sent)?(u=l.utxos,d=l.inputsTotalSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),n.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(i(u),r(Object(q.multisigRequiredSigners)(c)),a(Object(q.multisigTotalSigners)(c)),o(!0),s())):n.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}},e)})),n.fetchUTXOs=function(){var e=Object(we.a)(Oe.a.mark(function e(t){var r,a,i,o;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.network,i=r.client,o=null,e.prev=2,e.next=5,Fe(t.address,a,i);case 5:o=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 12:if(null===o){e.next=14;break}return e.abrupt("return",{utxos:o.map(function(e){return Object(M.a)({},e,{multisig:t})}),inputsTotalSats:o.map(function(e){return e.amount}).reduce(function(e,t){return e.plus(t)},new xe.a(0))});case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),n.confirmOwnership=function(){var e=n.props,t=e.chooseConfirmOwnership,r=e.setOwnershipMultisig,a=e.setFrozen;r(n.generateMultisig()),t(),a(!0)},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,n=e.scriptError,r=e.fetchedUTXOs;return a.a.createElement(S.a,null,a.a.createElement(I.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),a.a.createElement(O.a,null,a.a.createElement("form",null,a.a.createElement(Ee.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:r&&!this.hasFetchUTXOsError(),helperText:n,error:""!==n})),""===t||this.hasScriptError()?a.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),t}(a.a.Component);var Fa={choosePerformSpend:function(){return{type:Et}},setFrozen:re,setInputs:Rt,setTotalSigners:function(e){return{type:gt,value:e}},setRequiredSigners:Nt,chooseConfirmOwnership:function(){return{type:Ba}},setOwnershipMultisig:function(e){return{type:Ma,value:e}}},Ga=Object(c.b)(function(e){return Object(M.a)({},e.settings,{client:e.client},{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})},Fa)(Wa),qa=n(582),Ya=n.n(qa),Xa=n(583),Va=n.n(Xa),Qa=n(587),Za=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).titleRef=a.a.createRef(),n.state={disableChangeMethod:!1},n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderImportByMethod=function(){var e=n.props,t=e.network,r=e.publicKeyImporter,i=e.defaultBIP32Path;return r.method===Dn.HERMIT?a.a.createElement(xa,{publicKeyImporter:r,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetPublicKey:n.validateAndSetPublicKey,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,reset:n.reset}):r.method===Dn.TREZOR||r.method===Dn.LEDGER?a.a.createElement(ja,{network:t,publicKeyImporter:r,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:i,validateAndSetPublicKey:n.validateAndSetPublicKey,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):null},n.handleMethodChange=function(e){(0,n.props.setMethod)(e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.reset=function(){(0,n.props.reset)()},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.validateAndSetBIP32Path=function(e,t,r,a){var i=n.props.setBIP32Path,o=Object(q.validateBIP32Path)(e,a);i(e),o?r(o):(r(""),t())},n.validateAndSetPublicKey=function(e,t,r){var a=n.props.setPublicKey,i=Object(q.validatePublicKey)(e);a(e),i?t&&t(i):(t&&t(""),r&&r())},n.renderConfirmation=function(){var e=n.props,t=e.publicKeys,r=e.publicKeyImporter;if(""===r.publicKey)return null;if(t.includes(r.publicKey)){var i=Object(Qa.a)(x.a)({color:"green"});return a.a.createElement(w.a,null,a.a.createElement(T.a,null,a.a.createElement(i,null,a.a.createElement(Ya.a,null)),a.a.createElement(j.a,null,"The public key exported at BIP32 path ",a.a.createElement("code",null,r.bip32Path)," is present in the provided redeem script.")))}return a.a.createElement(w.a,null,a.a.createElement(T.a,null,a.a.createElement(x.a,null,a.a.createElement(P.a,{color:"error"},a.a.createElement(Va.a,null))),a.a.createElement(j.a,null,"The public key exported at BIP32 path ",a.a.createElement("code",null,r.bip32Path)," is not present in the provided redeem script.")))},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod;return a.a.createElement(S.a,null,a.a.createElement(I.a,{ref:this.titleRef,title:"Confirm Ownership"}),a.a.createElement(O.a,null,a.a.createElement("form",null,a.a.createElement("p",null,"How will you confirm your ownership of this address?"),a.a.createElement(Y.a,{fullWidth:!0},a.a.createElement(Un.a,{id:"public-key-importer-select-label"},"Select Method"),a.a.createElement(Hn.a,{labelId:!0,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},a.a.createElement(Ln.a,{value:""},"< Select method >"),a.a.createElement(Ln.a,{value:Dn.TREZOR},"Trezor"),a.a.createElement(Ln.a,{value:Dn.LEDGER},"Ledger"),a.a.createElement(Ln.a,{value:Dn.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&a.a.createElement(C.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),t}(a.a.Component);var Ja={setMethod:function(e){return{type:La,value:e}},setBIP32Path:function(e){return{type:Ha,value:e}},setPublicKey:function(e){return{type:za,value:e}},resetBIP32Path:function(){return{type:Ua}},reset:function(){return{type:Da}}},$a=Object(c.b)(function(e,t){return e.spend.ownership},Ja)(Za),ei=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(U.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return a.a.createElement(g.a,{mt:2},a.a.createElement(y.a,{container:!0,spacing:3},a.a.createElement(y.a,{item:!0,md:8},a.a.createElement(g.a,null,a.a.createElement(Ga,null)),n.renderBody()),a.a.createElement(y.a,{item:!0,md:4},a.a.createElement(g.a,null,a.a.createElement(fe,null)),a.a.createElement(g.a,{mt:2},a.a.createElement(oe,null)),a.a.createElement(g.a,{mt:2},a.a.createElement(Se,null)))))},n.renderBody=function(){var e=n.props,t=e.transaction;return e.ownership.chosen?a.a.createElement(g.a,{mt:2},a.a.createElement($a,null)):a.a.createElement(g.a,null,n.spendable()&&a.a.createElement(g.a,null,a.a.createElement(g.a,{mt:2},a.a.createElement(dn,{inputs:t.inputs,inputsTotalSats:t.inputsTotalSats})),a.a.createElement(g.a,{mt:2},a.a.createElement(Mn,null))),t.finalizedOutputs&&a.a.createElement(g.a,null,n.renderSignatureImporters()),n.signaturesFinalized()&&a.a.createElement(g.a,{mt:2},a.a.createElement(yr,null)))},n.renderSignatureImporters=function(){for(var e=n.props.transaction,t=[],r=1;r<=e.requiredSigners;r++)t.push(a.a.createElement(g.a,{key:r,mt:2},a.a.createElement(vr,{number:r})));return t},n.spendable=function(){return n.props.transaction.inputs.length>0},n.signaturesFinalized=function(){var e=n.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},n.confirmOwnership=function(e){n.setState({addressFinalized:!0,confirmOwnership:e})},n}return Object(L.a)(t,e),t}(a.a.Component);var ti=Object(c.b)(function(e){return e.spend})(ei),ni=n(584),ri=n(1260),ai=n(1247),ii=Object(ni.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),oi=function(){var e=ii();return a.a.createElement("div",{className:e.root},a.a.createElement(ri.a,{position:"static"},a.a.createElement(ai.a,null,a.a.createElement(P.a,{variant:"h6",className:e.title},"Caravan"),a.a.createElement(C.a,{color:"inherit",href:"#/wallet",target:"_blank"},"Wallet"),a.a.createElement(C.a,{color:"inherit",href:"#/address",target:"_blank"},"Create"),a.a.createElement(C.a,{color:"inherit",href:"#/spend",target:"_blank"},"Interact"),a.a.createElement(C.a,{color:"inherit",href:"#/",target:"_blank"},"Help"))))},si=n(585),ci=n(1163),li=function(){return a.a.createElement(g.a,{mt:2},a.a.createElement("hr",null),a.a.createElement(y.a,{container:!0,alignItems:"center"},a.a.createElement(y.a,{item:!0,sm:2},E("https://www.unchained-capital.com",a.a.createElement("img",{src:ci,className:"logo",alt:"Unchained Capital logo",height:"32"}))),a.a.createElement(y.a,{item:!0,sm:6},a.a.createElement("p",null,"Copyright 2019 by Unchained Capital and released under an MIT license.")),a.a.createElement(y.a,{item:!0,sm:1},a.a.createElement("p",null," v",si.a," "))))},ui=n(1261),di=n(1262),pi=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(U.a)(this,Object(H.a)(t).call(this,e))).state={error:null,errorInfo:null},n}return Object(L.a)(t,e),Object(G.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.errorInfo;return n?a.a.createElement(g.a,{m:4},a.a.createElement(g.a,{m:2},a.a.createElement(P.a,{variant:"h3",component:"h1"},"Something went wrong.")),a.a.createElement(g.a,{m:2},a.a.createElement(P.a,{variant:"body1"},"Let us know what happened on ",a.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank"},"github"),".")),a.a.createElement(g.a,{mx:2,my:3},a.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},t&&t.toString(),a.a.createElement("br",null),n.componentStack))):this.props.children}}]),t}(a.a.Component),mi=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(ui.a,null),a.a.createElement(di.a,{maxWidth:"lg"},a.a.createElement(oi,null),a.a.createElement(pi,null,a.a.createElement(h.a,null,a.a.createElement(f.a,null,a.a.createElement(b.a,{path:"/wallet",component:sa}),a.a.createElement(b.a,{path:"/address",component:Aa}),a.a.createElement(b.a,{path:"/spend",component:ti}),a.a.createElement(b.a,{path:"/",component:B})))),a.a.createElement(li,null)))},hi=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fi(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function bi(e,t){return Object(M.a)({},e,t)}var Ei={network:q.MAINNET,totalSigners:3,requiredSigners:2,addressType:q.P2SH,frozen:!1},vi={type:"public",url:"",username:"",password:"",url_error:"",username_error:"",password_error:"",status:"unknown"},gi={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new xe.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},Pi={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new xe.a(0),spendingSats:new xe.a(0),autoSpend:!1};var yi=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case rt:return function(e){var t=Object(M.a)({},e);return Object.values(t.nodes).forEach(function(e){e.spend=!1}),t}(t);case ut:return function(e){var t=Object(M.a)({},e);return Object.values(t.nodes).forEach(function(e){e.spend&&(t.balanceSats=t.balanceSats.minus(e.balanceSats),e.balanceSats=new xe.a(0),e.spend=!1,e.utxos=[])}),t}(t);case e:return function(e,t){var n=Object(M.a)({},gi,e.nodes[t.value.bip32Path]||{},t.value),r={};r[n.bip32Path]=n;var a=Object(M.a)({},e,{nodes:Object(M.a)({},e.nodes,r)});"undefined"!==typeof t.value.spend&&(a.spendingSats=t.value.spend?e.spendingSats.plus(n.balanceSats):e.spendingSats.minus(n.balanceSats)),t.value.balanceSats&&(a.balanceSats=e.balanceSats.plus(n.balanceSats));var i=0,o=0,s=Object.keys(a.nodes);s.sort(function(e,t){var n=(e||"").split("/"),r=(t||"").split("/");return parseInt(n[2])-parseInt(r[2])});for(var c=!1,l=0;l<s.length;l++){var u=s[s.length-(l+1)],d=a.nodes[u];d.fetchedUTXOs&&(!d.balanceSats.isEqualTo(0)||d.addressUsed||c?c=!0:i++),""!==d.fetchUTXOsError&&o++}return a.trailingEmptyNodes=i,a.fetchUTXOsErrors=o,a}(t,n);default:return t}}},Si="text";function Ii(e){var t=(new Date).getTime().toString(),n=Object.values(e.extendedPublicKeyImporters).map(function(e){return e.extendedPublicKey}).join("");return"".concat(t,"-").concat(n)}var Oi={name:"",bip32Path:Object(q.multisigBIP32Root)(q.P2SH,q.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",finalized:!1,confliect:!1},wi={extendedPublicKeyImporters:{1:Object(M.a)({},Oi,{name:"Extended Public Key 1"}),2:Object(M.a)({},Oi,{name:"Extended Public Key 2"}),3:Object(M.a)({},Oi,{name:"Extended Public Key 3"})},defaultBIP32Path:Object(q.multisigBIP32Root)(q.P2SH,q.MAINNET),network:q.MAINNET,addressType:q.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0};function Ti(e,t,n){var r={};r[n]=t.value;var a=Object(M.a)({},e,{nodes:{}});return a.extendedPublicKeyImporters[t.number]=bi(e.extendedPublicKeyImporters[t.number],r),Object.values(a.extendedPublicKeyImporters).reduce(function(e,t){return e+t.finalized},0)===Object.keys(a.extendedPublicKeyImporters).length&&(a.configuring=!1),xi(a.extendedPublicKeyImporters[t.number],e),bi(a,{fingerprint:Ii(a)})}function xi(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function ji(e,t,n){for(var r=1;r<=Object.values(e.extendedPublicKeyImporters).length;r++){var a=t.extendedPublicKeyImporters[r];a.bip32PathModified||a.finalized||(a.bip32Path=n),xi(a,t)}}var ki="text";function Ci(e){var t=(new Date).getTime().toString(),n=Object.values(e.publicKeyImporters).map(function(e){return e.publicKey}).join("");return"".concat(t,"-").concat(n)}var _i={name:"",bip32Path:Object(q.multisigBIP32Path)(q.P2SH,q.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1},Ni={publicKeyImporters:{1:Object(M.a)({},_i,{name:"Public Key 1"}),2:Object(M.a)({},_i,{name:"Public Key 2"}),3:Object(M.a)({},_i,{name:"Public Key 3"})},defaultBIP32Path:Object(q.multisigBIP32Path)(q.P2SH,q.MAINNET),network:q.MAINNET,addressType:q.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""};function Ri(e,t,n){var r={};r[n]=t.value;var a=Object(M.a)({},e);return a.publicKeyImporters[t.number]=bi(e.publicKeyImporters[t.number],r),Ki(a.publicKeyImporters[t.number],e),bi(a,{fingerprint:Ci(a)})}function Ki(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Ai(e,t,n){for(var r=1;r<=Object.values(e.publicKeyImporters).length;r++){var a=t.publicKeyImporters[r];a.bip32PathModified||a.finalized||(a.bip32Path=n),Ki(a,t)}}var Bi={autoSpend:!0,viewAddresses:!1,depositing:!1,spending:!1,walletName:"My Multisig Wallet"};function Mi(e){return bi(e,{spending:!1,depositing:!1,viewAddresses:!1})}function Di(e,t){var n=Mi(e);return n[t]=!0,n}var Ui={chosen:!1,publicKeyImporter:Object(M.a)({},{bip32Path:"",method:"",publicKey:""}),network:q.MAINNET,addressType:q.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(q.multisigBIP32Path)(q.P2SH,q.MAINNET)};function Hi(e,t,n){var r={};return r[n]=t.value,Object(M.a)({},e,{publicKeyImporter:Object(M.a)({},e.publicKeyImporter,r)})}var Li={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},zi={};function Wi(e,t,n){var r={};r[n]=t.value;var a=Object(M.a)({},e);return a[t.number]=bi(e[t.number],r),a}var Fi=n(387);function Gi(e,t){var n=e.txid.toLowerCase(),r=t.txid.toLowerCase();return n<r?-1:n>r?1:e.n<t.n?-1:e.n>t.n?1:0}var qi={address:"",amount:"",amountSats:"",addressError:"",amountError:""},Yi=[Object(M.a)({},qi)],Xi={chosen:!1,network:q.MAINNET,inputs:[],inputsTotalSats:new xe.a(0),outputs:[].concat(Yi),feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:q.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1};function Vi(e){if(e.outputs.find(function(e){return""!==e.addressError||""!==e.amountError})||""!==e.feeError||""!==e.feeRateError||0===e.inputs.length)return Object(M.a)({},e,{balanceError:""});var t=Object(q.bitcoinsToSatoshis)(new xe.a(e.fee)),n=e.outputs.map(function(e){return Object(q.bitcoinsToSatoshis)(new xe.a(e.amount||0))}).reduce(function(e,t){return e.plus(t)},new xe.a(0));if(e.inputsTotalSats.isEqualTo(n.plus(t)))return Object(M.a)({},e,{balanceError:""});var r,a=n.plus(t).minus(e.inputsTotalSats);if(a.isNaN())r="Cannot calculate total.";else{var i=a.isLessThan(0)?"Increase":"Decrease";r="".concat(i," by ").concat(Object(q.satoshisToBitcoins)(a.absoluteValue()).toFixed(8),".")}return Object(M.a)({},e,{balanceError:r})}function Qi(e,t,n){return Object(q.satoshisToBitcoins)(Object(q.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:n,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toString()}var Zi=Object(s.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ba:return bi(e,{chosen:!0});case J:return bi(e,{network:t.value});case Ma:return function(e,t){var n=t.value,r=Object(q.multisigAddressType)(n),a=Object(q.multisigBIP32Path)(r,e.network);return Object(M.a)({},e,{network:e.network,addressType:r,publicKeys:Object(q.multisigPublicKeys)(n),address:n.address,defaultBIP32Path:a})}(e,t);case Ha:var n=Hi(e,{value:""},"publicKey");return Hi(n,t,"bip32Path");case La:return Hi(e,t,"method");case za:return Hi(e,t,"publicKey");case Ua:return Hi(e,{value:e.defaultBIP32Path},"bip32Path");case Da:return Object(M.a)({},e,{publicKeyImporter:Object(M.a)({},e.publicKeyImporter,{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et:return bi(e,{chosen:!0});case J:return bi(e,{network:t.value});case te:return bi(e,{addressType:t.value});case vt:return bi(e,{requiredSigners:t.value});case gt:return bi(e,{totalSigners:t.value});case Pt:return Vi(function(e,t){var n=t.value.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new xe.a(0));return bi(e,{inputs:t.value.sort(Gi),inputsTotalSats:n})}(e,t));case yt:return Vi(function(e,t){var n=e.outputs.concat(Object(M.a)({},qi));return Object(M.a)({},e,{outputs:n,fee:Qi(e,e.feeRate,n.length)})}(e));case St:return Vi(function(e,t){var n=Object(Fi.a)(e.outputs),r=t.value,a=Object(q.validateAddress)(r,e.network);if(""===a)for(var i=0;i<e.inputs.length;i++)if(r===e.inputs[i].address){a="Output address cannot equal input address.";break}if(""===a)for(var o=0;o<e.outputs.length;o++)if(o!==t.number-1&&e.outputs[o].address===r){a="Duplicate output address.";break}return n[t.number-1].address=r,n[t.number-1].addressError=a,Object(M.a)({},e,{outputs:n})}(e,t));case It:return Vi(function(e,t){var n=Object(Fi.a)(e.outputs),r=t.value,a=e.inputs.length?Object(q.validateOutputAmountBTC)(r,e.inputsTotalSats):"";return e.isWallet&&"Output amount is too large."===a&&(a=""),n[t.number-1].amount=r,n[t.number-1].amountError=a,n[t.number-1].amountSats=a?"":Object(q.bitcoinsToSatoshis)(new xe.a(t.value)),Object(M.a)({},e,{outputs:n})}(e,t));case Ot:return Vi(function(e,t){for(var n=[],r=0;r<e.outputs.length;r++)r!==t.number-1&&n.push(e.outputs[r]);return Object(M.a)({},e,{outputs:n,fee:Qi(e,e.feeRate,n.length)})}(e,t));case wt:return Vi(function(e,t){var n=t.value,r=Object(q.validateFeeRate)(n);return bi(e,{feeRate:n,feeRateError:r,fee:""===r?Qi(e,n,e.outputs.length):"",feeError:""})}(e,t));case Tt:return Vi(function(e,t){var n=t.value,r=Object(q.validateFeeBTC)(n,e.inputsTotalSats);return bi(e,{fee:n,feeError:r,feeRate:""===r?Object(q.estimateMultisigTransactionFeeRate)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:e.outputs.length,m:e.requiredSigners,n:e.totalSigners,feesInSatoshis:Object(q.bitcoinsToSatoshis)(new xe.a(n))}).toString():"",feeRateError:""})}(e,t));case xt:return function(e,t){var n=Object(q.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs);return Object(M.a)({},e,{finalizedOutputs:t.value,unsignedTransaction:n})}(e,t);case jt:return bi(e,{outputs:Yi,fee:"",balanceError:""});case kt:return bi(e,{txid:t.value});case _t:return bi(e,{isWallet:!0});case Ct:return bi(e,Xi);default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_SIGNATURES":return Object(M.a)({},zi);case vt:return function(e,t){for(var n={},r=1;r<=t.value;r++)n[r]=Object(M.a)({},Li,{name:"Signature ".concat(r)});return Object(M.a)({},e,n)}(e,t);case"SET_SIGNATURE_IMPORTER_NAME":return Wi(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return Wi(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return Wi(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return Wi(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return Wi(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return Wi(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return function(e,t){var n=Object(M.a)({},e);return n[t.number]=bi(e[t.number],t.value),n}(e,t);default:return e}}}),Ji=Object(s.c)({deposits:yi(tt),change:yi(nt),info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return bi(e,{autoSpend:t.value});case ot:return Di(e,"depositing");case st:return Di(e,"spending");case it:return Di(e,"viewAddresses");case ct:return bi(e,{walletName:t.value});case lt:return Mi(e);default:return e}}}),$i=Object(s.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return bi(e,{network:t.value});case $:return bi(e,{totalSigners:t.value});case ee:return bi(e,{requiredSigners:t.value});case te:return bi(e,{addressType:t.value});case ne:return bi(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return bi(e,{type:t.value});case"SET_CLIENT_URL":return bi(e,{url:t.value});case"SET_CLIENT_USERNAME":return bi(e,{username:t.value});case"SET_CLIENT_PASSWORD":return bi(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return bi(e,{url_error:t.value});case"SET_CLIENT_USERNAME_ERROR":return bi(e,{username_error:t.value});case"SET_CLIENT_PASSWORD_ERROR":return bi(e,{password_error:t.value});case"SET_CLIENT_STATUS":return bi(e,{status:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ni,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return function(e,t){var n=t.value,r=e.addressType,a=Object(q.multisigBIP32Path)(r,n),i=Object(M.a)({},e,{network:n,defaultBIP32Path:a});return Ai(e,i,a),i}(e,t);case te:return function(e,t){var n=e.network,r=t.value,a=Object(q.multisigBIP32Path)(r,n),i=Object(M.a)({},e,{addressType:r,defaultBIP32Path:a});return Ai(e,i,a),i}(e,t);case $:return function(e,t){for(var n=t.value,r={},a=1;a<=n;a++)r[a]=e.publicKeyImporters[a]||Object(M.a)({},_i,{name:"Public Key ".concat(a)});var i=Object(M.a)({},e,{publicKeyImporters:r,stub:t.type});return bi(i,{fingerprint:Ci(i)})}(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return Ri(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ri(Ri(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ri(Ri(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return Ri(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return Ri(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return Ri(function(e,t){var n=Object(M.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&n.publicKeyImporters[t.number].method!==ki?(n.finalizedNetwork=e.network,n.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.publicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==ki?e+1:e},0)&&(n.finalizedNetwork="",n.finalizedAddressType="",Object.values(n.publicKeyImporters).forEach(function(e){return e.conflict=!1})),n}(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return function(e,t){if(1===t.number)return e;var n=Object(M.a)({},e),r=e.publicKeyImporters[t.number-1],a=e.publicKeyImporters[t.number];return n.publicKeyImporters[t.number-1]=a,n.publicKeyImporters[t.number]=r,bi(n,{fingerprint:Ci(n)})}(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return function(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var n=Object(M.a)({},e),r=e.publicKeyImporters[t.number+1],a=e.publicKeyImporters[t.number];return n.publicKeyImporters[t.number+1]=a,n.publicKeyImporters[t.number]=r,bi(n,{fingerprint:Ci(n)})}(e,t);case ca:return function(e,t){for(var n=Object.values(e.publicKeyImporters),r=n.map(function(e){return e.publicKey}).sort().map(function(e){return n.find(function(t){return t.publicKey===e})}),a={},i=1;i<=r.length;i++)a[i]=r[i-1];var o=Object(M.a)({},e,{publicKeyImporters:a});return bi(o,{fingerprint:Ci(o)})}(e);case la:return bi(e,{address:t.value});default:return e}},spend:Zi,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return function(e,t){var n=e.addressType,r=t.value,a=Object(q.multisigBIP32Root)(n,r),i=Object(M.a)({},e,{network:r,defaultBIP32Path:a});return ji(e,i,a),i}(e,t);case te:return function(e,t){var n=t.value,r=e.network,a=Object(q.multisigBIP32Root)(n,r),i=Object(M.a)({},e,{addressType:n,defaultBIP32Path:a});return ji(e,i,a),i}(e,t);case $:return function(e,t){for(var n=t.value,r={},a=1;a<=n;a++)r[a]=e.extendedPublicKeyImporters[a]||Object(M.a)({},Oi,{name:"Extended Public key ".concat(a)});return Object(M.a)({},e,{extendedPublicKeyImporters:r})}(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return Ti(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ti(Ti(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ti(Ti(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return Ti(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return Ti(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return Ti(function(e,t){var n=Object(M.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&n.extendedPublicKeyImporters[t.number].method!==Si?(n.finalizedNetwork=e.network,n.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.extendedPublicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==Si?e+1:e},0)&&(n.finalizedNetwork="",n.finalizedAddressType="",Object.values(n.extendedPublicKeyImporters).forEach(function(e){return e.conflict=!1})),n}(e,t),t,"finalized");case Rr:return Object(M.a)({},e,{configuring:t.value});default:return e}},wallet:Ji}),eo=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,to=Object(s.e)($i,eo(Object(s.a)(u.a,p.a,m.a)));o.a.render(a.a.createElement(c.a,{store:to},a.a.createElement(mi,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/caravan","/service-worker.js");hi?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):fi(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):fi(e)})}}()},138:function(e,t,n){e.exports={feeMagicBtn:"styles_feeMagicBtn__3R6H-",utxoTxid:"styles_utxoTxid__1oJ63",outputsFormInput:"styles_outputsFormInput__2eCJm",unconfirmed:"styles_unconfirmed__1u5jD",spent:"styles_spent__1ho2q"}},163:function(e,t,n){"use strict";n(313),n(320),n(246),n(202),n(203),n(204),Object.defineProperty(t,"__esModule",{value:!0}),t.toHexString=function(e){return Array.prototype.map.call(e,function(e){return("0"+(255&e).toString(16)).slice(-2)}).join("")},t.validateHex=function(e){if(e.length%2)return"invalid hex - odd-length string";if(!/^[0-9A-Fa-f]*$/.test(e))return"invalid hex - invalid characters";return""},t.satoshisToBitcoins=function(e){return new a.default(e).shiftedBy(-8)},t.bitcoinsToSatoshis=function(e){return new a.default(e).shiftedBy(8)};var r,a=(r=n(325))&&r.__esModule?r:{default:r}},173:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.networkData=function(e){switch(e){case a.MAINNET:return r.networks.bitcoin;case a.TESTNET:default:return r.networks.testnet}},t.networkLabel=function(e){switch(e){case a.MAINNET:return"Mainnet";case a.TESTNET:default:return"Testnet"}},t.NETWORKS=t.TESTNET=t.MAINNET=void 0;var r=n(250);t.MAINNET="mainnet";t.TESTNET="testnet";var a={MAINNET:"mainnet",TESTNET:"testnet"};t.NETWORKS=a},260:function(e,t,n){"use strict";var r=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedInteraction=t.WalletInteraction=t.ERROR=t.WARNING=t.INFO=t.ACTIVE=t.PENDING=t.UNSUPPORTED=void 0,n(261),n(262),n(264),n(265),n(266),n(215),n(267),n(983),n(984);var a,i=(a=n(987))&&a.__esModule?a:{default:a};function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}t.UNSUPPORTED="unsupported";t.PENDING="pending";t.ACTIVE="active";t.INFO="info";t.WARNING="warning";t.ERROR="error";var h=function(){function e(t){var n=t.network;d(this,e),this.network=n,this.environment=i.default.getParser(window.navigator.userAgent),this.failureText="",this.failureCode=""}return m(e,[{key:"isSupported",value:function(){return!0}},{key:"messages",value:function(){var e={pending:[],active:[],unsupported:[]};return e}},{key:"hasMessages",value:function(){return this.messages().length>0}},{key:"messagesFor",value:function(e){var t,n=e.walletState,r=e.level,a=e.code,i=e.text,o=this.messages();t=n?o[n]:o.unsupported.concat(o.pending).concat(o.active);for(var s=[],c=0;c<t.length;c++){var l=t[c];r&&l.level!==r||(a&&!(l.code||"").includes(a)||i&&!(l.text||"").includes(i)||s.push(l))}return s}},{key:"hasMessagesFor",value:function(e){var t=e.walletState,n=e.level,r=e.code,a=e.text;return this.messagesFor({walletState:t,level:n,code:r,text:a}).length>0}},{key:"messageFor",value:function(e){var t=e.walletState,n=e.level,r=e.code,a=e.text,i=this.messagesFor({walletState:t,level:n,code:r,text:a});return i.length>0?i[0]:null}},{key:"messageTextFor",value:function(e){var t=e.walletState,n=e.level,r=e.code,a=e.text,i=this.messageFor({walletState:t,level:n,code:r,text:a});return i?i.text:null}},{key:"run",value:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}})}}]),e}();t.WalletInteraction=h;var f=function(e){function t(e){var n,r=e.network,a=e.failureText,i=e.failureCode;return d(this,t),(n=s(this,l(t).call(this,{network:r}))).failureText=a,n.failureCode=i,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,h),m(t,[{key:"messages",value:function(){var e=c(l(t.prototype),"messages",this).call(this);e.pending.push({level:"error",code:this.failureCode,text:this.failureText})}},{key:"isSupported",value:function(){return!1}}]),t}();t.UnsupportedInteraction=f},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(163);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(819);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(909);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(173);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n(476);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=n(910);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var l=n(914);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var u=n(915);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var d=n(940);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})})},347:function(e,t,n){},476:function(e,t,n){"use strict";n(202),n(203),n(204),Object.defineProperty(t,"__esModule",{value:!0}),t.scriptToOps=function(e){return r.script.toASM(e.output)},t.scriptToHex=function(e){return e.output.toString("hex")};var r=n(250)},585:function(e){e.exports={a:"0.1.5"}},600:function(e,t,n){e.exports=n(1165)},819:function(e,t,n){"use strict";n(313),n(320),n(246),n(820),n(202),n(821),n(826),n(203),n(446),n(328),n(204),n(329),n(828),Object.defineProperty(t,"__esModule",{value:!0}),t.bip32PathToSequence=function(e){return e.split("/").splice(1).map(function(e){return"'"===e.substr(-1)?parseInt(e.slice(0,-1),10)+o:parseInt(e,10)})},t.bip32SequenceToPath=function(e){return"m/"+e.map(function(e){return e>=o?"".concat(e-o,"'"):e.toString()}).join("/")},t.validateBIP32Path=function(e,t){if(null===e||void 0===e||""===e)return"BIP32 path cannot be blank.";if(!e.match(s))return"BIP32 path is invalid.";if(t&&"hardened"===t.mode&&!e.match(c))return"BIP32 path must be fully-hardened.";if(t&&"unhardened"===t.mode&&!e.match(l))return"BIP32 path cannot include hardened segments.";return function(e){for(var t=0;t<e.length;t++){var n=e[t],r=p(n);if(""!==r)return r}return""}(e.toLowerCase().split("/").slice(1))},t.deriveChildPublicKey=function e(t,n,o){if("m/"===n.slice(0,2))return e(t,n.slice(2),o);var s=i.fromBase58(t,(0,a.networkData)(o));var c=s.derivePath(n);return(0,r.toHexString)(c.publicKey)},t.deriveChildExtendedPublicKey=function e(t,n,r){if("m/"===n.slice(0,2))return e(t,n.slice(2),r);var o=i.fromBase58(t,(0,a.networkData)(r));var s=o.derivePath(n);return s.toBase58()},t.HARDENING_OFFSET=void 0;var r=n(163),a=n(173),i=n(344),o=Math.pow(2,31);t.HARDENING_OFFSET=o;var s=/^(m\/)?(\d+'?\/)*\d+'?$/,c=/^(m\/)?(\d+'\/)*\d+'$/,l=/^(m\/)?(\d+\/)*\d+$/,u=Math.pow(2,31)-1,d=Math.pow(2,32)-1;function p(e){if(null===e||void 0===e||""===e)return"BIP32 path segment cannot be blank.";var t,n;"'"===e.substr(e.length-1)?(t=e.substr(0,e.length-1),n=!0):(t=e,n=!1);var r,a="Invalid BIP32 path segment.";try{r=parseInt(t,10)}catch(i){return a}return Number.isNaN(r)||r.toString().length!==t.length?a:r<0?a:r>(n?u:d)?"BIP32 index is too high.":""}},833:function(e,t){},836:function(e,t){},856:function(e,t){},858:function(e,t){},9:function(e,t,n){"use strict";n(495),n(350),n(259),n(974),n(976),n(215),Object.defineProperty(t,"__esModule",{value:!0});var r={TREZOR:!0,LEDGER:!0,HERMIT:!0,HardwareWalletExportPublicKey:!0,HardwareWalletExportExtendedPublicKey:!0,HardwareWalletSignMultisigTransaction:!0};t.HardwareWalletExportPublicKey=function(e){var t=e.walletType,n=e.network,r=e.bip32Path,s=e.bip32Paths;switch(t){case c:return new i.TrezorExportPublicKey({network:n,bip32Path:r,bip32Paths:s});case l:return new o.LedgerExportPublicKey({network:n,bip32Path:r,bip32Paths:s});default:return new a.UnsupportedInteraction({network:n,failureCode:"unsupported",failureText:"This wallet is not supported when exporting public keys."})}},t.HardwareWalletExportExtendedPublicKey=function(e){var t=e.walletType,n=e.network,r=e.bip32Path;switch(t){case c:return new i.TrezorExportExtendedPublicKey({network:n,bip32Path:r});case l:return new o.LedgerExportExtendedPublicKey({network:n,bip32Path:r});default:return new a.UnsupportedInteraction({network:n,failureCode:"unsupported",failureText:"This wallet is not supported when exporting extended public keys."})}},t.HardwareWalletSignMultisigTransaction=function(e){var t=e.walletType,n=e.network,r=e.inputs,s=e.outputs,u=e.bip32Paths;switch(t){case c:return new i.TrezorSignMultisigTransaction({network:n,inputs:r,outputs:s,bip32Paths:u});case l:return new o.LedgerSignMultisigTransaction({network:n,inputs:r,outputs:s,bip32Paths:u});default:return new a.UnsupportedInteraction({network:n,failureCode:"unsupported",failureText:"This wallet is not supported when signing multisig transactions."})}},t.HERMIT=t.LEDGER=t.TREZOR=void 0;var a=n(260);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var i=n(988);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var o=n(1029);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var s=n(1105);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var c="trezor";t.TREZOR=c;var l="ledger";t.LEDGER=l;t.HERMIT="hermit"},909:function(e,t,n){"use strict";(function(e){n(345),n(246),n(202),n(203),n(204),Object.defineProperty(t,"__esModule",{value:!0}),t.validateExtendedPublicKey=function(e,t){if(null===e||void 0===e||""===e)return"Extended public key cannot be blank.";var n="'xpub'";t===a.NETWORKS.TESTNET&&(n+=" or 'tpub'");var r="Extended public key must begin with ".concat(n,".");if(e.length<111)return"Extended public key length is too short.";var i=e.slice(0,4);if("xpub"!==i&&(t!==a.NETWORKS.TESTNET||"tpub"!==i))return r;try{o.fromBase58(e,(0,a.networkData)(t))}catch(s){return"Invalid extended public key: ".concat(s)}return""},t.validatePublicKey=function(t){if(null===t||void 0===t||""===t)return"Public key cannot be blank.";var n=(0,r.validateHex)(t);if(""!==n)return n;try{i.ECPair.fromPublicKey(e.from(t,"hex"))}catch(a){return"Invalid public key ".concat(a,".")}return""},t.compressPublicKey=function(t){var n=e.from(t,"hex"),r=0!==(1&n[64])?3:2,a=e.alloc(1);return a[0]=r,e.concat([a,n.slice(1,33)]).toString("hex")};var r=n(163),a=n(173),i=n(250),o=n(344)}).call(this,n(21).Buffer)},910:function(e,t,n){"use strict";n(328),n(329),n(911),Object.defineProperty(t,"__esModule",{value:!0}),t.validateAddress=function(e,t){if(!e||""===e.trim())return"Address cannot be blank.";var n=t===i.NETWORKS.TESTNET?s:o,r=e.match(l),d=n+(r?u:c);if(!e.match(d))return t===i.NETWORKS.TESTNET?"Address must start with one of 'tb1', 'm', 'n', or '2' followed by letters or digits.":"Address must start with either of 'bc1', '1' or '3' followed by letters or digits.";var p=(0,a.default)(e);if(!p)return"Address is invalid.";if(t===i.NETWORKS.TESTNET&&!p.testnet)return"This is a ".concat(i.NETWORKS.MAINNET," address.");if(t===i.NETWORKS.MAINNET&&p.testnet)return"This is a ".concat(i.NETWORKS.TESTNET," address.");return""};var r,a=(r=n(913))&&r.__esModule?r:{default:r},i=n(173);var o="^(bc1|[13])",s="^(tb1|bcrt1|[mn2])",c="[A-HJ-NP-Za-km-z1-9]+$",l=/^(tb|bc)/,u="[ac-hj-np-z02-9]+$"},914:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateFeeRate=function(e){var t;try{t=new a.default(e)}catch(n){return"Invalid fee rate."}if(t.isLessThanOrEqualTo(o))return"Fee rate must be positive.";if(t.isGreaterThan(s))return"Fee rate is too high.";return""},t.validateFeeBTC=function(e,t){var n;try{n=new a.default(e)}catch(r){return"Invalid fee."}if(n.isLessThan(o))return"Fee cannot be negative.";if(n.isGreaterThan((0,i.satoshisToBitcoins)(t)))return"Fee is too high.";if(n.isGreaterThan(c))return"Fee is too high.";return""},t.validateOutputAmountBTC=function(e,t){var n;try{n=new a.default(e)}catch(r){return"Invalid output amount."}if(n.isLessThanOrEqualTo(o))return"Output amount must be positive.";if(n.isLessThanOrEqualTo((0,i.satoshisToBitcoins)(l)))return"Output amount is too small.";if((0,i.bitcoinsToSatoshis)(n).dp())return"Invalid output amount.";if("undefined"!==typeof t&&n.isGreaterThan((0,i.satoshisToBitcoins)(t)))return"Output amount is too large.";return""};var r,a=(r=n(325))&&r.__esModule?r:{default:r},i=n(163);var o=(0,a.default)(0),s=new a.default(1e3),c=new a.default(.025),l=(0,a.default)(546)},915:function(e,t,n){"use strict";(function(e){n(916),n(918),n(919),n(345),n(920),n(921),n(927),n(479),n(313),n(320),n(246),n(202),n(931),n(203),n(446),n(328),n(204),n(934),n(329),n(935),Object.defineProperty(t,"__esModule",{value:!0}),t.multisigBIP32Root=f,t.multisigBIP32Path=function(e,t,n){var r=f(e,t);if(r)return r+"/".concat(n||"0");return null},t.multisigAddressType=b,t.multisigRequiredSigners=function(e){return b(e)===h.P2SH_P2WSH?e.redeem.redeem.m:e.redeem.m},t.multisigTotalSigners=E,t.multisigRedeemScript=v,t.multisigWitnessScript=g,t.multisigPublicKeys=P,t.multisigAddress=function(e){return e.address},t.generateMultisigFromPublicKeys=function(t,n,r){for(var i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];var c=p.payments.p2ms({m:r,pubkeys:o.map(function(t){return e.from(t,"hex")}),network:(0,a.networkData)(t)});return y(n,c)},t.generateMultisigFromHex=function(t,n,r){var i=p.payments.p2ms({output:e.from(r,"hex"),network:(0,a.networkData)(t)});return y(n,i)},t.estimateMultisigTransactionFeeRate=function(e){return new r.default(e.feesInSatoshis).dividedBy(S(e)).toFixed(0)},t.estimateMultisigTransactionFee=function(e){return new r.default(e.feesPerByteInSatoshis).multipliedBy(S(e))},t.unsignedMultisigTransaction=function(e,t,n){var r=new p.TransactionBuilder;r.setVersion(1),r.network=(0,a.networkData)(e);for(var i=0;i<t.length;i+=1){var o=t[i];r.addInput(o.txid,o.index)}for(var s=0;s<n.length;s+=1){var c=n[s];r.addOutput(c.address,c.amountSats.toNumber())}return r.buildIncomplete()},t.validateMultisigSignature=function(t,n,r,a){for(var i=function(e,t,n){return b(n.multisig)===h.P2WSH||b(n.multisig)===h.P2SH_P2WSH?e.hashForWitnessV0(t,g(n.multisig).output,n.amountSats.toNumber(),p.Transaction.SIGHASH_ALL):e.hashForSignature(t,v(n.multisig).output,p.Transaction.SIGHASH_ALL)}(t,n,r),o=function(t){var n=new e(t,"hex"),r=l.default.decode(n),a=r.r,i=r.s,o=a;a.byteLength>32&&(o=a.slice(1));var s=new e(64);return s.set(new e(o),0),s.set(new e(i),32),s}(I(a)),s=P(r.multisig),c=0;c<E(r.multisig);c++){var u=s[c],d=e.from(u,"hex"),m=p.ECPair.fromPublicKey(d);if(m.verify(i,o))return u}return!1},t.signedMultisigTransaction=function(t,n,r){for(var a=p.Transaction.fromHex(t.toHex()),i=function(t){var i,o=n[t],s=P(o.multisig),c=s.map(function(e){return r[t][e]}).filter(function(e){return e?I(e):e});if(b(o.multisig)===h.P2WSH){var l=O(o.multisig,c);a.setWitness(t,l)}else if(b(o.multisig)===h.P2SH_P2WSH){var u=O(o.multisig,c);a.setWitness(t,u);var d=v(o.multisig);a.ins[t].script=e.from([d.output.length].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(i=d.output)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()))}else{var m=function(t,n){var r=n.map(function(e){return"".concat(I(e),"01")}).join(" "),a="OP_0 ".concat(r),i=p.script.fromASM(a),o=p.payments.p2ms({network:t.network,output:e.from(v(t).output,"hex"),input:i});return y(b(t),o)}(o.multisig,c);a.ins[t].script=m.input}},o=0;o<n.length;o++)i(o);return a},t.MULTISIG_ADDRESS_TYPES=t.P2WSH=t.P2SH_P2WSH=t.P2SH=void 0;var r=d(n(325)),a=n(173),i=n(937),o=n(938),s=n(939),c=n(163),l=d(n(330)),u=n(476);function d(e){return e&&e.__esModule?e:{default:e}}var p=n(250),m="P2SH";t.P2SH=m;t.P2SH_P2WSH="P2SH-P2WSH";t.P2WSH="P2WSH";var h={P2SH:m,P2SH_P2WSH:"P2SH-P2WSH",P2WSH:"P2WSH"};function f(e,t){var n=t===a.NETWORKS.MAINNET?"0'":"1'";switch(e){case h.P2SH:return"m/45'/".concat(n,"/0'");case h.P2SH_P2WSH:return"m/48'/".concat(n,"/0'/1'");case h.P2WSH:return"m/48'/".concat(n,"/0'/2'");default:return null}}function b(e){return e.redeem.redeem?h.P2SH_P2WSH:e.address.match(/^(tb|bc)/)?h.P2WSH:h.P2SH}function E(e){return b(e)===h.P2SH_P2WSH?e.redeem.redeem.n:e.redeem.n}function v(e){switch(b(e)){case h.P2SH:case h.P2SH_P2WSH:return e.redeem;case h.P2WSH:default:return null}}function g(e){switch(b(e)){case h.P2SH:return null;case h.P2SH_P2WSH:return e.redeem.redeem;case h.P2WSH:return e.redeem;default:return null}}function P(e){return(b(e)===m?v(e):g(e)).pubkeys.map(c.toHexString)}function y(e,t){switch(e){case h.P2SH:return p.payments.p2sh({redeem:t});case h.P2SH_P2WSH:return p.payments.p2sh({redeem:p.payments.p2wsh({redeem:t})});case h.P2WSH:return p.payments.p2wsh({redeem:t});default:return null}}function S(e){switch(e.addressType){case h.P2SH:return(0,i.estimateMultisigP2SHTransactionLength)(e);case h.P2SH_P2WSH:return(0,o.estimateMultisigP2SHP2WSHTransactionLength)(e);case h.P2WSH:return(0,s.estimateMultisigP2WSHTransactionLength)(e);default:return null}}function I(e){return parseInt(e.slice(2,4),16)==(e.length-4)/2?e:e.slice(0,-2)}function O(t,n){var r=[""].concat(n.map(function(e){return I(e)+"01"})),a=g(t);return r.push((0,u.scriptToHex)(a)),r.map(function(t){return e.from(t,"hex")})}t.MULTISIG_ADDRESS_TYPES=h}).call(this,n(21).Buffer)},937:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.estimateMultisigP2SHTransactionLength=function(e){var t=41*e.numInputs+34*e.numOutputs+30,n=73*e.m*e.numInputs+34*e.n*e.numInputs+4*e.numInputs;return t+n}},938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.estimateMultisigP2SHP2WSHTransactionLength=function(e){var t=76*e.numInputs+34*e.numOutputs+30,n=72*e.m*e.numInputs+33*e.n*e.numInputs+6*e.numInputs;return Math.ceil(.75*t+.25*(t+n))}},939:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.estimateMultisigP2WSHTransactionLength=function(e){var t=41*e.numInputs+34*e.numOutputs+30,n=72*e.m*e.numInputs+33*e.n*e.numInputs+6*e.numInputs;return Math.ceil(.75*t+.25*(t+n))}},940:function(e,t,n){"use strict";n(345),Object.defineProperty(t,"__esModule",{value:!0}),t.blockExplorerURL=s,t.blockExplorerAPIURL=function(e,t){return"".concat(o(t),"/api").concat(e)},t.blockExplorerTransactionURL=function(e,t){return s("/tx/".concat(e),t)},t.blockExplorerAddressURL=function(e,t){return s("/address/".concat(e),t)};var r=n(173),a="https://blockstream.info",i="https://blockstream.info/testnet";function o(e){return e===r.NETWORKS.TESTNET?i:a}function s(e,t){return"".concat(o(t)).concat(e)}},988:function(e,t,n){"use strict";var r=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.TrezorSignMultisigTransaction=t.TrezorExportExtendedPublicKey=t.TrezorExportPublicKey=t.TrezorExportHDNode=t.TrezorInteraction=void 0,n(261),n(262),n(215),n(264),n(265),n(266),n(989),n(512),n(513),n(259),n(992),n(514),n(362),n(267),n(515),n(519);var a,i=n(3),o=n(260);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t,n){return(m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=n(997).default;E.manifest({email:"foo@bar.com",appUrl:"https://localhost:3000"});var v=function(e){function t(e){var n,r=e.network;return l(this,t),(n=p(this,h(t).call(this,{network:r}))).trezorCoin=I(r),n}return f(t,o.WalletInteraction),d(t,[{key:"messages",value:function(){var e=m(h(t.prototype),"messages",this).call(this);return e[o.PENDING].push({level:o.INFO,text:"Make sure your Trezor hardware wallet is plugged in.",code:"trezor.device.connect"}),e[o.ACTIVE].push({level:o.INFO,text:"Your browser should open a new Trezor Connect window.  If you do not see this window, ensure you have enabled popups for this site.",code:"trezor.popup.generic"}),e}}]),t}();t.TrezorInteraction=v;var g=function(e){function t(e){var n,r=e.network,a=e.bip32Path,i=e.bip32Paths;return l(this,t),(n=p(this,h(t).call(this,{network:r}))).bip32Paths=i||[a],n}return f(t,v),d(t,[{key:"messages",value:function(){for(var e=m(h(t.prototype),"messages",this).call(this),n=0;n<this.bip32Paths.length;n++){var r=(this.bip32Paths[n]||"").split("/");if(r.length<4){e[o.PENDING].push({level:o.ERROR,text:"BIP32 path must be at least depth 3.",code:"trezor.bip32_path.minimum"});break}var a=r[2];if(this.network===i.NETWORKS.MAINNET&&!a.match(/^0'/)){e[o.PENDING].push({level:o.ERROR,text:"Mainnet BIP32 path must have a second component of 0'",code:"trezor.bip32_path.mismatch"});break}if(this.network===i.NETWORKS.TESTNET&&!a.match(/^1'/)){e[o.PENDING].push({level:o.ERROR,text:"Testnet BIP32 path must have a second component of 1'",code:"trezor.bip32_path.mismatch"});break}}return e[o.ACTIVE].push({level:o.INFO,text:"Confirm in the Trezor Connect window that you want to 'Export public key'.  You may be prompted to enter your PIN.",code:"trezor.popup.export_hdnode"}),e}},{key:"run",value:function(){var e;return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.bip32Paths.length>1)){t.next=6;break}return t.next=3,r.awrap(E.getPublicKey({bundle:this.bip32Paths.map(function(e){return{path:e}}),coin:this.trezorCoin}));case 3:e=t.sent,t.next=13;break;case 6:if(1!==this.bip32Paths.length){t.next=12;break}return t.next=9,r.awrap(E.getPublicKey({path:this.bip32Paths[0],coin:this.trezorCoin}));case 9:e=t.sent,t.next=13;break;case 12:throw new Error("You must provide a bip32 path string or an array of bip32 paths");case 13:if(e.success){t.next=15;break}throw new Error(e.payload.error);case 15:return t.abrupt("return",e.payload);case 16:case"end":return t.stop()}},null,this)}}]),t}();t.TrezorExportHDNode=g;var P=function(e){function t(){return l(this,t),p(this,h(t).apply(this,arguments))}return f(t,g),d(t,[{key:"run",value:function(){var e;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(m(h(t.prototype),"run",this).call(this));case 2:if(e=n.sent,!Array.isArray(e)){n.next=5;break}return n.abrupt("return",e.map(function(e){return e.publicKey}));case 5:return n.abrupt("return",e.publicKey);case 6:case"end":return n.stop()}},null,this)}}]),t}();t.TrezorExportPublicKey=P;var y=function(e){function t(){return l(this,t),p(this,h(t).apply(this,arguments))}return f(t,g),d(t,[{key:"run",value:function(){var e;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(m(h(t.prototype),"run",this).call(this));case 2:return e=n.sent,n.abrupt("return",e.xpub);case 4:case"end":return n.stop()}},null,this)}}]),t}();t.TrezorExportExtendedPublicKey=y;var S=function(e){function t(e){var n,r=e.network,a=e.inputs,i=e.outputs,o=e.bip32Paths;return l(this,t),(n=p(this,h(t).call(this,{network:r}))).inputs=a,n.outputs=i,n.bip32Paths=o,n}return f(t,v),d(t,[{key:"messages",value:function(){var e=m(h(t.prototype),"messages",this).call(this);return e[o.ACTIVE].push({level:o.INFO,text:"Confirm in the Trezor Connect window that you want to 'Sign ".concat(this.network," transaction'.  You may be prompted to enter your PIN."),code:"trezor.popup.sign"}),e[o.ACTIVE].push({level:o.INFO,text:"You Trezor device will ask you to confirm each output address above with its corresponding output amount.  Check each address and amount carefully against both the values displayed in this application and your own expectations.",code:"trezor.signing.outputs"}),e[o.ACTIVE].push({level:o.INFO,text:"Finally, your Trezor device will ask you to confirm the overall transaction output amount and fee.  Check both carefully against both the values displayed in this application and your own expectations.",code:"trezor.signing.final"}),e}},{key:"run",value:function(){var e,t,n,a,i=this;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.inputs.map(function(e,t){return w(e,i.bip32Paths[t])}),t=this.outputs.map(function(e){return T(e)}),n={inputs:e,outputs:t,coin:I(this.network)},o.next=5,r.awrap(E.signTransaction(n));case 5:if((a=o.sent).success){o.next=8;break}throw new Error(a.payload.error);case 8:return o.abrupt("return",a.payload.signatures);case 9:case"end":return o.stop()}},null,this)}}]),t}();function I(e){return e===i.NETWORKS.MAINNET?"Bitcoin":"Testnet"}t.TrezorSignMultisigTransaction=S;var O=(c(a={},i.MULTISIG_ADDRESS_TYPES.P2WSH,"SPENDWITNESS"),c(a,i.MULTISIG_ADDRESS_TYPES.P2SH,"SPENDMULTISIG"),c(a,i.MULTISIG_ADDRESS_TYPES.P2SH_P2WSH,"SPENDP2SHWITNESS"),a);function w(e,t){var n=(0,i.multisigRequiredSigners)(e.multisig),r=(0,i.multisigAddressType)(e.multisig);return{script_type:O[r],multisig:{m:n,pubkeys:(0,i.multisigPublicKeys)(e.multisig).map(function(e){return function(e){return{address_n:[],node:{depth:0,child_num:0,fingerprint:0,chain_code:"0".repeat(64),public_key:e}}}(e)}),signatures:Array(n).fill("")},prev_hash:e.txid,prev_index:e.index,address_n:(0,i.bip32PathToSequence)(t),amount:e.amountSats.toString()}}function T(e){return{amount:e.amountSats.toFixed(0),address:e.address,script_type:"PAYTOADDRESS"}}}},[[600,1,2]]]);
//# sourceMappingURL=main.0a61f8d1.chunk.js.map